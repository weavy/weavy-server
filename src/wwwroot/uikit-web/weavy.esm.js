var Bm = Object.defineProperty;
var ty = (s) => {
  throw TypeError(s);
};
var o = (s, t) => Bm(s, "name", { value: t, configurable: !0 });
var _h = (s, t, e) => t.has(s) || ty("Cannot " + e);
var f = (s, t, e) => (_h(s, t, "read from private field"), e ? e.call(s) : t.get(s)), T = (s, t, e) => t.has(s) ? ty("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), S = (s, t, e, i) => (_h(s, t, "write to private field"), i ? i.call(s, e) : t.set(s, e), e), et = (s, t, e) => (_h(s, t, "access private method"), e);
var zl = (s, t, e, i) => ({
  set _(r) {
    S(s, t, r, e);
  },
  get _() {
    return f(s, t, i);
  }
});
import { observeConnected as Um, throwOnDomNotAvailable as Ie, isDomAvailable as Hu, whenConnected as yw, whenParentsDefined as Xo, defaultVisibilityCheckOptions as qm, isInShadowDom as ey, isPopoverPolyfilled as Vh, autofocusRef as Vu, whenElementVisible as Bh, whenDocumentVisible as Nm } from "./es/editor.js";
import { configureLocalization as jm, e as Wm, i as dt, i$1 as it, m as Qm, b as Km, x as h, r as Gm, S as Zm, W as Ym, E as C, w as ll, T as iy, msg as $, localized as rt, str as vt } from "./es/locales/sv-SE.js";
function Dl(s) {
  return Object.prototype.toString.call(s) === "[object Object]";
}
o(Dl, "isObject");
function Lo(s) {
  if (Dl(s) === !1) return !1;
  const t = s.constructor;
  if (t === void 0) return !0;
  const e = t.prototype;
  return !(Dl(e) === !1 || Object.prototype.hasOwnProperty.call(e, "isPrototypeOf") === !1);
}
o(Lo, "isPlainObject$1");
function Uh(s) {
  return typeof s.toJSON == "function";
}
o(Uh, "hasToJSON");
function Xm(s) {
  return typeof s == "boolean" || typeof s == "number" || typeof s == "string" || s === null || Lo(s) || Array.isArray(s);
}
o(Xm, "isJSONSerializable");
function El(s, t, e = !1) {
  s = s || {}, t = t || {};
  const i = {};
  for (const r in s)
    Object.prototype.hasOwnProperty.call(s, r) && (i[r] = s[r]);
  for (const r in t)
    Object.prototype.hasOwnProperty.call(t, r) && (e && i[r] && Lo(i[r]) && Lo(t[r]) ? i[r] = El(i[r], t[r], e) : i[r] = t[r]);
  return i;
}
o(El, "assign");
function Jm(s) {
  return s ? Array.isArray(s) ? s : [s] : [];
}
o(Jm, "asArray");
async function tv(s, t) {
  for (const e of s)
    if (await t(e))
      return e;
}
o(tv, "findAsyncSequential");
function yc(s, t, e = !1, i = !1) {
  if (!i && (!Lo(s) || !Lo(t)) || i && (!Dl(s) || !Dl(t)))
    return !1;
  const r = Object.getOwnPropertyNames(s), n = Object.getOwnPropertyNames(t);
  if (!e && r.length !== n.length)
    return !1;
  for (let a = 0; a < r.length; a++) {
    const c = r[a], l = s[c], u = t[c];
    if (l !== u && !yc(l, u, e))
      return !1;
  }
  return !0;
}
o(yc, "eqObjects");
function ww(s) {
  return Object.entries(s);
}
o(ww, "objectAsIterable");
function Bu(s) {
  return s.charAt(0).toUpperCase() + s.substring(1).toLowerCase();
}
o(Bu, "toUpperCaseFirst");
const ev = '\\s,.:;"', iv = new RegExp(`^|[${ev}]|$`, "g"), sv = ".!?", rv = new RegExp(`^|(?<=[${sv}])|$`);
function fw(s) {
  return s.length > 0 ? s.replace(/([a-z\d])([A-Z]+)/g, "$1-$2").replace(/_|\s+/g, "-").toLowerCase() : s;
}
o(fw, "toKebabCase");
function nv(s, t = 2) {
  if (!s)
    return null;
  let e = "";
  const i = s.split(iv).filter((r) => r);
  return i.length == 1 ? e = i[0] : i.forEach((r) => {
    e += r.charAt(0);
  }), e.substring(0, t).toUpperCase();
}
o(nv, "getInitials");
function mw(s) {
  let t;
  const e = s.split(rv).filter((i) => i);
  return e.length ? t = e[0] : t = s, t;
}
o(mw, "getTitleFromText");
function vw(s, t = 256) {
  return s.length > t && (s = s.substring(0, t - 1) + "…"), s;
}
o(vw, "truncateText");
const av = {
  //mode: 'cors', // no-cors, *cors, same-origin
  // cache: 'default' means the server is in control of the caching which is preferred instead of using 'reload'
  //cache: 'default', // *default, no-cache, reload, force-cache, only-if-cached
  credentials: "omit",
  // include, *same-origin, omit
  headers: {
    // https://stackoverflow.com/questions/8163703/cross-domain-ajax-doesnt-send-x-requested-with-header
    "X-Requested-With": "XMLHttpRequest"
  },
  redirect: "manual"
  // manual, *follow, error
  //referrerPolicy: 'no-referrer-when-downgrade', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
};
function ov() {
  const s = /* @__PURE__ */ new WeakSet(), t = /* @__PURE__ */ o(function(e, i) {
    if (Uh(i) && (i = i.toJSON()), !(i !== null && typeof i == "object"))
      return i;
    if (s.has(i))
      return "[Circular]";
    let r;
    if (s.add(i), Lo(i)) {
      const n = {};
      Object.keys(i).forEach((a) => {
        n[a] = t(a, i[a]);
      }), r = n;
    } else Array.isArray(i) && (r = i.map((n, a) => t(a, n)));
    return s.delete(i), r;
  }, "replacer");
  return t;
}
o(ov, "getCircularReferenceReplacer");
function bc() {
  return ((1 + Math.random()) * 65536 | 0).toString(16).substring(1);
}
o(bc, "S4");
function cv(s) {
  if (s && s.ok && s.body) {
    const t = s.body.getReader();
    return new ReadableStream({
      start(e) {
        const i = /* @__PURE__ */ o(() => t.read().then(({ done: r, value: n }) => {
          if (r) {
            e.close();
            return;
          }
          return e.enqueue(n), i();
        }), "pump");
        return i();
      }
    });
  } else
    throw new Error("Could not parse text stream");
}
o(cv, "getTextStreamFromResponse");
function gw(s) {
  let t;
  try {
    if (t = window[s], t) {
      const e = "__storage_test__";
      t.setItem(e, e), t.removeItem(e);
    }
  } catch (e) {
    e instanceof DOMException && e.name === "QuotaExceededError" && // acknowledge QuotaExceededError only if there's something already stored
    t && t.length !== 0 && console.error("Storage not available:", s);
  }
  return t;
}
o(gw, "getStorage");
const Cp = class Cp extends Error {
  constructor() {
    super("Instance destroyed"), this.name = "DestroyError";
  }
};
o(Cp, "DestroyError");
let Ht = Cp;
var Kr, Jo = (Kr = class {
  constructor() {
    this.listeners = /* @__PURE__ */ new Set(), this.subscribe = this.subscribe.bind(this);
  }
  subscribe(t) {
    return this.listeners.add(t), this.onSubscribe(), () => {
      this.listeners.delete(t), this.onUnsubscribe();
    };
  }
  hasListeners() {
    return this.listeners.size > 0;
  }
  onSubscribe() {
  }
  onUnsubscribe() {
  }
}, o(Kr, "Subscribable"), Kr), Io = typeof window > "u" || "Deno" in globalThis;
function Re() {
}
o(Re, "noop$1");
function lv(s, t) {
  return typeof s == "function" ? s(t) : s;
}
o(lv, "functionalUpdate");
function qh(s) {
  return typeof s == "number" && s >= 0 && s !== 1 / 0;
}
o(qh, "isValidTimeout");
function bw(s, t) {
  return Math.max(s + (t || 0) - Date.now(), 0);
}
o(bw, "timeUntilStale");
function xs(s, t) {
  return typeof s == "function" ? s(t) : s;
}
o(xs, "resolveStaleTime");
function ai(s, t) {
  return typeof s == "function" ? s(t) : s;
}
o(ai, "resolveEnabled");
function sy(s, t) {
  const {
    type: e = "all",
    exact: i,
    fetchStatus: r,
    predicate: n,
    queryKey: a,
    stale: c
  } = s;
  if (a) {
    if (i) {
      if (t.queryHash !== Uu(a, t.options))
        return !1;
    } else if (!xc(t.queryKey, a))
      return !1;
  }
  if (e !== "all") {
    const l = t.isActive();
    if (e === "active" && !l || e === "inactive" && l)
      return !1;
  }
  return !(typeof c == "boolean" && t.isStale() !== c || r && r !== t.state.fetchStatus || n && !n(t));
}
o(sy, "matchQuery");
function ry(s, t) {
  const { exact: e, status: i, predicate: r, mutationKey: n } = s;
  if (n) {
    if (!t.options.mutationKey)
      return !1;
    if (e) {
      if (ar(t.options.mutationKey) !== ar(n))
        return !1;
    } else if (!xc(t.options.mutationKey, n))
      return !1;
  }
  return !(i && t.state.status !== i || r && !r(t));
}
o(ry, "matchMutation");
function Uu(s, t) {
  return ((t == null ? void 0 : t.queryKeyHashFn) || ar)(s);
}
o(Uu, "hashQueryKeyByOptions");
function ar(s) {
  return JSON.stringify(
    s,
    (t, e) => Nh(e) ? Object.keys(e).sort().reduce((i, r) => (i[r] = e[r], i), {}) : e
  );
}
o(ar, "hashKey");
function xc(s, t) {
  return s === t ? !0 : typeof s != typeof t ? !1 : s && t && typeof s == "object" && typeof t == "object" ? Object.keys(t).every((e) => xc(s[e], t[e])) : !1;
}
o(xc, "partialMatchKey");
function dl(s, t) {
  if (s === t)
    return s;
  const e = ny(s) && ny(t);
  if (e || Nh(s) && Nh(t)) {
    const i = e ? s : Object.keys(s), r = i.length, n = e ? t : Object.keys(t), a = n.length, c = e ? [] : {}, l = new Set(i);
    let u = 0;
    for (let p = 0; p < a; p++) {
      const w = e ? p : n[p];
      (!e && l.has(w) || e) && s[w] === void 0 && t[w] === void 0 ? (c[w] = void 0, u++) : (c[w] = dl(s[w], t[w]), c[w] === s[w] && s[w] !== void 0 && u++);
    }
    return r === a && u === r ? s : c;
  }
  return t;
}
o(dl, "replaceEqualDeep");
function Hl(s, t) {
  if (!t || Object.keys(s).length !== Object.keys(t).length)
    return !1;
  for (const e in s)
    if (s[e] !== t[e])
      return !1;
  return !0;
}
o(Hl, "shallowEqualObjects");
function ny(s) {
  return Array.isArray(s) && s.length === Object.keys(s).length;
}
o(ny, "isPlainArray");
function Nh(s) {
  if (!ay(s))
    return !1;
  const t = s.constructor;
  if (t === void 0)
    return !0;
  const e = t.prototype;
  return !(!ay(e) || !e.hasOwnProperty("isPrototypeOf") || Object.getPrototypeOf(s) !== Object.prototype);
}
o(Nh, "isPlainObject");
function ay(s) {
  return Object.prototype.toString.call(s) === "[object Object]";
}
o(ay, "hasObjectPrototype");
function dv(s) {
  return new Promise((t) => {
    setTimeout(t, s);
  });
}
o(dv, "sleep");
function jh(s, t, e) {
  return typeof e.structuralSharing == "function" ? e.structuralSharing(s, t) : e.structuralSharing !== !1 ? dl(s, t) : t;
}
o(jh, "replaceData");
function hv(s, t, e = 0) {
  const i = [...s, t];
  return e && i.length > e ? i.slice(1) : i;
}
o(hv, "addToEnd");
function uv(s, t, e = 0) {
  const i = [t, ...s];
  return e && i.length > e ? i.slice(0, -1) : i;
}
o(uv, "addToStart");
var qu = Symbol();
function xw(s, t) {
  return !s.queryFn && (t != null && t.initialPromise) ? () => t.initialPromise : !s.queryFn || s.queryFn === qu ? () => Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)) : s.queryFn;
}
o(xw, "ensureQueryFn");
var qs, os, Gr, Zr, pv = (Zr = class extends Jo {
  constructor() {
    super();
    T(this, qs);
    T(this, os);
    T(this, Gr);
    S(this, Gr, (e) => {
      if (!Io && window.addEventListener) {
        const i = /* @__PURE__ */ o(() => e(), "listener");
        return window.addEventListener("visibilitychange", i, !1), () => {
          window.removeEventListener("visibilitychange", i);
        };
      }
    });
  }
  onSubscribe() {
    f(this, os) || this.setEventListener(f(this, Gr));
  }
  onUnsubscribe() {
    var e;
    this.hasListeners() || ((e = f(this, os)) == null || e.call(this), S(this, os, void 0));
  }
  setEventListener(e) {
    var i;
    S(this, Gr, e), (i = f(this, os)) == null || i.call(this), S(this, os, e((r) => {
      typeof r == "boolean" ? this.setFocused(r) : this.onFocus();
    }));
  }
  setFocused(e) {
    f(this, qs) !== e && (S(this, qs, e), this.onFocus());
  }
  onFocus() {
    const e = this.isFocused();
    this.listeners.forEach((i) => {
      i(e);
    });
  }
  isFocused() {
    var e;
    return typeof f(this, qs) == "boolean" ? f(this, qs) : ((e = globalThis.document) == null ? void 0 : e.visibilityState) !== "hidden";
  }
}, qs = new WeakMap(), os = new WeakMap(), Gr = new WeakMap(), o(Zr, "FocusManager"), Zr), Nu = new pv(), Yr, cs, Xr, Jr, yv = (Jr = class extends Jo {
  constructor() {
    super();
    T(this, Yr, !0);
    T(this, cs);
    T(this, Xr);
    S(this, Xr, (e) => {
      if (!Io && window.addEventListener) {
        const i = /* @__PURE__ */ o(() => e(!0), "onlineListener"), r = /* @__PURE__ */ o(() => e(!1), "offlineListener");
        return window.addEventListener("online", i, !1), window.addEventListener("offline", r, !1), () => {
          window.removeEventListener("online", i), window.removeEventListener("offline", r);
        };
      }
    });
  }
  onSubscribe() {
    f(this, cs) || this.setEventListener(f(this, Xr));
  }
  onUnsubscribe() {
    var e;
    this.hasListeners() || ((e = f(this, cs)) == null || e.call(this), S(this, cs, void 0));
  }
  setEventListener(e) {
    var i;
    S(this, Xr, e), (i = f(this, cs)) == null || i.call(this), S(this, cs, e(this.setOnline.bind(this)));
  }
  setOnline(e) {
    f(this, Yr) !== e && (S(this, Yr, e), this.listeners.forEach((r) => {
      r(e);
    }));
  }
  isOnline() {
    return f(this, Yr);
  }
}, Yr = new WeakMap(), cs = new WeakMap(), Xr = new WeakMap(), o(Jr, "OnlineManager"), Jr), Vl = new yv();
function Wh() {
  let s, t;
  const e = new Promise((r, n) => {
    s = r, t = n;
  });
  e.status = "pending", e.catch(() => {
  });
  function i(r) {
    Object.assign(e, r), delete e.resolve, delete e.reject;
  }
  return o(i, "finalize"), e.resolve = (r) => {
    i({
      status: "fulfilled",
      value: r
    }), s(r);
  }, e.reject = (r) => {
    i({
      status: "rejected",
      reason: r
    }), t(r);
  }, e;
}
o(Wh, "pendingThenable");
function wv(s) {
  var e;
  let t;
  if ((e = s.then((i) => (t = i, i), Re)) == null || e.catch(Re), t !== void 0)
    return { data: t };
}
o(wv, "tryResolveSync");
function fv(s) {
  return Math.min(1e3 * 2 ** s, 3e4);
}
o(fv, "defaultRetryDelay");
function $w(s) {
  return (s ?? "online") === "online" ? Vl.isOnline() : !0;
}
o($w, "canFetch");
var tn, Cw = (tn = class extends Error {
  constructor(t) {
    super("CancelledError"), this.revert = t == null ? void 0 : t.revert, this.silent = t == null ? void 0 : t.silent;
  }
}, o(tn, "CancelledError"), tn);
function zh(s) {
  return s instanceof Cw;
}
o(zh, "isCancelledError");
function kw(s) {
  let t = !1, e = 0, i = !1, r;
  const n = Wh(), a = /* @__PURE__ */ o((x) => {
    var z;
    i || (b(new Cw(x)), (z = s.abort) == null || z.call(s));
  }, "cancel"), c = /* @__PURE__ */ o(() => {
    t = !0;
  }, "cancelRetry"), l = /* @__PURE__ */ o(() => {
    t = !1;
  }, "continueRetry"), u = /* @__PURE__ */ o(() => Nu.isFocused() && (s.networkMode === "always" || Vl.isOnline()) && s.canRun(), "canContinue"), p = /* @__PURE__ */ o(() => $w(s.networkMode) && s.canRun(), "canStart"), w = /* @__PURE__ */ o((x) => {
    var z;
    i || (i = !0, (z = s.onSuccess) == null || z.call(s, x), r == null || r(), n.resolve(x));
  }, "resolve"), b = /* @__PURE__ */ o((x) => {
    var z;
    i || (i = !0, (z = s.onError) == null || z.call(s, x), r == null || r(), n.reject(x));
  }, "reject"), m = /* @__PURE__ */ o(() => new Promise((x) => {
    var z;
    r = /* @__PURE__ */ o((_) => {
      (i || u()) && x(_);
    }, "continueFn"), (z = s.onPause) == null || z.call(s);
  }).then(() => {
    var x;
    r = void 0, i || (x = s.onContinue) == null || x.call(s);
  }), "pause"), g = /* @__PURE__ */ o(() => {
    if (i)
      return;
    let x;
    const z = e === 0 ? s.initialPromise : void 0;
    try {
      x = z ?? s.fn();
    } catch (_) {
      x = Promise.reject(_);
    }
    Promise.resolve(x).then(w).catch((_) => {
      var F;
      if (i)
        return;
      const P = s.retry ?? (Io ? 0 : 3), E = s.retryDelay ?? fv, N = typeof E == "function" ? E(e, _) : E, O = P === !0 || typeof P == "number" && e < P || typeof P == "function" && P(e, _);
      if (t || !O) {
        b(_);
        return;
      }
      e++, (F = s.onFail) == null || F.call(s, e, _), dv(N).then(() => u() ? void 0 : m()).then(() => {
        t ? b(_) : g();
      });
    });
  }, "run");
  return {
    promise: n,
    cancel: a,
    continue: /* @__PURE__ */ o(() => (r == null || r(), n), "continue"),
    cancelRetry: c,
    continueRetry: l,
    canStart: p,
    start: /* @__PURE__ */ o(() => (p() ? g() : m().then(g), n), "start")
  };
}
o(kw, "createRetryer");
var mv = /* @__PURE__ */ o((s) => setTimeout(s, 0), "defaultScheduler");
function vv() {
  let s = [], t = 0, e = /* @__PURE__ */ o((c) => {
    c();
  }, "notifyFn"), i = /* @__PURE__ */ o((c) => {
    c();
  }, "batchNotifyFn"), r = mv;
  const n = /* @__PURE__ */ o((c) => {
    t ? s.push(c) : r(() => {
      e(c);
    });
  }, "schedule"), a = /* @__PURE__ */ o(() => {
    const c = s;
    s = [], c.length && r(() => {
      i(() => {
        c.forEach((l) => {
          e(l);
        });
      });
    });
  }, "flush");
  return {
    batch: /* @__PURE__ */ o((c) => {
      let l;
      t++;
      try {
        l = c();
      } finally {
        t--, t || a();
      }
      return l;
    }, "batch"),
    /**
     * All calls to the wrapped function will be batched.
     */
    batchCalls: /* @__PURE__ */ o((c) => (...l) => {
      n(() => {
        c(...l);
      });
    }, "batchCalls"),
    schedule: n,
    /**
     * Use this method to set a custom notify function.
     * This can be used to for example wrap notifications with `React.act` while running tests.
     */
    setNotifyFunction: /* @__PURE__ */ o((c) => {
      e = c;
    }, "setNotifyFunction"),
    /**
     * Use this method to set a custom function to batch notifications together into a single tick.
     * By default React Query will use the batch function provided by ReactDOM or React Native.
     */
    setBatchNotifyFunction: /* @__PURE__ */ o((c) => {
      i = c;
    }, "setBatchNotifyFunction"),
    setScheduler: /* @__PURE__ */ o((c) => {
      r = c;
    }, "setScheduler")
  };
}
o(vv, "createNotifyManager");
var pe = vv(), Ns, en, _w = (en = class {
  constructor() {
    T(this, Ns);
  }
  destroy() {
    this.clearGcTimeout();
  }
  scheduleGc() {
    this.clearGcTimeout(), qh(this.gcTime) && S(this, Ns, setTimeout(() => {
      this.optionalRemove();
    }, this.gcTime));
  }
  updateGcTime(t) {
    this.gcTime = Math.max(
      this.gcTime || 0,
      t ?? (Io ? 1 / 0 : 5 * 60 * 1e3)
    );
  }
  clearGcTimeout() {
    f(this, Ns) && (clearTimeout(f(this, Ns)), S(this, Ns, void 0));
  }
}, Ns = new WeakMap(), o(en, "Removable"), en), sn, js, Ze, Ws, ge, Uc, Qs, ri, Fi, rn, gv = (rn = class extends _w {
  constructor(e) {
    super();
    T(this, ri);
    T(this, sn);
    T(this, js);
    T(this, Ze);
    T(this, Ws);
    T(this, ge);
    T(this, Uc);
    T(this, Qs);
    S(this, Qs, !1), S(this, Uc, e.defaultOptions), this.setOptions(e.options), this.observers = [], S(this, Ws, e.client), S(this, Ze, f(this, Ws).getQueryCache()), this.queryKey = e.queryKey, this.queryHash = e.queryHash, S(this, sn, bv(this.options)), this.state = e.state ?? f(this, sn), this.scheduleGc();
  }
  get meta() {
    return this.options.meta;
  }
  get promise() {
    var e;
    return (e = f(this, ge)) == null ? void 0 : e.promise;
  }
  setOptions(e) {
    this.options = { ...f(this, Uc), ...e }, this.updateGcTime(this.options.gcTime);
  }
  optionalRemove() {
    !this.observers.length && this.state.fetchStatus === "idle" && f(this, Ze).remove(this);
  }
  setData(e, i) {
    const r = jh(this.state.data, e, this.options);
    return et(this, ri, Fi).call(this, {
      data: r,
      type: "success",
      dataUpdatedAt: i == null ? void 0 : i.updatedAt,
      manual: i == null ? void 0 : i.manual
    }), r;
  }
  setState(e, i) {
    et(this, ri, Fi).call(this, { type: "setState", state: e, setStateOptions: i });
  }
  cancel(e) {
    var r, n;
    const i = (r = f(this, ge)) == null ? void 0 : r.promise;
    return (n = f(this, ge)) == null || n.cancel(e), i ? i.then(Re).catch(Re) : Promise.resolve();
  }
  destroy() {
    super.destroy(), this.cancel({ silent: !0 });
  }
  reset() {
    this.destroy(), this.setState(f(this, sn));
  }
  isActive() {
    return this.observers.some(
      (e) => ai(e.options.enabled, this) !== !1
    );
  }
  isDisabled() {
    return this.getObserversCount() > 0 ? !this.isActive() : this.options.queryFn === qu || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;
  }
  isStatic() {
    return this.getObserversCount() > 0 ? this.observers.some(
      (e) => xs(e.options.staleTime, this) === "static"
    ) : !1;
  }
  isStale() {
    return this.getObserversCount() > 0 ? this.observers.some(
      (e) => e.getCurrentResult().isStale
    ) : this.state.data === void 0 || this.state.isInvalidated;
  }
  isStaleByTime(e = 0) {
    return this.state.data === void 0 ? !0 : e === "static" ? !1 : this.state.isInvalidated ? !0 : !bw(this.state.dataUpdatedAt, e);
  }
  onFocus() {
    var i;
    const e = this.observers.find((r) => r.shouldFetchOnWindowFocus());
    e == null || e.refetch({ cancelRefetch: !1 }), (i = f(this, ge)) == null || i.continue();
  }
  onOnline() {
    var i;
    const e = this.observers.find((r) => r.shouldFetchOnReconnect());
    e == null || e.refetch({ cancelRefetch: !1 }), (i = f(this, ge)) == null || i.continue();
  }
  addObserver(e) {
    this.observers.includes(e) || (this.observers.push(e), this.clearGcTimeout(), f(this, Ze).notify({ type: "observerAdded", query: this, observer: e }));
  }
  removeObserver(e) {
    this.observers.includes(e) && (this.observers = this.observers.filter((i) => i !== e), this.observers.length || (f(this, ge) && (f(this, Qs) ? f(this, ge).cancel({ revert: !0 }) : f(this, ge).cancelRetry()), this.scheduleGc()), f(this, Ze).notify({ type: "observerRemoved", query: this, observer: e }));
  }
  getObserversCount() {
    return this.observers.length;
  }
  invalidate() {
    this.state.isInvalidated || et(this, ri, Fi).call(this, { type: "invalidate" });
  }
  fetch(e, i) {
    var p, w, b;
    if (this.state.fetchStatus !== "idle") {
      if (this.state.data !== void 0 && (i != null && i.cancelRefetch))
        this.cancel({ silent: !0 });
      else if (f(this, ge))
        return f(this, ge).continueRetry(), f(this, ge).promise;
    }
    if (e && this.setOptions(e), !this.options.queryFn) {
      const m = this.observers.find((g) => g.options.queryFn);
      m && this.setOptions(m.options);
    }
    const r = new AbortController(), n = /* @__PURE__ */ o((m) => {
      Object.defineProperty(m, "signal", {
        enumerable: !0,
        get: /* @__PURE__ */ o(() => (S(this, Qs, !0), r.signal), "get")
      });
    }, "addSignalProperty"), a = /* @__PURE__ */ o(() => {
      const m = xw(this.options, i), x = (/* @__PURE__ */ o(() => {
        const z = {
          client: f(this, Ws),
          queryKey: this.queryKey,
          meta: this.meta
        };
        return n(z), z;
      }, "createQueryFnContext"))();
      return S(this, Qs, !1), this.options.persister ? this.options.persister(
        m,
        x,
        this
      ) : m(x);
    }, "fetchFn"), l = (/* @__PURE__ */ o(() => {
      const m = {
        fetchOptions: i,
        options: this.options,
        queryKey: this.queryKey,
        client: f(this, Ws),
        state: this.state,
        fetchFn: a
      };
      return n(m), m;
    }, "createFetchContext"))();
    (p = this.options.behavior) == null || p.onFetch(l, this), S(this, js, this.state), (this.state.fetchStatus === "idle" || this.state.fetchMeta !== ((w = l.fetchOptions) == null ? void 0 : w.meta)) && et(this, ri, Fi).call(this, { type: "fetch", meta: (b = l.fetchOptions) == null ? void 0 : b.meta });
    const u = /* @__PURE__ */ o((m) => {
      var g, x, z, _;
      zh(m) && m.silent || et(this, ri, Fi).call(this, {
        type: "error",
        error: m
      }), zh(m) || ((x = (g = f(this, Ze).config).onError) == null || x.call(
        g,
        m,
        this
      ), (_ = (z = f(this, Ze).config).onSettled) == null || _.call(
        z,
        this.state.data,
        m,
        this
      )), this.scheduleGc();
    }, "onError");
    return S(this, ge, kw({
      initialPromise: i == null ? void 0 : i.initialPromise,
      fn: l.fetchFn,
      abort: r.abort.bind(r),
      onSuccess: /* @__PURE__ */ o((m) => {
        var g, x, z, _;
        if (m === void 0) {
          u(new Error(`${this.queryHash} data is undefined`));
          return;
        }
        try {
          this.setData(m);
        } catch (P) {
          u(P);
          return;
        }
        (x = (g = f(this, Ze).config).onSuccess) == null || x.call(g, m, this), (_ = (z = f(this, Ze).config).onSettled) == null || _.call(
          z,
          m,
          this.state.error,
          this
        ), this.scheduleGc();
      }, "onSuccess"),
      onError: u,
      onFail: /* @__PURE__ */ o((m, g) => {
        et(this, ri, Fi).call(this, { type: "failed", failureCount: m, error: g });
      }, "onFail"),
      onPause: /* @__PURE__ */ o(() => {
        et(this, ri, Fi).call(this, { type: "pause" });
      }, "onPause"),
      onContinue: /* @__PURE__ */ o(() => {
        et(this, ri, Fi).call(this, { type: "continue" });
      }, "onContinue"),
      retry: l.options.retry,
      retryDelay: l.options.retryDelay,
      networkMode: l.options.networkMode,
      canRun: /* @__PURE__ */ o(() => !0, "canRun")
    })), f(this, ge).start();
  }
}, sn = new WeakMap(), js = new WeakMap(), Ze = new WeakMap(), Ws = new WeakMap(), ge = new WeakMap(), Uc = new WeakMap(), Qs = new WeakMap(), ri = new WeakSet(), Fi = /* @__PURE__ */ o(function(e) {
  const i = /* @__PURE__ */ o((r) => {
    switch (e.type) {
      case "failed":
        return {
          ...r,
          fetchFailureCount: e.failureCount,
          fetchFailureReason: e.error
        };
      case "pause":
        return {
          ...r,
          fetchStatus: "paused"
        };
      case "continue":
        return {
          ...r,
          fetchStatus: "fetching"
        };
      case "fetch":
        return {
          ...r,
          ...zw(r.data, this.options),
          fetchMeta: e.meta ?? null
        };
      case "success":
        return S(this, js, void 0), {
          ...r,
          data: e.data,
          dataUpdateCount: r.dataUpdateCount + 1,
          dataUpdatedAt: e.dataUpdatedAt ?? Date.now(),
          error: null,
          isInvalidated: !1,
          status: "success",
          ...!e.manual && {
            fetchStatus: "idle",
            fetchFailureCount: 0,
            fetchFailureReason: null
          }
        };
      case "error":
        const n = e.error;
        return zh(n) && n.revert && f(this, js) ? { ...f(this, js), fetchStatus: "idle" } : {
          ...r,
          error: n,
          errorUpdateCount: r.errorUpdateCount + 1,
          errorUpdatedAt: Date.now(),
          fetchFailureCount: r.fetchFailureCount + 1,
          fetchFailureReason: n,
          fetchStatus: "idle",
          status: "error"
        };
      case "invalidate":
        return {
          ...r,
          isInvalidated: !0
        };
      case "setState":
        return {
          ...r,
          ...e.state
        };
    }
  }, "reducer");
  this.state = i(this.state), pe.batch(() => {
    this.observers.forEach((r) => {
      r.onQueryUpdate();
    }), f(this, Ze).notify({ query: this, type: "updated", action: e });
  });
}, "#dispatch"), o(rn, "Query"), rn);
function zw(s, t) {
  return {
    fetchFailureCount: 0,
    fetchFailureReason: null,
    fetchStatus: $w(t.networkMode) ? "fetching" : "paused",
    ...s === void 0 && {
      error: null,
      status: "pending"
    }
  };
}
o(zw, "fetchState");
function bv(s) {
  const t = typeof s.initialData == "function" ? s.initialData() : s.initialData, e = t !== void 0, i = e ? typeof s.initialDataUpdatedAt == "function" ? s.initialDataUpdatedAt() : s.initialDataUpdatedAt : 0;
  return {
    data: t,
    dataUpdateCount: 0,
    dataUpdatedAt: e ? i ?? Date.now() : 0,
    error: null,
    errorUpdateCount: 0,
    errorUpdatedAt: 0,
    fetchFailureCount: 0,
    fetchFailureReason: null,
    fetchMeta: null,
    isInvalidated: !1,
    status: e ? "success" : "pending",
    fetchStatus: "idle"
  };
}
o(bv, "getDefaultState$1");
var vi, nn, xv = (nn = class extends Jo {
  constructor(e = {}) {
    super();
    T(this, vi);
    this.config = e, S(this, vi, /* @__PURE__ */ new Map());
  }
  build(e, i, r) {
    const n = i.queryKey, a = i.queryHash ?? Uu(n, i);
    let c = this.get(a);
    return c || (c = new gv({
      client: e,
      queryKey: n,
      queryHash: a,
      options: e.defaultQueryOptions(i),
      state: r,
      defaultOptions: e.getQueryDefaults(n)
    }), this.add(c)), c;
  }
  add(e) {
    f(this, vi).has(e.queryHash) || (f(this, vi).set(e.queryHash, e), this.notify({
      type: "added",
      query: e
    }));
  }
  remove(e) {
    const i = f(this, vi).get(e.queryHash);
    i && (e.destroy(), i === e && f(this, vi).delete(e.queryHash), this.notify({ type: "removed", query: e }));
  }
  clear() {
    pe.batch(() => {
      this.getAll().forEach((e) => {
        this.remove(e);
      });
    });
  }
  get(e) {
    return f(this, vi).get(e);
  }
  getAll() {
    return [...f(this, vi).values()];
  }
  find(e) {
    const i = { exact: !0, ...e };
    return this.getAll().find(
      (r) => sy(i, r)
    );
  }
  findAll(e = {}) {
    const i = this.getAll();
    return Object.keys(e).length > 0 ? i.filter((r) => sy(e, r)) : i;
  }
  notify(e) {
    pe.batch(() => {
      this.listeners.forEach((i) => {
        i(e);
      });
    });
  }
  onFocus() {
    pe.batch(() => {
      this.getAll().forEach((e) => {
        e.onFocus();
      });
    });
  }
  onOnline() {
    pe.batch(() => {
      this.getAll().forEach((e) => {
        e.onOnline();
      });
    });
  }
}, vi = new WeakMap(), o(nn, "QueryCache"), nn), gi, _e, Ks, bi, rs, an, $v = (an = class extends _w {
  constructor(e) {
    super();
    T(this, bi);
    T(this, gi);
    T(this, _e);
    T(this, Ks);
    this.mutationId = e.mutationId, S(this, _e, e.mutationCache), S(this, gi, []), this.state = e.state || Mw(), this.setOptions(e.options), this.scheduleGc();
  }
  setOptions(e) {
    this.options = e, this.updateGcTime(this.options.gcTime);
  }
  get meta() {
    return this.options.meta;
  }
  addObserver(e) {
    f(this, gi).includes(e) || (f(this, gi).push(e), this.clearGcTimeout(), f(this, _e).notify({
      type: "observerAdded",
      mutation: this,
      observer: e
    }));
  }
  removeObserver(e) {
    S(this, gi, f(this, gi).filter((i) => i !== e)), this.scheduleGc(), f(this, _e).notify({
      type: "observerRemoved",
      mutation: this,
      observer: e
    });
  }
  optionalRemove() {
    f(this, gi).length || (this.state.status === "pending" ? this.scheduleGc() : f(this, _e).remove(this));
  }
  continue() {
    var e;
    return ((e = f(this, Ks)) == null ? void 0 : e.continue()) ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before
    this.execute(this.state.variables);
  }
  async execute(e) {
    var a, c, l, u, p, w, b, m, g, x, z, _, P, E, N, O, F, B, D, U;
    const i = /* @__PURE__ */ o(() => {
      et(this, bi, rs).call(this, { type: "continue" });
    }, "onContinue");
    S(this, Ks, kw({
      fn: /* @__PURE__ */ o(() => this.options.mutationFn ? this.options.mutationFn(e) : Promise.reject(new Error("No mutationFn found")), "fn"),
      onFail: /* @__PURE__ */ o((j, J) => {
        et(this, bi, rs).call(this, { type: "failed", failureCount: j, error: J });
      }, "onFail"),
      onPause: /* @__PURE__ */ o(() => {
        et(this, bi, rs).call(this, { type: "pause" });
      }, "onPause"),
      onContinue: i,
      retry: this.options.retry ?? 0,
      retryDelay: this.options.retryDelay,
      networkMode: this.options.networkMode,
      canRun: /* @__PURE__ */ o(() => f(this, _e).canRun(this), "canRun")
    }));
    const r = this.state.status === "pending", n = !f(this, Ks).canStart();
    try {
      if (r)
        i();
      else {
        et(this, bi, rs).call(this, { type: "pending", variables: e, isPaused: n }), await ((c = (a = f(this, _e).config).onMutate) == null ? void 0 : c.call(
          a,
          e,
          this
        ));
        const J = await ((u = (l = this.options).onMutate) == null ? void 0 : u.call(l, e));
        J !== this.state.context && et(this, bi, rs).call(this, {
          type: "pending",
          context: J,
          variables: e,
          isPaused: n
        });
      }
      const j = await f(this, Ks).start();
      return await ((w = (p = f(this, _e).config).onSuccess) == null ? void 0 : w.call(
        p,
        j,
        e,
        this.state.context,
        this
      )), await ((m = (b = this.options).onSuccess) == null ? void 0 : m.call(b, j, e, this.state.context)), await ((x = (g = f(this, _e).config).onSettled) == null ? void 0 : x.call(
        g,
        j,
        null,
        this.state.variables,
        this.state.context,
        this
      )), await ((_ = (z = this.options).onSettled) == null ? void 0 : _.call(z, j, null, e, this.state.context)), et(this, bi, rs).call(this, { type: "success", data: j }), j;
    } catch (j) {
      try {
        throw await ((E = (P = f(this, _e).config).onError) == null ? void 0 : E.call(
          P,
          j,
          e,
          this.state.context,
          this
        )), await ((O = (N = this.options).onError) == null ? void 0 : O.call(
          N,
          j,
          e,
          this.state.context
        )), await ((B = (F = f(this, _e).config).onSettled) == null ? void 0 : B.call(
          F,
          void 0,
          j,
          this.state.variables,
          this.state.context,
          this
        )), await ((U = (D = this.options).onSettled) == null ? void 0 : U.call(
          D,
          void 0,
          j,
          e,
          this.state.context
        )), j;
      } finally {
        et(this, bi, rs).call(this, { type: "error", error: j });
      }
    } finally {
      f(this, _e).runNext(this);
    }
  }
}, gi = new WeakMap(), _e = new WeakMap(), Ks = new WeakMap(), bi = new WeakSet(), rs = /* @__PURE__ */ o(function(e) {
  const i = /* @__PURE__ */ o((r) => {
    switch (e.type) {
      case "failed":
        return {
          ...r,
          failureCount: e.failureCount,
          failureReason: e.error
        };
      case "pause":
        return {
          ...r,
          isPaused: !0
        };
      case "continue":
        return {
          ...r,
          isPaused: !1
        };
      case "pending":
        return {
          ...r,
          context: e.context,
          data: void 0,
          failureCount: 0,
          failureReason: null,
          error: null,
          isPaused: e.isPaused,
          status: "pending",
          variables: e.variables,
          submittedAt: Date.now()
        };
      case "success":
        return {
          ...r,
          data: e.data,
          failureCount: 0,
          failureReason: null,
          error: null,
          status: "success",
          isPaused: !1
        };
      case "error":
        return {
          ...r,
          data: void 0,
          error: e.error,
          failureCount: r.failureCount + 1,
          failureReason: e.error,
          isPaused: !1,
          status: "error"
        };
    }
  }, "reducer");
  this.state = i(this.state), pe.batch(() => {
    f(this, gi).forEach((r) => {
      r.onMutationUpdate(e);
    }), f(this, _e).notify({
      mutation: this,
      type: "updated",
      action: e
    });
  });
}, "#dispatch"), o(an, "Mutation"), an);
function Mw() {
  return {
    context: void 0,
    data: void 0,
    error: null,
    failureCount: 0,
    failureReason: null,
    isPaused: !1,
    status: "idle",
    variables: void 0,
    submittedAt: 0
  };
}
o(Mw, "getDefaultState");
var Di, ni, qc, on, Cv = (on = class extends Jo {
  constructor(e = {}) {
    super();
    T(this, Di);
    T(this, ni);
    T(this, qc);
    this.config = e, S(this, Di, /* @__PURE__ */ new Set()), S(this, ni, /* @__PURE__ */ new Map()), S(this, qc, 0);
  }
  build(e, i, r) {
    const n = new $v({
      mutationCache: this,
      mutationId: ++zl(this, qc)._,
      options: e.defaultMutationOptions(i),
      state: r
    });
    return this.add(n), n;
  }
  add(e) {
    f(this, Di).add(e);
    const i = Ml(e);
    if (typeof i == "string") {
      const r = f(this, ni).get(i);
      r ? r.push(e) : f(this, ni).set(i, [e]);
    }
    this.notify({ type: "added", mutation: e });
  }
  remove(e) {
    if (f(this, Di).delete(e)) {
      const i = Ml(e);
      if (typeof i == "string") {
        const r = f(this, ni).get(i);
        if (r)
          if (r.length > 1) {
            const n = r.indexOf(e);
            n !== -1 && r.splice(n, 1);
          } else r[0] === e && f(this, ni).delete(i);
      }
    }
    this.notify({ type: "removed", mutation: e });
  }
  canRun(e) {
    const i = Ml(e);
    if (typeof i == "string") {
      const r = f(this, ni).get(i), n = r == null ? void 0 : r.find(
        (a) => a.state.status === "pending"
      );
      return !n || n === e;
    } else
      return !0;
  }
  runNext(e) {
    var r;
    const i = Ml(e);
    if (typeof i == "string") {
      const n = (r = f(this, ni).get(i)) == null ? void 0 : r.find((a) => a !== e && a.state.isPaused);
      return (n == null ? void 0 : n.continue()) ?? Promise.resolve();
    } else
      return Promise.resolve();
  }
  clear() {
    pe.batch(() => {
      f(this, Di).forEach((e) => {
        this.notify({ type: "removed", mutation: e });
      }), f(this, Di).clear(), f(this, ni).clear();
    });
  }
  getAll() {
    return Array.from(f(this, Di));
  }
  find(e) {
    const i = { exact: !0, ...e };
    return this.getAll().find(
      (r) => ry(i, r)
    );
  }
  findAll(e = {}) {
    return this.getAll().filter((i) => ry(e, i));
  }
  notify(e) {
    pe.batch(() => {
      this.listeners.forEach((i) => {
        i(e);
      });
    });
  }
  resumePausedMutations() {
    const e = this.getAll().filter((i) => i.state.isPaused);
    return pe.batch(
      () => Promise.all(
        e.map((i) => i.continue().catch(Re))
      )
    );
  }
}, Di = new WeakMap(), ni = new WeakMap(), qc = new WeakMap(), o(on, "MutationCache"), on);
function Ml(s) {
  var t;
  return (t = s.options.scope) == null ? void 0 : t.id;
}
o(Ml, "scopeFor");
function Bl(s) {
  return {
    onFetch: /* @__PURE__ */ o((t, e) => {
      var p, w, b, m, g;
      const i = t.options, r = (b = (w = (p = t.fetchOptions) == null ? void 0 : p.meta) == null ? void 0 : w.fetchMore) == null ? void 0 : b.direction, n = ((m = t.state.data) == null ? void 0 : m.pages) || [], a = ((g = t.state.data) == null ? void 0 : g.pageParams) || [];
      let c = { pages: [], pageParams: [] }, l = 0;
      const u = /* @__PURE__ */ o(async () => {
        let x = !1;
        const z = /* @__PURE__ */ o((E) => {
          Object.defineProperty(E, "signal", {
            enumerable: !0,
            get: /* @__PURE__ */ o(() => (t.signal.aborted ? x = !0 : t.signal.addEventListener("abort", () => {
              x = !0;
            }), t.signal), "get")
          });
        }, "addSignalProperty"), _ = xw(t.options, t.fetchOptions), P = /* @__PURE__ */ o(async (E, N, O) => {
          if (x)
            return Promise.reject();
          if (N == null && E.pages.length)
            return Promise.resolve(E);
          const B = (/* @__PURE__ */ o(() => {
            const J = {
              client: t.client,
              queryKey: t.queryKey,
              pageParam: N,
              direction: O ? "backward" : "forward",
              meta: t.options.meta
            };
            return z(J), J;
          }, "createQueryFnContext"))(), D = await _(B), { maxPages: U } = t.options, j = O ? uv : hv;
          return {
            pages: j(E.pages, D, U),
            pageParams: j(E.pageParams, N, U)
          };
        }, "fetchPage");
        if (r && n.length) {
          const E = r === "backward", N = E ? Pw : Qh, O = {
            pages: n,
            pageParams: a
          }, F = N(i, O);
          c = await P(O, F, E);
        } else {
          const E = s ?? n.length;
          do {
            const N = l === 0 ? a[0] ?? i.initialPageParam : Qh(i, c);
            if (l > 0 && N == null)
              break;
            c = await P(c, N), l++;
          } while (l < E);
        }
        return c;
      }, "fetchFn");
      t.options.persister ? t.fetchFn = () => {
        var x, z;
        return (z = (x = t.options).persister) == null ? void 0 : z.call(
          x,
          u,
          {
            client: t.client,
            queryKey: t.queryKey,
            meta: t.options.meta,
            signal: t.signal
          },
          e
        );
      } : t.fetchFn = u;
    }, "onFetch")
  };
}
o(Bl, "infiniteQueryBehavior");
function Qh(s, { pages: t, pageParams: e }) {
  const i = t.length - 1;
  return t.length > 0 ? s.getNextPageParam(
    t[i],
    t,
    e[i],
    e
  ) : void 0;
}
o(Qh, "getNextPageParam");
function Pw(s, { pages: t, pageParams: e }) {
  var i;
  return t.length > 0 ? (i = s.getPreviousPageParam) == null ? void 0 : i.call(s, t[0], t, e[0], e) : void 0;
}
o(Pw, "getPreviousPageParam");
function kv(s, t) {
  return t ? Qh(s, t) != null : !1;
}
o(kv, "hasNextPage");
function _v(s, t) {
  return !t || !s.getPreviousPageParam ? !1 : Pw(s, t) != null;
}
o(_v, "hasPreviousPage");
var Dt, ls, ds, cn, ln, hs, dn, hn, un, zv = (un = class {
  constructor(t = {}) {
    T(this, Dt);
    T(this, ls);
    T(this, ds);
    T(this, cn);
    T(this, ln);
    T(this, hs);
    T(this, dn);
    T(this, hn);
    S(this, Dt, t.queryCache || new xv()), S(this, ls, t.mutationCache || new Cv()), S(this, ds, t.defaultOptions || {}), S(this, cn, /* @__PURE__ */ new Map()), S(this, ln, /* @__PURE__ */ new Map()), S(this, hs, 0);
  }
  mount() {
    zl(this, hs)._++, f(this, hs) === 1 && (S(this, dn, Nu.subscribe(async (t) => {
      t && (await this.resumePausedMutations(), f(this, Dt).onFocus());
    })), S(this, hn, Vl.subscribe(async (t) => {
      t && (await this.resumePausedMutations(), f(this, Dt).onOnline());
    })));
  }
  unmount() {
    var t, e;
    zl(this, hs)._--, f(this, hs) === 0 && ((t = f(this, dn)) == null || t.call(this), S(this, dn, void 0), (e = f(this, hn)) == null || e.call(this), S(this, hn, void 0));
  }
  isFetching(t) {
    return f(this, Dt).findAll({ ...t, fetchStatus: "fetching" }).length;
  }
  isMutating(t) {
    return f(this, ls).findAll({ ...t, status: "pending" }).length;
  }
  /**
   * Imperative (non-reactive) way to retrieve data for a QueryKey.
   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.
   *
   * Hint: Do not use this function inside a component, because it won't receive updates.
   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.
   */
  getQueryData(t) {
    var i;
    const e = this.defaultQueryOptions({ queryKey: t });
    return (i = f(this, Dt).get(e.queryHash)) == null ? void 0 : i.state.data;
  }
  ensureQueryData(t) {
    const e = this.defaultQueryOptions(t), i = f(this, Dt).build(this, e), r = i.state.data;
    return r === void 0 ? this.fetchQuery(t) : (t.revalidateIfStale && i.isStaleByTime(xs(e.staleTime, i)) && this.prefetchQuery(e), Promise.resolve(r));
  }
  getQueriesData(t) {
    return f(this, Dt).findAll(t).map(({ queryKey: e, state: i }) => {
      const r = i.data;
      return [e, r];
    });
  }
  setQueryData(t, e, i) {
    const r = this.defaultQueryOptions({ queryKey: t }), n = f(this, Dt).get(
      r.queryHash
    ), a = n == null ? void 0 : n.state.data, c = lv(e, a);
    if (c !== void 0)
      return f(this, Dt).build(this, r).setData(c, { ...i, manual: !0 });
  }
  setQueriesData(t, e, i) {
    return pe.batch(
      () => f(this, Dt).findAll(t).map(({ queryKey: r }) => [
        r,
        this.setQueryData(r, e, i)
      ])
    );
  }
  getQueryState(t) {
    var i;
    const e = this.defaultQueryOptions({ queryKey: t });
    return (i = f(this, Dt).get(
      e.queryHash
    )) == null ? void 0 : i.state;
  }
  removeQueries(t) {
    const e = f(this, Dt);
    pe.batch(() => {
      e.findAll(t).forEach((i) => {
        e.remove(i);
      });
    });
  }
  resetQueries(t, e) {
    const i = f(this, Dt);
    return pe.batch(() => (i.findAll(t).forEach((r) => {
      r.reset();
    }), this.refetchQueries(
      {
        type: "active",
        ...t
      },
      e
    )));
  }
  cancelQueries(t, e = {}) {
    const i = { revert: !0, ...e }, r = pe.batch(
      () => f(this, Dt).findAll(t).map((n) => n.cancel(i))
    );
    return Promise.all(r).then(Re).catch(Re);
  }
  invalidateQueries(t, e = {}) {
    return pe.batch(() => (f(this, Dt).findAll(t).forEach((i) => {
      i.invalidate();
    }), (t == null ? void 0 : t.refetchType) === "none" ? Promise.resolve() : this.refetchQueries(
      {
        ...t,
        type: (t == null ? void 0 : t.refetchType) ?? (t == null ? void 0 : t.type) ?? "active"
      },
      e
    )));
  }
  refetchQueries(t, e = {}) {
    const i = {
      ...e,
      cancelRefetch: e.cancelRefetch ?? !0
    }, r = pe.batch(
      () => f(this, Dt).findAll(t).filter((n) => !n.isDisabled() && !n.isStatic()).map((n) => {
        let a = n.fetch(void 0, i);
        return i.throwOnError || (a = a.catch(Re)), n.state.fetchStatus === "paused" ? Promise.resolve() : a;
      })
    );
    return Promise.all(r).then(Re);
  }
  fetchQuery(t) {
    const e = this.defaultQueryOptions(t);
    e.retry === void 0 && (e.retry = !1);
    const i = f(this, Dt).build(this, e);
    return i.isStaleByTime(
      xs(e.staleTime, i)
    ) ? i.fetch(e) : Promise.resolve(i.state.data);
  }
  prefetchQuery(t) {
    return this.fetchQuery(t).then(Re).catch(Re);
  }
  fetchInfiniteQuery(t) {
    return t.behavior = Bl(t.pages), this.fetchQuery(t);
  }
  prefetchInfiniteQuery(t) {
    return this.fetchInfiniteQuery(t).then(Re).catch(Re);
  }
  ensureInfiniteQueryData(t) {
    return t.behavior = Bl(t.pages), this.ensureQueryData(t);
  }
  resumePausedMutations() {
    return Vl.isOnline() ? f(this, ls).resumePausedMutations() : Promise.resolve();
  }
  getQueryCache() {
    return f(this, Dt);
  }
  getMutationCache() {
    return f(this, ls);
  }
  getDefaultOptions() {
    return f(this, ds);
  }
  setDefaultOptions(t) {
    S(this, ds, t);
  }
  setQueryDefaults(t, e) {
    f(this, cn).set(ar(t), {
      queryKey: t,
      defaultOptions: e
    });
  }
  getQueryDefaults(t) {
    const e = [...f(this, cn).values()], i = {};
    return e.forEach((r) => {
      xc(t, r.queryKey) && Object.assign(i, r.defaultOptions);
    }), i;
  }
  setMutationDefaults(t, e) {
    f(this, ln).set(ar(t), {
      mutationKey: t,
      defaultOptions: e
    });
  }
  getMutationDefaults(t) {
    const e = [...f(this, ln).values()], i = {};
    return e.forEach((r) => {
      xc(t, r.mutationKey) && Object.assign(i, r.defaultOptions);
    }), i;
  }
  defaultQueryOptions(t) {
    if (t._defaulted)
      return t;
    const e = {
      ...f(this, ds).queries,
      ...this.getQueryDefaults(t.queryKey),
      ...t,
      _defaulted: !0
    };
    return e.queryHash || (e.queryHash = Uu(
      e.queryKey,
      e
    )), e.refetchOnReconnect === void 0 && (e.refetchOnReconnect = e.networkMode !== "always"), e.throwOnError === void 0 && (e.throwOnError = !!e.suspense), !e.networkMode && e.persister && (e.networkMode = "offlineFirst"), e.queryFn === qu && (e.enabled = !1), e;
  }
  defaultMutationOptions(t) {
    return t != null && t._defaulted ? t : {
      ...f(this, ds).mutations,
      ...(t == null ? void 0 : t.mutationKey) && this.getMutationDefaults(t.mutationKey),
      ...t,
      _defaulted: !0
    };
  }
  clear() {
    f(this, Dt).clear(), f(this, ls).clear();
  }
}, Dt = new WeakMap(), ls = new WeakMap(), ds = new WeakMap(), cn = new WeakMap(), ln = new WeakMap(), hs = new WeakMap(), dn = new WeakMap(), hn = new WeakMap(), o(un, "QueryClient"), un), Ee, mt, Nc, ze, Gs, pn, us, ps, jc, yn, wn, Zs, Ys, ys, fn, $t, pc, Kh, Gh, Zh, Yh, Xh, Jh, tu, Aw, mn, Sw = (mn = class extends Jo {
  constructor(e, i) {
    super();
    T(this, $t);
    T(this, Ee);
    T(this, mt);
    T(this, Nc);
    T(this, ze);
    T(this, Gs);
    T(this, pn);
    T(this, us);
    T(this, ps);
    T(this, jc);
    T(this, yn);
    // This property keeps track of the last query with defined data.
    // It will be used to pass the previous data and query to the placeholder function between renders.
    T(this, wn);
    T(this, Zs);
    T(this, Ys);
    T(this, ys);
    T(this, fn, /* @__PURE__ */ new Set());
    this.options = i, S(this, Ee, e), S(this, ps, null), S(this, us, Wh()), this.options.experimental_prefetchInRender || f(this, us).reject(
      new Error("experimental_prefetchInRender feature flag is not enabled")
    ), this.bindMethods(), this.setOptions(i);
  }
  bindMethods() {
    this.refetch = this.refetch.bind(this);
  }
  onSubscribe() {
    this.listeners.size === 1 && (f(this, mt).addObserver(this), oy(f(this, mt), this.options) ? et(this, $t, pc).call(this) : this.updateResult(), et(this, $t, Yh).call(this));
  }
  onUnsubscribe() {
    this.hasListeners() || this.destroy();
  }
  shouldFetchOnReconnect() {
    return eu(
      f(this, mt),
      this.options,
      this.options.refetchOnReconnect
    );
  }
  shouldFetchOnWindowFocus() {
    return eu(
      f(this, mt),
      this.options,
      this.options.refetchOnWindowFocus
    );
  }
  destroy() {
    this.listeners = /* @__PURE__ */ new Set(), et(this, $t, Xh).call(this), et(this, $t, Jh).call(this), f(this, mt).removeObserver(this);
  }
  setOptions(e) {
    const i = this.options, r = f(this, mt);
    if (this.options = f(this, Ee).defaultQueryOptions(e), this.options.enabled !== void 0 && typeof this.options.enabled != "boolean" && typeof this.options.enabled != "function" && typeof ai(this.options.enabled, f(this, mt)) != "boolean")
      throw new Error(
        "Expected enabled to be a boolean or a callback that returns a boolean"
      );
    et(this, $t, tu).call(this), f(this, mt).setOptions(this.options), i._defaulted && !Hl(this.options, i) && f(this, Ee).getQueryCache().notify({
      type: "observerOptionsUpdated",
      query: f(this, mt),
      observer: this
    });
    const n = this.hasListeners();
    n && cy(
      f(this, mt),
      r,
      this.options,
      i
    ) && et(this, $t, pc).call(this), this.updateResult(), n && (f(this, mt) !== r || ai(this.options.enabled, f(this, mt)) !== ai(i.enabled, f(this, mt)) || xs(this.options.staleTime, f(this, mt)) !== xs(i.staleTime, f(this, mt))) && et(this, $t, Kh).call(this);
    const a = et(this, $t, Gh).call(this);
    n && (f(this, mt) !== r || ai(this.options.enabled, f(this, mt)) !== ai(i.enabled, f(this, mt)) || a !== f(this, ys)) && et(this, $t, Zh).call(this, a);
  }
  getOptimisticResult(e) {
    const i = f(this, Ee).getQueryCache().build(f(this, Ee), e), r = this.createResult(i, e);
    return Pv(this, r) && (S(this, ze, r), S(this, pn, this.options), S(this, Gs, f(this, mt).state)), r;
  }
  getCurrentResult() {
    return f(this, ze);
  }
  trackResult(e, i) {
    return new Proxy(e, {
      get: /* @__PURE__ */ o((r, n) => (this.trackProp(n), i == null || i(n), Reflect.get(r, n)), "get")
    });
  }
  trackProp(e) {
    f(this, fn).add(e);
  }
  getCurrentQuery() {
    return f(this, mt);
  }
  refetch({ ...e } = {}) {
    return this.fetch({
      ...e
    });
  }
  fetchOptimistic(e) {
    const i = f(this, Ee).defaultQueryOptions(e), r = f(this, Ee).getQueryCache().build(f(this, Ee), i);
    return r.fetch().then(() => this.createResult(r, i));
  }
  fetch(e) {
    return et(this, $t, pc).call(this, {
      ...e,
      cancelRefetch: e.cancelRefetch ?? !0
    }).then(() => (this.updateResult(), f(this, ze)));
  }
  createResult(e, i) {
    var j;
    const r = f(this, mt), n = this.options, a = f(this, ze), c = f(this, Gs), l = f(this, pn), p = e !== r ? e.state : f(this, Nc), { state: w } = e;
    let b = { ...w }, m = !1, g;
    if (i._optimisticResults) {
      const J = this.hasListeners(), wt = !J && oy(e, i), Y = J && cy(e, r, i, n);
      (wt || Y) && (b = {
        ...b,
        ...zw(w.data, e.options)
      }), i._optimisticResults === "isRestoring" && (b.fetchStatus = "idle");
    }
    let { error: x, errorUpdatedAt: z, status: _ } = b;
    g = b.data;
    let P = !1;
    if (i.placeholderData !== void 0 && g === void 0 && _ === "pending") {
      let J;
      a != null && a.isPlaceholderData && i.placeholderData === (l == null ? void 0 : l.placeholderData) ? (J = a.data, P = !0) : J = typeof i.placeholderData == "function" ? i.placeholderData(
        (j = f(this, wn)) == null ? void 0 : j.state.data,
        f(this, wn)
      ) : i.placeholderData, J !== void 0 && (_ = "success", g = jh(
        a == null ? void 0 : a.data,
        J,
        i
      ), m = !0);
    }
    if (i.select && g !== void 0 && !P)
      if (a && g === (c == null ? void 0 : c.data) && i.select === f(this, jc))
        g = f(this, yn);
      else
        try {
          S(this, jc, i.select), g = i.select(g), g = jh(a == null ? void 0 : a.data, g, i), S(this, yn, g), S(this, ps, null);
        } catch (J) {
          S(this, ps, J);
        }
    f(this, ps) && (x = f(this, ps), g = f(this, yn), z = Date.now(), _ = "error");
    const E = b.fetchStatus === "fetching", N = _ === "pending", O = _ === "error", F = N && E, B = g !== void 0, U = {
      status: _,
      fetchStatus: b.fetchStatus,
      isPending: N,
      isSuccess: _ === "success",
      isError: O,
      isInitialLoading: F,
      isLoading: F,
      data: g,
      dataUpdatedAt: b.dataUpdatedAt,
      error: x,
      errorUpdatedAt: z,
      failureCount: b.fetchFailureCount,
      failureReason: b.fetchFailureReason,
      errorUpdateCount: b.errorUpdateCount,
      isFetched: b.dataUpdateCount > 0 || b.errorUpdateCount > 0,
      isFetchedAfterMount: b.dataUpdateCount > p.dataUpdateCount || b.errorUpdateCount > p.errorUpdateCount,
      isFetching: E,
      isRefetching: E && !N,
      isLoadingError: O && !B,
      isPaused: b.fetchStatus === "paused",
      isPlaceholderData: m,
      isRefetchError: O && B,
      isStale: ju(e, i),
      refetch: this.refetch,
      promise: f(this, us)
    };
    if (this.options.experimental_prefetchInRender) {
      const J = /* @__PURE__ */ o((nt) => {
        U.status === "error" ? nt.reject(U.error) : U.data !== void 0 && nt.resolve(U.data);
      }, "finalizeThenableIfPossible"), wt = /* @__PURE__ */ o(() => {
        const nt = S(this, us, U.promise = Wh());
        J(nt);
      }, "recreateThenable"), Y = f(this, us);
      switch (Y.status) {
        case "pending":
          e.queryHash === r.queryHash && J(Y);
          break;
        case "fulfilled":
          (U.status === "error" || U.data !== Y.value) && wt();
          break;
        case "rejected":
          (U.status !== "error" || U.error !== Y.reason) && wt();
          break;
      }
    }
    return U;
  }
  updateResult() {
    const e = f(this, ze), i = this.createResult(f(this, mt), this.options);
    if (S(this, Gs, f(this, mt).state), S(this, pn, this.options), f(this, Gs).data !== void 0 && S(this, wn, f(this, mt)), Hl(i, e))
      return;
    S(this, ze, i);
    const r = /* @__PURE__ */ o(() => {
      if (!e)
        return !0;
      const { notifyOnChangeProps: n } = this.options, a = typeof n == "function" ? n() : n;
      if (a === "all" || !a && !f(this, fn).size)
        return !0;
      const c = new Set(
        a ?? f(this, fn)
      );
      return this.options.throwOnError && c.add("error"), Object.keys(f(this, ze)).some((l) => {
        const u = l;
        return f(this, ze)[u] !== e[u] && c.has(u);
      });
    }, "shouldNotifyListeners");
    et(this, $t, Aw).call(this, { listeners: r() });
  }
  onQueryUpdate() {
    this.updateResult(), this.hasListeners() && et(this, $t, Yh).call(this);
  }
}, Ee = new WeakMap(), mt = new WeakMap(), Nc = new WeakMap(), ze = new WeakMap(), Gs = new WeakMap(), pn = new WeakMap(), us = new WeakMap(), ps = new WeakMap(), jc = new WeakMap(), yn = new WeakMap(), wn = new WeakMap(), Zs = new WeakMap(), Ys = new WeakMap(), ys = new WeakMap(), fn = new WeakMap(), $t = new WeakSet(), pc = /* @__PURE__ */ o(function(e) {
  et(this, $t, tu).call(this);
  let i = f(this, mt).fetch(
    this.options,
    e
  );
  return e != null && e.throwOnError || (i = i.catch(Re)), i;
}, "#executeFetch"), Kh = /* @__PURE__ */ o(function() {
  et(this, $t, Xh).call(this);
  const e = xs(
    this.options.staleTime,
    f(this, mt)
  );
  if (Io || f(this, ze).isStale || !qh(e))
    return;
  const r = bw(f(this, ze).dataUpdatedAt, e) + 1;
  S(this, Zs, setTimeout(() => {
    f(this, ze).isStale || this.updateResult();
  }, r));
}, "#updateStaleTimeout"), Gh = /* @__PURE__ */ o(function() {
  return (typeof this.options.refetchInterval == "function" ? this.options.refetchInterval(f(this, mt)) : this.options.refetchInterval) ?? !1;
}, "#computeRefetchInterval"), Zh = /* @__PURE__ */ o(function(e) {
  et(this, $t, Jh).call(this), S(this, ys, e), !(Io || ai(this.options.enabled, f(this, mt)) === !1 || !qh(f(this, ys)) || f(this, ys) === 0) && S(this, Ys, setInterval(() => {
    (this.options.refetchIntervalInBackground || Nu.isFocused()) && et(this, $t, pc).call(this);
  }, f(this, ys)));
}, "#updateRefetchInterval"), Yh = /* @__PURE__ */ o(function() {
  et(this, $t, Kh).call(this), et(this, $t, Zh).call(this, et(this, $t, Gh).call(this));
}, "#updateTimers"), Xh = /* @__PURE__ */ o(function() {
  f(this, Zs) && (clearTimeout(f(this, Zs)), S(this, Zs, void 0));
}, "#clearStaleTimeout"), Jh = /* @__PURE__ */ o(function() {
  f(this, Ys) && (clearInterval(f(this, Ys)), S(this, Ys, void 0));
}, "#clearRefetchInterval"), tu = /* @__PURE__ */ o(function() {
  const e = f(this, Ee).getQueryCache().build(f(this, Ee), this.options);
  if (e === f(this, mt))
    return;
  const i = f(this, mt);
  S(this, mt, e), S(this, Nc, e.state), this.hasListeners() && (i == null || i.removeObserver(this), e.addObserver(this));
}, "#updateQuery"), Aw = /* @__PURE__ */ o(function(e) {
  pe.batch(() => {
    e.listeners && this.listeners.forEach((i) => {
      i(f(this, ze));
    }), f(this, Ee).getQueryCache().notify({
      query: f(this, mt),
      type: "observerResultsUpdated"
    });
  });
}, "#notify"), o(mn, "QueryObserver"), mn);
function Mv(s, t) {
  return ai(t.enabled, s) !== !1 && s.state.data === void 0 && !(s.state.status === "error" && t.retryOnMount === !1);
}
o(Mv, "shouldLoadOnMount");
function oy(s, t) {
  return Mv(s, t) || s.state.data !== void 0 && eu(s, t, t.refetchOnMount);
}
o(oy, "shouldFetchOnMount");
function eu(s, t, e) {
  if (ai(t.enabled, s) !== !1 && xs(t.staleTime, s) !== "static") {
    const i = typeof e == "function" ? e(s) : e;
    return i === "always" || i !== !1 && ju(s, t);
  }
  return !1;
}
o(eu, "shouldFetchOn");
function cy(s, t, e, i) {
  return (s !== t || ai(i.enabled, s) === !1) && (!e.suspense || s.state.status !== "error") && ju(s, e);
}
o(cy, "shouldFetchOptionally");
function ju(s, t) {
  return ai(t.enabled, s) !== !1 && s.isStaleByTime(xs(t.staleTime, s));
}
o(ju, "isStale");
function Pv(s, t) {
  return !Hl(s.getCurrentResult(), t);
}
o(Pv, "shouldAssignObserverCurrentProperties");
var vn, Sv = (vn = class extends Sw {
  constructor(t, e) {
    super(t, e);
  }
  bindMethods() {
    super.bindMethods(), this.fetchNextPage = this.fetchNextPage.bind(this), this.fetchPreviousPage = this.fetchPreviousPage.bind(this);
  }
  setOptions(t) {
    super.setOptions({
      ...t,
      behavior: Bl()
    });
  }
  getOptimisticResult(t) {
    return t.behavior = Bl(), super.getOptimisticResult(t);
  }
  fetchNextPage(t) {
    return this.fetch({
      ...t,
      meta: {
        fetchMore: { direction: "forward" }
      }
    });
  }
  fetchPreviousPage(t) {
    return this.fetch({
      ...t,
      meta: {
        fetchMore: { direction: "backward" }
      }
    });
  }
  createResult(t, e) {
    var x, z;
    const { state: i } = t, r = super.createResult(t, e), { isFetching: n, isRefetching: a, isError: c, isRefetchError: l } = r, u = (z = (x = i.fetchMeta) == null ? void 0 : x.fetchMore) == null ? void 0 : z.direction, p = c && u === "forward", w = n && u === "forward", b = c && u === "backward", m = n && u === "backward";
    return {
      ...r,
      fetchNextPage: this.fetchNextPage,
      fetchPreviousPage: this.fetchPreviousPage,
      hasNextPage: kv(e, i.data),
      hasPreviousPage: _v(e, i.data),
      isFetchNextPageError: p,
      isFetchingNextPage: w,
      isFetchPreviousPageError: b,
      isFetchingPreviousPage: m,
      isRefetchError: l && !p && !b,
      isRefetching: a && !w && !m
    };
  }
}, o(vn, "InfiniteQueryObserver"), vn), ws, fs, Oe, Hi, Ni, Ol, iu, gn, kt = (gn = class extends Jo {
  constructor(e, i) {
    super();
    T(this, Ni);
    T(this, ws);
    T(this, fs);
    T(this, Oe);
    T(this, Hi);
    S(this, ws, e), this.setOptions(i), this.bindMethods(), et(this, Ni, Ol).call(this);
  }
  bindMethods() {
    this.mutate = this.mutate.bind(this), this.reset = this.reset.bind(this);
  }
  setOptions(e) {
    var r;
    const i = this.options;
    this.options = f(this, ws).defaultMutationOptions(e), Hl(this.options, i) || f(this, ws).getMutationCache().notify({
      type: "observerOptionsUpdated",
      mutation: f(this, Oe),
      observer: this
    }), i != null && i.mutationKey && this.options.mutationKey && ar(i.mutationKey) !== ar(this.options.mutationKey) ? this.reset() : ((r = f(this, Oe)) == null ? void 0 : r.state.status) === "pending" && f(this, Oe).setOptions(this.options);
  }
  onUnsubscribe() {
    var e;
    this.hasListeners() || (e = f(this, Oe)) == null || e.removeObserver(this);
  }
  onMutationUpdate(e) {
    et(this, Ni, Ol).call(this), et(this, Ni, iu).call(this, e);
  }
  getCurrentResult() {
    return f(this, fs);
  }
  reset() {
    var e;
    (e = f(this, Oe)) == null || e.removeObserver(this), S(this, Oe, void 0), et(this, Ni, Ol).call(this), et(this, Ni, iu).call(this);
  }
  mutate(e, i) {
    var r;
    return S(this, Hi, i), (r = f(this, Oe)) == null || r.removeObserver(this), S(this, Oe, f(this, ws).getMutationCache().build(f(this, ws), this.options)), f(this, Oe).addObserver(this), f(this, Oe).execute(e);
  }
}, ws = new WeakMap(), fs = new WeakMap(), Oe = new WeakMap(), Hi = new WeakMap(), Ni = new WeakSet(), Ol = /* @__PURE__ */ o(function() {
  var i;
  const e = ((i = f(this, Oe)) == null ? void 0 : i.state) ?? Mw();
  S(this, fs, {
    ...e,
    isPending: e.status === "pending",
    isSuccess: e.status === "success",
    isError: e.status === "error",
    isIdle: e.status === "idle",
    mutate: this.mutate,
    reset: this.reset
  });
}, "#updateResult"), iu = /* @__PURE__ */ o(function(e) {
  pe.batch(() => {
    var i, r, n, a, c, l, u, p;
    if (f(this, Hi) && this.hasListeners()) {
      const w = f(this, fs).variables, b = f(this, fs).context;
      (e == null ? void 0 : e.type) === "success" ? ((r = (i = f(this, Hi)).onSuccess) == null || r.call(i, e.data, w, b), (a = (n = f(this, Hi)).onSettled) == null || a.call(n, e.data, null, w, b)) : (e == null ? void 0 : e.type) === "error" && ((l = (c = f(this, Hi)).onError) == null || l.call(c, e.error, w, b), (p = (u = f(this, Hi)).onSettled) == null || p.call(
        u,
        void 0,
        e.error,
        w,
        b
      ));
    }
    this.listeners.forEach((w) => {
      w(f(this, fs));
    });
  });
}, "#notify"), o(gn, "MutationObserver"), gn);
function Ew(s) {
  return s;
}
o(Ew, "defaultTransformerFn");
function Av(s) {
  return {
    mutationKey: s.options.mutationKey,
    state: s.state,
    ...s.options.scope && { scope: s.options.scope },
    ...s.meta && { meta: s.meta }
  };
}
o(Av, "dehydrateMutation");
function Ev(s, t, e) {
  var i;
  return {
    dehydratedAt: Date.now(),
    state: {
      ...s.state,
      ...s.state.data !== void 0 && {
        data: t(s.state.data)
      }
    },
    queryKey: s.queryKey,
    queryHash: s.queryHash,
    ...s.state.status === "pending" && {
      promise: (i = s.promise) == null ? void 0 : i.then(t).catch((r) => e(r) ? Promise.reject(new Error("redacted")) : Promise.reject(r))
    },
    ...s.meta && { meta: s.meta }
  };
}
o(Ev, "dehydrateQuery");
function Ov(s) {
  return s.state.isPaused;
}
o(Ov, "defaultShouldDehydrateMutation");
function Rv(s) {
  return s.state.status === "success";
}
o(Rv, "defaultShouldDehydrateQuery");
function Lv(s) {
  return !0;
}
o(Lv, "defaultShouldRedactErrors");
function Iv(s, t = {}) {
  var l, u, p, w;
  const e = t.shouldDehydrateMutation ?? ((l = s.getDefaultOptions().dehydrate) == null ? void 0 : l.shouldDehydrateMutation) ?? Ov, i = s.getMutationCache().getAll().flatMap(
    (b) => e(b) ? [Av(b)] : []
  ), r = t.shouldDehydrateQuery ?? ((u = s.getDefaultOptions().dehydrate) == null ? void 0 : u.shouldDehydrateQuery) ?? Rv, n = t.shouldRedactErrors ?? ((p = s.getDefaultOptions().dehydrate) == null ? void 0 : p.shouldRedactErrors) ?? Lv, a = t.serializeData ?? ((w = s.getDefaultOptions().dehydrate) == null ? void 0 : w.serializeData) ?? Ew, c = s.getQueryCache().getAll().flatMap(
    (b) => r(b) ? [Ev(b, a, n)] : []
  );
  return { mutations: i, queries: c };
}
o(Iv, "dehydrate");
function Tv(s, t, e) {
  var l;
  if (typeof t != "object" || t === null)
    return;
  const i = s.getMutationCache(), r = s.getQueryCache(), n = ((l = s.getDefaultOptions().hydrate) == null ? void 0 : l.deserializeData) ?? Ew, a = t.mutations || [], c = t.queries || [];
  a.forEach(({ state: u, ...p }) => {
    var w, b;
    i.build(
      s,
      {
        ...(w = s.getDefaultOptions().hydrate) == null ? void 0 : w.mutations,
        ...(b = e == null ? void 0 : e.defaultOptions) == null ? void 0 : b.mutations,
        ...p
      },
      u
    );
  }), c.forEach(
    ({ queryKey: u, state: p, queryHash: w, meta: b, promise: m, dehydratedAt: g }) => {
      var O, F;
      const x = m ? wv(m) : void 0, z = p.data === void 0 ? x == null ? void 0 : x.data : p.data, _ = z === void 0 ? z : n(z);
      let P = r.get(w);
      const E = (P == null ? void 0 : P.state.status) === "pending", N = (P == null ? void 0 : P.state.fetchStatus) === "fetching";
      if (P) {
        const B = x && // We only need this undefined check to handle older dehydration
        // payloads that might not have dehydratedAt
        g !== void 0 && g > P.state.dataUpdatedAt;
        if (p.dataUpdatedAt > P.state.dataUpdatedAt || B) {
          const { fetchStatus: D, ...U } = p;
          P.setState({
            ...U,
            data: _
          });
        }
      } else
        P = r.build(
          s,
          {
            ...(O = s.getDefaultOptions().hydrate) == null ? void 0 : O.queries,
            ...(F = e == null ? void 0 : e.defaultOptions) == null ? void 0 : F.queries,
            queryKey: u,
            queryHash: w,
            meta: b
          },
          // Reset fetch status to idle to avoid
          // query being stuck in fetching state upon hydration
          {
            ...p,
            data: _,
            fetchStatus: "idle",
            status: _ !== void 0 ? "success" : p.status
          }
        );
      m && !E && !N && // Only hydrate if dehydration is newer than any existing data,
      // this is always true for new queries
      (g === void 0 || g > P.state.dataUpdatedAt) && P.fetch(void 0, {
        // RSC transformed promises are not thenable
        initialPromise: Promise.resolve(m).then(n)
      });
    }
  );
}
o(Tv, "hydrate");
var ct = /* @__PURE__ */ ((s) => (s.Chat = "d65dd4bc-418e-403c-9f56-f9cf4da931ed", s.Comments = "88f96a08-c6c1-4eac-a0bd-5bf8fba1a3fd", s.Files = "523edd88-4bbf-4547-b60f-2859a6d2ddc1", s.Posts = "5ebfa152-de85-48da-82dd-30a1b560c313", s.ChatRoom = "edb400ac-839b-45a7-b2a8-6a01820d1c44", s.PrivateChat = "7e14f418-8f15-46f4-b182-f619b671e470", s.AgentChat = "2352a1c6-abc6-420e-8b85-ca7d5aed8779", s))(ct || {}), oi = /* @__PURE__ */ ((s) => (s.Chat = "chat", s.Comments = "comments", s.Files = "files", s.Posts = "posts", s.ChatRoom = "chat_room", s.PrivateChat = "private_chat", s.AgentChat = "agent_chat", s))(oi || {}), Ow = /* @__PURE__ */ ((s) => (s["d65dd4bc-418e-403c-9f56-f9cf4da931ed"] = "chat", s["88f96a08-c6c1-4eac-a0bd-5bf8fba1a3fd"] = "comments", s["523edd88-4bbf-4547-b60f-2859a6d2ddc1"] = "files", s["5ebfa152-de85-48da-82dd-30a1b560c313"] = "posts", s["edb400ac-839b-45a7-b2a8-6a01820d1c44"] = "chat_room", s["7e14f418-8f15-46f4-b182-f619b671e470"] = "private_chat", s["2352a1c6-abc6-420e-8b85-ca7d5aed8779"] = "agent_chat", s))(Ow || {}), Rw = /* @__PURE__ */ ((s) => (s.chat = "d65dd4bc-418e-403c-9f56-f9cf4da931ed", s.comments = "88f96a08-c6c1-4eac-a0bd-5bf8fba1a3fd", s.files = "523edd88-4bbf-4547-b60f-2859a6d2ddc1", s.posts = "5ebfa152-de85-48da-82dd-30a1b560c313", s.chat_room = "edb400ac-839b-45a7-b2a8-6a01820d1c44", s.private_chat = "7e14f418-8f15-46f4-b182-f619b671e470", s.agent_chat = "2352a1c6-abc6-420e-8b85-ca7d5aed8779", s))(Rw || {}), Lw = /* @__PURE__ */ ((s) => (s["2352a1c6-abc6-420e-8b85-ca7d5aed8779"] = "agent_chat", s))(Lw || {}), Iw = /* @__PURE__ */ ((s) => (s.agent_chat = "2352a1c6-abc6-420e-8b85-ca7d5aed8779", s))(Iw || {}), Je = /* @__PURE__ */ ((s) => (s.Unknown = "unknown", s))(Je || {}), ns = /* @__PURE__ */ ((s) => (s.None = "none", s.Read = "read", s.Write = "write", s.Admin = "admin", s))(ns || {}), or = /* @__PURE__ */ ((s) => (s.List = "list", s.Read = "read", s.Create = "create", s.Update = "update", s.Delete = "delete", s.Admin = "admin", s))(or || {}), xe = /* @__PURE__ */ ((s) => (s.App = "app", s.File = "file", s.Message = "message", s.User = "user", s.Comment = "comment", s.Post = "post", s))(xe || {});
function tc(s, t, e, i, r, n = "GET") {
  return {
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: t,
    queryFn: /* @__PURE__ */ o(async () => {
      const a = await s.fetch(e || "/api/" + t.join("/"), { method: n, body: r });
      if (a.ok)
        return await a.json();
      throw new Error(`Error calling ${e || "/api/" + t.join("/")}`);
    }, "queryFn"),
    ...i
  };
}
o(tc, "getApiOptions");
async function su(s, t, e, i, r, n = "GET", a = !1) {
  const c = s.queryClient, l = tc(s, t, e, i, r, n);
  return a ? (l.staleTime = 1, await c.fetchQuery(l)) : await c.ensureQueryData(l);
}
o(su, "getApi");
function Fv(s, t, e = Je.Unknown, i) {
  return e === Je.Unknown || typeof t == "number" ? su(s, ["apps", t]) : su(s, ["apps", t], void 0, void 0, JSON.stringify({ type: e, ...i }), "PUT");
}
o(Fv, "getApp");
function Dv(s, t, e = Je.Unknown, i, r) {
  return {
    // eslint-disable-next-line @tanstack/query/exhaustive-deps
    queryKey: ["apps", t],
    queryFn: /* @__PURE__ */ o(async () => {
      const n = [];
      e === Je.Unknown || typeof t == "number" ? n.push(
        // Get existing app
        s.fetch(`/api/apps/${t}`)
      ) : n.push(
        // Get, update or create app using app uid
        s.fetch(`/api/apps/${t}`, { method: "PUT", body: JSON.stringify({ type: e, members: i, ...r }) })
      );
      const a = (await Promise.allSettled(n)).findLast(
        (l) => {
          var u;
          return l.status === "fulfilled" && ((u = l.value) == null ? void 0 : u.ok);
        }
      ), c = (a == null ? void 0 : a.status) === "fulfilled" && a.value;
      if (c)
        return await c.json();
      throw new Error(`Error getting or creating app ${t}`);
    }, "queryFn")
  };
}
o(Dv, "getOrCreateAppOptions");
function Hv(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ name: e, members: i, type: r, uid: n }) => await (await s.fetch("/api/apps", {
      method: "POST",
      body: JSON.stringify({
        name: e,
        members: i,
        type: r,
        uid: n
      })
    })).json(), "mutationFn"),
    onSettled: /* @__PURE__ */ o(async () => {
      await s.queryClient.invalidateQueries({ queryKey: ["apps"] });
    }, "onSettled")
  };
}
o(Hv, "getCreateAppMutationOptions");
function Tw(s) {
  return new kt(s.queryClient, Hv(s));
}
o(Tw, "getCreateAppMutation");
function Fw(s, t) {
  const e = s.queryClient, i = ["apps", t.uid || t.id];
  return {
    mutationFn: /* @__PURE__ */ o(async ({ subscribe: n }) => {
      if (t.id >= 1) {
        const a = await s.fetch(`/api/apps/${t.id}/${n ? "subscribe" : "unsubscribe"}`, {
          method: "POST"
        });
        if (!a.ok)
          throw await a.json();
      } else
        throw new Error(`Could not subscribe to app ${t.uid || t.id}.`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => {
      let a;
      return e.setQueryData(i, (l) => (a = l.is_subscribed, { ...l, is_subscribed: n.subscribe })), {
        previousSubscribe: a,
        subscribe: n.subscribe
      };
    }, "onMutate"),
    onError(n, a, c) {
      c && c.previousSubscribe !== void 0 && e.setQueryData(i, (l) => ({ ...l, is_subscribed: c == null ? void 0 : c.previousSubscribe }));
    }
  };
}
o(Fw, "getAppSubscribeMutationOptions");
function Vv(s, t = [ct.ChatRoom, ct.PrivateChat], e, i = {}) {
  const r = new URLSearchParams({
    count_only: "true",
    unread: "true"
  });
  e && r.append("member", e), t == null || t.forEach((c) => r.append("type", c));
  const n = `/api/apps?${r.toString()}`;
  return tc(s, ["apps", "badge", t], n, i);
}
o(Vv, "getBadgeOptions$1");
function Bv(s, t = {}, e, i, r, n, a) {
  return {
    ...t,
    initialPageParam: 0,
    queryKey: ["apps", "list", e, i, n, a],
    queryFn: /* @__PURE__ */ o(async (c) => {
      var m;
      const l = new URLSearchParams();
      i && l.append("member", i), c.pageParam && typeof c.pageParam == "number" && l.append("skip", (m = c.pageParam) == null ? void 0 : m.toString()), e == null || e.forEach((g) => l.append("type", g)), l.append("order_by", n);
      const u = r == null ? void 0 : r();
      u && l.append("q", u), l.append("uid", "false");
      const p = `/api/apps?${l.toString()}`, b = await (await s.fetch(p)).json();
      return b.data = b.data || [], b;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ o((c) => {
      if (c.end && (c == null ? void 0 : c.end) < (c == null ? void 0 : c.count))
        return c.end;
    }, "getNextPageParam")
  };
}
o(Bv, "getAppListOptions");
const Uv = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i);
      const r = this;
      this.api = {
        apps: {
          async getApp(n) {
            return await Fv(r, n);
          }
        }
      };
    }
  }, o(t, "WeavyApi"), t;
}, "WeavyApiMixin"), qv = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // AUTHENTICATION
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i), this._whenTokenFactory = new Promise((r) => {
        this._resolveTokenFactory = r;
      }), this._whenUrlAndTokenFactory = new Promise((r) => {
        this._resolveUrlAndTokenFactory = r;
      }), this._whenTokenIsValid = new Promise((r) => {
        this._resolveTokenIsValid = r;
      }), this._tokenPromise = null, this._token = "", this._validTokenFromFactory = async (r = !1) => {
        var c, l;
        const n = [this.whenTokenFactory()];
        this.tokenFactoryRetryDelay !== 1 / 0 && n.push(new Promise((u) => setTimeout(u, this.tokenFactoryRetryDelay))), await Promise.race(n);
        const a = await ((c = this.tokenFactory) == null ? void 0 : c.call(this, r)) ?? "";
        if (this._validateToken(a)) {
          if (r && a === this._token && this.tokenFactoryRetryDelay !== 1 / 0)
            return await new Promise((u) => setTimeout(u, this.tokenFactoryRetryDelay)), await this._validTokenFromFactory(!0);
        } else if (this._whenTokenFactory = new Promise((u) => {
          this._resolveTokenFactory = u;
        }), !r)
          return await this._validTokenFromFactory(!1);
        if (!a)
          throw new TypeError("Could not get a valid token from tokenFactory.");
        return (l = this._resolveTokenFactory) == null || l.call(this, !0), this.whenUrl().then(this._resolveUrlAndTokenFactory), a;
      }, Promise.all([this.whenUrl(), this.whenTokenFactory()]).then(() => {
        var r;
        this.url && this.tokenFactory && ((r = this._resolveUrlAndTokenFactory) == null || r.call(this, !0));
      });
    }
    async whenTokenFactory() {
      await this._whenTokenFactory;
    }
    async whenUrlAndTokenFactory() {
      await this._whenUrlAndTokenFactory;
    }
    async whenTokenIsValid() {
      await this._whenTokenIsValid;
    }
    /**
     * Async function returning an `access_token` string for _your_ authenticated user. A boolean `refresh` parameter is provided to let you now if a fresh token is needed from Weavy.
     */
    get tokenFactory() {
      return this._tokenFactory;
    }
    set tokenFactory(i) {
      if (this.isDestroyed)
        throw new Ht();
      this._tokenFactory && this._tokenFactory !== i && this.whenTokenFactory().then(() => {
        this.queryClient.refetchQueries({ stale: !0 });
      }), this._tokenFactory = i ?? void 0, this._tokenFactory && queueMicrotask(() => {
        var r;
        (r = this._resolveTokenFactory) == null || r.call(this, !0);
      });
    }
    /**
     * An URL to an endpoint returning an JSON data containing an `access_token` string property for _your_ authenticated user. A boolean `refresh=true` query parameter is provided in the request to let you now if when a fresh token is needed from Weavy.
     */
    get tokenUrl() {
      return this._tokenUrl;
    }
    set tokenUrl(i) {
      if (this.isDestroyed)
        throw new Ht();
      try {
        if (typeof i == "string")
          i && (this._tokenUrl = new URL(i, window.location.toString()));
        else if (i instanceof URL)
          this._tokenUrl = i;
        else if (i == null)
          this._tokenUrl = void 0;
        else
          throw new Error();
      } catch (r) {
        throw new Error("Invalid url", r);
      }
      this._tokenUrl && !this.tokenFactory && (this.tokenFactory = async (r) => {
        if (!this.tokenUrl)
          throw new Error("tokenURL property is not valid");
        const n = new URL(this.tokenUrl);
        r ? n.searchParams.set("refresh", "true") : n.searchParams.delete("refresh");
        const a = await fetch(n);
        if (a.ok) {
          const c = await a.json();
          if (c.access_token === void 0)
            throw new Error("Token response does not contain required property: access_token");
          return c.access_token;
        } else
          throw new Error("Could not get access token from server!");
      });
    }
    _validateToken(i) {
      var r;
      if (!i)
        return !1;
      if (typeof i != "string")
        throw new TypeError(`You have provided an invalid string access token of type ${typeof i}.`);
      if (typeof i == "string" && !i.startsWith("wyu_"))
        throw i.startsWith("wys_") ? new TypeError("You have provided an API key for authentication. Provide a user access token instead.") : new TypeError("You have provided an invalid string as access token.");
      return (r = this._resolveTokenIsValid) == null || r.call(this, i), !0;
    }
    async getToken(i = !1) {
      if (this.isDestroyed)
        throw new Ht();
      if (this._token && !i)
        return this._token;
      if (this._tokenPromise)
        return await this._tokenPromise;
      this._tokenPromise = new Promise((r, n) => {
        this._validTokenFromFactory(i).then(r).catch(n), this.tokenFactoryTimeout !== 1 / 0 && setTimeout(() => n(new Error("Token factory timeout.")), this.tokenFactoryTimeout), window.addEventListener("offline", () => n(new Error("Network changed.")), { once: !0 }), window.addEventListener("online", () => n(new Error("Network changed.")), { once: !0 });
      });
      try {
        const r = await this._tokenPromise;
        return this._tokenPromise = null, this._token = r, this._token;
      } catch (r) {
        throw this._tokenPromise = null, r;
      }
    }
  }, o(t, "WeavyAuthentication"), t;
}, "WeavyAuthenticationMixin");
var Pl = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Nv(s) {
  return s && s.__esModule && Object.prototype.hasOwnProperty.call(s, "default") ? s.default : s;
}
o(Nv, "getDefaultExportFromCjs");
function Mh(s) {
  throw new Error('Could not dynamically require "' + s + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
o(Mh, "commonjsRequire");
var Ph = { exports: {} }, ly;
function jv() {
  return ly || (ly = 1, function(s, t) {
    var e;
    e = /* @__PURE__ */ o(() => (() => {
      var i = { d: /* @__PURE__ */ o((V, d) => {
        for (var v in d) i.o(d, v) && !i.o(V, v) && Object.defineProperty(V, v, { enumerable: !0, get: d[v] });
      }, "d") };
      i.g = function() {
        if (typeof globalThis == "object") return globalThis;
        try {
          return this || new Function("return this")();
        } catch {
          if (typeof window == "object") return window;
        }
      }(), i.o = (V, d) => Object.prototype.hasOwnProperty.call(V, d), i.r = (V) => {
        typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(V, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(V, "t", { value: !0 });
      };
      var r, n = {};
      i.r(n), i.d(n, { AbortError: /* @__PURE__ */ o(() => l, "AbortError"), DefaultHttpClient: /* @__PURE__ */ o(() => _t, "DefaultHttpClient"), HttpClient: /* @__PURE__ */ o(() => x, "HttpClient"), HttpError: /* @__PURE__ */ o(() => a, "HttpError"), HttpResponse: /* @__PURE__ */ o(() => g, "HttpResponse"), HttpTransportType: /* @__PURE__ */ o(() => zt, "HttpTransportType"), HubConnection: /* @__PURE__ */ o(() => Ii, "HubConnection"), HubConnectionBuilder: /* @__PURE__ */ o(() => Wd, "HubConnectionBuilder"), HubConnectionState: /* @__PURE__ */ o(() => xt, "HubConnectionState"), JsonHubProtocol: /* @__PURE__ */ o(() => Cl, "JsonHubProtocol"), LogLevel: /* @__PURE__ */ o(() => r, "LogLevel"), MessageType: /* @__PURE__ */ o(() => tt, "MessageType"), NullLogger: /* @__PURE__ */ o(() => z, "NullLogger"), Subject: /* @__PURE__ */ o(() => si, "Subject"), TimeoutError: /* @__PURE__ */ o(() => c, "TimeoutError"), TransferFormat: /* @__PURE__ */ o(() => Yt, "TransferFormat"), VERSION: /* @__PURE__ */ o(() => _, "VERSION") });
      const Qd = class Qd extends Error {
        constructor(d, v) {
          const k = new.target.prototype;
          super(`${d}: Status code '${v}'`), this.statusCode = v, this.__proto__ = k;
        }
      };
      o(Qd, "i");
      let a = Qd;
      const Kd = class Kd extends Error {
        constructor(d = "A timeout occurred.") {
          const v = new.target.prototype;
          super(d), this.__proto__ = v;
        }
      };
      o(Kd, "n");
      let c = Kd;
      const Gd = class Gd extends Error {
        constructor(d = "An abort occurred.") {
          const v = new.target.prototype;
          super(d), this.__proto__ = v;
        }
      };
      o(Gd, "r");
      let l = Gd;
      const Zd = class Zd extends Error {
        constructor(d, v) {
          const k = new.target.prototype;
          super(d), this.transport = v, this.errorType = "UnsupportedTransportError", this.__proto__ = k;
        }
      };
      o(Zd, "o");
      let u = Zd;
      const Yd = class Yd extends Error {
        constructor(d, v) {
          const k = new.target.prototype;
          super(d), this.transport = v, this.errorType = "DisabledTransportError", this.__proto__ = k;
        }
      };
      o(Yd, "h");
      let p = Yd;
      const Xd = class Xd extends Error {
        constructor(d, v) {
          const k = new.target.prototype;
          super(d), this.transport = v, this.errorType = "FailedToStartTransportError", this.__proto__ = k;
        }
      };
      o(Xd, "c");
      let w = Xd;
      const Jd = class Jd extends Error {
        constructor(d) {
          const v = new.target.prototype;
          super(d), this.errorType = "FailedToNegotiateWithServerError", this.__proto__ = v;
        }
      };
      o(Jd, "a");
      let b = Jd;
      const th = class th extends Error {
        constructor(d, v) {
          const k = new.target.prototype;
          super(d), this.innerErrors = v, this.__proto__ = k;
        }
      };
      o(th, "l");
      let m = th;
      const eh = class eh {
        constructor(d, v, k) {
          this.statusCode = d, this.statusText = v, this.content = k;
        }
      };
      o(eh, "u");
      let g = eh;
      const ih = class ih {
        get(d, v) {
          return this.send({ ...v, method: "GET", url: d });
        }
        post(d, v) {
          return this.send({ ...v, method: "POST", url: d });
        }
        delete(d, v) {
          return this.send({ ...v, method: "DELETE", url: d });
        }
        getCookieString(d) {
          return "";
        }
      };
      o(ih, "d");
      let x = ih;
      (function(V) {
        V[V.Trace = 0] = "Trace", V[V.Debug = 1] = "Debug", V[V.Information = 2] = "Information", V[V.Warning = 3] = "Warning", V[V.Error = 4] = "Error", V[V.Critical = 5] = "Critical", V[V.None = 6] = "None";
      })(r || (r = {}));
      const sh = class sh {
        constructor() {
        }
        log(d, v) {
        }
      };
      o(sh, "f");
      let z = sh;
      z.instance = new z();
      const _ = "8.0.7", rh = class rh {
        static isRequired(d, v) {
          if (d == null) throw new Error(`The '${v}' argument is required.`);
        }
        static isNotEmpty(d, v) {
          if (!d || d.match(/^\s*$/)) throw new Error(`The '${v}' argument should not be empty.`);
        }
        static isIn(d, v, k) {
          if (!(d in v)) throw new Error(`Unknown ${k} value: ${d}.`);
        }
      };
      o(rh, "w");
      let P = rh;
      const Sr = class Sr {
        static get isBrowser() {
          return !Sr.isNode && typeof window == "object" && typeof window.document == "object";
        }
        static get isWebWorker() {
          return !Sr.isNode && typeof self == "object" && "importScripts" in self;
        }
        static get isReactNative() {
          return !Sr.isNode && typeof window == "object" && window.document === void 0;
        }
        static get isNode() {
          return typeof process < "u" && process.release && process.release.name === "node";
        }
      };
      o(Sr, "g");
      let E = Sr;
      function N(V, d) {
        let v = "";
        return O(V) ? (v = `Binary data of length ${V.byteLength}`, d && (v += `. Content: '${function(k) {
          const M = new Uint8Array(k);
          let R = "";
          return M.forEach((I) => {
            R += `0x${I < 16 ? "0" : ""}${I.toString(16)} `;
          }), R.substr(0, R.length - 1);
        }(V)}'`)) : typeof V == "string" && (v = `String data of length ${V.length}`, d && (v += `. Content: '${V}'`)), v;
      }
      o(N, "m");
      function O(V) {
        return V && typeof ArrayBuffer < "u" && (V instanceof ArrayBuffer || V.constructor && V.constructor.name === "ArrayBuffer");
      }
      o(O, "y");
      async function F(V, d, v, k, M, R) {
        const I = {}, [K, Z] = U();
        I[K] = Z, V.log(r.Trace, `(${d} transport) sending data. ${N(M, R.logMessageContent)}.`);
        const ht = O(M) ? "arraybuffer" : "text", Pt = await v.post(k, { content: M, headers: { ...I, ...R.headers }, responseType: ht, timeout: R.timeout, withCredentials: R.withCredentials });
        V.log(r.Trace, `(${d} transport) request complete. Response status: ${Pt.statusCode}.`);
      }
      o(F, "b");
      const nh = class nh {
        constructor(d, v) {
          this.i = d, this.h = v;
        }
        dispose() {
          const d = this.i.observers.indexOf(this.h);
          d > -1 && this.i.observers.splice(d, 1), this.i.observers.length === 0 && this.i.cancelCallback && this.i.cancelCallback().catch((v) => {
          });
        }
      };
      o(nh, "v");
      let B = nh;
      const ah = class ah {
        constructor(d) {
          this.l = d, this.out = console;
        }
        log(d, v) {
          if (d >= this.l) {
            const k = `[${(/* @__PURE__ */ new Date()).toISOString()}] ${r[d]}: ${v}`;
            switch (d) {
              case r.Critical:
              case r.Error:
                this.out.error(k);
                break;
              case r.Warning:
                this.out.warn(k);
                break;
              case r.Information:
                this.out.info(k);
                break;
              default:
                this.out.log(k);
            }
          }
        }
      };
      o(ah, "E");
      let D = ah;
      function U() {
        let V = "X-SignalR-User-Agent";
        return E.isNode && (V = "User-Agent"), [V, j(_, J(), E.isNode ? "NodeJS" : "Browser", wt())];
      }
      o(U, "$");
      function j(V, d, v, k) {
        let M = "Microsoft SignalR/";
        const R = V.split(".");
        return M += `${R[0]}.${R[1]}`, M += ` (${V}; `, M += d && d !== "" ? `${d}; ` : "Unknown OS; ", M += `${v}`, M += k ? `; ${k}` : "; Unknown Runtime Version", M += ")", M;
      }
      o(j, "C");
      function J() {
        if (!E.isNode) return "";
        switch (process.platform) {
          case "win32":
            return "Windows NT";
          case "darwin":
            return "macOS";
          case "linux":
            return "Linux";
          default:
            return process.platform;
        }
      }
      o(J, "S");
      function wt() {
        if (E.isNode) return process.versions.node;
      }
      o(wt, "k");
      function Y(V) {
        return V.stack ? V.stack : V.message ? V.message : `${V}`;
      }
      o(Y, "P");
      const oh = class oh extends x {
        constructor(d) {
          if (super(), this.u = d, typeof fetch > "u" || E.isNode) {
            const v = Mh;
            this.p = new (v("tough-cookie")).CookieJar(), typeof fetch > "u" ? this.m = v("node-fetch") : this.m = fetch, this.m = v("fetch-cookie")(this.m, this.p);
          } else this.m = fetch.bind(function() {
            if (typeof globalThis < "u") return globalThis;
            if (typeof self < "u") return self;
            if (typeof window < "u") return window;
            if (i.g !== void 0) return i.g;
            throw new Error("could not find global");
          }());
          if (typeof AbortController > "u") {
            const v = Mh;
            this.v = v("abort-controller");
          } else this.v = AbortController;
        }
        async send(d) {
          if (d.abortSignal && d.abortSignal.aborted) throw new l();
          if (!d.method) throw new Error("No method defined.");
          if (!d.url) throw new Error("No url defined.");
          const v = new this.v();
          let k;
          d.abortSignal && (d.abortSignal.onabort = () => {
            v.abort(), k = new l();
          });
          let M, R = null;
          if (d.timeout) {
            const Z = d.timeout;
            R = setTimeout(() => {
              v.abort(), this.u.log(r.Warning, "Timeout from HTTP request."), k = new c();
            }, Z);
          }
          d.content === "" && (d.content = void 0), d.content && (d.headers = d.headers || {}, O(d.content) ? d.headers["Content-Type"] = "application/octet-stream" : d.headers["Content-Type"] = "text/plain;charset=UTF-8");
          try {
            M = await this.m(d.url, { body: d.content, cache: "no-cache", credentials: d.withCredentials === !0 ? "include" : "same-origin", headers: { "X-Requested-With": "XMLHttpRequest", ...d.headers }, method: d.method, mode: "cors", redirect: "follow", signal: v.signal });
          } catch (Z) {
            throw k || (this.u.log(r.Warning, `Error from HTTP request. ${Z}.`), Z);
          } finally {
            R && clearTimeout(R), d.abortSignal && (d.abortSignal.onabort = null);
          }
          if (!M.ok) {
            const Z = await Nt(M, "text");
            throw new a(Z || M.statusText, M.status);
          }
          const I = Nt(M, d.responseType), K = await I;
          return new g(M.status, M.statusText, K);
        }
        getCookieString(d) {
          let v = "";
          return E.isNode && this.p && this.p.getCookies(d, (k, M) => v = M.join("; ")), v;
        }
      };
      o(oh, "T");
      let nt = oh;
      function Nt(V, d) {
        let v;
        switch (d) {
          case "arraybuffer":
            v = V.arrayBuffer();
            break;
          case "text":
          default:
            v = V.text();
            break;
          case "blob":
          case "document":
          case "json":
            throw new Error(`${d} is not supported.`);
        }
        return v;
      }
      o(Nt, "I");
      const ch = class ch extends x {
        constructor(d) {
          super(), this.u = d;
        }
        send(d) {
          return d.abortSignal && d.abortSignal.aborted ? Promise.reject(new l()) : d.method ? d.url ? new Promise((v, k) => {
            const M = new XMLHttpRequest();
            M.open(d.method, d.url, !0), M.withCredentials = d.withCredentials === void 0 || d.withCredentials, M.setRequestHeader("X-Requested-With", "XMLHttpRequest"), d.content === "" && (d.content = void 0), d.content && (O(d.content) ? M.setRequestHeader("Content-Type", "application/octet-stream") : M.setRequestHeader("Content-Type", "text/plain;charset=UTF-8"));
            const R = d.headers;
            R && Object.keys(R).forEach((I) => {
              M.setRequestHeader(I, R[I]);
            }), d.responseType && (M.responseType = d.responseType), d.abortSignal && (d.abortSignal.onabort = () => {
              M.abort(), k(new l());
            }), d.timeout && (M.timeout = d.timeout), M.onload = () => {
              d.abortSignal && (d.abortSignal.onabort = null), M.status >= 200 && M.status < 300 ? v(new g(M.status, M.statusText, M.response || M.responseText)) : k(new a(M.response || M.responseText || M.statusText, M.status));
            }, M.onerror = () => {
              this.u.log(r.Warning, `Error from HTTP request. ${M.status}: ${M.statusText}.`), k(new a(M.statusText, M.status));
            }, M.ontimeout = () => {
              this.u.log(r.Warning, "Timeout from HTTP request."), k(new c());
            }, M.send(d.content);
          }) : Promise.reject(new Error("No url defined.")) : Promise.reject(new Error("No method defined."));
        }
      };
      o(ch, "_");
      let Zt = ch;
      const lh = class lh extends x {
        constructor(d) {
          if (super(), typeof fetch < "u" || E.isNode) this.$ = new nt(d);
          else {
            if (typeof XMLHttpRequest > "u") throw new Error("No usable HttpClient found.");
            this.$ = new Zt(d);
          }
        }
        send(d) {
          return d.abortSignal && d.abortSignal.aborted ? Promise.reject(new l()) : d.method ? d.url ? this.$.send(d) : Promise.reject(new Error("No url defined.")) : Promise.reject(new Error("No method defined."));
        }
        getCookieString(d) {
          return this.$.getCookieString(d);
        }
      };
      o(lh, "H");
      let _t = lh;
      const Ar = class Ar {
        static write(d) {
          return `${d}${Ar.RecordSeparator}`;
        }
        static parse(d) {
          if (d[d.length - 1] !== Ar.RecordSeparator) throw new Error("Message is incomplete.");
          const v = d.split(Ar.RecordSeparator);
          return v.pop(), v;
        }
      };
      o(Ar, "D");
      let ft = Ar;
      ft.RecordSeparatorCode = 30, ft.RecordSeparator = String.fromCharCode(ft.RecordSeparatorCode);
      const dh = class dh {
        writeHandshakeRequest(d) {
          return ft.write(JSON.stringify(d));
        }
        parseHandshakeResponse(d) {
          let v, k;
          if (O(d)) {
            const I = new Uint8Array(d), K = I.indexOf(ft.RecordSeparatorCode);
            if (K === -1) throw new Error("Message is incomplete.");
            const Z = K + 1;
            v = String.fromCharCode.apply(null, Array.prototype.slice.call(I.slice(0, Z))), k = I.byteLength > Z ? I.slice(Z).buffer : null;
          } else {
            const I = d, K = I.indexOf(ft.RecordSeparator);
            if (K === -1) throw new Error("Message is incomplete.");
            const Z = K + 1;
            v = I.substring(0, Z), k = I.length > Z ? I.substring(Z) : null;
          }
          const M = ft.parse(v), R = JSON.parse(M[0]);
          if (R.type) throw new Error("Expected a handshake response from the server.");
          return [k, R];
        }
      };
      o(dh, "R");
      let Ot = dh;
      var tt, xt;
      (function(V) {
        V[V.Invocation = 1] = "Invocation", V[V.StreamItem = 2] = "StreamItem", V[V.Completion = 3] = "Completion", V[V.StreamInvocation = 4] = "StreamInvocation", V[V.CancelInvocation = 5] = "CancelInvocation", V[V.Ping = 6] = "Ping", V[V.Close = 7] = "Close", V[V.Ack = 8] = "Ack", V[V.Sequence = 9] = "Sequence";
      })(tt || (tt = {}));
      const hh = class hh {
        constructor() {
          this.observers = [];
        }
        next(d) {
          for (const v of this.observers) v.next(d);
        }
        error(d) {
          for (const v of this.observers) v.error && v.error(d);
        }
        complete() {
          for (const d of this.observers) d.complete && d.complete();
        }
        subscribe(d) {
          return this.observers.push(d), new B(this, d);
        }
      };
      o(hh, "U");
      let si = hh;
      const uh = class uh {
        constructor(d, v, k) {
          this.C = 1e5, this.S = [], this.k = 0, this.P = !1, this.T = 1, this.I = 0, this._ = 0, this.H = !1, this.D = d, this.R = v, this.C = k;
        }
        async A(d) {
          const v = this.D.writeMessage(d);
          let k = Promise.resolve();
          if (this.U(d)) {
            this.k++;
            let M = /* @__PURE__ */ o(() => {
            }, "t"), R = /* @__PURE__ */ o(() => {
            }, "i");
            O(v) ? this._ += v.byteLength : this._ += v.length, this._ >= this.C && (k = new Promise((I, K) => {
              M = I, R = K;
            })), this.S.push(new Li(v, this.k, M, R));
          }
          try {
            this.H || await this.R.send(v);
          } catch {
            this.L();
          }
          await k;
        }
        N(d) {
          let v = -1;
          for (let k = 0; k < this.S.length; k++) {
            const M = this.S[k];
            if (M.q <= d.sequenceId) v = k, O(M.M) ? this._ -= M.M.byteLength : this._ -= M.M.length, M.j();
            else {
              if (!(this._ < this.C)) break;
              M.j();
            }
          }
          v !== -1 && (this.S = this.S.slice(v + 1));
        }
        W(d) {
          if (this.P) return d.type === tt.Sequence && (this.P = !1, !0);
          if (!this.U(d)) return !0;
          const v = this.T;
          return this.T++, v <= this.I ? (v === this.I && this.O(), !1) : (this.I = v, this.O(), !0);
        }
        F(d) {
          d.sequenceId > this.T ? this.R.stop(new Error("Sequence ID greater than amount of messages we've received.")) : this.T = d.sequenceId;
        }
        L() {
          this.H = !0, this.P = !0;
        }
        async B() {
          const d = this.S.length !== 0 ? this.S[0].q : this.k + 1;
          await this.R.send(this.D.writeMessage({ type: tt.Sequence, sequenceId: d }));
          const v = this.S;
          for (const k of v) await this.R.send(k.M);
          this.H = !1;
        }
        X(d) {
          d != null || (d = new Error("Unable to reconnect to server."));
          for (const v of this.S) v.J(d);
        }
        U(d) {
          switch (d.type) {
            case tt.Invocation:
            case tt.StreamItem:
            case tt.Completion:
            case tt.StreamInvocation:
            case tt.CancelInvocation:
              return !0;
            case tt.Close:
            case tt.Sequence:
            case tt.Ping:
            case tt.Ack:
              return !1;
          }
        }
        O() {
          this.V === void 0 && (this.V = setTimeout(async () => {
            try {
              this.H || await this.R.send(this.D.writeMessage({ type: tt.Ack, sequenceId: this.I }));
            } catch {
            }
            clearTimeout(this.V), this.V = void 0;
          }, 1e3));
        }
      };
      o(uh, "L");
      let Be = uh;
      const ph = class ph {
        constructor(d, v, k, M) {
          this.M = d, this.q = v, this.j = k, this.J = M;
        }
      };
      o(ph, "N");
      let Li = ph;
      (function(V) {
        V.Disconnected = "Disconnected", V.Connecting = "Connecting", V.Connected = "Connected", V.Disconnecting = "Disconnecting", V.Reconnecting = "Reconnecting";
      })(xt || (xt = {}));
      const kl = class kl {
        static create(d, v, k, M, R, I, K) {
          return new kl(d, v, k, M, R, I, K);
        }
        constructor(d, v, k, M, R, I, K) {
          this.K = 0, this.G = () => {
            this.u.log(r.Warning, "The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep");
          }, P.isRequired(d, "connection"), P.isRequired(v, "logger"), P.isRequired(k, "protocol"), this.serverTimeoutInMilliseconds = R ?? 3e4, this.keepAliveIntervalInMilliseconds = I ?? 15e3, this.Y = K ?? 1e5, this.u = v, this.D = k, this.connection = d, this.Z = M, this.tt = new Ot(), this.connection.onreceive = (Z) => this.et(Z), this.connection.onclose = (Z) => this.st(Z), this.it = {}, this.nt = {}, this.rt = [], this.ot = [], this.ht = [], this.ct = 0, this.lt = !1, this.ut = xt.Disconnected, this.dt = !1, this.ft = this.D.writeMessage({ type: tt.Ping });
        }
        get state() {
          return this.ut;
        }
        get connectionId() {
          return this.connection && this.connection.connectionId || null;
        }
        get baseUrl() {
          return this.connection.baseUrl || "";
        }
        set baseUrl(d) {
          if (this.ut !== xt.Disconnected && this.ut !== xt.Reconnecting) throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");
          if (!d) throw new Error("The HubConnection url must be a valid url.");
          this.connection.baseUrl = d;
        }
        start() {
          return this.wt = this.gt(), this.wt;
        }
        async gt() {
          if (this.ut !== xt.Disconnected) return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));
          this.ut = xt.Connecting, this.u.log(r.Debug, "Starting HubConnection.");
          try {
            await this.yt(), E.isBrowser && window.document.addEventListener("freeze", this.G), this.ut = xt.Connected, this.dt = !0, this.u.log(r.Debug, "HubConnection connected successfully.");
          } catch (d) {
            return this.ut = xt.Disconnected, this.u.log(r.Debug, `HubConnection failed to start successfully because of error '${d}'.`), Promise.reject(d);
          }
        }
        async yt() {
          this.bt = void 0, this.lt = !1;
          const d = new Promise((v, k) => {
            this.vt = v, this.Et = k;
          });
          await this.connection.start(this.D.transferFormat);
          try {
            let v = this.D.version;
            this.connection.features.reconnect || (v = 1);
            const k = { protocol: this.D.name, version: v };
            if (this.u.log(r.Debug, "Sending handshake request."), await this.$t(this.tt.writeHandshakeRequest(k)), this.u.log(r.Information, `Using HubProtocol '${this.D.name}'.`), this.Ct(), this.St(), this.kt(), await d, this.bt) throw this.bt;
            this.connection.features.reconnect && (this.Pt = new Be(this.D, this.connection, this.Y), this.connection.features.disconnected = this.Pt.L.bind(this.Pt), this.connection.features.resend = () => {
              if (this.Pt) return this.Pt.B();
            }), this.connection.features.inherentKeepAlive || await this.$t(this.ft);
          } catch (v) {
            throw this.u.log(r.Debug, `Hub handshake failed with error '${v}' during start(). Stopping HubConnection.`), this.Ct(), this.Tt(), await this.connection.stop(v), v;
          }
        }
        async stop() {
          const d = this.wt;
          this.connection.features.reconnect = !1, this.It = this._t(), await this.It;
          try {
            await d;
          } catch {
          }
        }
        _t(d) {
          if (this.ut === xt.Disconnected) return this.u.log(r.Debug, `Call to HubConnection.stop(${d}) ignored because it is already in the disconnected state.`), Promise.resolve();
          if (this.ut === xt.Disconnecting) return this.u.log(r.Debug, `Call to HttpConnection.stop(${d}) ignored because the connection is already in the disconnecting state.`), this.It;
          const v = this.ut;
          return this.ut = xt.Disconnecting, this.u.log(r.Debug, "Stopping HubConnection."), this.Ht ? (this.u.log(r.Debug, "Connection stopped during reconnect delay. Done reconnecting."), clearTimeout(this.Ht), this.Ht = void 0, this.Dt(), Promise.resolve()) : (v === xt.Connected && this.Rt(), this.Ct(), this.Tt(), this.bt = d || new l("The connection was stopped before the hub handshake could complete."), this.connection.stop(d));
        }
        async Rt() {
          try {
            await this.xt(this.At());
          } catch {
          }
        }
        stream(d, ...v) {
          const [k, M] = this.Ut(v), R = this.Lt(d, v, M);
          let I;
          const K = new si();
          return K.cancelCallback = () => {
            const Z = this.Nt(R.invocationId);
            return delete this.it[R.invocationId], I.then(() => this.xt(Z));
          }, this.it[R.invocationId] = (Z, ht) => {
            ht ? K.error(ht) : Z && (Z.type === tt.Completion ? Z.error ? K.error(new Error(Z.error)) : K.complete() : K.next(Z.item));
          }, I = this.xt(R).catch((Z) => {
            K.error(Z), delete this.it[R.invocationId];
          }), this.qt(k, I), K;
        }
        $t(d) {
          return this.kt(), this.connection.send(d);
        }
        xt(d) {
          return this.Pt ? this.Pt.A(d) : this.$t(this.D.writeMessage(d));
        }
        send(d, ...v) {
          const [k, M] = this.Ut(v), R = this.xt(this.Mt(d, v, !0, M));
          return this.qt(k, R), R;
        }
        invoke(d, ...v) {
          const [k, M] = this.Ut(v), R = this.Mt(d, v, !1, M);
          return new Promise((I, K) => {
            this.it[R.invocationId] = (ht, Pt) => {
              Pt ? K(Pt) : ht && (ht.type === tt.Completion ? ht.error ? K(new Error(ht.error)) : I(ht.result) : K(new Error(`Unexpected message type: ${ht.type}`)));
            };
            const Z = this.xt(R).catch((ht) => {
              K(ht), delete this.it[R.invocationId];
            });
            this.qt(k, Z);
          });
        }
        on(d, v) {
          d && v && (d = d.toLowerCase(), this.nt[d] || (this.nt[d] = []), this.nt[d].indexOf(v) === -1 && this.nt[d].push(v));
        }
        off(d, v) {
          if (!d) return;
          d = d.toLowerCase();
          const k = this.nt[d];
          if (k) if (v) {
            const M = k.indexOf(v);
            M !== -1 && (k.splice(M, 1), k.length === 0 && delete this.nt[d]);
          } else delete this.nt[d];
        }
        onclose(d) {
          d && this.rt.push(d);
        }
        onreconnecting(d) {
          d && this.ot.push(d);
        }
        onreconnected(d) {
          d && this.ht.push(d);
        }
        et(d) {
          if (this.Ct(), this.lt || (d = this.jt(d), this.lt = !0), d) {
            const v = this.D.parseMessages(d, this.u);
            for (const k of v) if (!this.Pt || this.Pt.W(k)) switch (k.type) {
              case tt.Invocation:
                this.Wt(k).catch((M) => {
                  this.u.log(r.Error, `Invoke client method threw error: ${Y(M)}`);
                });
                break;
              case tt.StreamItem:
              case tt.Completion: {
                const M = this.it[k.invocationId];
                if (M) {
                  k.type === tt.Completion && delete this.it[k.invocationId];
                  try {
                    M(k);
                  } catch (R) {
                    this.u.log(r.Error, `Stream callback threw error: ${Y(R)}`);
                  }
                }
                break;
              }
              case tt.Ping:
                break;
              case tt.Close: {
                this.u.log(r.Information, "Close message received from server.");
                const M = k.error ? new Error("Server returned an error on close: " + k.error) : void 0;
                k.allowReconnect === !0 ? this.connection.stop(M) : this.It = this._t(M);
                break;
              }
              case tt.Ack:
                this.Pt && this.Pt.N(k);
                break;
              case tt.Sequence:
                this.Pt && this.Pt.F(k);
                break;
              default:
                this.u.log(r.Warning, `Invalid message type: ${k.type}.`);
            }
          }
          this.St();
        }
        jt(d) {
          let v, k;
          try {
            [k, v] = this.tt.parseHandshakeResponse(d);
          } catch (M) {
            const R = "Error parsing handshake response: " + M;
            this.u.log(r.Error, R);
            const I = new Error(R);
            throw this.Et(I), I;
          }
          if (v.error) {
            const M = "Server returned handshake error: " + v.error;
            this.u.log(r.Error, M);
            const R = new Error(M);
            throw this.Et(R), R;
          }
          return this.u.log(r.Debug, "Server handshake complete."), this.vt(), k;
        }
        kt() {
          this.connection.features.inherentKeepAlive || (this.K = (/* @__PURE__ */ new Date()).getTime() + this.keepAliveIntervalInMilliseconds, this.Tt());
        }
        St() {
          if (!(this.connection.features && this.connection.features.inherentKeepAlive || (this.Ot = setTimeout(() => this.serverTimeout(), this.serverTimeoutInMilliseconds), this.Ft !== void 0))) {
            let d = this.K - (/* @__PURE__ */ new Date()).getTime();
            d < 0 && (d = 0), this.Ft = setTimeout(async () => {
              if (this.ut === xt.Connected) try {
                await this.$t(this.ft);
              } catch {
                this.Tt();
              }
            }, d);
          }
        }
        serverTimeout() {
          this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."));
        }
        async Wt(d) {
          const v = d.target.toLowerCase(), k = this.nt[v];
          if (!k) return this.u.log(r.Warning, `No client method with the name '${v}' found.`), void (d.invocationId && (this.u.log(r.Warning, `No result given for '${v}' method and invocation ID '${d.invocationId}'.`), await this.xt(this.Bt(d.invocationId, "Client didn't provide a result.", null))));
          const M = k.slice(), R = !!d.invocationId;
          let I, K, Z;
          for (const ht of M) try {
            const Pt = I;
            I = await ht.apply(this, d.arguments), R && I && Pt && (this.u.log(r.Error, `Multiple results provided for '${v}'. Sending error to server.`), Z = this.Bt(d.invocationId, "Client provided multiple results.", null)), K = void 0;
          } catch (Pt) {
            K = Pt, this.u.log(r.Error, `A callback for the method '${v}' threw error '${Pt}'.`);
          }
          Z ? await this.xt(Z) : R ? (K ? Z = this.Bt(d.invocationId, `${K}`, null) : I !== void 0 ? Z = this.Bt(d.invocationId, null, I) : (this.u.log(r.Warning, `No result given for '${v}' method and invocation ID '${d.invocationId}'.`), Z = this.Bt(d.invocationId, "Client didn't provide a result.", null)), await this.xt(Z)) : I && this.u.log(r.Error, `Result given for '${v}' method but server is not expecting a result.`);
        }
        st(d) {
          this.u.log(r.Debug, `HubConnection.connectionClosed(${d}) called while in state ${this.ut}.`), this.bt = this.bt || d || new l("The underlying connection was closed before the hub handshake could complete."), this.vt && this.vt(), this.Xt(d || new Error("Invocation canceled due to the underlying connection being closed.")), this.Ct(), this.Tt(), this.ut === xt.Disconnecting ? this.Dt(d) : this.ut === xt.Connected && this.Z ? this.Jt(d) : this.ut === xt.Connected && this.Dt(d);
        }
        Dt(d) {
          if (this.dt) {
            this.ut = xt.Disconnected, this.dt = !1, this.Pt && (this.Pt.X(d ?? new Error("Connection closed.")), this.Pt = void 0), E.isBrowser && window.document.removeEventListener("freeze", this.G);
            try {
              this.rt.forEach((v) => v.apply(this, [d]));
            } catch (v) {
              this.u.log(r.Error, `An onclose callback called with error '${d}' threw error '${v}'.`);
            }
          }
        }
        async Jt(d) {
          const v = Date.now();
          let k = 0, M = d !== void 0 ? d : new Error("Attempting to reconnect due to a unknown error."), R = this.zt(k++, 0, M);
          if (R === null) return this.u.log(r.Debug, "Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."), void this.Dt(d);
          if (this.ut = xt.Reconnecting, d ? this.u.log(r.Information, `Connection reconnecting because of error '${d}'.`) : this.u.log(r.Information, "Connection reconnecting."), this.ot.length !== 0) {
            try {
              this.ot.forEach((I) => I.apply(this, [d]));
            } catch (I) {
              this.u.log(r.Error, `An onreconnecting callback called with error '${d}' threw error '${I}'.`);
            }
            if (this.ut !== xt.Reconnecting) return void this.u.log(r.Debug, "Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");
          }
          for (; R !== null; ) {
            if (this.u.log(r.Information, `Reconnect attempt number ${k} will start in ${R} ms.`), await new Promise((I) => {
              this.Ht = setTimeout(I, R);
            }), this.Ht = void 0, this.ut !== xt.Reconnecting) return void this.u.log(r.Debug, "Connection left the reconnecting state during reconnect delay. Done reconnecting.");
            try {
              if (await this.yt(), this.ut = xt.Connected, this.u.log(r.Information, "HubConnection reconnected successfully."), this.ht.length !== 0) try {
                this.ht.forEach((I) => I.apply(this, [this.connection.connectionId]));
              } catch (I) {
                this.u.log(r.Error, `An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${I}'.`);
              }
              return;
            } catch (I) {
              if (this.u.log(r.Information, `Reconnect attempt failed because of error '${I}'.`), this.ut !== xt.Reconnecting) return this.u.log(r.Debug, `Connection moved to the '${this.ut}' from the reconnecting state during reconnect attempt. Done reconnecting.`), void (this.ut === xt.Disconnecting && this.Dt());
              M = I instanceof Error ? I : new Error(I.toString()), R = this.zt(k++, Date.now() - v, M);
            }
          }
          this.u.log(r.Information, `Reconnect retries have been exhausted after ${Date.now() - v} ms and ${k} failed attempts. Connection disconnecting.`), this.Dt();
        }
        zt(d, v, k) {
          try {
            return this.Z.nextRetryDelayInMilliseconds({ elapsedMilliseconds: v, previousRetryCount: d, retryReason: k });
          } catch (M) {
            return this.u.log(r.Error, `IRetryPolicy.nextRetryDelayInMilliseconds(${d}, ${v}) threw error '${M}'.`), null;
          }
        }
        Xt(d) {
          const v = this.it;
          this.it = {}, Object.keys(v).forEach((k) => {
            const M = v[k];
            try {
              M(null, d);
            } catch (R) {
              this.u.log(r.Error, `Stream 'error' callback called with '${d}' threw error: ${Y(R)}`);
            }
          });
        }
        Tt() {
          this.Ft && (clearTimeout(this.Ft), this.Ft = void 0);
        }
        Ct() {
          this.Ot && clearTimeout(this.Ot);
        }
        Mt(d, v, k, M) {
          if (k) return M.length !== 0 ? { arguments: v, streamIds: M, target: d, type: tt.Invocation } : { arguments: v, target: d, type: tt.Invocation };
          {
            const R = this.ct;
            return this.ct++, M.length !== 0 ? { arguments: v, invocationId: R.toString(), streamIds: M, target: d, type: tt.Invocation } : { arguments: v, invocationId: R.toString(), target: d, type: tt.Invocation };
          }
        }
        qt(d, v) {
          if (d.length !== 0) {
            v || (v = Promise.resolve());
            for (const k in d) d[k].subscribe({ complete: /* @__PURE__ */ o(() => {
              v = v.then(() => this.xt(this.Bt(k)));
            }, "complete"), error: /* @__PURE__ */ o((M) => {
              let R;
              R = M instanceof Error ? M.message : M && M.toString ? M.toString() : "Unknown error", v = v.then(() => this.xt(this.Bt(k, R)));
            }, "error"), next: /* @__PURE__ */ o((M) => {
              v = v.then(() => this.xt(this.Vt(k, M)));
            }, "next") });
          }
        }
        Ut(d) {
          const v = [], k = [];
          for (let M = 0; M < d.length; M++) {
            const R = d[M];
            if (this.Kt(R)) {
              const I = this.ct;
              this.ct++, v[I] = R, k.push(I.toString()), d.splice(M, 1);
            }
          }
          return [v, k];
        }
        Kt(d) {
          return d && d.subscribe && typeof d.subscribe == "function";
        }
        Lt(d, v, k) {
          const M = this.ct;
          return this.ct++, k.length !== 0 ? { arguments: v, invocationId: M.toString(), streamIds: k, target: d, type: tt.StreamInvocation } : { arguments: v, invocationId: M.toString(), target: d, type: tt.StreamInvocation };
        }
        Nt(d) {
          return { invocationId: d, type: tt.CancelInvocation };
        }
        Vt(d, v) {
          return { invocationId: d, item: v, type: tt.StreamItem };
        }
        Bt(d, v, k) {
          return v ? { error: v, invocationId: d, type: tt.Completion } : { invocationId: d, result: k, type: tt.Completion };
        }
        At() {
          return { type: tt.Close };
        }
      };
      o(kl, "q");
      let Ii = kl;
      const dc = [0, 2e3, 1e4, 3e4, null], yh = class yh {
        constructor(d) {
          this.Gt = d !== void 0 ? [...d, null] : dc;
        }
        nextRetryDelayInMilliseconds(d) {
          return this.Gt[d.previousRetryCount];
        }
      };
      o(yh, "j");
      let fi = yh;
      const wh = class wh {
      };
      o(wh, "W");
      let bt = wh;
      bt.Authorization = "Authorization", bt.Cookie = "Cookie";
      const fh = class fh extends x {
        constructor(d, v) {
          super(), this.Qt = d, this.Yt = v;
        }
        async send(d) {
          let v = !0;
          this.Yt && (!this.Zt || d.url && d.url.indexOf("/negotiate?") > 0) && (v = !1, this.Zt = await this.Yt()), this.te(d);
          const k = await this.Qt.send(d);
          return v && k.statusCode === 401 && this.Yt ? (this.Zt = await this.Yt(), this.te(d), await this.Qt.send(d)) : k;
        }
        te(d) {
          d.headers || (d.headers = {}), this.Zt ? d.headers[bt.Authorization] = `Bearer ${this.Zt}` : this.Yt && d.headers[bt.Authorization] && delete d.headers[bt.Authorization];
        }
        getCookieString(d) {
          return this.Qt.getCookieString(d);
        }
      };
      o(fh, "O");
      let Pe = fh;
      var zt, Yt;
      (function(V) {
        V[V.None = 0] = "None", V[V.WebSockets = 1] = "WebSockets", V[V.ServerSentEvents = 2] = "ServerSentEvents", V[V.LongPolling = 4] = "LongPolling";
      })(zt || (zt = {})), function(V) {
        V[V.Text = 1] = "Text", V[V.Binary = 2] = "Binary";
      }(Yt || (Yt = {}));
      const mh = class mh {
        constructor() {
          this.ee = !1, this.onabort = null;
        }
        abort() {
          this.ee || (this.ee = !0, this.onabort && this.onabort());
        }
        get signal() {
          return this;
        }
        get aborted() {
          return this.ee;
        }
      };
      o(mh, "X");
      let Bd = mh;
      const vh = class vh {
        get pollAborted() {
          return this.se.aborted;
        }
        constructor(d, v, k) {
          this.$ = d, this.u = v, this.se = new Bd(), this.ie = k, this.ne = !1, this.onreceive = null, this.onclose = null;
        }
        async connect(d, v) {
          if (P.isRequired(d, "url"), P.isRequired(v, "transferFormat"), P.isIn(v, Yt, "transferFormat"), this.re = d, this.u.log(r.Trace, "(LongPolling transport) Connecting."), v === Yt.Binary && typeof XMLHttpRequest < "u" && typeof new XMLHttpRequest().responseType != "string") throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");
          const [k, M] = U(), R = { [k]: M, ...this.ie.headers }, I = { abortSignal: this.se.signal, headers: R, timeout: 1e5, withCredentials: this.ie.withCredentials };
          v === Yt.Binary && (I.responseType = "arraybuffer");
          const K = `${d}&_=${Date.now()}`;
          this.u.log(r.Trace, `(LongPolling transport) polling: ${K}.`);
          const Z = await this.$.get(K, I);
          Z.statusCode !== 200 ? (this.u.log(r.Error, `(LongPolling transport) Unexpected response code: ${Z.statusCode}.`), this.oe = new a(Z.statusText || "", Z.statusCode), this.ne = !1) : this.ne = !0, this.he = this.ce(this.re, I);
        }
        async ce(d, v) {
          try {
            for (; this.ne; ) try {
              const k = `${d}&_=${Date.now()}`;
              this.u.log(r.Trace, `(LongPolling transport) polling: ${k}.`);
              const M = await this.$.get(k, v);
              M.statusCode === 204 ? (this.u.log(r.Information, "(LongPolling transport) Poll terminated by server."), this.ne = !1) : M.statusCode !== 200 ? (this.u.log(r.Error, `(LongPolling transport) Unexpected response code: ${M.statusCode}.`), this.oe = new a(M.statusText || "", M.statusCode), this.ne = !1) : M.content ? (this.u.log(r.Trace, `(LongPolling transport) data received. ${N(M.content, this.ie.logMessageContent)}.`), this.onreceive && this.onreceive(M.content)) : this.u.log(r.Trace, "(LongPolling transport) Poll timed out, reissuing.");
            } catch (k) {
              this.ne ? k instanceof c ? this.u.log(r.Trace, "(LongPolling transport) Poll timed out, reissuing.") : (this.oe = k, this.ne = !1) : this.u.log(r.Trace, `(LongPolling transport) Poll errored after shutdown: ${k.message}`);
            }
          } finally {
            this.u.log(r.Trace, "(LongPolling transport) Polling complete."), this.pollAborted || this.ae();
          }
        }
        async send(d) {
          return this.ne ? F(this.u, "LongPolling", this.$, this.re, d, this.ie) : Promise.reject(new Error("Cannot send until the transport is connected"));
        }
        async stop() {
          this.u.log(r.Trace, "(LongPolling transport) Stopping polling."), this.ne = !1, this.se.abort();
          try {
            await this.he, this.u.log(r.Trace, `(LongPolling transport) sending DELETE request to ${this.re}.`);
            const d = {}, [v, k] = U();
            d[v] = k;
            const M = { headers: { ...d, ...this.ie.headers }, timeout: this.ie.timeout, withCredentials: this.ie.withCredentials };
            let R;
            try {
              await this.$.delete(this.re, M);
            } catch (I) {
              R = I;
            }
            R ? R instanceof a && (R.statusCode === 404 ? this.u.log(r.Trace, "(LongPolling transport) A 404 response was returned from sending a DELETE request.") : this.u.log(r.Trace, `(LongPolling transport) Error sending a DELETE request: ${R}`)) : this.u.log(r.Trace, "(LongPolling transport) DELETE request accepted.");
          } finally {
            this.u.log(r.Trace, "(LongPolling transport) Stop finished."), this.ae();
          }
        }
        ae() {
          if (this.onclose) {
            let d = "(LongPolling transport) Firing onclose event.";
            this.oe && (d += " Error: " + this.oe), this.u.log(r.Trace, d), this.onclose(this.oe);
          }
        }
      };
      o(vh, "J");
      let $l = vh;
      const gh = class gh {
        constructor(d, v, k, M) {
          this.$ = d, this.Zt = v, this.u = k, this.ie = M, this.onreceive = null, this.onclose = null;
        }
        async connect(d, v) {
          return P.isRequired(d, "url"), P.isRequired(v, "transferFormat"), P.isIn(v, Yt, "transferFormat"), this.u.log(r.Trace, "(SSE transport) Connecting."), this.re = d, this.Zt && (d += (d.indexOf("?") < 0 ? "?" : "&") + `access_token=${encodeURIComponent(this.Zt)}`), new Promise((k, M) => {
            let R, I = !1;
            if (v === Yt.Text) {
              if (E.isBrowser || E.isWebWorker) R = new this.ie.EventSource(d, { withCredentials: this.ie.withCredentials });
              else {
                const K = this.$.getCookieString(d), Z = {};
                Z.Cookie = K;
                const [ht, Pt] = U();
                Z[ht] = Pt, R = new this.ie.EventSource(d, { withCredentials: this.ie.withCredentials, headers: { ...Z, ...this.ie.headers } });
              }
              try {
                R.onmessage = (K) => {
                  if (this.onreceive) try {
                    this.u.log(r.Trace, `(SSE transport) data received. ${N(K.data, this.ie.logMessageContent)}.`), this.onreceive(K.data);
                  } catch (Z) {
                    return void this.le(Z);
                  }
                }, R.onerror = (K) => {
                  I ? this.le() : M(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."));
                }, R.onopen = () => {
                  this.u.log(r.Information, `SSE connected to ${this.re}`), this.ue = R, I = !0, k();
                };
              } catch (K) {
                return void M(K);
              }
            } else M(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));
          });
        }
        async send(d) {
          return this.ue ? F(this.u, "SSE", this.$, this.re, d, this.ie) : Promise.reject(new Error("Cannot send until the transport is connected"));
        }
        stop() {
          return this.le(), Promise.resolve();
        }
        le(d) {
          this.ue && (this.ue.close(), this.ue = void 0, this.onclose && this.onclose(d));
        }
      };
      o(gh, "z");
      let Ud = gh;
      const bh = class bh {
        constructor(d, v, k, M, R, I) {
          this.u = k, this.Yt = v, this.de = M, this.fe = R, this.$ = d, this.onreceive = null, this.onclose = null, this.pe = I;
        }
        async connect(d, v) {
          let k;
          return P.isRequired(d, "url"), P.isRequired(v, "transferFormat"), P.isIn(v, Yt, "transferFormat"), this.u.log(r.Trace, "(WebSockets transport) Connecting."), this.Yt && (k = await this.Yt()), new Promise((M, R) => {
            let I;
            d = d.replace(/^http/, "ws");
            const K = this.$.getCookieString(d);
            let Z = !1;
            if (E.isNode || E.isReactNative) {
              const ht = {}, [Pt, Er] = U();
              ht[Pt] = Er, k && (ht[bt.Authorization] = `Bearer ${k}`), K && (ht[bt.Cookie] = K), I = new this.fe(d, void 0, { headers: { ...ht, ...this.pe } });
            } else k && (d += (d.indexOf("?") < 0 ? "?" : "&") + `access_token=${encodeURIComponent(k)}`);
            I || (I = new this.fe(d)), v === Yt.Binary && (I.binaryType = "arraybuffer"), I.onopen = (ht) => {
              this.u.log(r.Information, `WebSocket connected to ${d}.`), this.we = I, Z = !0, M();
            }, I.onerror = (ht) => {
              let Pt = null;
              Pt = typeof ErrorEvent < "u" && ht instanceof ErrorEvent ? ht.error : "There was an error with the transport", this.u.log(r.Information, `(WebSockets transport) ${Pt}.`);
            }, I.onmessage = (ht) => {
              if (this.u.log(r.Trace, `(WebSockets transport) data received. ${N(ht.data, this.de)}.`), this.onreceive) try {
                this.onreceive(ht.data);
              } catch (Pt) {
                return void this.le(Pt);
              }
            }, I.onclose = (ht) => {
              if (Z) this.le(ht);
              else {
                let Pt = null;
                Pt = typeof ErrorEvent < "u" && ht instanceof ErrorEvent ? ht.error : "WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.", R(new Error(Pt));
              }
            };
          });
        }
        send(d) {
          return this.we && this.we.readyState === this.fe.OPEN ? (this.u.log(r.Trace, `(WebSockets transport) sending data. ${N(d, this.de)}.`), this.we.send(d), Promise.resolve()) : Promise.reject("WebSocket is not in the OPEN state");
        }
        stop() {
          return this.we && this.le(void 0), Promise.resolve();
        }
        le(d) {
          this.we && (this.we.onclose = () => {
          }, this.we.onmessage = () => {
          }, this.we.onerror = () => {
          }, this.we.close(), this.we = void 0), this.u.log(r.Trace, "(WebSockets transport) socket closed."), this.onclose && (!this.ge(d) || d.wasClean !== !1 && d.code === 1e3 ? d instanceof Error ? this.onclose(d) : this.onclose() : this.onclose(new Error(`WebSocket closed with status code: ${d.code} (${d.reason || "no reason given"}).`)));
        }
        ge(d) {
          return d && typeof d.wasClean == "boolean" && typeof d.code == "number";
        }
      };
      o(bh, "V");
      let qd = bh;
      const xh = class xh {
        constructor(d, v = {}) {
          var k;
          if (this.me = () => {
          }, this.features = {}, this.ye = 1, P.isRequired(d, "url"), this.u = (k = v.logger) === void 0 ? new D(r.Information) : k === null ? z.instance : k.log !== void 0 ? k : new D(k), this.baseUrl = this.be(d), (v = v || {}).logMessageContent = v.logMessageContent !== void 0 && v.logMessageContent, typeof v.withCredentials != "boolean" && v.withCredentials !== void 0) throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");
          v.withCredentials = v.withCredentials === void 0 || v.withCredentials, v.timeout = v.timeout === void 0 ? 1e5 : v.timeout;
          let M = null, R = null;
          if (E.isNode) {
            const I = Mh;
            M = I("ws"), R = I("eventsource");
          }
          E.isNode || typeof WebSocket > "u" || v.WebSocket ? E.isNode && !v.WebSocket && M && (v.WebSocket = M) : v.WebSocket = WebSocket, E.isNode || typeof EventSource > "u" || v.EventSource ? E.isNode && !v.EventSource && R !== void 0 && (v.EventSource = R) : v.EventSource = EventSource, this.$ = new Pe(v.httpClient || new _t(this.u), v.accessTokenFactory), this.ut = "Disconnected", this.dt = !1, this.ie = v, this.onreceive = null, this.onclose = null;
        }
        async start(d) {
          if (d = d || Yt.Binary, P.isIn(d, Yt, "transferFormat"), this.u.log(r.Debug, `Starting connection with transfer format '${Yt[d]}'.`), this.ut !== "Disconnected") return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));
          if (this.ut = "Connecting", this.ve = this.yt(d), await this.ve, this.ut === "Disconnecting") {
            const v = "Failed to start the HttpConnection before stop() was called.";
            return this.u.log(r.Error, v), await this.It, Promise.reject(new l(v));
          }
          if (this.ut !== "Connected") {
            const v = "HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";
            return this.u.log(r.Error, v), Promise.reject(new l(v));
          }
          this.dt = !0;
        }
        send(d) {
          return this.ut !== "Connected" ? Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")) : (this.Ee || (this.Ee = new jd(this.transport)), this.Ee.send(d));
        }
        async stop(d) {
          return this.ut === "Disconnected" ? (this.u.log(r.Debug, `Call to HttpConnection.stop(${d}) ignored because the connection is already in the disconnected state.`), Promise.resolve()) : this.ut === "Disconnecting" ? (this.u.log(r.Debug, `Call to HttpConnection.stop(${d}) ignored because the connection is already in the disconnecting state.`), this.It) : (this.ut = "Disconnecting", this.It = new Promise((v) => {
            this.me = v;
          }), await this._t(d), void await this.It);
        }
        async _t(d) {
          this.$e = d;
          try {
            await this.ve;
          } catch {
          }
          if (this.transport) {
            try {
              await this.transport.stop();
            } catch (v) {
              this.u.log(r.Error, `HttpConnection.transport.stop() threw error '${v}'.`), this.Ce();
            }
            this.transport = void 0;
          } else this.u.log(r.Debug, "HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.");
        }
        async yt(d) {
          let v = this.baseUrl;
          this.Yt = this.ie.accessTokenFactory, this.$.Yt = this.Yt;
          try {
            if (this.ie.skipNegotiation) {
              if (this.ie.transport !== zt.WebSockets) throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");
              this.transport = this.Se(zt.WebSockets), await this.ke(v, d);
            } else {
              let k = null, M = 0;
              do {
                if (k = await this.Pe(v), this.ut === "Disconnecting" || this.ut === "Disconnected") throw new l("The connection was stopped during negotiation.");
                if (k.error) throw new Error(k.error);
                if (k.ProtocolVersion) throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");
                if (k.url && (v = k.url), k.accessToken) {
                  const R = k.accessToken;
                  this.Yt = () => R, this.$.Zt = R, this.$.Yt = void 0;
                }
                M++;
              } while (k.url && M < 100);
              if (M === 100 && k.url) throw new Error("Negotiate redirection limit exceeded.");
              await this.Te(v, this.ie.transport, k, d);
            }
            this.transport instanceof $l && (this.features.inherentKeepAlive = !0), this.ut === "Connecting" && (this.u.log(r.Debug, "The HttpConnection connected successfully."), this.ut = "Connected");
          } catch (k) {
            return this.u.log(r.Error, "Failed to start the connection: " + k), this.ut = "Disconnected", this.transport = void 0, this.me(), Promise.reject(k);
          }
        }
        async Pe(d) {
          const v = {}, [k, M] = U();
          v[k] = M;
          const R = this.Ie(d);
          this.u.log(r.Debug, `Sending negotiation request: ${R}.`);
          try {
            const I = await this.$.post(R, { content: "", headers: { ...v, ...this.ie.headers }, timeout: this.ie.timeout, withCredentials: this.ie.withCredentials });
            if (I.statusCode !== 200) return Promise.reject(new Error(`Unexpected status code returned from negotiate '${I.statusCode}'`));
            const K = JSON.parse(I.content);
            return (!K.negotiateVersion || K.negotiateVersion < 1) && (K.connectionToken = K.connectionId), K.useStatefulReconnect && this.ie._e !== !0 ? Promise.reject(new b("Client didn't negotiate Stateful Reconnect but the server did.")) : K;
          } catch (I) {
            let K = "Failed to complete negotiation with the server: " + I;
            return I instanceof a && I.statusCode === 404 && (K += " Either this is not a SignalR endpoint or there is a proxy blocking the connection."), this.u.log(r.Error, K), Promise.reject(new b(K));
          }
        }
        He(d, v) {
          return v ? d + (d.indexOf("?") === -1 ? "?" : "&") + `id=${v}` : d;
        }
        async Te(d, v, k, M) {
          let R = this.He(d, k.connectionToken);
          if (this.De(v)) return this.u.log(r.Debug, "Connection was provided an instance of ITransport, using that directly."), this.transport = v, await this.ke(R, M), void (this.connectionId = k.connectionId);
          const I = [], K = k.availableTransports || [];
          let Z = k;
          for (const ht of K) {
            const Pt = this.Re(ht, v, M, (Z == null ? void 0 : Z.useStatefulReconnect) === !0);
            if (Pt instanceof Error) I.push(`${ht.transport} failed:`), I.push(Pt);
            else if (this.De(Pt)) {
              if (this.transport = Pt, !Z) {
                try {
                  Z = await this.Pe(d);
                } catch (Er) {
                  return Promise.reject(Er);
                }
                R = this.He(d, Z.connectionToken);
              }
              try {
                return await this.ke(R, M), void (this.connectionId = Z.connectionId);
              } catch (Er) {
                if (this.u.log(r.Error, `Failed to start the transport '${ht.transport}': ${Er}`), Z = void 0, I.push(new w(`${ht.transport} failed: ${Er}`, zt[ht.transport])), this.ut !== "Connecting") {
                  const Jp = "Failed to select transport before stop() was called.";
                  return this.u.log(r.Debug, Jp), Promise.reject(new l(Jp));
                }
              }
            }
          }
          return I.length > 0 ? Promise.reject(new m(`Unable to connect to the server with any of the available transports. ${I.join(" ")}`, I)) : Promise.reject(new Error("None of the transports supported by the client are supported by the server."));
        }
        Se(d) {
          switch (d) {
            case zt.WebSockets:
              if (!this.ie.WebSocket) throw new Error("'WebSocket' is not supported in your environment.");
              return new qd(this.$, this.Yt, this.u, this.ie.logMessageContent, this.ie.WebSocket, this.ie.headers || {});
            case zt.ServerSentEvents:
              if (!this.ie.EventSource) throw new Error("'EventSource' is not supported in your environment.");
              return new Ud(this.$, this.$.Zt, this.u, this.ie);
            case zt.LongPolling:
              return new $l(this.$, this.u, this.ie);
            default:
              throw new Error(`Unknown transport: ${d}.`);
          }
        }
        ke(d, v) {
          return this.transport.onreceive = this.onreceive, this.features.reconnect ? this.transport.onclose = async (k) => {
            let M = !1;
            if (this.features.reconnect) {
              try {
                this.features.disconnected(), await this.transport.connect(d, v), await this.features.resend();
              } catch {
                M = !0;
              }
              M && this.Ce(k);
            } else this.Ce(k);
          } : this.transport.onclose = (k) => this.Ce(k), this.transport.connect(d, v);
        }
        Re(d, v, k, M) {
          const R = zt[d.transport];
          if (R == null) return this.u.log(r.Debug, `Skipping transport '${d.transport}' because it is not supported by this client.`), new Error(`Skipping transport '${d.transport}' because it is not supported by this client.`);
          if (!function(I, K) {
            return !I || (K & I) != 0;
          }(v, R)) return this.u.log(r.Debug, `Skipping transport '${zt[R]}' because it was disabled by the client.`), new p(`'${zt[R]}' is disabled by the client.`, R);
          if (!(d.transferFormats.map((I) => Yt[I]).indexOf(k) >= 0)) return this.u.log(r.Debug, `Skipping transport '${zt[R]}' because it does not support the requested transfer format '${Yt[k]}'.`), new Error(`'${zt[R]}' does not support ${Yt[k]}.`);
          if (R === zt.WebSockets && !this.ie.WebSocket || R === zt.ServerSentEvents && !this.ie.EventSource) return this.u.log(r.Debug, `Skipping transport '${zt[R]}' because it is not supported in your environment.'`), new u(`'${zt[R]}' is not supported in your environment.`, R);
          this.u.log(r.Debug, `Selecting transport '${zt[R]}'.`);
          try {
            return this.features.reconnect = R === zt.WebSockets ? M : void 0, this.Se(R);
          } catch (I) {
            return I;
          }
        }
        De(d) {
          return d && typeof d == "object" && "connect" in d;
        }
        Ce(d) {
          if (this.u.log(r.Debug, `HttpConnection.stopConnection(${d}) called while in state ${this.ut}.`), this.transport = void 0, d = this.$e || d, this.$e = void 0, this.ut !== "Disconnected") {
            if (this.ut === "Connecting") throw this.u.log(r.Warning, `Call to HttpConnection.stopConnection(${d}) was ignored because the connection is still in the connecting state.`), new Error(`HttpConnection.stopConnection(${d}) was called while the connection is still in the connecting state.`);
            if (this.ut === "Disconnecting" && this.me(), d ? this.u.log(r.Error, `Connection disconnected with error '${d}'.`) : this.u.log(r.Information, "Connection disconnected."), this.Ee && (this.Ee.stop().catch((v) => {
              this.u.log(r.Error, `TransportSendQueue.stop() threw error '${v}'.`);
            }), this.Ee = void 0), this.connectionId = void 0, this.ut = "Disconnected", this.dt) {
              this.dt = !1;
              try {
                this.onclose && this.onclose(d);
              } catch (v) {
                this.u.log(r.Error, `HttpConnection.onclose(${d}) threw error '${v}'.`);
              }
            }
          } else this.u.log(r.Debug, `Call to HttpConnection.stopConnection(${d}) was ignored because the connection is already in the disconnected state.`);
        }
        be(d) {
          if (d.lastIndexOf("https://", 0) === 0 || d.lastIndexOf("http://", 0) === 0) return d;
          if (!E.isBrowser) throw new Error(`Cannot resolve '${d}'.`);
          const v = window.document.createElement("a");
          return v.href = d, this.u.log(r.Information, `Normalizing '${d}' to '${v.href}'.`), v.href;
        }
        Ie(d) {
          const v = new URL(d);
          v.pathname.endsWith("/") ? v.pathname += "negotiate" : v.pathname += "/negotiate";
          const k = new URLSearchParams(v.searchParams);
          return k.has("negotiateVersion") || k.append("negotiateVersion", this.ye.toString()), k.has("useStatefulReconnect") ? k.get("useStatefulReconnect") === "true" && (this.ie._e = !0) : this.ie._e === !0 && k.append("useStatefulReconnect", "true"), v.search = k.toString(), v.toString();
        }
      };
      o(xh, "K");
      let Nd = xh;
      const _l = class _l {
        constructor(d) {
          this.xe = d, this.Ae = [], this.Ue = !0, this.Le = new Pr(), this.Ne = new Pr(), this.qe = this.Me();
        }
        send(d) {
          return this.je(d), this.Ne || (this.Ne = new Pr()), this.Ne.promise;
        }
        stop() {
          return this.Ue = !1, this.Le.resolve(), this.qe;
        }
        je(d) {
          if (this.Ae.length && typeof this.Ae[0] != typeof d) throw new Error(`Expected data to be of type ${typeof this.Ae} but was of type ${typeof d}`);
          this.Ae.push(d), this.Le.resolve();
        }
        async Me() {
          for (; ; ) {
            if (await this.Le.promise, !this.Ue) {
              this.Ne && this.Ne.reject("Connection stopped.");
              break;
            }
            this.Le = new Pr();
            const d = this.Ne;
            this.Ne = void 0;
            const v = typeof this.Ae[0] == "string" ? this.Ae.join("") : _l.We(this.Ae);
            this.Ae.length = 0;
            try {
              await this.xe.send(v), d.resolve();
            } catch (k) {
              d.reject(k);
            }
          }
        }
        static We(d) {
          const v = d.map((R) => R.byteLength).reduce((R, I) => R + I), k = new Uint8Array(v);
          let M = 0;
          for (const R of d) k.set(new Uint8Array(R), M), M += R.byteLength;
          return k.buffer;
        }
      };
      o(_l, "G");
      let jd = _l;
      const $h = class $h {
        constructor() {
          this.promise = new Promise((d, v) => [this.j, this.Oe] = [d, v]);
        }
        resolve() {
          this.j();
        }
        reject(d) {
          this.Oe(d);
        }
      };
      o($h, "Q");
      let Pr = $h;
      const Ch = class Ch {
        constructor() {
          this.name = "json", this.version = 2, this.transferFormat = Yt.Text;
        }
        parseMessages(d, v) {
          if (typeof d != "string") throw new Error("Invalid input for JSON hub protocol. Expected a string.");
          if (!d) return [];
          v === null && (v = z.instance);
          const k = ft.parse(d), M = [];
          for (const R of k) {
            const I = JSON.parse(R);
            if (typeof I.type != "number") throw new Error("Invalid payload.");
            switch (I.type) {
              case tt.Invocation:
                this.U(I);
                break;
              case tt.StreamItem:
                this.Fe(I);
                break;
              case tt.Completion:
                this.Be(I);
                break;
              case tt.Ping:
              case tt.Close:
                break;
              case tt.Ack:
                this.Xe(I);
                break;
              case tt.Sequence:
                this.Je(I);
                break;
              default:
                v.log(r.Information, "Unknown message type '" + I.type + "' ignored.");
                continue;
            }
            M.push(I);
          }
          return M;
        }
        writeMessage(d) {
          return ft.write(JSON.stringify(d));
        }
        U(d) {
          this.ze(d.target, "Invalid payload for Invocation message."), d.invocationId !== void 0 && this.ze(d.invocationId, "Invalid payload for Invocation message.");
        }
        Fe(d) {
          if (this.ze(d.invocationId, "Invalid payload for StreamItem message."), d.item === void 0) throw new Error("Invalid payload for StreamItem message.");
        }
        Be(d) {
          if (d.result && d.error) throw new Error("Invalid payload for Completion message.");
          !d.result && d.error && this.ze(d.error, "Invalid payload for Completion message."), this.ze(d.invocationId, "Invalid payload for Completion message.");
        }
        Xe(d) {
          if (typeof d.sequenceId != "number") throw new Error("Invalid SequenceId for Ack message.");
        }
        Je(d) {
          if (typeof d.sequenceId != "number") throw new Error("Invalid SequenceId for Sequence message.");
        }
        ze(d, v) {
          if (typeof d != "string" || d === "") throw new Error(v);
        }
      };
      o(Ch, "Y");
      let Cl = Ch;
      const Vm = { trace: r.Trace, debug: r.Debug, info: r.Information, information: r.Information, warn: r.Warning, warning: r.Warning, error: r.Error, critical: r.Critical, none: r.None }, kh = class kh {
        configureLogging(d) {
          if (P.isRequired(d, "logging"), d.log !== void 0) this.logger = d;
          else if (typeof d == "string") {
            const v = function(k) {
              const M = Vm[k.toLowerCase()];
              if (M !== void 0) return M;
              throw new Error(`Unknown log level: ${k}`);
            }(d);
            this.logger = new D(v);
          } else this.logger = new D(d);
          return this;
        }
        withUrl(d, v) {
          return P.isRequired(d, "url"), P.isNotEmpty(d, "url"), this.url = d, this.httpConnectionOptions = typeof v == "object" ? { ...this.httpConnectionOptions, ...v } : { ...this.httpConnectionOptions, transport: v }, this;
        }
        withHubProtocol(d) {
          return P.isRequired(d, "protocol"), this.protocol = d, this;
        }
        withAutomaticReconnect(d) {
          if (this.reconnectPolicy) throw new Error("A reconnectPolicy has already been set.");
          return d ? Array.isArray(d) ? this.reconnectPolicy = new fi(d) : this.reconnectPolicy = d : this.reconnectPolicy = new fi(), this;
        }
        withServerTimeout(d) {
          return P.isRequired(d, "milliseconds"), this.Ve = d, this;
        }
        withKeepAliveInterval(d) {
          return P.isRequired(d, "milliseconds"), this.Ke = d, this;
        }
        withStatefulReconnect(d) {
          return this.httpConnectionOptions === void 0 && (this.httpConnectionOptions = {}), this.httpConnectionOptions._e = !0, this.Y = d == null ? void 0 : d.bufferSize, this;
        }
        build() {
          const d = this.httpConnectionOptions || {};
          if (d.logger === void 0 && (d.logger = this.logger), !this.url) throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");
          const v = new Nd(this.url, d);
          return Ii.create(v, this.logger || z.instance, this.protocol || new Cl(), this.reconnectPolicy, this.Ve, this.Ke, this.Y);
        }
      };
      o(kh, "tt");
      let Wd = kh;
      return Uint8Array.prototype.indexOf || Object.defineProperty(Uint8Array.prototype, "indexOf", { value: Array.prototype.indexOf, writable: !0 }), Uint8Array.prototype.slice || Object.defineProperty(Uint8Array.prototype, "slice", { value: /* @__PURE__ */ o(function(V, d) {
        return new Uint8Array(Array.prototype.slice.call(this, V, d));
      }, "value"), writable: !0 }), Uint8Array.prototype.forEach || Object.defineProperty(Uint8Array.prototype, "forEach", { value: Array.prototype.forEach, writable: !0 }), n;
    })(), "e"), s.exports = e();
  }(Ph)), Ph.exports;
}
o(jv, "requireSignalr_min");
var dy = /* @__PURE__ */ jv();
const Wv = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i), this._whenConnectionRequested = new Promise((r) => {
        this._resolveConnectionRequested = r;
      }), this._whenConnectionCreated = new Promise((r) => {
        this._resolveConnectionCreated = r;
      }), this._connectionEventListeners = [], this.signalRAccessTokenRefresh = !1, this._whenConnectionStarted = new Promise((r, n) => {
        this._whenConnectionStartedResolve = r, this._whenConnectionStartedReject = n;
      }), this.whenConnectionRequested().then(() => {
        this.isDestroyed || this.createConnection();
      });
    }
    async whenConnectionRequested() {
      await this._whenConnectionRequested;
    }
    async whenConnectionCreated() {
      return await this._whenConnectionCreated;
    }
    get rtmConnection() {
      return this._connection;
    }
    async whenConnectionStarted() {
      return await this._whenConnectionStarted;
    }
    async createConnection() {
      var i;
      if (this.isDestroyed)
        throw new Ht();
      if (this.networkStateIsPending = !0, await this.whenUrlAndTokenFactory(), this._connection) {
        const r = new URL("/hubs/rtm", this.url);
        this._connection.baseUrl !== r.toString() && (this.connectionState = "reconnecting", console.info(
          this.weavyId,
          "Reconnecting due to changed url.",
          this._connection.baseUrl,
          "=>",
          r.toString()
        ), await this.disconnect(), this._connection.baseUrl = r.toString(), this.connect());
      } else {
        this.connectionState = "connecting";
        const r = new URL("/hubs/rtm", this.url);
        this._connection = new dy.HubConnectionBuilder().configureLogging(dy.LogLevel.None).withUrl(r.toString(), {
          accessTokenFactory: /* @__PURE__ */ o(async () => {
            try {
              if (this.signalRAccessTokenRefresh) {
                const n = await this.getToken(!0);
                return this.signalRAccessTokenRefresh = !1, n;
              } else
                return await this.getToken();
            } catch (n) {
              throw console.error(n), n;
            }
          }, "accessTokenFactory")
        }).withAutomaticReconnect({
          nextRetryDelayInMilliseconds: /* @__PURE__ */ o((n) => !this.isDestroyed && window.navigator.onLine && (document == null ? void 0 : document.visibilityState) !== "hidden" && n.elapsedMilliseconds < 6e4 ? [0, 2e3, 1e4][n.previousRetryCount] || 1e4 : null, "nextRetryDelayInMilliseconds")
        }).build(), this._connection.onclose(() => {
          console.info(this.weavyId, "SignalR closed."), this.connectionState = "disconnected", !this.isDestroyed && (this.networkStateIsPending = !0, this._whenConnectionStarted = new Promise((n, a) => {
            this._whenConnectionStartedResolve = n, this._whenConnectionStartedReject = a;
          }), this.connect());
        }), this._connection.onreconnecting(() => {
          console.info(this.weavyId, "SignalR reconnecting..."), this.connectionState = "reconnecting";
        }), this._connection.onreconnected((n) => {
          var a;
          console.info(this.weavyId, `SignalR reconnected ${n}`), this.connectionState = "connected", this.networkStateIsPending = !1;
          for (let c = 0; c < this._connectionEventListeners.length; c++)
            (a = this._connection) == null || a.invoke("Subscribe", this._connectionEventListeners[c].name);
        }), (i = this._resolveConnectionCreated) == null || i.call(this, this._connection), this.connect();
      }
      return this._connection;
    }
    async disconnect() {
      this._connection && (await this._connection.stop(), this.connectionState = "disconnected");
    }
    async connect() {
      var r;
      if (this.isDestroyed)
        throw new Ht();
      let i;
      this._connection ? i = this._connection : i = await this.whenConnectionCreated(), console.info(this.weavyId, "Connecting SignalR...");
      try {
        if (!window.navigator.onLine)
          throw new Error();
        await Promise.race([i.start(), this.whenConnectionStarted()]), this.signalRAccessTokenRefresh = !1, this.networkStateIsPending = !1, this.connectionState = "connected", (r = this._whenConnectionStartedResolve) == null || r.call(this, i), console.info(this.weavyId, `SignalR connected ${i.connectionId}`);
      } catch (n) {
        if (n instanceof Ht)
          return console.warn(this.weavyId, "SignalR connection aborted."), i;
        window.navigator.onLine ? !this.signalRAccessTokenRefresh && window.document.visibilityState !== "hidden" && n.toString().includes("Unauthorized") ? (console.info(this.weavyId, "Retrying SignalR connect with fresh token."), this.signalRAccessTokenRefresh = !0) : (console.info(
          this.weavyId,
          "Server is probably down, retrying SignalR connect after a delay or when window regains focus."
        ), this.connectionState = "reconnecting", await new Promise((a) => {
          setTimeout(a, 5e3), window.addEventListener("visibilitychange", a, { once: !0 }), window.addEventListener("offline", a, { once: !0 }), window.addEventListener("online", a, { once: !0 });
        })) : (this.networkStateIsPending = !1, console.info(this.weavyId, "Offline, reconnecting SignalR when online."), await new Promise((a) => {
          window.addEventListener("online", a, { once: !0 });
        })), window.navigator.onLine && (document == null ? void 0 : document.visibilityState) !== "hidden" && await new Promise((a) => setTimeout(a, 1e3)), this.checkVersion(), this.networkStateIsPending = !0, await this.connect();
      }
      return i;
    }
    async subscribe(i, r, n) {
      var c, l;
      if (this.isDestroyed)
        throw new Ht();
      (c = this._resolveConnectionRequested) == null || c.call(this, !0);
      const a = i ? i + ":" + r : r;
      try {
        if (this._connectionEventListeners || await new Promise((p) => queueMicrotask(() => p(!0))), this._connectionEventListeners.some((p) => p.name === a && p.callback === n))
          throw new Error("Duplicate subscribe: " + a);
        if (this._connectionEventListeners.push({ name: a, callback: n }), await this.whenConnectionStarted(), !this._connection)
          throw new Error("Connection not created");
        if (this._connection.on(a, n), await this._connection.invoke("Subscribe", a) === !1)
          throw new Error("Could not subscribe to " + a);
        return !0;
      } catch (u) {
        u instanceof Ht || console.error(this.weavyId, "Error in Subscribe:", u);
        const p = this._connectionEventListeners.findIndex((w) => w.name === a && w.callback === n);
        return p !== -1 && (this._connectionEventListeners.splice(p, 1), (l = this._connection) == null || l.off(a, n)), !1;
      }
    }
    async unsubscribe(i, r, n) {
      var a;
      if (this.isDestroyed)
        throw new Ht();
      try {
        const c = i ? i + ":" + r : r, l = this._connectionEventListeners.findIndex((u) => u.name === c && u.callback === n);
        if (l !== -1) {
          if (this._connectionEventListeners.splice(l, 1), await this.whenConnectionStarted(), !this._connection)
            throw new Error("Connection not created");
          (a = this._connection) == null || a.off(c, n), this._connectionEventListeners.some((u) => u.name === c) || await this._connection.invoke("Unsubscribe", c);
        }
      } catch (c) {
        c instanceof Ht || console.error(this.weavyId, "Error in Unsubscribe:", c);
      }
    }
    destroy() {
      super.destroy(), this.disconnect(), this._whenConnectionStartedReject && (this._whenConnectionStarted.catch(() => {
      }), this._whenConnectionStartedReject(new Ht()));
    }
  }, o(t, "WeavyConnection"), t;
}, "WeavyConnectionMixin");
var Ul = /* @__PURE__ */ ((s) => (s.JSON = "application/json;charset=utf-8", s.FormData = "multipart/form-data;charset=utf-8", s.URLEncoded = "application/x-www-form-urlencoded;charset=utf-8", s.Text = "text/plain;charset=utf-8", s.Auto = "", s))(Ul || {});
const Qv = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // FETCH
    async fetchOptions(i = {}, r = !0) {
      if (this.isDestroyed)
        throw new Ht();
      const n = {
        headers: {
          "X-Weavy-Source": `${Rt.sourceName}@${Rt.version}`,
          "Content-Type": Ul.JSON
        },
        method: "GET"
      }, a = El(El(av, n, !0), i, !0);
      return r ? El(
        a,
        {
          headers: {
            Authorization: "Bearer " + await this.getToken()
          }
        },
        !0
      ) : a;
    }
    async fetch(i, r, n = !0) {
      if (this.isDestroyed)
        throw new Ht();
      const a = await this.fetchOptions(r);
      this.networkStateIsPending = !0;
      const c = await fetch(new URL(i, this.url), a);
      if (c.ok)
        this.networkStateIsPending = !1, this.serverState = "ok";
      else if (c.status === 401 || c.status === 403) {
        if (n)
          return await this.getToken(!0), await this.fetch(i, r, !1);
        this.networkStateIsPending = !1, this.serverState = "unauthorized";
      } else
        this.networkStateIsPending = !1;
      return c;
    }
    async upload(i, r, n, a = Ul.JSON, c, l = !0) {
      if (this.isDestroyed)
        throw new Ht();
      const u = await this.getToken();
      return await new Promise((p, w) => {
        const b = new XMLHttpRequest();
        b.open(r, new URL(i, this.url), !0), b.setRequestHeader("Authorization", "Bearer " + u), b.setRequestHeader("X-Weavy-Source", `${Rt.sourceName}@${Rt.version}`), a && b.setRequestHeader("Content-Type", a), c && b.upload.addEventListener("progress", (m) => {
          c(m.loaded / m.total * 100 || 100);
        }), b.onload = (m) => {
          l && (b.status === 401 || b.status === 401) ? this.getToken(!0).then(() => this.upload(i, r, n, a, c, !1)).then(p).catch(w) : p(new Response(b.response, { status: b.status, statusText: b.statusText }));
        }, b.onerror = w, b.send(n);
      });
    }
    // DEPRECATED
    async get(i) {
      return console.warn(`weavy.get() is deprecated, use weavy.fetch("${i}") instead.`), this.fetch(i);
    }
    // DEPRECATED
    async post(i, r, n, a) {
      console.warn(
        `weavy.post() is deprecated, use weavy.fetch("${i}", { method: "${r}"}) instead.`
      );
      const c = a ? { "Content-Type": a } : void 0;
      return this.fetch(i, { method: r, body: n, headers: c });
    }
  }, o(t, "WeavyFetch"), t;
}, "WeavyFetchMixin"), Dw = "en", Kv = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    constructor() {
      super(...arguments), this._locales = /* @__PURE__ */ new Map([
        ["sv-SE", () => import(
          /* webpackIgnore: true */
          /* @vite-ignore */
          new URL("./es/locales/sv-SE.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
        ).then((i) => i.svSE)]
      ]), this._locale = t.sourceLocale;
    }
    /**
     * The locale used in the Weavy source.
     */
    static get sourceLocale() {
      try {
        return Dw;
      } catch {
        return "";
      }
    }
    get locales() {
      return Array.from(this._locales.entries());
    }
    set locales(i) {
      if (this.isDestroyed)
        throw new Ht();
      if (this.localization)
        throw new Error("Locales may only be configured once");
      if (i) {
        if (!Array.isArray(i))
          throw new TypeError("Provided locales have invalid format.");
        i.forEach((r) => {
          if (!Array.isArray(r) || r.length !== 2 || typeof r[0] != "string")
            throw new TypeError("Invalid locale provided: " + r[0]);
          this._locales.set(...r);
        }), this.configureLocalization();
      }
    }
    get localization() {
      return this._localization;
    }
    /**
     * Selected locale. The locale must be pre configured in `.locales`.
     */
    get locale() {
      return this._locale;
    }
    set locale(i) {
      if (this.isDestroyed)
        throw new Ht();
      !this._locale && !i || (i || (i = t.sourceLocale), this._locale = i, this.localization ? this.localization.setLocale(this._locale) : queueMicrotask(() => {
        this.localization ? this.localization.setLocale(this._locale) : this._locale !== t.sourceLocale && (this._locales.has(this._locale) && this.configureLocalization(), this.localization ? this.localization.setLocale(this._locale) : console.error(
          this.weavyId,
          `You need to configure additional languages in config to use '${i}'.`
        ));
      }));
    }
    async loadLocale(i) {
      var r;
      if (this.isDestroyed)
        throw new Ht();
      if ((r = this._locales) != null && r.has(i)) {
        const n = this._locales.get(i);
        return console.info(
          this.weavyId,
          typeof n == "function" ? "loading locale" : "preloaded locale",
          i
        ), await (typeof n == "function" ? n() : n);
      } else
        throw new Error("The requested locale is not configured");
    }
    configureLocalization() {
      var i;
      if (this.isDestroyed)
        throw new Ht();
      if ((i = this._locales) != null && i.size && !this.localization) {
        const r = this._locales.keys();
        console.info(this.weavyId, "Configuring locales", r);
        const { getLocale: n, setLocale: a } = jm({
          sourceLocale: t.sourceLocale,
          targetLocales: r,
          loadLocale: /* @__PURE__ */ o((c) => this.loadLocale(c), "loadLocale")
        });
        this._localization = {
          getLocale: n,
          setLocale: a
        };
      }
    }
  }, o(t, "WeavyLocalization"), t;
}, "WeavyLocalizationMixin"), Gv = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i), this._networkEvents = /* @__PURE__ */ new Set(), this._connectionState = "connecting", this._serverState = "ok", this._networkState = window.navigator.onLine ? "online" : "offline", this._networkStateIsPending = !1, window.addEventListener("online", () => {
        this.networkState = "online";
      }), window.addEventListener("offline", () => {
        this.networkState = "offline", this.networkStateIsPending = !1;
      });
    }
    get networkState() {
      return this._networkState;
    }
    set networkState(i) {
      this._networkState = i, this.triggerNetworkChange();
    }
    get serverState() {
      return this._serverState;
    }
    set serverState(i) {
      this._serverState = i, this.triggerNetworkChange();
    }
    get connectionState() {
      return this._connectionState;
    }
    set connectionState(i) {
      this._connectionState = i, this.triggerNetworkChange();
    }
    get networkStateIsPending() {
      return this._networkStateIsPending;
    }
    set networkStateIsPending(i) {
      this._networkStateIsPending = i, this.triggerNetworkChange();
    }
    get network() {
      return {
        state: this._networkState === "online" ? this._connectionState === "connected" || this._serverState === "ok" ? "online" : "unreachable" : "offline",
        isPending: this._networkStateIsPending
      };
    }
    triggerNetworkChange() {
      const i = this.network;
      this._networkEvents.forEach((r) => {
        r(i);
      });
    }
    addNetworkListener(i) {
      this._networkEvents.add(i);
    }
    removeNetworkListener(i) {
      this._networkEvents.delete(i);
    }
  }, o(t, "WeavyNetwork"), t;
}, "WeavyNetworkMixin");
function Sh() {
}
o(Sh, "noop");
function Zv({
  storage: s,
  key: t = "REACT_QUERY_OFFLINE_CACHE",
  throttleTime: e = 1e3,
  serialize: i = JSON.stringify,
  deserialize: r = JSON.parse,
  retry: n
}) {
  if (s) {
    const a = /* @__PURE__ */ o((c) => {
      try {
        s.setItem(t, i(c));
        return;
      } catch (l) {
        return l;
      }
    }, "trySave");
    return {
      persistClient: Yv((c) => {
        let l = c, u = a(l), p = 0;
        for (; u && l; )
          p++, l = n == null ? void 0 : n({
            persistedClient: l,
            error: u,
            errorCount: p
          }), l && (u = a(l));
      }, e),
      restoreClient: /* @__PURE__ */ o(() => {
        const c = s.getItem(t);
        if (c)
          return r(c);
      }, "restoreClient"),
      removeClient: /* @__PURE__ */ o(() => {
        s.removeItem(t);
      }, "removeClient")
    };
  }
  return {
    persistClient: Sh,
    restoreClient: Sh,
    removeClient: Sh
  };
}
o(Zv, "createSyncStoragePersister");
function Yv(s, t = 100) {
  let e = null, i;
  return function(...r) {
    i = r, e === null && (e = setTimeout(() => {
      s(...i), e = null;
    }, t));
  };
}
o(Yv, "throttle$1");
var Xv = ["added", "removed", "updated"];
function hy(s) {
  return Xv.includes(s);
}
o(hy, "isCacheEventType");
async function Jv({
  queryClient: s,
  persister: t,
  maxAge: e = 1e3 * 60 * 60 * 24,
  buster: i = "",
  hydrateOptions: r
}) {
  try {
    const n = await t.restoreClient();
    if (n)
      if (n.timestamp) {
        const a = Date.now() - n.timestamp > e, c = n.buster !== i;
        if (a || c)
          return t.removeClient();
        Tv(s, n.clientState, r);
      } else
        return t.removeClient();
  } catch (n) {
    throw await t.removeClient(), n;
  }
}
o(Jv, "persistQueryClientRestore");
async function uy({
  queryClient: s,
  persister: t,
  buster: e = "",
  dehydrateOptions: i
}) {
  const r = {
    buster: e,
    timestamp: Date.now(),
    clientState: Iv(s, i)
  };
  await t.persistClient(r);
}
o(uy, "persistQueryClientSave");
function t1(s) {
  const t = s.queryClient.getQueryCache().subscribe((i) => {
    hy(i.type) && uy(s);
  }), e = s.queryClient.getMutationCache().subscribe((i) => {
    hy(i.type) && uy(s);
  });
  return () => {
    t(), e();
  };
}
o(t1, "persistQueryClientSubscribe");
const e1 = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // QUERY CLIENT
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i), this._queryClient = new zv({
        defaultOptions: {
          queries: {
            staleTime: this.staleTime,
            gcTime: this.gcTime
          }
        }
      }), this.initQueryClient();
    }
    get queryClient() {
      return this._queryClient;
    }
    async initQueryClient() {
      if (this.isDestroyed)
        throw new Ht();
      await this.whenUrl();
      try {
        this._sessionStoragePersister = Zv({
          key: "WEAVY_QUERY_OFFLINE_CACHE",
          storage: window.sessionStorage,
          throttleTime: this.staleTime
        });
        const i = {
          queryClient: this._queryClient,
          persister: this._sessionStoragePersister,
          maxAge: this.gcTime,
          // 24h - should match gcTime
          buster: this.cachePrefix,
          // Cache busting parameter (build hash or similar)
          hydrateOptions: void 0,
          dehydrateOptions: {
            shouldDehydrateMutation: /* @__PURE__ */ o((r) => {
              var a, c;
              const n = ((c = (a = r.state.context) == null ? void 0 : a.status) == null ? void 0 : c.state) === "pending";
              return !!(r.state.context && !n || r.state.isPaused);
            }, "shouldDehydrateMutation")
          }
        };
        await Jv(i), this._unsubscribeQueryClient = t1(i);
      } catch {
        console.warn(this.weavyId, "Query cache persister not available.");
      }
      this.host.isConnected && this._queryClient.mount(), this._hostIsConnectedObserver = Um(this.host, (i) => {
        this.isDestroyed || (i ? (console.info(this.weavyId, "Query client mounted"), this._queryClient.mount()) : (console.info(this.weavyId, "Query client unmounted"), this._queryClient.unmount()));
      });
    }
    async reset() {
      var i;
      await super.reset(), await this._queryClient.cancelQueries(), await ((i = this._sessionStoragePersister) == null ? void 0 : i.removeClient()), await this.queryClient.resetQueries();
    }
    async disconnectQueryClient() {
      var i, r;
      console.info(this.weavyId, "Query client disconnected"), await this._queryClient.cancelQueries(), await ((i = this._sessionStoragePersister) == null ? void 0 : i.removeClient()), (r = this._unsubscribeQueryClient) == null || r.call(this), this._queryClient.unmount(), this._queryClient.clear();
    }
    destroy() {
      var i;
      super.destroy(), (i = this._hostIsConnectedObserver) == null || i.disconnect(), this.disconnectQueryClient();
    }
  }, o(t, "WeavyQuery"), t;
}, "WeavyQueryMixin"), i1 = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i), this._notificationEvents = Rt.defaults.notificationEvents ?? !1, this.dispatchRealtimeEvent = (r) => {
        Ie();
        const n = this.host !== document.documentElement ? { composed: !0 } : { bubbles: !0 };
        switch (r.action) {
          case "notification_created":
          case "notification_updated":
          case "notification_deleted":
          case "notifications_marked": {
            const a = new CustomEvent("wy-notifications", {
              ...n,
              detail: r
            });
            this.host.dispatchEvent(a);
          }
        }
      };
    }
    get notificationEvents() {
      return this._notificationEvents;
    }
    set notificationEvents(i) {
      this.realtimeUnsubscribe(), this._notificationEvents = i ?? !1, this.realtimeSubscribe();
    }
    realtimeSubscribe() {
      const i = this;
      this.notificationEvents && (i.subscribe(null, "notification_created", this.dispatchRealtimeEvent), i.subscribe(null, "notification_updated", this.dispatchRealtimeEvent), i.subscribe(null, "notifications_marked", this.dispatchRealtimeEvent));
    }
    realtimeUnsubscribe() {
      const i = this;
      this.notificationEvents && (i.unsubscribe(null, "notification_created", this.dispatchRealtimeEvent), i.unsubscribe(null, "notification_updated", this.dispatchRealtimeEvent), i.unsubscribe(null, "notifications_marked", this.dispatchRealtimeEvent));
    }
    destroy() {
      this.realtimeUnsubscribe(), super.destroy();
    }
  }, o(t, "WeavyRealtime"), t;
}, "WeavyRealtimeMixin"), s1 = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i);
    }
    set annotations(i) {
      this._annotations = i, this.updateContext();
    }
    get annotations() {
      return this._annotations ?? Rt.defaults.annotations;
    }
    set notifications(i) {
      this._notifications = i, this.updateContext();
    }
    get notifications() {
      return this._notifications ?? Rt.defaults.notifications;
    }
    set notificationsBadge(i) {
      this._notificationsBadge = i, this.updateContext();
    }
    get notificationsBadge() {
      return this._notificationsBadge ?? Rt.defaults.notificationsBadge;
    }
    set reactions(i) {
      this._reactions = i, this.updateContext();
    }
    get reactions() {
      return this._reactions ?? Rt.defaults.reactions;
    }
  }, o(t, "WeavySettings"), t;
}, "WeavySettingsMixin");
function Se(s) {
  return s < 0 ? -1 : s === 0 ? 0 : 1;
}
o(Se, "signum");
function wc(s, t, e) {
  return (1 - e) * s + e * t;
}
o(wc, "lerp");
function r1(s, t, e) {
  return e < s ? s : e > t ? t : e;
}
o(r1, "clampInt");
function ql(s, t, e) {
  return e < s ? s : e > t ? t : e;
}
o(ql, "clampDouble");
function Wu(s) {
  return s = s % 360, s < 0 && (s = s + 360), s;
}
o(Wu, "sanitizeDegreesDouble");
function n1(s, t) {
  return Wu(t - s) <= 180 ? 1 : -1;
}
o(n1, "rotationDirection");
function a1(s, t) {
  return 180 - Math.abs(Math.abs(s - t) - 180);
}
o(a1, "differenceDegrees");
function ru(s, t) {
  const e = s[0] * t[0][0] + s[1] * t[0][1] + s[2] * t[0][2], i = s[0] * t[1][0] + s[1] * t[1][1] + s[2] * t[1][2], r = s[0] * t[2][0] + s[1] * t[2][1] + s[2] * t[2][2];
  return [e, i, r];
}
o(ru, "matrixMultiply");
const o1 = [
  [0.41233895, 0.35762064, 0.18051042],
  [0.2126, 0.7152, 0.0722],
  [0.01932141, 0.11916382, 0.95034478]
], c1 = [
  [
    3.2413774792388685,
    -1.5376652402851851,
    -0.49885366846268053
  ],
  [
    -0.9691452513005321,
    1.8758853451067872,
    0.04156585616912061
  ],
  [
    0.05562093689691305,
    -0.20395524564742123,
    1.0571799111220335
  ]
], l1 = [95.047, 100, 108.883];
function Qu(s, t, e) {
  return (255 << 24 | (s & 255) << 16 | (t & 255) << 8 | e & 255) >>> 0;
}
o(Qu, "argbFromRgb");
function py(s) {
  const t = rr(s[0]), e = rr(s[1]), i = rr(s[2]);
  return Qu(t, e, i);
}
o(py, "argbFromLinrgb");
function Hw(s) {
  return s >> 16 & 255;
}
o(Hw, "redFromArgb");
function Vw(s) {
  return s >> 8 & 255;
}
o(Vw, "greenFromArgb");
function Bw(s) {
  return s & 255;
}
o(Bw, "blueFromArgb");
function d1(s, t, e) {
  const i = c1, r = i[0][0] * s + i[0][1] * t + i[0][2] * e, n = i[1][0] * s + i[1][1] * t + i[1][2] * e, a = i[2][0] * s + i[2][1] * t + i[2][2] * e, c = rr(r), l = rr(n), u = rr(a);
  return Qu(c, l, u);
}
o(d1, "argbFromXyz");
function h1(s) {
  const t = Wr(Hw(s)), e = Wr(Vw(s)), i = Wr(Bw(s));
  return ru([t, e, i], o1);
}
o(h1, "xyzFromArgb");
function u1(s) {
  const t = gs(s), e = rr(t);
  return Qu(e, e, e);
}
o(u1, "argbFromLstar");
function nu(s) {
  const t = h1(s)[1];
  return 116 * Uw(t / 100) - 16;
}
o(nu, "lstarFromArgb");
function gs(s) {
  return 100 * y1((s + 16) / 116);
}
o(gs, "yFromLstar");
function au(s) {
  return Uw(s / 100) * 116 - 16;
}
o(au, "lstarFromY");
function Wr(s) {
  const t = s / 255;
  return t <= 0.040449936 ? t / 12.92 * 100 : Math.pow((t + 0.055) / 1.055, 2.4) * 100;
}
o(Wr, "linearized");
function rr(s) {
  const t = s / 100;
  let e = 0;
  return t <= 31308e-7 ? e = t * 12.92 : e = 1.055 * Math.pow(t, 1 / 2.4) - 0.055, r1(0, 255, Math.round(e * 255));
}
o(rr, "delinearized");
function p1() {
  return l1;
}
o(p1, "whitePointD65");
function Uw(s) {
  const t = 0.008856451679035631, e = 24389 / 27;
  return s > t ? Math.pow(s, 1 / 3) : (e * s + 16) / 116;
}
o(Uw, "labF");
function y1(s) {
  const t = 0.008856451679035631, e = 24389 / 27, i = s * s * s;
  return i > t ? i : (116 * s - 16) / e;
}
o(y1, "labInvf");
const yd = class yd {
  /**
   * Create ViewingConditions from a simple, physically relevant, set of
   * parameters.
   *
   * @param whitePoint White point, measured in the XYZ color space.
   *     default = D65, or sunny day afternoon
   * @param adaptingLuminance The luminance of the adapting field. Informally,
   *     how bright it is in the room where the color is viewed. Can be
   *     calculated from lux by multiplying lux by 0.0586. default = 11.72,
   *     or 200 lux.
   * @param backgroundLstar The lightness of the area surrounding the color.
   *     measured by L* in L*a*b*. default = 50.0
   * @param surround A general description of the lighting surrounding the
   *     color. 0 is pitch dark, like watching a movie in a theater. 1.0 is a
   *     dimly light room, like watching TV at home at night. 2.0 means there
   *     is no difference between the lighting on the color and around it.
   *     default = 2.0
   * @param discountingIlluminant Whether the eye accounts for the tint of the
   *     ambient lighting, such as knowing an apple is still red in green light.
   *     default = false, the eye does not perform this process on
   *       self-luminous objects like displays.
   */
  static make(t = p1(), e = 200 / Math.PI * gs(50) / 100, i = 50, r = 2, n = !1) {
    const a = t, c = a[0] * 0.401288 + a[1] * 0.650173 + a[2] * -0.051461, l = a[0] * -0.250268 + a[1] * 1.204414 + a[2] * 0.045854, u = a[0] * -2079e-6 + a[1] * 0.048952 + a[2] * 0.953127, p = 0.8 + r / 10, w = p >= 0.9 ? wc(0.59, 0.69, (p - 0.9) * 10) : wc(0.525, 0.59, (p - 0.8) * 10);
    let b = n ? 1 : p * (1 - 1 / 3.6 * Math.exp((-e - 42) / 92));
    b = b > 1 ? 1 : b < 0 ? 0 : b;
    const m = p, g = [
      b * (100 / c) + 1 - b,
      b * (100 / l) + 1 - b,
      b * (100 / u) + 1 - b
    ], x = 1 / (5 * e + 1), z = x * x * x * x, _ = 1 - z, P = z * e + 0.1 * _ * _ * Math.cbrt(5 * e), E = gs(i) / t[1], N = 1.48 + Math.sqrt(E), O = 0.725 / Math.pow(E, 0.2), F = O, B = [
      Math.pow(P * g[0] * c / 100, 0.42),
      Math.pow(P * g[1] * l / 100, 0.42),
      Math.pow(P * g[2] * u / 100, 0.42)
    ], D = [
      400 * B[0] / (B[0] + 27.13),
      400 * B[1] / (B[1] + 27.13),
      400 * B[2] / (B[2] + 27.13)
    ], U = (2 * D[0] + D[1] + 0.05 * D[2]) * O;
    return new yd(E, U, O, F, w, m, g, P, Math.pow(P, 0.25), N);
  }
  /**
   * Parameters are intermediate values of the CAM16 conversion process. Their
   * names are shorthand for technical color science terminology, this class
   * would not benefit from documenting them individually. A brief overview
   * is available in the CAM16 specification, and a complete overview requires
   * a color science textbook, such as Fairchild's Color Appearance Models.
   */
  constructor(t, e, i, r, n, a, c, l, u, p) {
    this.n = t, this.aw = e, this.nbb = i, this.ncb = r, this.c = n, this.nc = a, this.rgbD = c, this.fl = l, this.fLRoot = u, this.z = p;
  }
};
o(yd, "ViewingConditions");
let ci = yd;
ci.DEFAULT = ci.make();
const mi = class mi {
  /**
   * All of the CAM16 dimensions can be calculated from 3 of the dimensions, in
   * the following combinations:
   *      -  {j or q} and {c, m, or s} and hue
   *      - jstar, astar, bstar
   * Prefer using a static method that constructs from 3 of those dimensions.
   * This constructor is intended for those methods to use to return all
   * possible dimensions.
   *
   * @param hue
   * @param chroma informally, colorfulness / color intensity. like saturation
   *     in HSL, except perceptually accurate.
   * @param j lightness
   * @param q brightness; ratio of lightness to white point's lightness
   * @param m colorfulness
   * @param s saturation; ratio of chroma to white point's chroma
   * @param jstar CAM16-UCS J coordinate
   * @param astar CAM16-UCS a coordinate
   * @param bstar CAM16-UCS b coordinate
   */
  constructor(t, e, i, r, n, a, c, l, u) {
    this.hue = t, this.chroma = e, this.j = i, this.q = r, this.m = n, this.s = a, this.jstar = c, this.astar = l, this.bstar = u;
  }
  /**
   * CAM16 instances also have coordinates in the CAM16-UCS space, called J*,
   * a*, b*, or jstar, astar, bstar in code. CAM16-UCS is included in the CAM16
   * specification, and is used to measure distances between colors.
   */
  distance(t) {
    const e = this.jstar - t.jstar, i = this.astar - t.astar, r = this.bstar - t.bstar, n = Math.sqrt(e * e + i * i + r * r);
    return 1.41 * Math.pow(n, 0.63);
  }
  /**
   * @param argb ARGB representation of a color.
   * @return CAM16 color, assuming the color was viewed in default viewing
   *     conditions.
   */
  static fromInt(t) {
    return mi.fromIntInViewingConditions(t, ci.DEFAULT);
  }
  /**
   * @param argb ARGB representation of a color.
   * @param viewingConditions Information about the environment where the color
   *     was observed.
   * @return CAM16 color.
   */
  static fromIntInViewingConditions(t, e) {
    const i = (t & 16711680) >> 16, r = (t & 65280) >> 8, n = t & 255, a = Wr(i), c = Wr(r), l = Wr(n), u = 0.41233895 * a + 0.35762064 * c + 0.18051042 * l, p = 0.2126 * a + 0.7152 * c + 0.0722 * l, w = 0.01932141 * a + 0.11916382 * c + 0.95034478 * l, b = 0.401288 * u + 0.650173 * p - 0.051461 * w, m = -0.250268 * u + 1.204414 * p + 0.045854 * w, g = -2079e-6 * u + 0.048952 * p + 0.953127 * w, x = e.rgbD[0] * b, z = e.rgbD[1] * m, _ = e.rgbD[2] * g, P = Math.pow(e.fl * Math.abs(x) / 100, 0.42), E = Math.pow(e.fl * Math.abs(z) / 100, 0.42), N = Math.pow(e.fl * Math.abs(_) / 100, 0.42), O = Se(x) * 400 * P / (P + 27.13), F = Se(z) * 400 * E / (E + 27.13), B = Se(_) * 400 * N / (N + 27.13), D = (11 * O + -12 * F + B) / 11, U = (O + F - 2 * B) / 9, j = (20 * O + 20 * F + 21 * B) / 20, J = (40 * O + 20 * F + B) / 20, Y = Math.atan2(U, D) * 180 / Math.PI, nt = Y < 0 ? Y + 360 : Y >= 360 ? Y - 360 : Y, Nt = nt * Math.PI / 180, Zt = J * e.nbb, _t = 100 * Math.pow(Zt / e.aw, e.c * e.z), ft = 4 / e.c * Math.sqrt(_t / 100) * (e.aw + 4) * e.fLRoot, Ot = nt < 20.14 ? nt + 360 : nt, tt = 0.25 * (Math.cos(Ot * Math.PI / 180 + 2) + 3.8), si = 5e4 / 13 * tt * e.nc * e.ncb * Math.sqrt(D * D + U * U) / (j + 0.305), Be = Math.pow(si, 0.9) * Math.pow(1.64 - Math.pow(0.29, e.n), 0.73), Li = Be * Math.sqrt(_t / 100), Ii = Li * e.fLRoot, dc = 50 * Math.sqrt(Be * e.c / (e.aw + 4)), fi = (1 + 100 * 7e-3) * _t / (1 + 7e-3 * _t), bt = 1 / 0.0228 * Math.log(1 + 0.0228 * Ii), Pe = bt * Math.cos(Nt), zt = bt * Math.sin(Nt);
    return new mi(nt, Li, _t, ft, Ii, dc, fi, Pe, zt);
  }
  /**
   * @param j CAM16 lightness
   * @param c CAM16 chroma
   * @param h CAM16 hue
   */
  static fromJch(t, e, i) {
    return mi.fromJchInViewingConditions(t, e, i, ci.DEFAULT);
  }
  /**
   * @param j CAM16 lightness
   * @param c CAM16 chroma
   * @param h CAM16 hue
   * @param viewingConditions Information about the environment where the color
   *     was observed.
   */
  static fromJchInViewingConditions(t, e, i, r) {
    const n = 4 / r.c * Math.sqrt(t / 100) * (r.aw + 4) * r.fLRoot, a = e * r.fLRoot, c = e / Math.sqrt(t / 100), l = 50 * Math.sqrt(c * r.c / (r.aw + 4)), u = i * Math.PI / 180, p = (1 + 100 * 7e-3) * t / (1 + 7e-3 * t), w = 1 / 0.0228 * Math.log(1 + 0.0228 * a), b = w * Math.cos(u), m = w * Math.sin(u);
    return new mi(i, e, t, n, a, l, p, b, m);
  }
  /**
   * @param jstar CAM16-UCS lightness.
   * @param astar CAM16-UCS a dimension. Like a* in L*a*b*, it is a Cartesian
   *     coordinate on the Y axis.
   * @param bstar CAM16-UCS b dimension. Like a* in L*a*b*, it is a Cartesian
   *     coordinate on the X axis.
   */
  static fromUcs(t, e, i) {
    return mi.fromUcsInViewingConditions(t, e, i, ci.DEFAULT);
  }
  /**
   * @param jstar CAM16-UCS lightness.
   * @param astar CAM16-UCS a dimension. Like a* in L*a*b*, it is a Cartesian
   *     coordinate on the Y axis.
   * @param bstar CAM16-UCS b dimension. Like a* in L*a*b*, it is a Cartesian
   *     coordinate on the X axis.
   * @param viewingConditions Information about the environment where the color
   *     was observed.
   */
  static fromUcsInViewingConditions(t, e, i, r) {
    const n = e, a = i, c = Math.sqrt(n * n + a * a), u = (Math.exp(c * 0.0228) - 1) / 0.0228 / r.fLRoot;
    let p = Math.atan2(a, n) * (180 / Math.PI);
    p < 0 && (p += 360);
    const w = t / (1 - (t - 100) * 7e-3);
    return mi.fromJchInViewingConditions(w, u, p, r);
  }
  /**
   *  @return ARGB representation of color, assuming the color was viewed in
   *     default viewing conditions, which are near-identical to the default
   *     viewing conditions for sRGB.
   */
  toInt() {
    return this.viewed(ci.DEFAULT);
  }
  /**
   * @param viewingConditions Information about the environment where the color
   *     will be viewed.
   * @return ARGB representation of color
   */
  viewed(t) {
    const e = this.chroma === 0 || this.j === 0 ? 0 : this.chroma / Math.sqrt(this.j / 100), i = Math.pow(e / Math.pow(1.64 - Math.pow(0.29, t.n), 0.73), 1 / 0.9), r = this.hue * Math.PI / 180, n = 0.25 * (Math.cos(r + 2) + 3.8), a = t.aw * Math.pow(this.j / 100, 1 / t.c / t.z), c = n * (5e4 / 13) * t.nc * t.ncb, l = a / t.nbb, u = Math.sin(r), p = Math.cos(r), w = 23 * (l + 0.305) * i / (23 * c + 11 * i * p + 108 * i * u), b = w * p, m = w * u, g = (460 * l + 451 * b + 288 * m) / 1403, x = (460 * l - 891 * b - 261 * m) / 1403, z = (460 * l - 220 * b - 6300 * m) / 1403, _ = Math.max(0, 27.13 * Math.abs(g) / (400 - Math.abs(g))), P = Se(g) * (100 / t.fl) * Math.pow(_, 1 / 0.42), E = Math.max(0, 27.13 * Math.abs(x) / (400 - Math.abs(x))), N = Se(x) * (100 / t.fl) * Math.pow(E, 1 / 0.42), O = Math.max(0, 27.13 * Math.abs(z) / (400 - Math.abs(z))), F = Se(z) * (100 / t.fl) * Math.pow(O, 1 / 0.42), B = P / t.rgbD[0], D = N / t.rgbD[1], U = F / t.rgbD[2], j = 1.86206786 * B - 1.01125463 * D + 0.14918677 * U, J = 0.38752654 * B + 0.62144744 * D - 897398e-8 * U, wt = -0.0158415 * B - 0.03412294 * D + 1.04996444 * U;
    return d1(j, J, wt);
  }
  /// Given color expressed in XYZ and viewed in [viewingConditions], convert to
  /// CAM16.
  static fromXyzInViewingConditions(t, e, i, r) {
    const n = 0.401288 * t + 0.650173 * e - 0.051461 * i, a = -0.250268 * t + 1.204414 * e + 0.045854 * i, c = -2079e-6 * t + 0.048952 * e + 0.953127 * i, l = r.rgbD[0] * n, u = r.rgbD[1] * a, p = r.rgbD[2] * c, w = Math.pow(r.fl * Math.abs(l) / 100, 0.42), b = Math.pow(r.fl * Math.abs(u) / 100, 0.42), m = Math.pow(r.fl * Math.abs(p) / 100, 0.42), g = Se(l) * 400 * w / (w + 27.13), x = Se(u) * 400 * b / (b + 27.13), z = Se(p) * 400 * m / (m + 27.13), _ = (11 * g + -12 * x + z) / 11, P = (g + x - 2 * z) / 9, E = (20 * g + 20 * x + 21 * z) / 20, N = (40 * g + 20 * x + z) / 20, F = Math.atan2(P, _) * 180 / Math.PI, B = F < 0 ? F + 360 : F >= 360 ? F - 360 : F, D = B * Math.PI / 180, U = N * r.nbb, j = 100 * Math.pow(U / r.aw, r.c * r.z), J = 4 / r.c * Math.sqrt(j / 100) * (r.aw + 4) * r.fLRoot, wt = B < 20.14 ? B + 360 : B, Y = 1 / 4 * (Math.cos(wt * Math.PI / 180 + 2) + 3.8), Nt = 5e4 / 13 * Y * r.nc * r.ncb * Math.sqrt(_ * _ + P * P) / (E + 0.305), Zt = Math.pow(Nt, 0.9) * Math.pow(1.64 - Math.pow(0.29, r.n), 0.73), _t = Zt * Math.sqrt(j / 100), ft = _t * r.fLRoot, Ot = 50 * Math.sqrt(Zt * r.c / (r.aw + 4)), tt = (1 + 100 * 7e-3) * j / (1 + 7e-3 * j), xt = Math.log(1 + 0.0228 * ft) / 0.0228, si = xt * Math.cos(D), Be = xt * Math.sin(D);
    return new mi(B, _t, j, J, ft, Ot, tt, si, Be);
  }
  /// XYZ representation of CAM16 seen in [viewingConditions].
  xyzInViewingConditions(t) {
    const e = this.chroma === 0 || this.j === 0 ? 0 : this.chroma / Math.sqrt(this.j / 100), i = Math.pow(e / Math.pow(1.64 - Math.pow(0.29, t.n), 0.73), 1 / 0.9), r = this.hue * Math.PI / 180, n = 0.25 * (Math.cos(r + 2) + 3.8), a = t.aw * Math.pow(this.j / 100, 1 / t.c / t.z), c = n * (5e4 / 13) * t.nc * t.ncb, l = a / t.nbb, u = Math.sin(r), p = Math.cos(r), w = 23 * (l + 0.305) * i / (23 * c + 11 * i * p + 108 * i * u), b = w * p, m = w * u, g = (460 * l + 451 * b + 288 * m) / 1403, x = (460 * l - 891 * b - 261 * m) / 1403, z = (460 * l - 220 * b - 6300 * m) / 1403, _ = Math.max(0, 27.13 * Math.abs(g) / (400 - Math.abs(g))), P = Se(g) * (100 / t.fl) * Math.pow(_, 1 / 0.42), E = Math.max(0, 27.13 * Math.abs(x) / (400 - Math.abs(x))), N = Se(x) * (100 / t.fl) * Math.pow(E, 1 / 0.42), O = Math.max(0, 27.13 * Math.abs(z) / (400 - Math.abs(z))), F = Se(z) * (100 / t.fl) * Math.pow(O, 1 / 0.42), B = P / t.rgbD[0], D = N / t.rgbD[1], U = F / t.rgbD[2], j = 1.86206786 * B - 1.01125463 * D + 0.14918677 * U, J = 0.38752654 * B + 0.62144744 * D - 897398e-8 * U, wt = -0.0158415 * B - 0.03412294 * D + 1.04996444 * U;
    return [j, J, wt];
  }
};
o(mi, "Cam16");
let Xe = mi;
const ot = class ot {
  /**
   * Sanitizes a small enough angle in radians.
   *
   * @param angle An angle in radians; must not deviate too much
   * from 0.
   * @return A coterminal angle between 0 and 2pi.
   */
  static sanitizeRadians(t) {
    return (t + Math.PI * 8) % (Math.PI * 2);
  }
  /**
   * Delinearizes an RGB component, returning a floating-point
   * number.
   *
   * @param rgbComponent 0.0 <= rgb_component <= 100.0, represents
   * linear R/G/B channel
   * @return 0.0 <= output <= 255.0, color channel converted to
   * regular RGB space
   */
  static trueDelinearized(t) {
    const e = t / 100;
    let i = 0;
    return e <= 31308e-7 ? i = e * 12.92 : i = 1.055 * Math.pow(e, 1 / 2.4) - 0.055, i * 255;
  }
  static chromaticAdaptation(t) {
    const e = Math.pow(Math.abs(t), 0.42);
    return Se(t) * 400 * e / (e + 27.13);
  }
  /**
   * Returns the hue of a linear RGB color in CAM16.
   *
   * @param linrgb The linear RGB coordinates of a color.
   * @return The hue of the color in CAM16, in radians.
   */
  static hueOf(t) {
    const e = ru(t, ot.SCALED_DISCOUNT_FROM_LINRGB), i = ot.chromaticAdaptation(e[0]), r = ot.chromaticAdaptation(e[1]), n = ot.chromaticAdaptation(e[2]), a = (11 * i + -12 * r + n) / 11, c = (i + r - 2 * n) / 9;
    return Math.atan2(c, a);
  }
  static areInCyclicOrder(t, e, i) {
    const r = ot.sanitizeRadians(e - t), n = ot.sanitizeRadians(i - t);
    return r < n;
  }
  /**
   * Solves the lerp equation.
   *
   * @param source The starting number.
   * @param mid The number in the middle.
   * @param target The ending number.
   * @return A number t such that lerp(source, target, t) = mid.
   */
  static intercept(t, e, i) {
    return (e - t) / (i - t);
  }
  static lerpPoint(t, e, i) {
    return [
      t[0] + (i[0] - t[0]) * e,
      t[1] + (i[1] - t[1]) * e,
      t[2] + (i[2] - t[2]) * e
    ];
  }
  /**
   * Intersects a segment with a plane.
   *
   * @param source The coordinates of point A.
   * @param coordinate The R-, G-, or B-coordinate of the plane.
   * @param target The coordinates of point B.
   * @param axis The axis the plane is perpendicular with. (0: R, 1:
   * G, 2: B)
   * @return The intersection point of the segment AB with the plane
   * R=coordinate, G=coordinate, or B=coordinate
   */
  static setCoordinate(t, e, i, r) {
    const n = ot.intercept(t[r], e, i[r]);
    return ot.lerpPoint(t, n, i);
  }
  static isBounded(t) {
    return 0 <= t && t <= 100;
  }
  /**
   * Returns the nth possible vertex of the polygonal intersection.
   *
   * @param y The Y value of the plane.
   * @param n The zero-based index of the point. 0 <= n <= 11.
   * @return The nth possible vertex of the polygonal intersection
   * of the y plane and the RGB cube, in linear RGB coordinates, if
   * it exists. If this possible vertex lies outside of the cube,
   * [-1.0, -1.0, -1.0] is returned.
   */
  static nthVertex(t, e) {
    const i = ot.Y_FROM_LINRGB[0], r = ot.Y_FROM_LINRGB[1], n = ot.Y_FROM_LINRGB[2], a = e % 4 <= 1 ? 0 : 100, c = e % 2 === 0 ? 0 : 100;
    if (e < 4) {
      const l = a, u = c, p = (t - l * r - u * n) / i;
      return ot.isBounded(p) ? [p, l, u] : [-1, -1, -1];
    } else if (e < 8) {
      const l = a, u = c, p = (t - u * i - l * n) / r;
      return ot.isBounded(p) ? [u, p, l] : [-1, -1, -1];
    } else {
      const l = a, u = c, p = (t - l * i - u * r) / n;
      return ot.isBounded(p) ? [l, u, p] : [-1, -1, -1];
    }
  }
  /**
   * Finds the segment containing the desired color.
   *
   * @param y The Y value of the color.
   * @param targetHue The hue of the color.
   * @return A list of two sets of linear RGB coordinates, each
   * corresponding to an endpoint of the segment containing the
   * desired color.
   */
  static bisectToSegment(t, e) {
    let i = [-1, -1, -1], r = i, n = 0, a = 0, c = !1, l = !0;
    for (let u = 0; u < 12; u++) {
      const p = ot.nthVertex(t, u);
      if (p[0] < 0)
        continue;
      const w = ot.hueOf(p);
      if (!c) {
        i = p, r = p, n = w, a = w, c = !0;
        continue;
      }
      (l || ot.areInCyclicOrder(n, w, a)) && (l = !1, ot.areInCyclicOrder(n, e, w) ? (r = p, a = w) : (i = p, n = w));
    }
    return [i, r];
  }
  static midpoint(t, e) {
    return [
      (t[0] + e[0]) / 2,
      (t[1] + e[1]) / 2,
      (t[2] + e[2]) / 2
    ];
  }
  static criticalPlaneBelow(t) {
    return Math.floor(t - 0.5);
  }
  static criticalPlaneAbove(t) {
    return Math.ceil(t - 0.5);
  }
  /**
   * Finds a color with the given Y and hue on the boundary of the
   * cube.
   *
   * @param y The Y value of the color.
   * @param targetHue The hue of the color.
   * @return The desired color, in linear RGB coordinates.
   */
  static bisectToLimit(t, e) {
    const i = ot.bisectToSegment(t, e);
    let r = i[0], n = ot.hueOf(r), a = i[1];
    for (let c = 0; c < 3; c++)
      if (r[c] !== a[c]) {
        let l = -1, u = 255;
        r[c] < a[c] ? (l = ot.criticalPlaneBelow(ot.trueDelinearized(r[c])), u = ot.criticalPlaneAbove(ot.trueDelinearized(a[c]))) : (l = ot.criticalPlaneAbove(ot.trueDelinearized(r[c])), u = ot.criticalPlaneBelow(ot.trueDelinearized(a[c])));
        for (let p = 0; p < 8 && !(Math.abs(u - l) <= 1); p++) {
          const w = Math.floor((l + u) / 2), b = ot.CRITICAL_PLANES[w], m = ot.setCoordinate(r, b, a, c), g = ot.hueOf(m);
          ot.areInCyclicOrder(n, e, g) ? (a = m, u = w) : (r = m, n = g, l = w);
        }
      }
    return ot.midpoint(r, a);
  }
  static inverseChromaticAdaptation(t) {
    const e = Math.abs(t), i = Math.max(0, 27.13 * e / (400 - e));
    return Se(t) * Math.pow(i, 1 / 0.42);
  }
  /**
   * Finds a color with the given hue, chroma, and Y.
   *
   * @param hueRadians The desired hue in radians.
   * @param chroma The desired chroma.
   * @param y The desired Y.
   * @return The desired color as a hexadecimal integer, if found; 0
   * otherwise.
   */
  static findResultByJ(t, e, i) {
    let r = Math.sqrt(i) * 11;
    const n = ci.DEFAULT, a = 1 / Math.pow(1.64 - Math.pow(0.29, n.n), 0.73), l = 0.25 * (Math.cos(t + 2) + 3.8) * (5e4 / 13) * n.nc * n.ncb, u = Math.sin(t), p = Math.cos(t);
    for (let w = 0; w < 5; w++) {
      const b = r / 100, m = e === 0 || r === 0 ? 0 : e / Math.sqrt(b), g = Math.pow(m * a, 1 / 0.9), z = n.aw * Math.pow(b, 1 / n.c / n.z) / n.nbb, _ = 23 * (z + 0.305) * g / (23 * l + 11 * g * p + 108 * g * u), P = _ * p, E = _ * u, N = (460 * z + 451 * P + 288 * E) / 1403, O = (460 * z - 891 * P - 261 * E) / 1403, F = (460 * z - 220 * P - 6300 * E) / 1403, B = ot.inverseChromaticAdaptation(N), D = ot.inverseChromaticAdaptation(O), U = ot.inverseChromaticAdaptation(F), j = ru([B, D, U], ot.LINRGB_FROM_SCALED_DISCOUNT);
      if (j[0] < 0 || j[1] < 0 || j[2] < 0)
        return 0;
      const J = ot.Y_FROM_LINRGB[0], wt = ot.Y_FROM_LINRGB[1], Y = ot.Y_FROM_LINRGB[2], nt = J * j[0] + wt * j[1] + Y * j[2];
      if (nt <= 0)
        return 0;
      if (w === 4 || Math.abs(nt - i) < 2e-3)
        return j[0] > 100.01 || j[1] > 100.01 || j[2] > 100.01 ? 0 : py(j);
      r = r - (nt - i) * r / (2 * nt);
    }
    return 0;
  }
  /**
   * Finds an sRGB color with the given hue, chroma, and L*, if
   * possible.
   *
   * @param hueDegrees The desired hue, in degrees.
   * @param chroma The desired chroma.
   * @param lstar The desired L*.
   * @return A hexadecimal representing the sRGB color. The color
   * has sufficiently close hue, chroma, and L* to the desired
   * values, if possible; otherwise, the hue and L* will be
   * sufficiently close, and chroma will be maximized.
   */
  static solveToInt(t, e, i) {
    if (e < 1e-4 || i < 1e-4 || i > 99.9999)
      return u1(i);
    t = Wu(t);
    const r = t / 180 * Math.PI, n = gs(i), a = ot.findResultByJ(r, e, n);
    if (a !== 0)
      return a;
    const c = ot.bisectToLimit(n, r);
    return py(c);
  }
  /**
   * Finds an sRGB color with the given hue, chroma, and L*, if
   * possible.
   *
   * @param hueDegrees The desired hue, in degrees.
   * @param chroma The desired chroma.
   * @param lstar The desired L*.
   * @return An CAM16 object representing the sRGB color. The color
   * has sufficiently close hue, chroma, and L* to the desired
   * values, if possible; otherwise, the hue and L* will be
   * sufficiently close, and chroma will be maximized.
   */
  static solveToCam(t, e, i) {
    return Xe.fromInt(ot.solveToInt(t, e, i));
  }
};
o(ot, "HctSolver");
let Ci = ot;
Ci.SCALED_DISCOUNT_FROM_LINRGB = [
  [
    0.001200833568784504,
    0.002389694492170889,
    2795742885861124e-19
  ],
  [
    5891086651375999e-19,
    0.0029785502573438758,
    3270666104008398e-19
  ],
  [
    10146692491640572e-20,
    5364214359186694e-19,
    0.0032979401770712076
  ]
];
Ci.LINRGB_FROM_SCALED_DISCOUNT = [
  [
    1373.2198709594231,
    -1100.4251190754821,
    -7.278681089101213
  ],
  [
    -271.815969077903,
    559.6580465940733,
    -32.46047482791194
  ],
  [
    1.9622899599665666,
    -57.173814538844006,
    308.7233197812385
  ]
];
Ci.Y_FROM_LINRGB = [0.2126, 0.7152, 0.0722];
Ci.CRITICAL_PLANES = [
  0.015176349177441876,
  0.045529047532325624,
  0.07588174588720938,
  0.10623444424209313,
  0.13658714259697685,
  0.16693984095186062,
  0.19729253930674434,
  0.2276452376616281,
  0.2579979360165119,
  0.28835063437139563,
  0.3188300904430532,
  0.350925934958123,
  0.3848314933096426,
  0.42057480301049466,
  0.458183274052838,
  0.4976837250274023,
  0.5391024159806381,
  0.5824650784040898,
  0.6277969426914107,
  0.6751227633498623,
  0.7244668422128921,
  0.775853049866786,
  0.829304845476233,
  0.8848452951698498,
  0.942497089126609,
  1.0022825574869039,
  1.0642236851973577,
  1.1283421258858297,
  1.1946592148522128,
  1.2631959812511864,
  1.3339731595349034,
  1.407011200216447,
  1.4823302800086415,
  1.5599503113873272,
  1.6398909516233677,
  1.7221716113234105,
  1.8068114625156377,
  1.8938294463134073,
  1.9832442801866852,
  2.075074464868551,
  2.1693382909216234,
  2.2660538449872063,
  2.36523901573795,
  2.4669114995532007,
  2.5710888059345764,
  2.6777882626779785,
  2.7870270208169257,
  2.898822059350997,
  3.0131901897720907,
  3.1301480604002863,
  3.2497121605402226,
  3.3718988244681087,
  3.4967242352587946,
  3.624204428461639,
  3.754355295633311,
  3.887192587735158,
  4.022731918402185,
  4.160988767090289,
  4.301978482107941,
  4.445716283538092,
  4.592217266055746,
  4.741496401646282,
  4.893568542229298,
  5.048448422192488,
  5.20615066083972,
  5.3666897647573375,
  5.5300801301023865,
  5.696336044816294,
  5.865471690767354,
  6.037501145825082,
  6.212438385869475,
  6.390297286737924,
  6.571091626112461,
  6.7548350853498045,
  6.941541251256611,
  7.131223617812143,
  7.323895587840543,
  7.5195704746346665,
  7.7182615035334345,
  7.919981813454504,
  8.124744458384042,
  8.332562408825165,
  8.543448553206703,
  8.757415699253682,
  8.974476575321063,
  9.194643831691977,
  9.417930041841839,
  9.644347703669503,
  9.873909240696694,
  10.106627003236781,
  10.342513269534024,
  10.58158024687427,
  10.8238400726681,
  11.069304815507364,
  11.317986476196008,
  11.569896988756009,
  11.825048221409341,
  12.083451977536606,
  12.345119996613247,
  12.610063955123938,
  12.878295467455942,
  13.149826086772048,
  13.42466730586372,
  13.702830557985108,
  13.984327217668513,
  14.269168601521828,
  14.55736596900856,
  14.848930523210871,
  15.143873411576273,
  15.44220572664832,
  15.743938506781891,
  16.04908273684337,
  16.35764934889634,
  16.66964922287304,
  16.985093187232053,
  17.30399201960269,
  17.62635644741625,
  17.95219714852476,
  18.281524751807332,
  18.614349837764564,
  18.95068293910138,
  19.290534541298456,
  19.633915083172692,
  19.98083495742689,
  20.331304511189067,
  20.685334046541502,
  21.042933821039977,
  21.404114048223256,
  21.76888489811322,
  22.137256497705877,
  22.50923893145328,
  22.884842241736916,
  23.264076429332462,
  23.6469514538663,
  24.033477234264016,
  24.42366364919083,
  24.817520537484558,
  25.21505769858089,
  25.61628489293138,
  26.021211842414342,
  26.429848230738664,
  26.842203703840827,
  27.258287870275353,
  27.678110301598522,
  28.10168053274597,
  28.529008062403893,
  28.96010235337422,
  29.39497283293396,
  29.83362889318845,
  30.276079891419332,
  30.722335150426627,
  31.172403958865512,
  31.62629557157785,
  32.08401920991837,
  32.54558406207592,
  33.010999283389665,
  33.4802739966603,
  33.953417292456834,
  34.430438229418264,
  34.911345834551085,
  35.39614910352207,
  35.88485700094671,
  36.37747846067349,
  36.87402238606382,
  37.37449765026789,
  37.87891309649659,
  38.38727753828926,
  38.89959975977785,
  39.41588851594697,
  39.93615253289054,
  40.460400508064545,
  40.98864111053629,
  41.520882981230194,
  42.05713473317016,
  42.597404951718396,
  43.141702194811224,
  43.6900349931913,
  44.24241185063697,
  44.798841244188324,
  45.35933162437017,
  45.92389141541209,
  46.49252901546552,
  47.065252796817916,
  47.64207110610409,
  48.22299226451468,
  48.808024568002054,
  49.3971762874833,
  49.9904556690408,
  50.587870934119984,
  51.189430279724725,
  51.79514187861014,
  52.40501387947288,
  53.0190544071392,
  53.637271562750364,
  54.259673423945976,
  54.88626804504493,
  55.517063457223934,
  56.15206766869424,
  56.79128866487574,
  57.43473440856916,
  58.08241284012621,
  58.734331877617365,
  59.39049941699807,
  60.05092333227251,
  60.715611475655585,
  61.38457167773311,
  62.057811747619894,
  62.7353394731159,
  63.417162620860914,
  64.10328893648692,
  64.79372614476921,
  65.48848194977529,
  66.18756403501224,
  66.89098006357258,
  67.59873767827808,
  68.31084450182222,
  69.02730813691093,
  69.74813616640164,
  70.47333615344107,
  71.20291564160104,
  71.93688215501312,
  72.67524319850172,
  73.41800625771542,
  74.16517879925733,
  74.9167682708136,
  75.67278210128072,
  76.43322770089146,
  77.1981124613393,
  77.96744375590167,
  78.74122893956174,
  79.51947534912904,
  80.30219030335869,
  81.08938110306934,
  81.88105503125999,
  82.67721935322541,
  83.4778813166706,
  84.28304815182372,
  85.09272707154808,
  85.90692527145302,
  86.72564993000343,
  87.54890820862819,
  88.3767072518277,
  89.2090541872801,
  90.04595612594655,
  90.88742016217518,
  91.73345337380438,
  92.58406282226491,
  93.43925555268066,
  94.29903859396902,
  95.16341895893969,
  96.03240364439274,
  96.9059996312159,
  97.78421388448044,
  98.6670533535366,
  99.55452497210776
];
const jr = class jr {
  static from(t, e, i) {
    return new jr(Ci.solveToInt(t, e, i));
  }
  /**
   * @param argb ARGB representation of a color.
   * @return HCT representation of a color in default viewing conditions
   */
  static fromInt(t) {
    return new jr(t);
  }
  toInt() {
    return this.argb;
  }
  /**
   * A number, in degrees, representing ex. red, orange, yellow, etc.
   * Ranges from 0 <= hue < 360.
   */
  get hue() {
    return this.internalHue;
  }
  /**
   * @param newHue 0 <= newHue < 360; invalid values are corrected.
   * Chroma may decrease because chroma has a different maximum for any given
   * hue and tone.
   */
  set hue(t) {
    this.setInternalState(Ci.solveToInt(t, this.internalChroma, this.internalTone));
  }
  get chroma() {
    return this.internalChroma;
  }
  /**
   * @param newChroma 0 <= newChroma < ?
   * Chroma may decrease because chroma has a different maximum for any given
   * hue and tone.
   */
  set chroma(t) {
    this.setInternalState(Ci.solveToInt(this.internalHue, t, this.internalTone));
  }
  /** Lightness. Ranges from 0 to 100. */
  get tone() {
    return this.internalTone;
  }
  /**
   * @param newTone 0 <= newTone <= 100; invalid valids are corrected.
   * Chroma may decrease because chroma has a different maximum for any given
   * hue and tone.
   */
  set tone(t) {
    this.setInternalState(Ci.solveToInt(this.internalHue, this.internalChroma, t));
  }
  constructor(t) {
    this.argb = t;
    const e = Xe.fromInt(t);
    this.internalHue = e.hue, this.internalChroma = e.chroma, this.internalTone = nu(t), this.argb = t;
  }
  setInternalState(t) {
    const e = Xe.fromInt(t);
    this.internalHue = e.hue, this.internalChroma = e.chroma, this.internalTone = nu(t), this.argb = t;
  }
  /**
   * Translates a color into different [ViewingConditions].
   *
   * Colors change appearance. They look different with lights on versus off,
   * the same color, as in hex code, on white looks different when on black.
   * This is called color relativity, most famously explicated by Josef Albers
   * in Interaction of Color.
   *
   * In color science, color appearance models can account for this and
   * calculate the appearance of a color in different settings. HCT is based on
   * CAM16, a color appearance model, and uses it to make these calculations.
   *
   * See [ViewingConditions.make] for parameters affecting color appearance.
   */
  inViewingConditions(t) {
    const i = Xe.fromInt(this.toInt()).xyzInViewingConditions(t), r = Xe.fromXyzInViewingConditions(i[0], i[1], i[2], ci.make());
    return jr.from(r.hue, r.chroma, au(i[1]));
  }
};
o(jr, "Hct");
let be = jr;
const wd = class wd {
  /**
   * Blend the design color's HCT hue towards the key color's HCT
   * hue, in a way that leaves the original color recognizable and
   * recognizably shifted towards the key color.
   *
   * @param designColor ARGB representation of an arbitrary color.
   * @param sourceColor ARGB representation of the main theme color.
   * @return The design color with a hue shifted towards the
   * system's color, a slightly warmer/cooler variant of the design
   * color's hue.
   */
  static harmonize(t, e) {
    const i = be.fromInt(t), r = be.fromInt(e), n = a1(i.hue, r.hue), a = Math.min(n * 0.5, 15), c = Wu(i.hue + a * n1(i.hue, r.hue));
    return be.from(c, i.chroma, i.tone).toInt();
  }
  /**
   * Blends hue from one color into another. The chroma and tone of
   * the original color are maintained.
   *
   * @param from ARGB representation of color
   * @param to ARGB representation of color
   * @param amount how much blending to perform; 0.0 >= and <= 1.0
   * @return from, with a hue blended towards to. Chroma and tone
   * are constant.
   */
  static hctHue(t, e, i) {
    const r = wd.cam16Ucs(t, e, i), n = Xe.fromInt(r), a = Xe.fromInt(t);
    return be.from(n.hue, a.chroma, nu(t)).toInt();
  }
  /**
   * Blend in CAM16-UCS space.
   *
   * @param from ARGB representation of color
   * @param to ARGB representation of color
   * @param amount how much blending to perform; 0.0 >= and <= 1.0
   * @return from, blended towards to. Hue, chroma, and tone will
   * change.
   */
  static cam16Ucs(t, e, i) {
    const r = Xe.fromInt(t), n = Xe.fromInt(e), a = r.jstar, c = r.astar, l = r.bstar, u = n.jstar, p = n.astar, w = n.bstar, b = a + (u - a) * i, m = c + (p - c) * i, g = l + (w - l) * i;
    return Xe.fromUcs(b, m, g).toInt();
  }
};
o(wd, "Blend");
let Ge = wd;
const as = class as {
  /**
   * Returns a contrast ratio, which ranges from 1 to 21.
   *
   * @param toneA Tone between 0 and 100. Values outside will be clamped.
   * @param toneB Tone between 0 and 100. Values outside will be clamped.
   */
  static ratioOfTones(t, e) {
    return t = ql(0, 100, t), e = ql(0, 100, e), as.ratioOfYs(gs(t), gs(e));
  }
  static ratioOfYs(t, e) {
    const i = t > e ? t : e, r = i === e ? t : e;
    return (i + 5) / (r + 5);
  }
  /**
   * Returns a tone >= tone parameter that ensures ratio parameter.
   * Return value is between 0 and 100.
   * Returns -1 if ratio cannot be achieved with tone parameter.
   *
   * @param tone Tone return value must contrast with.
   * Range is 0 to 100. Invalid values will result in -1 being returned.
   * @param ratio Contrast ratio of return value and tone.
   * Range is 1 to 21, invalid values have undefined behavior.
   */
  static lighter(t, e) {
    if (t < 0 || t > 100)
      return -1;
    const i = gs(t), r = e * (i + 5) - 5, n = as.ratioOfYs(r, i), a = Math.abs(n - e);
    if (n < e && a > 0.04)
      return -1;
    const c = au(r) + 0.4;
    return c < 0 || c > 100 ? -1 : c;
  }
  /**
   * Returns a tone <= tone parameter that ensures ratio parameter.
   * Return value is between 0 and 100.
   * Returns -1 if ratio cannot be achieved with tone parameter.
   *
   * @param tone Tone return value must contrast with.
   * Range is 0 to 100. Invalid values will result in -1 being returned.
   * @param ratio Contrast ratio of return value and tone.
   * Range is 1 to 21, invalid values have undefined behavior.
   */
  static darker(t, e) {
    if (t < 0 || t > 100)
      return -1;
    const i = gs(t), r = (i + 5) / e - 5, n = as.ratioOfYs(i, r), a = Math.abs(n - e);
    if (n < e && a > 0.04)
      return -1;
    const c = au(r) - 0.4;
    return c < 0 || c > 100 ? -1 : c;
  }
  /**
   * Returns a tone >= tone parameter that ensures ratio parameter.
   * Return value is between 0 and 100.
   * Returns 100 if ratio cannot be achieved with tone parameter.
   *
   * This method is unsafe because the returned value is guaranteed to be in
   * bounds for tone, i.e. between 0 and 100. However, that value may not reach
   * the ratio with tone. For example, there is no color lighter than T100.
   *
   * @param tone Tone return value must contrast with.
   * Range is 0 to 100. Invalid values will result in 100 being returned.
   * @param ratio Desired contrast ratio of return value and tone parameter.
   * Range is 1 to 21, invalid values have undefined behavior.
   */
  static lighterUnsafe(t, e) {
    const i = as.lighter(t, e);
    return i < 0 ? 100 : i;
  }
  /**
   * Returns a tone >= tone parameter that ensures ratio parameter.
   * Return value is between 0 and 100.
   * Returns 100 if ratio cannot be achieved with tone parameter.
   *
   * This method is unsafe because the returned value is guaranteed to be in
   * bounds for tone, i.e. between 0 and 100. However, that value may not reach
   * the [ratio with [tone]. For example, there is no color darker than T0.
   *
   * @param tone Tone return value must contrast with.
   * Range is 0 to 100. Invalid values will result in 0 being returned.
   * @param ratio Desired contrast ratio of return value and tone parameter.
   * Range is 1 to 21, invalid values have undefined behavior.
   */
  static darkerUnsafe(t, e) {
    const i = as.darker(t, e);
    return i < 0 ? 0 : i;
  }
};
o(as, "Contrast");
let Ae = as;
const fd = class fd {
  /**
   * Returns true if a color is disliked.
   *
   * @param hct A color to be judged.
   * @return Whether the color is disliked.
   *
   * Disliked is defined as a dark yellow-green that is not neutral.
   */
  static isDisliked(t) {
    const e = Math.round(t.hue) >= 90 && Math.round(t.hue) <= 111, i = Math.round(t.chroma) > 16, r = Math.round(t.tone) < 65;
    return e && i && r;
  }
  /**
   * If a color is disliked, lighten it to make it likable.
   *
   * @param hct A color to be judged.
   * @return A new color if the original color is disliked, or the original
   *   color if it is acceptable.
   */
  static fixIfDisliked(t) {
    return fd.isDisliked(t) ? be.from(t.hue, t.chroma, 70) : t;
  }
};
o(fd, "DislikeAnalyzer");
let ou = fd;
const ke = class ke {
  /**
   * Create a DynamicColor defined by a TonalPalette and HCT tone.
   *
   * @param args Functions with DynamicScheme as input. Must provide a palette
   * and tone. May provide a background DynamicColor and ToneDeltaConstraint.
   */
  static fromPalette(t) {
    return new ke(t.name ?? "", t.palette, t.tone, t.isBackground ?? !1, t.background, t.secondBackground, t.contrastCurve, t.toneDeltaPair);
  }
  /**
   * The base constructor for DynamicColor.
   *
   * _Strongly_ prefer using one of the convenience constructors. This class is
   * arguably too flexible to ensure it can support any scenario. Functional
   * arguments allow  overriding without risks that come with subclasses.
   *
   * For example, the default behavior of adjust tone at max contrast
   * to be at a 7.0 ratio with its background is principled and
   * matches accessibility guidance. That does not mean it's the desired
   * approach for _every_ design system, and every color pairing,
   * always, in every case.
   *
   * @param name The name of the dynamic color. Defaults to empty.
   * @param palette Function that provides a TonalPalette given
   * DynamicScheme. A TonalPalette is defined by a hue and chroma, so this
   * replaces the need to specify hue/chroma. By providing a tonal palette, when
   * contrast adjustments are made, intended chroma can be preserved.
   * @param tone Function that provides a tone, given a DynamicScheme.
   * @param isBackground Whether this dynamic color is a background, with
   * some other color as the foreground. Defaults to false.
   * @param background The background of the dynamic color (as a function of a
   *     `DynamicScheme`), if it exists.
   * @param secondBackground A second background of the dynamic color (as a
   *     function of a `DynamicScheme`), if it
   * exists.
   * @param contrastCurve A `ContrastCurve` object specifying how its contrast
   * against its background should behave in various contrast levels options.
   * @param toneDeltaPair A `ToneDeltaPair` object specifying a tone delta
   * constraint between two colors. One of them must be the color being
   * constructed.
   */
  constructor(t, e, i, r, n, a, c, l) {
    if (this.name = t, this.palette = e, this.tone = i, this.isBackground = r, this.background = n, this.secondBackground = a, this.contrastCurve = c, this.toneDeltaPair = l, this.hctCache = /* @__PURE__ */ new Map(), !n && a)
      throw new Error(`Color ${t} has secondBackgrounddefined, but background is not defined.`);
    if (!n && c)
      throw new Error(`Color ${t} has contrastCurvedefined, but background is not defined.`);
    if (n && !c)
      throw new Error(`Color ${t} has backgrounddefined, but contrastCurve is not defined.`);
  }
  /**
   * Return a ARGB integer (i.e. a hex code).
   *
   * @param scheme Defines the conditions of the user interface, for example,
   * whether or not it is dark mode or light mode, and what the desired
   * contrast level is.
   */
  getArgb(t) {
    return this.getHct(t).toInt();
  }
  /**
   * Return a color, expressed in the HCT color space, that this
   * DynamicColor is under the conditions in scheme.
   *
   * @param scheme Defines the conditions of the user interface, for example,
   * whether or not it is dark mode or light mode, and what the desired
   * contrast level is.
   */
  getHct(t) {
    const e = this.hctCache.get(t);
    if (e != null)
      return e;
    const i = this.getTone(t), r = this.palette(t).getHct(i);
    return this.hctCache.size > 4 && this.hctCache.clear(), this.hctCache.set(t, r), r;
  }
  /**
   * Return a tone, T in the HCT color space, that this DynamicColor is under
   * the conditions in scheme.
   *
   * @param scheme Defines the conditions of the user interface, for example,
   * whether or not it is dark mode or light mode, and what the desired
   * contrast level is.
   */
  getTone(t) {
    const e = t.contrastLevel < 0;
    if (this.toneDeltaPair) {
      const i = this.toneDeltaPair(t), r = i.roleA, n = i.roleB, a = i.delta, c = i.polarity, l = i.stayTogether, p = this.background(t).getTone(t), w = c === "nearer" || c === "lighter" && !t.isDark || c === "darker" && t.isDark, b = w ? r : n, m = w ? n : r, g = this.name === b.name, x = t.isDark ? 1 : -1, z = b.contrastCurve.getContrast(t.contrastLevel), _ = m.contrastCurve.getContrast(t.contrastLevel), P = b.tone(t);
      let E = Ae.ratioOfTones(p, P) >= z ? P : ke.foregroundTone(p, z);
      const N = m.tone(t);
      let O = Ae.ratioOfTones(p, N) >= _ ? N : ke.foregroundTone(p, _);
      return e && (E = ke.foregroundTone(p, z), O = ke.foregroundTone(p, _)), (O - E) * x >= a || (O = ql(0, 100, E + a * x), (O - E) * x >= a || (E = ql(0, 100, O - a * x))), 50 <= E && E < 60 ? x > 0 ? (E = 60, O = Math.max(O, E + a * x)) : (E = 49, O = Math.min(O, E + a * x)) : 50 <= O && O < 60 && (l ? x > 0 ? (E = 60, O = Math.max(O, E + a * x)) : (E = 49, O = Math.min(O, E + a * x)) : x > 0 ? O = 60 : O = 49), g ? E : O;
    } else {
      let i = this.tone(t);
      if (this.background == null)
        return i;
      const r = this.background(t).getTone(t), n = this.contrastCurve.getContrast(t.contrastLevel);
      if (Ae.ratioOfTones(r, i) >= n || (i = ke.foregroundTone(r, n)), e && (i = ke.foregroundTone(r, n)), this.isBackground && 50 <= i && i < 60 && (Ae.ratioOfTones(49, r) >= n ? i = 49 : i = 60), this.secondBackground) {
        const [a, c] = [this.background, this.secondBackground], [l, u] = [a(t).getTone(t), c(t).getTone(t)], [p, w] = [Math.max(l, u), Math.min(l, u)];
        if (Ae.ratioOfTones(p, i) >= n && Ae.ratioOfTones(w, i) >= n)
          return i;
        const b = Ae.lighter(p, n), m = Ae.darker(w, n), g = [];
        return b !== -1 && g.push(b), m !== -1 && g.push(m), ke.tonePrefersLightForeground(l) || ke.tonePrefersLightForeground(u) ? b < 0 ? 100 : b : g.length === 1 ? g[0] : m < 0 ? 0 : m;
      }
      return i;
    }
  }
  /**
   * Given a background tone, find a foreground tone, while ensuring they reach
   * a contrast ratio that is as close to [ratio] as possible.
   *
   * @param bgTone Tone in HCT. Range is 0 to 100, undefined behavior when it
   *     falls outside that range.
   * @param ratio The contrast ratio desired between bgTone and the return
   *     value.
   */
  static foregroundTone(t, e) {
    const i = Ae.lighterUnsafe(t, e), r = Ae.darkerUnsafe(t, e), n = Ae.ratioOfTones(i, t), a = Ae.ratioOfTones(r, t);
    if (ke.tonePrefersLightForeground(t)) {
      const l = Math.abs(n - a) < 0.1 && n < e && a < e;
      return n >= e || n >= a || l ? i : r;
    } else
      return a >= e || a >= n ? r : i;
  }
  /**
   * Returns whether [tone] prefers a light foreground.
   *
   * People prefer white foregrounds on ~T60-70. Observed over time, and also
   * by Andrew Somers during research for APCA.
   *
   * T60 used as to create the smallest discontinuity possible when skipping
   * down to T49 in order to ensure light foregrounds.
   * Since `tertiaryContainer` in dark monochrome scheme requires a tone of
   * 60, it should not be adjusted. Therefore, 60 is excluded here.
   */
  static tonePrefersLightForeground(t) {
    return Math.round(t) < 60;
  }
  /**
   * Returns whether [tone] can reach a contrast ratio of 4.5 with a lighter
   * color.
   */
  static toneAllowsLightForeground(t) {
    return Math.round(t) <= 49;
  }
  /**
   * Adjust a tone such that white has 4.5 contrast, if the tone is
   * reasonably close to supporting it.
   */
  static enableLightForeground(t) {
    return ke.tonePrefersLightForeground(t) && !ke.toneAllowsLightForeground(t) ? 49 : t;
  }
};
o(ke, "DynamicColor");
let G = ke;
var $c;
(function(s) {
  s[s.MONOCHROME = 0] = "MONOCHROME", s[s.NEUTRAL = 1] = "NEUTRAL", s[s.TONAL_SPOT = 2] = "TONAL_SPOT", s[s.VIBRANT = 3] = "VIBRANT", s[s.EXPRESSIVE = 4] = "EXPRESSIVE", s[s.FIDELITY = 5] = "FIDELITY", s[s.CONTENT = 6] = "CONTENT", s[s.RAINBOW = 7] = "RAINBOW", s[s.FRUIT_SALAD = 8] = "FRUIT_SALAD";
})($c || ($c = {}));
const kp = class kp {
  /**
   * Creates a `ContrastCurve` object.
   *
   * @param low Contrast requirement for contrast level -1.0
   * @param normal Contrast requirement for contrast level 0.0
   * @param medium Contrast requirement for contrast level 0.5
   * @param high Contrast requirement for contrast level 1.0
   */
  constructor(t, e, i, r) {
    this.low = t, this.normal = e, this.medium = i, this.high = r;
  }
  /**
   * Returns the contrast ratio at a given contrast level.
   *
   * @param contrastLevel The contrast level. 0.0 is the default (normal);
   * -1.0 is the lowest; 1.0 is the highest.
   * @return The contrast ratio, a number between 1.0 and 21.0.
   */
  getContrast(t) {
    return t <= -1 ? this.low : t < 0 ? wc(this.low, this.normal, (t - -1) / 1) : t < 0.5 ? wc(this.normal, this.medium, (t - 0) / 0.5) : t < 1 ? wc(this.medium, this.high, (t - 0.5) / 0.5) : this.high;
  }
};
o(kp, "ContrastCurve");
let ut = kp;
const _p = class _p {
  /**
   * Documents a constraint in tone distance between two DynamicColors.
   *
   * The polarity is an adjective that describes "A", compared to "B".
   *
   * For instance, ToneDeltaPair(A, B, 15, 'darker', stayTogether) states that
   * A's tone should be at least 15 darker than B's.
   *
   * 'nearer' and 'farther' describes closeness to the surface roles. For
   * instance, ToneDeltaPair(A, B, 10, 'nearer', stayTogether) states that A
   * should be 10 lighter than B in light mode, and 10 darker than B in dark
   * mode.
   *
   * @param roleA The first role in a pair.
   * @param roleB The second role in a pair.
   * @param delta Required difference between tones. Absolute value, negative
   * values have undefined behavior.
   * @param polarity The relative relation between tones of roleA and roleB,
   * as described above.
   * @param stayTogether Whether these two roles should stay on the same side of
   * the "awkward zone" (T50-59). This is necessary for certain cases where
   * one role has two backgrounds.
   */
  constructor(t, e, i, r, n) {
    this.roleA = t, this.roleB = e, this.delta = i, this.polarity = r, this.stayTogether = n;
  }
};
o(_p, "ToneDeltaPair");
let $e = _p;
function ec(s) {
  return s.variant === $c.FIDELITY || s.variant === $c.CONTENT;
}
o(ec, "isFidelity");
function Qt(s) {
  return s.variant === $c.MONOCHROME;
}
o(Qt, "isMonochrome");
function w1(s, t, e, i) {
  let r = e, n = be.from(s, t, e);
  if (n.chroma < t) {
    let a = n.chroma;
    for (; n.chroma < t; ) {
      r += i ? -1 : 1;
      const c = be.from(s, t, r);
      if (a > c.chroma || Math.abs(c.chroma - t) < 0.4)
        break;
      const l = Math.abs(c.chroma - t), u = Math.abs(n.chroma - t);
      l < u && (n = c), a = Math.max(a, c.chroma);
    }
  }
  return r;
}
o(w1, "findDesiredChromaByTone");
function f1(s) {
  return ci.make(
    /*whitePoint=*/
    void 0,
    /*adaptingLuminance=*/
    void 0,
    /*backgroundLstar=*/
    s.isDark ? 30 : 80,
    /*surround=*/
    void 0,
    /*discountingIlluminant=*/
    void 0
  );
}
o(f1, "viewingConditionsForAlbers");
function Ku(s, t) {
  const e = s.inViewingConditions(f1(t));
  return G.tonePrefersLightForeground(s.tone) && !G.toneAllowsLightForeground(e.tone) ? G.enableLightForeground(s.tone) : G.enableLightForeground(e.tone);
}
o(Ku, "performAlbers");
const gc = class gc {
  static highestSurface(t) {
    return t.isDark ? gc.surfaceBright : gc.surfaceDim;
  }
};
o(gc, "MaterialDynamicColors");
let L = gc;
L.contentAccentToneDelta = 15;
L.primaryPaletteKeyColor = G.fromPalette({
  name: "primary_palette_key_color",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.primaryPalette.keyColor.tone, "tone")
});
L.secondaryPaletteKeyColor = G.fromPalette({
  name: "secondary_palette_key_color",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.secondaryPalette.keyColor.tone, "tone")
});
L.tertiaryPaletteKeyColor = G.fromPalette({
  name: "tertiary_palette_key_color",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.tertiaryPalette.keyColor.tone, "tone")
});
L.neutralPaletteKeyColor = G.fromPalette({
  name: "neutral_palette_key_color",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.neutralPalette.keyColor.tone, "tone")
});
L.neutralVariantPaletteKeyColor = G.fromPalette({
  name: "neutral_variant_palette_key_color",
  palette: /* @__PURE__ */ o((s) => s.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.neutralVariantPalette.keyColor.tone, "tone")
});
L.background = G.fromPalette({
  name: "background",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 6 : 98, "tone"),
  isBackground: !0
});
L.onBackground = G.fromPalette({
  name: "on_background",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.background, "background"),
  contrastCurve: new ut(3, 3, 4.5, 7)
});
L.surface = G.fromPalette({
  name: "surface",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 6 : 98, "tone"),
  isBackground: !0
});
L.surfaceDim = G.fromPalette({
  name: "surface_dim",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 6 : 87, "tone"),
  isBackground: !0
});
L.surfaceBright = G.fromPalette({
  name: "surface_bright",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 24 : 98, "tone"),
  isBackground: !0
});
L.surfaceContainerLowest = G.fromPalette({
  name: "surface_container_lowest",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 4 : 100, "tone"),
  isBackground: !0
});
L.surfaceContainerLow = G.fromPalette({
  name: "surface_container_low",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 10 : 96, "tone"),
  isBackground: !0
});
L.surfaceContainer = G.fromPalette({
  name: "surface_container",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 12 : 94, "tone"),
  isBackground: !0
});
L.surfaceContainerHigh = G.fromPalette({
  name: "surface_container_high",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 17 : 92, "tone"),
  isBackground: !0
});
L.surfaceContainerHighest = G.fromPalette({
  name: "surface_container_highest",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 22 : 90, "tone"),
  isBackground: !0
});
L.onSurface = G.fromPalette({
  name: "on_surface",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.surfaceVariant = G.fromPalette({
  name: "surface_variant",
  palette: /* @__PURE__ */ o((s) => s.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 30 : 90, "tone"),
  isBackground: !0
});
L.onSurfaceVariant = G.fromPalette({
  name: "on_surface_variant",
  palette: /* @__PURE__ */ o((s) => s.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 80 : 30, "tone"),
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(3, 4.5, 7, 11)
});
L.inverseSurface = G.fromPalette({
  name: "inverse_surface",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 90 : 20, "tone")
});
L.inverseOnSurface = G.fromPalette({
  name: "inverse_on_surface",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 20 : 95, "tone"),
  background: /* @__PURE__ */ o((s) => L.inverseSurface, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.outline = G.fromPalette({
  name: "outline",
  palette: /* @__PURE__ */ o((s) => s.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 60 : 50, "tone"),
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1.5, 3, 4.5, 7)
});
L.outlineVariant = G.fromPalette({
  name: "outline_variant",
  palette: /* @__PURE__ */ o((s) => s.neutralVariantPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 30 : 80, "tone"),
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7)
});
L.shadow = G.fromPalette({
  name: "shadow",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => 0, "tone")
});
L.scrim = G.fromPalette({
  name: "scrim",
  palette: /* @__PURE__ */ o((s) => s.neutralPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => 0, "tone")
});
L.surfaceTint = G.fromPalette({
  name: "surface_tint",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 80 : 40, "tone"),
  isBackground: !0
});
L.primary = G.fromPalette({
  name: "primary",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? s.isDark ? 100 : 0 : s.isDark ? 80 : 40, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(3, 4.5, 7, 11),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.primaryContainer, L.primary, 15, "nearer", !1), "toneDeltaPair")
});
L.onPrimary = G.fromPalette({
  name: "on_primary",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? s.isDark ? 10 : 90 : s.isDark ? 20 : 100, "tone"),
  background: /* @__PURE__ */ o((s) => L.primary, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.primaryContainer = G.fromPalette({
  name: "primary_container",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => ec(s) ? Ku(s.sourceColorHct, s) : Qt(s) ? s.isDark ? 85 : 25 : s.isDark ? 30 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.primaryContainer, L.primary, 15, "nearer", !1), "toneDeltaPair")
});
L.onPrimaryContainer = G.fromPalette({
  name: "on_primary_container",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => ec(s) ? G.foregroundTone(L.primaryContainer.tone(s), 4.5) : Qt(s) ? s.isDark ? 0 : 100 : s.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.primaryContainer, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.inversePrimary = G.fromPalette({
  name: "inverse_primary",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 40 : 80, "tone"),
  background: /* @__PURE__ */ o((s) => L.inverseSurface, "background"),
  contrastCurve: new ut(3, 4.5, 7, 11)
});
L.secondary = G.fromPalette({
  name: "secondary",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 80 : 40, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(3, 4.5, 7, 11),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.secondaryContainer, L.secondary, 15, "nearer", !1), "toneDeltaPair")
});
L.onSecondary = G.fromPalette({
  name: "on_secondary",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? s.isDark ? 10 : 100 : s.isDark ? 20 : 100, "tone"),
  background: /* @__PURE__ */ o((s) => L.secondary, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.secondaryContainer = G.fromPalette({
  name: "secondary_container",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => {
    const t = s.isDark ? 30 : 90;
    if (Qt(s))
      return s.isDark ? 30 : 85;
    if (!ec(s))
      return t;
    let e = w1(s.secondaryPalette.hue, s.secondaryPalette.chroma, t, !s.isDark);
    return e = Ku(s.secondaryPalette.getHct(e), s), e;
  }, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.secondaryContainer, L.secondary, 15, "nearer", !1), "toneDeltaPair")
});
L.onSecondaryContainer = G.fromPalette({
  name: "on_secondary_container",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => ec(s) ? G.foregroundTone(L.secondaryContainer.tone(s), 4.5) : s.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.secondaryContainer, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.tertiary = G.fromPalette({
  name: "tertiary",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? s.isDark ? 90 : 25 : s.isDark ? 80 : 40, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(3, 4.5, 7, 11),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.tertiaryContainer, L.tertiary, 15, "nearer", !1), "toneDeltaPair")
});
L.onTertiary = G.fromPalette({
  name: "on_tertiary",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? s.isDark ? 10 : 90 : s.isDark ? 20 : 100, "tone"),
  background: /* @__PURE__ */ o((s) => L.tertiary, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.tertiaryContainer = G.fromPalette({
  name: "tertiary_container",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => {
    if (Qt(s))
      return s.isDark ? 60 : 49;
    if (!ec(s))
      return s.isDark ? 30 : 90;
    const t = Ku(s.tertiaryPalette.getHct(s.sourceColorHct.tone), s), e = s.tertiaryPalette.getHct(t);
    return ou.fixIfDisliked(e).tone;
  }, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.tertiaryContainer, L.tertiary, 15, "nearer", !1), "toneDeltaPair")
});
L.onTertiaryContainer = G.fromPalette({
  name: "on_tertiary_container",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? s.isDark ? 0 : 100 : ec(s) ? G.foregroundTone(L.tertiaryContainer.tone(s), 4.5) : s.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.tertiaryContainer, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.error = G.fromPalette({
  name: "error",
  palette: /* @__PURE__ */ o((s) => s.errorPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 80 : 40, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(3, 4.5, 7, 11),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.errorContainer, L.error, 15, "nearer", !1), "toneDeltaPair")
});
L.onError = G.fromPalette({
  name: "on_error",
  palette: /* @__PURE__ */ o((s) => s.errorPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 20 : 100, "tone"),
  background: /* @__PURE__ */ o((s) => L.error, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.errorContainer = G.fromPalette({
  name: "error_container",
  palette: /* @__PURE__ */ o((s) => s.errorPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 30 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.errorContainer, L.error, 15, "nearer", !1), "toneDeltaPair")
});
L.onErrorContainer = G.fromPalette({
  name: "on_error_container",
  palette: /* @__PURE__ */ o((s) => s.errorPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => s.isDark ? 90 : 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.errorContainer, "background"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.primaryFixed = G.fromPalette({
  name: "primary_fixed",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 40 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.primaryFixed, L.primaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
L.primaryFixedDim = G.fromPalette({
  name: "primary_fixed_dim",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 30 : 80, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.primaryFixed, L.primaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
L.onPrimaryFixed = G.fromPalette({
  name: "on_primary_fixed",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 100 : 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.primaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ o((s) => L.primaryFixed, "secondBackground"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.onPrimaryFixedVariant = G.fromPalette({
  name: "on_primary_fixed_variant",
  palette: /* @__PURE__ */ o((s) => s.primaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 90 : 30, "tone"),
  background: /* @__PURE__ */ o((s) => L.primaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ o((s) => L.primaryFixed, "secondBackground"),
  contrastCurve: new ut(3, 4.5, 7, 11)
});
L.secondaryFixed = G.fromPalette({
  name: "secondary_fixed",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 80 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.secondaryFixed, L.secondaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
L.secondaryFixedDim = G.fromPalette({
  name: "secondary_fixed_dim",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 70 : 80, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.secondaryFixed, L.secondaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
L.onSecondaryFixed = G.fromPalette({
  name: "on_secondary_fixed",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.secondaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ o((s) => L.secondaryFixed, "secondBackground"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.onSecondaryFixedVariant = G.fromPalette({
  name: "on_secondary_fixed_variant",
  palette: /* @__PURE__ */ o((s) => s.secondaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 25 : 30, "tone"),
  background: /* @__PURE__ */ o((s) => L.secondaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ o((s) => L.secondaryFixed, "secondBackground"),
  contrastCurve: new ut(3, 4.5, 7, 11)
});
L.tertiaryFixed = G.fromPalette({
  name: "tertiary_fixed",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 40 : 90, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.tertiaryFixed, L.tertiaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
L.tertiaryFixedDim = G.fromPalette({
  name: "tertiary_fixed_dim",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 30 : 80, "tone"),
  isBackground: !0,
  background: /* @__PURE__ */ o((s) => L.highestSurface(s), "background"),
  contrastCurve: new ut(1, 1, 3, 7),
  toneDeltaPair: /* @__PURE__ */ o((s) => new $e(L.tertiaryFixed, L.tertiaryFixedDim, 10, "lighter", !0), "toneDeltaPair")
});
L.onTertiaryFixed = G.fromPalette({
  name: "on_tertiary_fixed",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 100 : 10, "tone"),
  background: /* @__PURE__ */ o((s) => L.tertiaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ o((s) => L.tertiaryFixed, "secondBackground"),
  contrastCurve: new ut(4.5, 7, 11, 21)
});
L.onTertiaryFixedVariant = G.fromPalette({
  name: "on_tertiary_fixed_variant",
  palette: /* @__PURE__ */ o((s) => s.tertiaryPalette, "palette"),
  tone: /* @__PURE__ */ o((s) => Qt(s) ? 90 : 30, "tone"),
  background: /* @__PURE__ */ o((s) => L.tertiaryFixedDim, "background"),
  secondBackground: /* @__PURE__ */ o((s) => L.tertiaryFixed, "secondBackground"),
  contrastCurve: new ut(3, 4.5, 7, 11)
});
const Us = class Us {
  /**
   * @param argb ARGB representation of a color
   * @return Tones matching that color's hue and chroma.
   */
  static fromInt(t) {
    const e = be.fromInt(t);
    return Us.fromHct(e);
  }
  /**
   * @param hct Hct
   * @return Tones matching that color's hue and chroma.
   */
  static fromHct(t) {
    return new Us(t.hue, t.chroma, t);
  }
  /**
   * @param hue HCT hue
   * @param chroma HCT chroma
   * @return Tones matching hue and chroma.
   */
  static fromHueAndChroma(t, e) {
    return new Us(t, e, Us.createKeyColor(t, e));
  }
  constructor(t, e, i) {
    this.hue = t, this.chroma = e, this.keyColor = i, this.cache = /* @__PURE__ */ new Map();
  }
  static createKeyColor(t, e) {
    let r = be.from(t, e, 50), n = Math.abs(r.chroma - e);
    for (let a = 1; a < 50; a += 1) {
      if (Math.round(e) === Math.round(r.chroma))
        return r;
      const c = be.from(t, e, 50 + a), l = Math.abs(c.chroma - e);
      l < n && (n = l, r = c);
      const u = be.from(t, e, 50 - a), p = Math.abs(u.chroma - e);
      p < n && (n = p, r = u);
    }
    return r;
  }
  /**
   * @param tone HCT tone, measured from 0 to 100.
   * @return ARGB representation of a color with that tone.
   */
  tone(t) {
    let e = this.cache.get(t);
    return e === void 0 && (e = be.from(this.hue, this.chroma, t).toInt(), this.cache.set(t, e)), e;
  }
  /**
   * @param tone HCT tone.
   * @return HCT representation of a color with that tone.
   */
  getHct(t) {
    return be.fromInt(this.tone(t));
  }
};
o(Us, "TonalPalette");
let St = Us;
function yy(s) {
  const t = Hw(s), e = Vw(s), i = Bw(s), r = [t.toString(16), e.toString(16), i.toString(16)];
  for (const [n, a] of r.entries())
    a.length === 1 && (r[n] = "0" + a);
  return "#" + r.join("");
}
o(yy, "hexFromArgb");
function m1(s) {
  s = s.replace("#", "");
  const t = s.length === 3, e = s.length === 6, i = s.length === 8;
  if (!t && !e && !i)
    throw new Error("unexpected hex " + s);
  let r = 0, n = 0, a = 0;
  return t ? (r = Ti(s.slice(0, 1).repeat(2)), n = Ti(s.slice(1, 2).repeat(2)), a = Ti(s.slice(2, 3).repeat(2))) : e ? (r = Ti(s.slice(0, 2)), n = Ti(s.slice(2, 4)), a = Ti(s.slice(4, 6))) : i && (r = Ti(s.slice(2, 4)), n = Ti(s.slice(4, 6)), a = Ti(s.slice(6, 8))), (255 << 24 | (r & 255) << 16 | (n & 255) << 8 | a & 255) >>> 0;
}
o(m1, "argbFromHex");
function Ti(s) {
  return parseInt(s, 16);
}
o(Ti, "parseIntHex");
function v1(s, t = !1) {
  var c;
  const e = (c = s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)$/)) == null ? void 0 : c.slice(1).map((l, u) => u === 3 ? Math.round(parseFloat(l) * 255) : parseFloat(l));
  if (!e)
    throw new Error("Could not parse rgba color.");
  const [i, r, n, a] = e;
  return ((t ? 255 : a & 255) << 24 | (i & 255) << 16 | (r & 255) << 8 | n & 255) >>> 0;
}
o(v1, "argbFromRgba");
function g1(s) {
  Ie();
  const t = document.createElement("wy-compute-styles");
  t.setAttribute("style", `color: ${s} !important;`), document.documentElement.append(t);
  const e = window.getComputedStyle(t).color;
  return t.remove(), e;
}
o(g1, "getComputedColor");
function cu(s) {
  return getComputedStyle(s).getPropertyValue("--wy-theme-color") || void 0;
}
o(cu, "getCSSThemeColor");
function b1(s, t) {
  let e = cu(s);
  const i = new MutationObserver(() => {
    const a = cu(s);
    a !== e && (e = a, t(a));
  }), r = {
    attributes: !0,
    attributeFilter: ["class", "style"]
  };
  let n = s;
  for (; n && n !== document; )
    i.observe(n, r), n = n.parentNode;
  return () => i.disconnect();
}
o(b1, "observeCSSThemeColor");
function lu() {
  var e;
  return Ie(), ((e = Array.from(document.head.querySelectorAll("meta[name='theme-color']")).filter((i) => {
    var n;
    const r = i.getAttribute("media");
    return !r || ((n = window.matchMedia(r)) == null ? void 0 : n.matches);
  }).pop()) == null ? void 0 : e.getAttribute("content")) || void 0;
}
o(lu, "getMetaThemeColor");
function x1(s) {
  Ie();
  const t = Array.from(document.head.querySelectorAll("meta[name='theme-color']"));
  if (!t)
    return () => {
    };
  let e = lu();
  const i = /* @__PURE__ */ o(() => {
    const c = lu();
    c !== e && (e = c, s(c));
  }, "checkChangedColor"), r = new MutationObserver(i), n = {
    attributes: !0,
    attributeFilter: ["content"]
  }, a = [];
  return t.forEach((c) => {
    r.observe(c, n);
    const l = c.getAttribute("media");
    if (l) {
      const u = window.matchMedia(l);
      u.addEventListener("change", i), a.push(u);
    }
  }), () => {
    r.disconnect(), a.forEach((c) => c.removeEventListener("change", i));
  };
}
o(x1, "observeMetaThemeColor");
const hc = [], $1 = 16;
function C1(s, t = !1) {
  var O;
  if (hc.some((F) => F.seedColor === s)) {
    const F = (O = hc.find((B) => B.seedColor === s)) == null ? void 0 : O.colors;
    if (F)
      return F;
  }
  const e = [];
  t && e.push(`--wy-theme-color:${s};`);
  let i = s;
  !s.startsWith("#") && !s.startsWith("rgb") && (i = g1(s));
  const r = s.startsWith("#") ? m1(i) : v1(i), n = be.fromInt(r), a = n.hue, c = n.chroma, l = Math.max(48, c), u = Math.min(l, 84), w = 360 / 16, b = 27.4, m = -8, g = (a + 360 - b - m + w / 2) % w + b + m - w / 2, x = {
    primary: St.fromHueAndChroma(a, l),
    secondary: St.fromHueAndChroma(a, l / 3),
    tertiary: St.fromHueAndChroma(a + 60, l / 2),
    neutral: St.fromHueAndChroma(a, Math.min(c / 12, 4)),
    "neutral-variant": St.fromHueAndChroma(a, Math.min(c / 6, 8)),
    error: St.fromHueAndChroma(g, 84),
    warning: St.fromHueAndChroma(g + 4 * w, u),
    // Same as yellow
    red: St.fromHueAndChroma(g, u),
    "deep-orange": St.fromHueAndChroma(g + 1 * w, u),
    orange: St.fromHueAndChroma(g + 2 * w, u),
    amber: St.fromHueAndChroma(g + 3 * w, u),
    yellow: St.fromHueAndChroma(g + 4 * w, u),
    lime: St.fromHueAndChroma(g + 5 * w, u),
    "light-green": St.fromHueAndChroma(g + 6 * w, u),
    green: St.fromHueAndChroma(g + 7 * w, u),
    teal: St.fromHueAndChroma(g + 8 * w, u),
    cyan: St.fromHueAndChroma(g + 9 * w, u),
    "light-blue": St.fromHueAndChroma(g + 10 * w, u),
    blue: St.fromHueAndChroma(g + 11 * w, u),
    indigo: St.fromHueAndChroma(g + 12 * w, u),
    "deep-purple": St.fromHueAndChroma(g + 13 * w, u),
    purple: St.fromHueAndChroma(g + 14 * w, u),
    pink: St.fromHueAndChroma(g + 15 * w, u),
    gray: St.fromHueAndChroma(a, 4)
  }, z = {
    //"100": 100,
    99: 99,
    95: 95,
    90: 90,
    80: 80,
    70: 70,
    60: 60,
    50: 50,
    40: 40,
    30: 30,
    20: 20,
    10: 10
    //"0": 0
  }, _ = {
    primary: z,
    secondary: z,
    tertiary: z,
    neutral: z,
    "neutral-variant": z,
    error: z,
    warning: z,
    blue: { light: 70, dark: 80 },
    indigo: { light: 60, dark: 60 },
    purple: { light: 60, dark: 70 },
    pink: { light: 60, dark: 70 },
    red: { light: 60, dark: 60 },
    orange: { light: 70, dark: 70 },
    yellow: { light: 70, dark: 80 },
    green: { light: 60, dark: 60 },
    teal: { light: 60, dark: 60 },
    cyan: { light: 50, dark: 60 },
    gray: { light: 50, dark: 60 }
  };
  for (const F in _) {
    const B = _[F];
    for (const D in B) {
      const U = yy(x[F].tone(B[D]));
      e.push(`--wy-${F}-${D}:${U};`);
    }
  }
  const P = {
    light: x.primary.tone(40),
    dark: x.primary.tone(80)
  }, E = {
    light: x.neutral.tone(99),
    dark: x.neutral.tone(10)
  }, N = {
    "surface-1": {
      light: Ge.cam16Ucs(E.light, P.light, 0.05),
      dark: Ge.cam16Ucs(E.dark, P.dark, 0.05)
    },
    "surface-2": {
      light: Ge.cam16Ucs(E.light, P.light, 0.08),
      dark: Ge.cam16Ucs(E.dark, P.dark, 0.08)
    },
    "surface-3": {
      light: Ge.cam16Ucs(E.light, P.light, 0.11),
      dark: Ge.cam16Ucs(E.dark, P.dark, 0.11)
    },
    "surface-4": {
      light: Ge.cam16Ucs(E.light, P.light, 0.12),
      dark: Ge.cam16Ucs(E.dark, P.dark, 0.12)
    },
    "surface-5": {
      light: Ge.cam16Ucs(E.light, P.light, 0.14),
      dark: Ge.cam16Ucs(E.dark, P.dark, 0.14)
    }
  };
  for (const F in N) {
    const B = N[F];
    for (const D in B) {
      const U = yy(B[D]);
      e.push(`--wy-${F}-${D}:${U};`);
    }
  }
  return hc.unshift({ seedColor: s, colors: e }), hc.length = Math.min(hc.length, $1), e;
}
o(C1, "generateThemeColors");
const k1 = /* @__PURE__ */ o((s) => {
  if (Ie(), Wm)
    document.adoptedStyleSheets = s.map(
      (t) => t instanceof CSSStyleSheet ? t : t.styleSheet
    );
  else
    for (const t of s) {
      const e = document.createElement("style"), i = global.litNonce;
      i !== void 0 && e.setAttribute("nonce", i), e.textContent = t.cssText, (document.head || document.documentElement).appendChild(e);
    }
}, "adoptGlobalStyles"), We = dt`.wy-light :where(wy-chat),.wy-light :where(wy-comments),.wy-light :where(wy-component),.wy-light :where(wy-copilot),.wy-light :where(wy-files),.wy-light :where(wy-messenger),.wy-light :where(wy-notification-toasts),.wy-light :where(wy-notifications),.wy-light :where(wy-posts),:host(.wy-light),:host .wy-light,::slotted(.wy-light){color-scheme:light;--wy-primary: var(--wy-primary-40, #006399);--wy-on-primary: var(--wy-white, #ffffff);--wy-primary-container: var(--wy-primary-90, #cde5ff);--wy-on-primary-container: var(--wy-primary-10, #001d32);--wy-secondary: var(--wy-secondary-40, #3b6a1c);--wy-on-secondary: var(--wy-white, #ffffff);--wy-secondary-container: var(--wy-secondary-90, #bbf294);--wy-on-secondary-container: var(--wy-secondary-10, #0a2100);--wy-tertiary: var(--wy-tertiary-40, #3b6a1c);--wy-on-tertiary: var(--wy-white, #ffffff);--wy-tertiary-container: var(--wy-tertiary-90, #bbf294);--wy-on-tertiary-container: var(--wy-tertiary-10, #0a2100);--wy-error: var(--wy-error-40, #ba1824);--wy-on-error: var(--wy-white, #ffffff);--wy-error-container: var(--wy-error-90, #ffdad7);--wy-on-error-container: var(--wy-error-10, #410004);--wy-warning: var(--wy-warning-70, #afb140);--wy-on-warning: var(--wy-black, #000000);--wy-warning-container: var(--wy-warning-90, #e7e971);--wy-on-warning-container: var(--wy-warning-10, #1c1d00);--wy-background: var(--wy-neutral-99, #fcfcff);--wy-on-background: var(--wy-neutral-10, #1a1c1e);--wy-surface: var(--wy-neutral-99, #fcfcff);--wy-on-surface: var(--wy-neutral-10, #1a1c1e);--wy-surface-variant: var(--wy-neutral-variant-90, #dee3eb);--wy-on-surface-variant: var(--wy-neutral-variant-30, #42474e);--wy-outline: var(--wy-neutral-variant-50, #72777e);--wy-outline-variant: var(--wy-neutral-variant-80, #c2c7ce);--wy-inverse-surface: var(--wy-neutral-20, #2f3033);--wy-on-inverse-surface: var(--wy-neutral-95, #f0f0f4);--wy-inverse-primary: var(--wy-primary-80, #95ccff);--wy-surface-1: var(--wy-surface-1-light, #f1f2f7);--wy-surface-2: var(--wy-surface-2-light, #eaedf3);--wy-surface-3: var(--wy-surface-3-light, #e3e7ee);--wy-surface-4: var(--wy-surface-4-light, #e1e6ed);--wy-surface-5: var(--wy-surface-5-light, #dce2ea);--wy-highlight: var(--wy-primary-95, #e8f2ff);--wy-on-highlight: var(--wy-primary-10, #001d32);--wy-link: var(--wy-primary-40, #006399);--wy-presence-active: var(--wy-green-light, #00a38b);--wy-blue: var(--wy-blue-light, #89a9fc);--wy-indigo: var(--wy-indigo-light, #9185de);--wy-purple: var(--wy-purple-light, #c675b7);--wy-pink: var(--wy-pink-light, #d57194);--wy-red: var(--wy-red-light, #db726c);--wy-orange: var(--wy-orange-light, #e89a3a);--wy-yellow: var(--wy-yellow-light, #afb140);--wy-green: var(--wy-green-light, #00a38b);--wy-teal: var(--wy-teal-light, #00a0a8);--wy-cyan: var(--wy-cyan-light, #0082a1);--wy-gray: var(--wy-gray-light, #76777a);--wy-code-text: var(--wy-code-text-light, #3b3b3b);--wy-code-variable: var(--wy-code-variable-light, #001080);--wy-code-operator: var(--wy-code-operator-light, #000000);--wy-code-prolog: var(--wy-code-prolog-light, #000080);--wy-code-comment: var(--wy-code-comment-light, #008000);--wy-code-builtin: var(--wy-code-builtin-light, #0070C1);--wy-code-number: var(--wy-code-number-light, #098658);--wy-code-inserted: var(--wy-code-inserted-light, #098658);--wy-code-constant: var(--wy-code-constant-light, #811F3F);--wy-code-hexcode: var(--wy-code-hexcode-light, #811F3F);--wy-code-regex: var(--wy-code-regex-light, #811F3F);--wy-code-char: var(--wy-code-char-light, #811F3F);--wy-code-tag: var(--wy-code-tag-light, #800000);--wy-code-attr-name: var(--wy-code-attr-name-light, #E50000);--wy-code-selector: var(--wy-code-selector-light, #E50000);--wy-code-property: var(--wy-code-property-light, #E50000);--wy-code-deleted: var(--wy-code-deleted-light, #A31515);--wy-code-string: var(--wy-code-string-light, #A31515);--wy-code-changed: var(--wy-code-changed-light, #0451A5);--wy-code-punctuation: var(--wy-code-punctuation-light, #000000);--wy-code-function: var(--wy-code-function-light, #0000FF);--wy-code-keyword: var(--wy-code-keyword-light, #AF00DB);--wy-code-class-name: var(--wy-code-class-name-light, #267F99)}.wy-dark:not(.wy-light) :where(wy-chat),.wy-dark:not(.wy-light) :where(wy-comments),.wy-dark:not(.wy-light) :where(wy-component),.wy-dark:not(.wy-light) :where(wy-copilot),.wy-dark:not(.wy-light) :where(wy-files),.wy-dark:not(.wy-light) :where(wy-messenger),.wy-dark:not(.wy-light) :where(wy-notification-toasts),.wy-dark:not(.wy-light) :where(wy-notifications),.wy-dark:not(.wy-light) :where(wy-posts),:host(.wy-dark:not(.wy-light)),:host .wy-dark:not(.wy-light),::slotted(.wy-dark:not(.wy-light)){color-scheme:dark;--wy-primary: var(--wy-primary-80, #95ccff);--wy-on-primary: var(--wy-primary-20, #003352);--wy-primary-container: var(--wy-primary-30, #004a75);--wy-on-primary-container: var(--wy-primary-90, #cde5ff);--wy-secondary: var(--wy-secondary-80, #a0d57b);--wy-on-secondary: var(--wy-secondary-20, #163800);--wy-secondary-container: var(--wy-secondary-30, #245103);--wy-on-secondary-container: var(--wy-secondary-90, #bbf294);--wy-tertiary: var(--wy-tertiary-80, #a0d57b);--wy-on-tertiary: var(--wy-tertiary-20, #163800);--wy-tertiary-container: var(--wy-tertiary-30, #245103);--wy-on-tertiary-container: var(--wy-tertiary-90, #bbf294);--wy-error: var(--wy-error-80, #ffb3ae);--wy-on-error: var(--wy-error-20, #68000b);--wy-error-container: var(--wy-error-30, #930014);--wy-on-error-container: var(--wy-error-90, #ffdad7);--wy-warning: var(--wy-warning-90, #e7e971);--wy-on-warning: var(--wy-warning-30, #484a00);--wy-warning-container: var(--wy-warning-50, #7a7c05);--wy-on-warning-container: var(--wy-warning-95, #f5f77d);--wy-background: var(--wy-neutral-10, #1a1c1e);--wy-on-background: var(--wy-neutral-90, #e2e2e5);--wy-surface: var(--wy-neutral-10, #1a1c1e);--wy-on-surface: var(--wy-neutral-90, #e2e2e5);--wy-surface-variant: var(--wy-neutral-variant-30, #42474e);--wy-on-surface-variant: var(--wy-neutral-variant-80, #c2c7ce);--wy-outline: var(--wy-neutral-variant-60, #8c9198);--wy-outline-variant: var(--wy-neutral-variant-30, #42474e);--wy-inverse-surface: var(--wy-neutral-90, #e2e2e5);--wy-on-inverse-surface: var(--wy-neutral-20, #2f3033);--wy-inverse-primary: var(--wy-primary-40, #006399);--wy-surface-1: var(--wy-surface-1-dark, #212427);--wy-surface-2: var(--wy-surface-2-dark, #25292d);--wy-surface-3: var(--wy-surface-3-dark, #292e33);--wy-surface-4: var(--wy-surface-4-dark, #2b3035);--wy-surface-5: var(--wy-surface-5-dark, #2d3338);--wy-highlight: var(--wy-primary-20, #003352);--wy-on-highlight: var(--wy-primary-90, #cde5ff);--wy-link: var(--wy-primary-80, #95ccff);--wy-presence-active: var(--wy-green-dark, #00a38b);--wy-blue: var(--wy-blue-dark, #b1c5ff);--wy-indigo: var(--wy-indigo-dark, #9185de);--wy-purple: var(--wy-purple-dark, #e38fd3);--wy-pink: var(--wy-pink-dark, #f48bae);--wy-red: var(--wy-red-dark, #db726c);--wy-orange: var(--wy-orange-dark, #e89a3a);--wy-yellow: var(--wy-yellow-dark, #cacc58);--wy-green: var(--wy-green-dark, #00a38b);--wy-teal: var(--wy-teal-dark, #00a0a8);--wy-cyan: var(--wy-cyan-dark, #009dc3);--wy-gray: var(--wy-gray-dark, #909194);--wy-code-text: var(--wy-code-text-dark, #cccccc);--wy-code-variable: var(--wy-code-variable-dark, #9CDCFE);--wy-code-operator: var(--wy-code-operator-dark, #d4d4d4);--wy-code-prolog: var(--wy-code-prolog-dark, #569CD6);--wy-code-comment: var(--wy-code-comment-dark, #6a9955);--wy-code-builtin: var(--wy-code-builtin-dark, #4fc1ff);--wy-code-number: var(--wy-code-number-dark, #b5cea8);--wy-code-inserted: var(--wy-code-inserted-dark, #b5cea8);--wy-code-constant: var(--wy-code-constant-dark, #646695);--wy-code-hexcode: var(--wy-code-hexcode-dark, #646695);--wy-code-regex: var(--wy-code-regex-dark, #d16969);--wy-code-char: var(--wy-code-char-dark, #d16969);--wy-code-tag: var(--wy-code-tag-dark, #569cd6);--wy-code-attr-name: var(--wy-code-attr-name-dark, #9cdcfe);--wy-code-selector: var(--wy-code-selector-dark, #9cdcfe);--wy-code-property: var(--wy-code-property-dark, #9cdcfe);--wy-code-deleted: var(--wy-code-deleted-dark, #ce9178);--wy-code-string: var(--wy-code-string-dark, #ce9178);--wy-code-changed: var(--wy-code-changed-dark, #569cd6);--wy-code-punctuation: var(--wy-code-punctuation-dark, #D4D4D4);--wy-code-function: var(--wy-code-function-dark, #569cd6);--wy-code-keyword: var(--wy-code-keyword-dark, #C586C0);--wy-code-class-name: var(--wy-code-class-name-dark, #4ec9b0)}`, _1 = dt`@property --wy-component-color{syntax: \"<color>\"; inherits: true; initial-value: currentColor;}@property --wy-component-background-color{syntax: \"<color>\"; inherits: true; initial-value: transparent;}`, z1 = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i), k1([_1, We]);
    }
  }, o(t, "WeavyStyles"), t;
}, "WeavyStylesMixin"), M1 = /* @__PURE__ */ o((s) => {
  var t;
  return t = class extends s {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...i) {
      super(...i), this.version = Rt.version, this.whenUrl().then(() => {
        this.isDestroyed || this.checkVersion();
      });
    }
    /**
     * Checks the version of the Weavy Context against the Weavy Environment version.
     *
     * @param {string} [version] - Optional version to check against the environment version.
     */
    async checkVersion(i = this.version) {
      var a, c;
      await this.whenUrl(), this.networkStateIsPending = !0;
      let r;
      try {
        if (r = await fetch(new URL("/version", this.url), await this.fetchOptions({}, !1)), !r.ok)
          throw new Error("Could not verify environment version.");
        this.networkStateIsPending = !1, this.serverState = "ok";
      } catch (l) {
        this.networkStateIsPending = !1, this.serverState = "unreachable", console.warn("Could not check version: " + l.toString());
        return;
      }
      const n = await r.text();
      if (n.startsWith("v") && (!i || !n || i !== n))
        try {
          const l = i.split(".").slice(0, 2), u = n.split(".").slice(0, 2);
          if (l[0] !== u[0])
            throw new Error();
          l[1] !== u[1] && console.warn(
            `Version inconsistency: ${Rt.sourceName}@${this.version} ≠ ${(a = this.url) == null ? void 0 : a.hostname}@${n}`
          );
        } catch {
          throw new Error(
            `Version mismatch! ${Rt.sourceName}@${this.version} ≠ ${(c = this.url) == null ? void 0 : c.hostname}@${n}`
          );
        }
    }
  }, o(t, "WeavyVersion"), t;
}, "WeavyVersionMixin");
var bn;
let qw = (bn = class extends Event {
  constructor(t, e, i, r) {
    super("context-request", { bubbles: !0, composed: !0 }), this.context = t, this.contextTarget = e, this.callback = i, this.subscribe = r ?? !1;
  }
}, o(bn, "s"), bn);
var xn;
let ji = (xn = class {
  constructor(t, e, i, r) {
    if (this.subscribe = !1, this.provided = !1, this.value = void 0, this.t = (n, a) => {
      this.unsubscribe && (this.unsubscribe !== a && (this.provided = !1, this.unsubscribe()), this.subscribe || this.unsubscribe()), this.value = n, this.host.requestUpdate(), this.provided && !this.subscribe || (this.provided = !0, this.callback && this.callback(n, a)), this.unsubscribe = a;
    }, this.host = t, e.context !== void 0) {
      const n = e;
      this.context = n.context, this.callback = n.callback, this.subscribe = n.subscribe ?? !1;
    } else this.context = e, this.callback = i, this.subscribe = r ?? !1;
    this.host.addController(this);
  }
  hostConnected() {
    this.dispatchRequest();
  }
  hostDisconnected() {
    this.unsubscribe && (this.unsubscribe(), this.unsubscribe = void 0);
  }
  dispatchRequest() {
    this.host.dispatchEvent(new qw(this.context, this.host, this.t, this.subscribe));
  }
}, o(xn, "s"), xn);
var $n;
let P1 = ($n = class {
  get value() {
    return this.o;
  }
  set value(t) {
    this.setValue(t);
  }
  setValue(t, e = !1) {
    const i = e || !Object.is(t, this.o);
    this.o = t, i && this.updateObservers();
  }
  constructor(t) {
    this.subscriptions = /* @__PURE__ */ new Map(), this.updateObservers = () => {
      for (const [e, { disposer: i }] of this.subscriptions) e(this.o, i);
    }, t !== void 0 && (this.value = t);
  }
  addCallback(t, e, i) {
    if (!i) return void t(this.value);
    this.subscriptions.has(t) || this.subscriptions.set(t, { disposer: /* @__PURE__ */ o(() => {
      this.subscriptions.delete(t);
    }, "disposer"), consumerHost: e });
    const { disposer: r } = this.subscriptions.get(t);
    t(this.value, r);
  }
  clearCallbacks() {
    this.subscriptions.clear();
  }
}, o($n, "s"), $n);
var Cn;
let S1 = (Cn = class extends Event {
  constructor(t, e) {
    super("context-provider", { bubbles: !0, composed: !0 }), this.context = t, this.contextTarget = e;
  }
}, o(Cn, "e"), Cn);
var kn;
let du = (kn = class extends P1 {
  constructor(t, e, i) {
    var r, n;
    super(e.context !== void 0 ? e.initialValue : i), this.onContextRequest = (a) => {
      if (a.context !== this.context) return;
      const c = a.contextTarget ?? a.composedPath()[0];
      c !== this.host && (a.stopPropagation(), this.addCallback(a.callback, c, a.subscribe));
    }, this.onProviderRequest = (a) => {
      if (a.context !== this.context || (a.contextTarget ?? a.composedPath()[0]) === this.host) return;
      const c = /* @__PURE__ */ new Set();
      for (const [l, { consumerHost: u }] of this.subscriptions) c.has(l) || (c.add(l), u.dispatchEvent(new qw(this.context, u, l, !0)));
      a.stopPropagation();
    }, this.host = t, e.context !== void 0 ? this.context = e.context : this.context = e, this.attachListeners(), (n = (r = this.host).addController) == null || n.call(r, this);
  }
  attachListeners() {
    this.host.addEventListener("context-request", this.onContextRequest), this.host.addEventListener("context-provider", this.onProviderRequest);
  }
  hostConnected() {
    this.host.dispatchEvent(new S1(this.context, this.host));
  }
}, o(kn, "i"), kn);
function Rs({ context: s }) {
  return (t, e) => {
    const i = /* @__PURE__ */ new WeakMap();
    if (typeof e == "object") return { get() {
      return t.get.call(this);
    }, set(r) {
      return i.get(this).setValue(r), t.set.call(this, r);
    }, init(r) {
      return i.set(this, new du(this, { context: s, initialValue: r })), r;
    } };
    {
      t.constructor.addInitializer((a) => {
        i.set(a, new du(a, { context: s }));
      });
      const r = Object.getOwnPropertyDescriptor(t, e);
      let n;
      if (r === void 0) {
        const a = /* @__PURE__ */ new WeakMap();
        n = { get() {
          return a.get(this);
        }, set(c) {
          i.get(this).setValue(c), a.set(this, c);
        }, configurable: !0, enumerable: !0 };
      } else {
        const a = r.set;
        n = { ...r, set(c) {
          i.get(this).setValue(c), a == null || a.call(this, c);
        } };
      }
      return void Object.defineProperty(t, e, n);
    }
  };
}
o(Rs, "e$5");
function ee({ context: s, subscribe: t }) {
  return (e, i) => {
    typeof i == "object" ? i.addInitializer(function() {
      new ji(this, { context: s, callback: /* @__PURE__ */ o((r) => {
        e.set.call(this, r);
      }, "callback"), subscribe: t });
    }) : e.constructor.addInitializer((r) => {
      new ji(r, { context: s, callback: /* @__PURE__ */ o((n) => {
        r[i] = n;
      }, "callback"), subscribe: t });
    });
  };
}
o(ee, "c$2");
const zp = class zp extends Event {
  /**
   *
   * @param context the context key to request
   * @param contextTarget the original context target of the requester
   * @param callback the callback that should be invoked when the context with the specified key is available
   * @param subscribe when, true indicates we want to subscribe to future updates
   */
  constructor(t, e, i, r) {
    super("context-request", { bubbles: !0, composed: !0 }), this.context = t, this.contextTarget = e, this.callback = i, this.subscribe = r ?? !1;
  }
};
o(zp, "ContextRequestEvent");
let hu = zp;
const Mp = class Mp extends Event {
  /**
   *
   * @param context the context which this provider can provide
   * @param contextTarget the original context target of the provider
   */
  constructor(t, e) {
    super("context-provider", { bubbles: !0, composed: !0 }), this.context = t, this.contextTarget = e;
  }
};
o(Mp, "ContextProviderEvent");
let uu = Mp;
const Pp = class Pp extends du {
  constructor(t, e, i) {
    e.context !== void 0 ? super(t, e) : super(t, e, i), e.context !== void 0 ? this._context = e.context : this._context = e, this.isAttached = !0, this.host instanceof it || this.dispatchWhenConnected();
  }
  dispatchWhenConnected() {
    this.isAttached && (this.host.isConnected ? this.host.dispatchEvent(new uu(this._context, this.host)) : requestAnimationFrame(() => this.dispatchWhenConnected()));
  }
  detachListeners() {
    this.isAttached = !1, this.host.removeEventListener("context-request", this.onContextRequest), this.host.removeEventListener("context-provider", this.onProviderRequest);
  }
};
o(Pp, "WyContextProvider");
let Nl = Pp;
const le = Symbol.for("weavy-client");
function A1(s, t) {
  return Ie(), new Nl(s, { context: le, initialValue: t });
}
o(A1, "createWeavyContextProvider");
const Ce = Hu() ? A1(document.documentElement) : void 0, E1 = /* @__PURE__ */ o((s) => {
  var t, e;
  return e = class extends s {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    constructor(...n) {
      super(...n);
      // CONTEXT PROVIDER
      // SHOULD BE APPLIED LAST TO ENSURE EVERYTHING IS SET BEFORE CONTEXT GETS PROVIDED
      T(this, t);
      this.host !== document.documentElement ? (Ce == null || Ce.detachListeners(), S(this, t, new Nl(this.host, {
        context: le,
        initialValue: this
      }))) : Ce == null || Ce.setValue(this);
    }
    updateContext() {
      var n;
      this.host !== document.documentElement ? (n = f(this, t)) == null || n.updateObservers() : Ce == null || Ce.updateObservers();
    }
    destroy() {
      var n;
      super.destroy(), this.host !== document.documentElement ? (n = f(this, t)) == null || n.detachListeners() : (Ce == null ? void 0 : Ce.value) === this && (Ce == null || Ce.setValue(void 0));
    }
  }, t = new WeakMap(), o(e, "WeavyContextProvider"), e;
}, "WeavyContextProviderMixin");
var Wc, Qc, Vi, _n;
const he = class he {
  // CONSTRUCTOR
  constructor(t) {
    // Promises
    // whenUrl
    T(this, Wc);
    T(this, Qc);
    // Reactive options
    T(this, Vi);
    T(this, _n);
    this.weavySid = bc(), this.weavyId = `${he.sourceName}#${this.weavySid}`, this.cloudFilePickerUrl = he.defaults.cloudFilePickerUrl, this.disableEnvironmentImports = he.defaults.disableEnvironmentImports, this.gcTime = he.defaults.gcTime, this.scrollBehavior = he.defaults.scrollBehavior, this.staleTime = he.defaults.staleTime, this.tokenFactoryRetryDelay = he.defaults.tokenFactoryRetryDelay, this.tokenFactoryTimeout = he.defaults.tokenFactoryTimeout, S(this, Qc, new Promise((i) => {
      S(this, Wc, i);
    })), S(this, _n, !1), console.info(`${he.sourceName}@${he.version} #${this.weavySid}`), Ie(), this.host = document.documentElement;
    const e = {};
    for (const i in t) {
      const r = i;
      t[r] !== void 0 && Object.assign(e, { [r]: t[r] });
    }
    e != null && e.host && (this.host = e.host, delete e.host), e && Object.assign(this, e);
  }
  async whenUrl() {
    await f(this, Qc);
  }
  /**
   * The URL to the weavy environment.
   */
  get url() {
    return f(this, Vi);
  }
  set url(t) {
    var e;
    if (this.isDestroyed)
      throw new Ht();
    try {
      if (typeof t == "string")
        t && S(this, Vi, new URL(t, window.location.toString()));
      else if (t instanceof URL)
        S(this, Vi, t || void 0);
      else if (t == null)
        S(this, Vi, void 0);
      else
        throw new Error();
    } catch {
      throw new TypeError("Invalid url");
    }
    t && !this.disableEnvironmentImports && globalThis.WEAVY_IMPORT_URL === void 0 && (globalThis.WEAVY_IMPORT_URL = new URL(
      "./uikit-web/",
      t
    ).href), f(this, Vi) && ((e = f(this, Wc)) == null || e.call(this, f(this, Vi)));
  }
  /**
   * Prefix to use for caches.
   */
  get cachePrefix() {
    return `${he.version}:${this.url}`;
  }
  // eslint-disable-next-line @typescript-eslint/require-await
  async reset() {
    console.info(this.weavyId, "is reset");
  }
  get isDestroyed() {
    return f(this, _n);
  }
  destroy() {
    S(this, _n, !0), console.info(this.weavyId, "was destroyed");
  }
};
Wc = new WeakMap(), Qc = new WeakMap(), Vi = new WeakMap(), _n = new WeakMap(), o(he, "WeavyClient"), he.version = "29.2.0", he.sourceName = "@weavy/uikit-web", he.defaults = {
  // StrictWeavyOptions
  cloudFilePickerUrl: "https://filebrowser.weavy.io/v14/",
  disableEnvironmentImports: !1,
  gcTime: 1e3 * 60 * 60 * 24,
  // 24h,
  locale: Dw,
  notificationEvents: !1,
  scrollBehavior: "auto",
  staleTime: 1e3 * 1,
  // 1s
  tokenFactoryRetryDelay: 2e3,
  tokenFactoryTimeout: 2e4,
  // WeavyComponentSettingProps
  annotations: "buttons-inline",
  notifications: "button-list",
  notificationsBadge: "count",
  reactions: "😍 😎 😉 😜 👍"
};
let Rt = he;
const Sp = class Sp extends E1(
  Uv(
    i1(
      Kv(
        Wv(
          Gv(
            qv(
              e1(M1(Qv(z1(s1(Rt)))))
            )
          )
        )
      )
    )
  )
) {
};
o(Sp, "Weavy");
let Ft = Sp;
const Ap = class Ap {
  constructor(t, e, i, r, n) {
    var a, c;
    if (this.subscribe = !1, this.provided = !1, this.value = void 0, this._callback = (l, u) => {
      this.unsubscribe && (this.unsubscribe !== u && (this.provided = !1, this.unsubscribe()), this.subscribe || this.unsubscribe()), this.value = l, this.host.requestUpdate(), (!this.provided || this.subscribe) && (this.provided = !0, this.callback && this.callback(l, u)), this.unsubscribe = u;
    }, this.host = t, e.context !== void 0) {
      const l = e;
      this.context = l.context, this.callback = l.callback, this.subscribe = l.subscribe ?? !1, this.ref = l.ref ?? t;
    } else
      this.context = e, this.callback = i, this.subscribe = r ?? !1, this.ref = n ?? t;
    (c = (a = this.host).addController) == null || c.call(a, this);
  }
  hostConnected() {
    this.dispatchRequest();
  }
  hostDisconnected() {
    this.unsubscribe && (this.unsubscribe(), this.unsubscribe = void 0);
  }
  dispatchRequest() {
    this.ref.dispatchEvent(
      new hu(
        this.context,
        this.host,
        this._callback,
        this.subscribe
      )
    );
  }
};
o(Ap, "ContextConsumer");
let pu = Ap;
const Ep = class Ep {
  /**
   * @param host - The host element
   * @param context - The Context to use. Should be constructed using createContext().
   */
  constructor(t, e, i) {
    this.whenRef = new Promise((r) => this.resolveRef = r), t.addController(this), this.host = t, this.ref = i, this.setContext(e);
  }
  /**
   * The DOM connected element that can subscribe to a context
   */
  get ref() {
    return this._ref;
  }
  set ref(t) {
    var e;
    this._ref = t, t && ((e = this.resolveRef) == null || e.call(this, t));
  }
  async setContext(t) {
    this.whenContext = new Promise((i) => this.resolveContext = i);
    const e = await this.whenRef;
    this.context = new pu(this.host, {
      context: t,
      subscribe: !0,
      callback: /* @__PURE__ */ o((i, r) => {
        var n;
        (n = this.resolveContext) == null || n.call(this, i), this.host.requestUpdate();
      }, "callback"),
      ref: e
    }), await yw(e), this.context.dispatchRequest();
  }
  hostUpdate() {
    var t, e;
    (t = this.context) != null && t.value && ((e = this.resolveContext) == null || e.call(this, this.context.value));
  }
};
o(Ep, "ContextController");
let wy = Ep;
const O1 = { attribute: !0, type: String, converter: Km, reflect: !1, hasChanged: Qm }, R1 = /* @__PURE__ */ o((s = O1, t, e) => {
  const { kind: i, metadata: r } = e;
  let n = globalThis.litPropertyMetadata.get(r);
  if (n === void 0 && globalThis.litPropertyMetadata.set(r, n = /* @__PURE__ */ new Map()), i === "setter" && ((s = Object.create(s)).wrapped = !0), n.set(e.name, s), i === "accessor") {
    const { name: a } = e;
    return { set(c) {
      const l = t.get.call(this);
      t.set.call(this, c), this.requestUpdate(a, l, s);
    }, init(c) {
      return c !== void 0 && this.C(a, void 0, s, c), c;
    } };
  }
  if (i === "setter") {
    const { name: a } = e;
    return function(c) {
      const l = this[a];
      t.call(this, c), this.requestUpdate(a, l, s);
    };
  }
  throw Error("Unsupported decorator location: " + i);
}, "r$3");
function y(s) {
  return (t, e) => typeof e == "object" ? R1(s, t, e) : ((i, r, n) => {
    const a = r.hasOwnProperty(n);
    return r.constructor.createProperty(n, i), a ? Object.getOwnPropertyDescriptor(r, n) : void 0;
  })(s, t, e);
}
o(y, "n$3");
function H(s) {
  return y({ ...s, state: !0, attribute: !1 });
}
o(H, "r$2");
const L1 = /* @__PURE__ */ o((s, t, e) => (e.configurable = !0, e.enumerable = !0, Reflect.decorate && typeof t != "object" && Object.defineProperty(s, t, e), e), "e$4");
function Nw(s) {
  return (t, e) => {
    const { slot: i, selector: r } = s ?? {}, n = "slot" + (i ? `[name=${i}]` : ":not([name])");
    return L1(t, e, { get() {
      var l;
      const a = (l = this.renderRoot) == null ? void 0 : l.querySelector(n), c = (a == null ? void 0 : a.assignedElements(s)) ?? [];
      return r === void 0 ? c : c.filter((u) => u.matches(r));
    } });
  };
}
o(Nw, "o$6");
var Kc;
const Op = class Op {
  // PROPERTY INIT
  constructor(t) {
    T(this, Kc);
    this.notifications = Rt.defaults.notifications, this.notificationsBadge = Rt.defaults.notificationsBadge, this.reactions = Rt.defaults.reactions, this.annotations = Rt.defaults.annotations, S(this, Kc, t), Object.keys(this).forEach((i) => {
      i in t && Object.assign(this, { [i]: t[i] });
    });
  }
  /**
   * Provides a reference to the host.
   */
  get component() {
    return f(this, Kc);
  }
};
Kc = new WeakMap(), o(Op, "WeavyComponentSettings");
let jl = Op;
const jw = Symbol.for("weavy-component-settings"), Rp = class Rp {
  get result() {
    return this._result && this.observer ? this.observer.trackResult(this._result) : { isPending: !0 };
  }
  constructor(t) {
    t.addController(this), this.host = t, this.whenContext = new Promise((e) => this.resolveContext = e), this.whenQueryClient = new Promise((e) => this.resolveQueryClient = e), this.setContext();
  }
  async setContext() {
    await Xo(this.host), this.context = new ji(this.host, {
      context: le,
      subscribe: !0,
      callback: /* @__PURE__ */ o((t) => {
        var e, i;
        t && ((e = this.resolveContext) == null || e.call(this, t), this.queryClient = t.queryClient, (i = this.resolveQueryClient) == null || i.call(this, t.queryClient));
      }, "callback")
    });
  }
  async trackQuery(t, e = !0) {
    var n;
    (n = this.observerUnsubscribe) == null || n.call(this);
    const i = await this.whenQueryClient;
    if (!i)
      throw new Error("No QueryClient provided");
    const r = new Sw(i, t);
    this.observer = r, this.observerSubscribe(e);
  }
  observerSubscribe(t = !0) {
    var e;
    if (this.queryClient && this.observer) {
      t ? this._result = this.observer.getOptimisticResult(this.observer.options) : this._result = this.observer.getCurrentResult(), this.observerUnsubscribe = this.observer.subscribe(() => {
        if (this.observer) {
          const r = dl(this.result, this.observer.getCurrentResult());
          r !== this._result && (this._result = r, this.host.requestUpdate());
        }
      }), this.observer.updateResult(), this.host.requestUpdate();
      let i;
      t ? i = this.observer.fetchOptimistic(this.observer.options) : i = (e = this.queryClient.getQueryCache().get(this.observer.options.queryHash)) == null ? void 0 : e.promise, i == null || i.catch(() => {
      }).finally(() => {
        var r;
        (r = this.observer) == null || r.updateResult();
      });
    }
  }
  untrackQuery() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this), this.observerUnsubscribe = void 0, this._result = void 0, this.observer = void 0, this.host.requestUpdate();
  }
  hostConnected() {
    this.observerSubscribe();
  }
  hostDisconnected() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this);
  }
};
o(Rp, "QueryController");
let Ne = Rp;
const Gu = Symbol.for("weavy-app"), vd = Symbol.for("weavy-user");
var A = /* @__PURE__ */ ((s) => (s.Attachments = "attachments", s.agents = "agents", s.CloudFiles = "cloud_files", s.ContextData = "context_data", s.Comments = "comments", s.Embeds = "embeds", s.GoogleMeet = "google_meet", s.Meetings = "meetings", s.Mentions = "mentions", s.MicrosoftTeams = "microsoft_teams", s.Polls = "polls", s.Previews = "previews", s.Reactions = "reactions", s.Receipts = "receipts", s.Thumbnails = "thumbnails", s.Typing = "typing", s.Versions = "versions", s.WebDAV = "web_dav", s.ZoomMeetings = "zoom_meetings", s))(A || {});
const gd = Symbol.for("weavy-features");
var ms, Xs, xi;
const md = class md {
  /**
   * Creates a feature policy. All features are initially enabled unless `defaultFeatures` is specified.
   *
   * @constructor
   * @param componentFeatures - Available features.
   */
  constructor(t, e) {
    T(this, ms);
    T(this, Xs);
    T(this, xi);
    S(this, ms, Object.keys(t)), S(this, Xs, Object.entries(t).reduce(
      (i, [r, n]) => (n && i.push(r), i),
      []
    )), S(this, xi, e ?? f(this, Xs));
  }
  features() {
    return f(this, ms);
  }
  supportedFeature(...t) {
    return t.every((e) => f(this, ms).includes(e));
  }
  allowedFeatures() {
    return f(this, xi);
  }
  allowsFeature(...t) {
    return t.every((e) => this.supportedFeature(e) ? f(this, xi).includes(e) : !1);
  }
  allowsAnyFeature(...t) {
    return t.some((e) => this.supportedFeature(e) ? f(this, xi).includes(e) : !1);
  }
  /**
   * Sets the allowed features.
   * @param allowedFeatures - Space separated string with features that will be enabled. Empty string will disable all features. `null` or `undefined` will enable all features.
   */
  setAllowedFeatures(t) {
    return S(this, xi, typeof t == "string" ? Ww(t, f(this, ms)) : f(this, Xs)), f(this, xi);
  }
  immutable() {
    const t = Zu(f(this, ms), f(this, Xs));
    return new md(t, f(this, xi));
  }
};
ms = new WeakMap(), Xs = new WeakMap(), xi = new WeakMap(), o(md, "ComponentFeatures");
let Ue = md;
function Ww(s, t) {
  return s.split(" ").filter((e) => {
    if (e) {
      if (t.includes(e))
        return !0;
      console.warn("Unknown feature provided:", e);
    }
    return !1;
  });
}
o(Ww, "featureListFromString");
function Zu(s, t) {
  return t ?? (t = s), Object.fromEntries(
    s.map((e) => [e, t.includes(e)])
  );
}
o(Zu, "featureConfigFromList");
const yu = Object.values(A), Qw = Symbol.for("weavy-link"), de = [];
for (let s = 0; s < 256; ++s)
  de.push((s + 256).toString(16).slice(1));
function I1(s, t = 0) {
  return (de[s[t + 0]] + de[s[t + 1]] + de[s[t + 2]] + de[s[t + 3]] + "-" + de[s[t + 4]] + de[s[t + 5]] + "-" + de[s[t + 6]] + de[s[t + 7]] + "-" + de[s[t + 8]] + de[s[t + 9]] + "-" + de[s[t + 10]] + de[s[t + 11]] + de[s[t + 12]] + de[s[t + 13]] + de[s[t + 14]] + de[s[t + 15]]).toLowerCase();
}
o(I1, "unsafeStringify");
let Ah;
const T1 = new Uint8Array(16);
function F1() {
  if (!Ah) {
    if (typeof crypto > "u" || !crypto.getRandomValues)
      throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
    Ah = crypto.getRandomValues.bind(crypto);
  }
  return Ah(T1);
}
o(F1, "rng");
const D1 = typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto), fy = { randomUUID: D1 };
function fc(s, t, e) {
  var r;
  if (fy.randomUUID && !s)
    return fy.randomUUID();
  s = s || {};
  const i = s.random ?? ((r = s.rng) == null ? void 0 : r.call(s)) ?? F1();
  if (i.length < 16)
    throw new Error("Random bytes length must be >= 16");
  return i[6] = i[6] & 15 | 64, i[8] = i[8] & 63 | 128, I1(i);
}
o(fc, "v4");
function H1(s) {
  let t;
  if (s instanceof URL)
    t = { type: "url", item: s };
  else if (s instanceof File)
    t = { type: "file", item: s };
  else if (s instanceof Blob)
    t = {
      type: "file",
      item: new File([s], `${fc()}`, { type: s.type })
    };
  else if (typeof s == "string")
    t = {
      type: "file",
      item: new File([s], `${fc()}.data.txt`, { type: "text/plain;charset=UTF-8" })
    };
  else if (Xm(s) || Uh(s))
    try {
      const e = Uh(s) ? s.toJSON() : JSON.stringify(s, ov(), 2);
      t = {
        type: "file",
        item: new File([e], `${fc()}.json.txt`, { type: "text/plain;charset=UTF-8" })
      };
    } catch (e) {
      console.error("Could not serialize context data to JSON.", e);
    }
  return t;
}
o(H1, "getContextDataRef");
const ic = /* @__PURE__ */ o((s, t = 3) => {
  const e = [" B", " KB", " MB", " GB", " TB", " PB", " EB", " ZB", " YB"];
  let i = s, r = 0;
  for (; r < e.length - 1 && i >= 1024; )
    i = 100 * i / 1024 / 100, r++;
  return i.toLocaleString(void 0, { maximumSignificantDigits: t }) + e[r];
}, "fileSizeAsString");
function Qe(s) {
  return s.lastIndexOf(".") === -1 ? "." : (s.substring(s.lastIndexOf("."), s.length) || s).toLowerCase();
}
o(Qe, "getExtension");
function Kw(s) {
  switch (s) {
    case ".aac":
    case ".aif":
    case ".aiff":
    case ".au":
    case ".gsm":
    case ".m4a":
    case ".mid":
    case ".midi":
    case ".mka":
    case ".mp3":
    case ".oga":
    case ".ogg":
    case ".ra":
    case ".ram":
    case ".snd":
    case ".spx":
    case ".wav":
    case ".wma":
      return !0;
    default:
      return !1;
  }
}
o(Kw, "isAudio");
function V1(s) {
  switch (s) {
    case ".ai":
    case ".apng":
    case ".bmp":
    case ".emf":
    case ".eps":
    case ".gif":
    case ".heic":
    case ".ico":
    case ".jpg":
    case ".jpeg":
    case ".png":
    case ".psd":
    case ".svg":
    case ".tif":
    case ".tiff":
    case ".webp":
    case ".wmf":
      return !0;
    default:
      return !1;
  }
}
o(V1, "isImage");
function B1(s) {
  switch (Qe(s)) {
    case ".apng":
    case ".bmp":
    case ".gif":
    case ".ico":
    case ".jpg":
    case ".jpeg":
    case ".png":
    case ".svg":
    case ".webp":
      return !0;
    default:
      return !1;
  }
}
o(B1, "isWebImage");
function Gw(s) {
  switch (s) {
    case ".3g2":
    case ".asx":
    case ".asf":
    case ".avi":
    case ".flv":
    case ".mk3d":
    case ".mkv":
    case ".mov":
    case ".mp4":
    case ".mpeg":
    case ".mpg":
    case ".ogm":
    case ".ogv":
    case ".ogx":
    case ".qt":
    case ".rm":
    case ".rv":
    case ".smi":
    case ".smil":
    case ".swf":
    case ".webm":
    case ".wmv":
    case ".xaml":
      return !0;
    default:
      return !1;
  }
}
o(Gw, "isVideo");
function U1(s) {
  switch (s) {
    case ".markdown":
    case ".md":
      return !0;
    default:
      return !1;
  }
}
o(U1, "isMarkdown");
function Zw(s) {
  switch (s) {
    case ".htm":
    case ".html":
    case ".xhtml":
    case ".xml":
      return !0;
    default:
      return !1;
  }
}
o(Zw, "isMarkup");
function Yu(s) {
  if (Zw(s))
    return !0;
  switch (s) {
    case ".as":
    case ".as3":
    case ".asm":
    case ".aspx":
    case ".bat":
    case ".c":
    case ".cc":
    case ".cmake":
    case ".coffee":
    case ".cpp":
    case ".cs":
    case ".css":
    case ".cxx":
    case ".diff":
    case ".erb":
    case ".erl":
    case ".groovy":
    case ".gvy":
    case ".h":
    case ".haml":
    case ".hh":
    case ".hpp":
    case ".hxx":
    case ".java":
    case ".js":
    case ".json":
    case ".jsx":
    case ".less":
    case ".lst":
    case ".m":
    case ".make":
    case ".ml":
    case ".mm":
    case ".out":
    case ".patch":
    case ".php":
    case ".pl":
    case ".plist":
    case ".properties":
    case ".py":
    case ".rb":
    case ".sass":
    case ".scala":
    case ".scm":
    case ".script":
    case ".scss":
    case ".sh":
    case ".sml":
    case ".sql":
    case ".vb":
    case ".vi":
    case ".vim":
    case ".xsd":
    case ".xsl":
    case ".yaml":
    case ".yml":
      return !0;
    default:
      return !1;
  }
}
o(Yu, "isCode");
function Yw(s) {
  if (Yu(s) || U1(s))
    return !0;
  switch (s) {
    case ".txt":
      return !0;
    default:
      return !1;
  }
}
o(Yw, "isText");
function Ei(s) {
  const t = Qe(s);
  if (t === "") return { icon: "file" };
  if (Kw(t))
    return { icon: "file-music", color: "indigo" };
  if (V1(t))
    return { icon: "file-image", color: "cyan" };
  if (Gw(t))
    return { icon: "file-video", color: "pink" };
  if (Zw(t))
    return { icon: "file-xml", color: "purple" };
  if (Yu(t))
    return { icon: "file-code", color: "purple" };
  if (Yw(t))
    return { icon: "file-document" };
  switch (t) {
    case ".7z":
    case ".zip":
      return { icon: "file-compressed", color: "orange" };
    case ".doc":
    case ".docm":
    case ".docx":
    case ".dotm":
    case ".dotx":
      return { icon: "file-word", color: "native" };
    case ".eml":
    case ".msg":
      return { icon: "email", color: "" };
    case ".xls":
    case ".xlsm":
    case ".xlsx":
    case ".xltx":
      return { icon: "file-excel", color: "native" };
    case ".pdf":
      return { icon: "file-pdf", color: "native" };
    case ".ppt":
    case ".pptm":
    case ".pptx":
    case ".potx":
      return { icon: "file-powerpoint", color: "native" };
    case ".pages":
      return { icon: "file", color: "orange" };
    case ".numbers":
      return { icon: "file", color: "green" };
    case ".keynote":
      return { icon: "file", color: "blue" };
  }
  return { icon: "file" };
}
o(Ei, "getIcon");
function q1(s) {
  const t = Qe(s);
  return t === "" ? "none" : B1(t) ? "image" : Yu(t) ? "code" : Yw(t) ? "text" : Kw(t) ? "audio" : Gw(t) ? "video" : "none";
}
o(q1, "getWebPreviewFormat");
function Ls(s) {
  switch (s) {
    case "Google Drive":
      return "google-drive";
    case "Dropbox":
      return "dropbox";
    case "OneDrive":
      return "onedrive";
    case "Box":
      return "box";
    default:
      return "";
  }
}
o(Ls, "getProvider");
function hl(s) {
  let t = "file";
  switch (Qe(s)) {
    case ".7z":
    case ".zip":
      t = "archive";
      break;
    case ".aac":
    case ".aif":
    case ".aiff":
    case ".au":
    case ".gsm":
    case ".m4a":
    case ".mid":
    case ".midi":
    case ".mka":
    case ".mp3":
    case ".oga":
    case ".ogg":
    case ".ra":
    case ".ram":
    case ".snd":
    case ".spx":
    case ".wav":
    case ".wma":
      t = "audio";
      break;
    case ".c":
    case ".cgi":
    case ".cpp":
    case ".cs":
    case ".cshtml":
    case ".css":
    case ".html":
    case ".java":
    case ".js":
    case ".json":
    case ".less":
    case ".php":
    case ".pl":
    case ".ps1":
    case ".py":
    case ".rb":
    case ".rs":
    case ".scss":
    case ".sh":
    case ".swift":
    case ".sql":
    case ".ts":
    case ".xml":
    case ".yaml":
    case ".yml":
      t = "code";
      break;
    case ".doc":
    case ".docm":
    case ".docx":
    case ".dotm":
    case ".dotx":
    case ".gdoc":
    case ".pages":
    case ".pdf":
      t = "document";
      break;
    case ".eml":
    case ".msg":
      t = "email";
      break;
    case ".gslides":
    case ".keynote":
    case ".ppt":
    case ".pptm":
    case ".pptx":
    case ".potx":
      t = "presentation";
      break;
    case ".gsheet":
    case ".numbers":
    case ".xls":
    case ".xlsm":
    case ".xlsx":
    case ".xltx":
      t = "spreadsheet";
      break;
    case ".ai":
    case ".apng":
    case ".bmp":
    case ".emf":
    case ".eps":
    case ".gif":
    case ".heic":
    case ".ico":
    case ".jpg":
    case ".jpeg":
    case ".png":
    case ".psd":
    case ".svg":
    case ".tif":
    case ".tiff":
    case ".webp":
    case ".wmf":
      t = "image";
      break;
    case ".md":
    case ".markdown":
    case ".txt":
      t = "text";
      break;
    case ".3g2":
    case ".asx":
    case ".asf":
    case ".avi":
    case ".flv":
    case ".mk3d":
    case ".mkv":
    case ".mov":
    case ".mp4":
    case ".mpeg":
    case ".mpg":
    case ".ogm":
    case ".ogv":
    case ".ogx":
    case ".qt":
    case ".rm":
    case ".rv":
    case ".smi":
    case ".smil":
    case ".swf":
    case ".webm":
    case ".wmv":
    case ".xaml":
      t = "video";
      break;
  }
  return t;
}
o(hl, "getKind");
function Xu(s) {
  const t = s.target, e = t == null ? void 0 : t.value.lastIndexOf(".");
  e === -1 ? t == null || t.select() : e !== void 0 && (t == null || t.setSelectionRange(0, e));
}
o(Xu, "handleSelectFilename");
async function wu(s, t = "SHA-256") {
  return await new Promise((e) => {
    if (s) {
      const i = new FileReader();
      i.readAsArrayBuffer(s), i.onloadend = async () => {
        const r = await crypto.subtle.digest(t, i.result);
        let n = "";
        r && (n = Array.from(new Uint8Array(r)).map((c) => c.toString(16).padStart(2, "0")).join("")), e(n);
      };
    } else
      e("");
  });
}
o(wu, "getHash");
function Eh(s, t) {
  return s.findAll(t.filters).map(
    (e) => t.select ? t.select(e) : e.state
  );
}
o(Eh, "getResult");
const Lp = class Lp {
  constructor(t) {
    this.alwaysUpdate = !1, t.addController(this), this.host = t, this.setContext();
  }
  async setContext() {
    this.whenContext = new Promise((t) => this.resolveContext = t), await Xo(this.host), this.context = new ji(this.host, { context: le, subscribe: !0 });
  }
  hostUpdate() {
    var t, e;
    (t = this.context) != null && t.value && ((e = this.resolveContext) == null || e.call(this));
  }
  async trackMutationState(t, e) {
    var i, r, n;
    if (e || (await this.whenContext, e = (r = (i = this.context) == null ? void 0 : i.value) == null ? void 0 : r.queryClient), !e)
      throw new Error("No QueryClient provided");
    return (n = this.mutationCacheUnsubscribe) == null || n.call(this), this.options = t, this.mutationCache = e.getMutationCache(), this.mutationCacheSubscribe(), this.result;
  }
  mutationCacheSubscribe() {
    this.mutationCache && this.options && (this.result = Eh(this.mutationCache, this.options), this.mutationCacheUnsubscribe = this.mutationCache.subscribe((t) => {
      if (this.mutationCache && this.options && /added|removed|updated/.test(t.type)) {
        const e = Eh(this.mutationCache, this.options);
        (this.result !== e || yc(this.result, e)) && (this.result = e, this.host.requestUpdate());
      }
    }), this.host.requestUpdate());
  }
  get isMutating() {
    var t;
    return !this.mutationCache || !((t = this.options) != null && t.filters) ? 0 : Eh(this.mutationCache, { filters: { ...this.options.filters, status: "pending" } }).length;
  }
  untrackMutationState() {
    var t;
    (t = this.mutationCacheUnsubscribe) == null || t.call(this), this.mutationCacheUnsubscribe = void 0, this.result = void 0, this.options = void 0, this.mutationCache = void 0, this.host.requestUpdate();
  }
  hostConnected() {
    this.mutationCacheSubscribe();
  }
  hostDisconnected() {
    var t;
    (t = this.mutationCacheUnsubscribe) == null || t.call(this);
  }
};
o(Lp, "MutationStateController");
let cr = Lp;
const Ip = class Ip {
  constructor(t) {
    t.addController(this), this.host = t, this.whenContext = new Promise((e) => this.resolveContext = e), this.whenObserver = new Promise((e) => this.resolveObserver = e), this.setContext();
  }
  async setContext() {
    await Xo(this.host), this.context = new ji(this.host, { context: le, subscribe: !0 });
  }
  hostUpdate() {
    var t, e;
    (t = this.context) != null && t.value && ((e = this.resolveContext) == null || e.call(this));
  }
  async trackMutation(t, e) {
    var i, r, n, a;
    if (e || (await this.whenContext, e = (r = (i = this.context) == null ? void 0 : i.value) == null ? void 0 : r.queryClient), !e)
      throw new Error("No QueryClient provided");
    return (n = this.observerUnsubscribe) == null || n.call(this), this.observer && (this.whenObserver = new Promise((c) => this.resolveObserver = c)), this.observer = new kt(e, { ...t }), this.observerSubscribe(), (a = this.resolveObserver) == null || a.call(this, this.observer), this.observer;
  }
  observerSubscribe() {
    this.observer && (this.result = this.observer.getCurrentResult(), this.observerUnsubscribe ?? (this.observerUnsubscribe = this.observer.subscribe(() => {
      if (this.observer) {
        const t = dl(this.result, this.observer.getCurrentResult());
        this.result !== t && (this.result = t, this.host.requestUpdate());
      }
    })), this.host.requestUpdate());
  }
  untrackMutation() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this), this.observerUnsubscribe = void 0, this.result = void 0, this.observer = void 0, this.host.requestUpdate();
  }
  async mutate(t, e) {
    return (await this.whenObserver).mutate(t, e);
  }
  hostConnected() {
    this.observerSubscribe();
  }
  hostDisconnected() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this);
  }
};
o(Ip, "MutationController");
let Le = Ip;
function Vt(s, t, e, i) {
  const r = s.getMutationCache(), n = r.find({
    mutationKey: t,
    predicate: /* @__PURE__ */ o((a) => a.state.variables === e, "predicate")
  });
  if (n && n.state.context) {
    const a = { ...n.state.context };
    i(a);
    const c = { ...n.state, context: a };
    n.state = c, r.notify({
      mutation: n,
      type: "updated",
      action: {
        type: "pending",
        context: n.state.context,
        variables: n.state.variables,
        isPaused: !1
      }
    });
  }
}
o(Vt, "updateMutationContext");
function Xw(s, t, e) {
  const i = s.getMutationCache().find({ mutationKey: t, exact: !0, predicate: e });
  i && s.getMutationCache().remove(i);
}
o(Xw, "removeMutation");
function N1(s, t) {
  const e = s.getMutationCache();
  e.findAll({ mutationKey: t, exact: !0 }).forEach((r) => {
    e.remove(r);
  });
}
o(N1, "removeMutations");
const Ju = /* @__PURE__ */ o((s, t, e = 0, i = "application/octet-stream", r, n = Date.now()) => {
  const a = s && (s instanceof URL ? s.toString() : URL.createObjectURL(s));
  return {
    id: n,
    app: { id: -1 },
    name: t,
    kind: hl(t),
    size: e,
    media_type: i,
    embed_url: "",
    preview_format: q1(t),
    thumbnail_url: a,
    preview_url: a,
    download_url: a,
    rev: -1,
    created_by: r,
    created_at: (/* @__PURE__ */ new Date()).toUTCString(),
    is_subscribed: !1,
    is_trashed: !1,
    is_starred: !1
  };
}, "getTempFile");
function Jw(s) {
  const t = s ? s.reduce(
    (e, i) => {
      var n, a;
      const r = (n = i.context) == null ? void 0 : n.file;
      return r && ((a = i.context) != null && a.status.progress) && r.size ? {
        loaded: e.loaded + i.context.status.progress * r.size,
        total: e.total + r.size
      } : e;
    },
    { loaded: 0, total: 0 }
  ) : { loaded: 0, total: 0 };
  return {
    loaded: t.loaded,
    total: t.total,
    percent: t.total > 0 ? t.loaded / t.total : null
  };
}
o(Jw, "getFileMutationsTotalProgress");
function tf(s) {
  return s ? s.some((t) => {
    var e;
    return ((e = t.context) == null ? void 0 : e.status.state) === "conflict";
  }) ? "conflict" : s.some((t) => t.status === "error") ? "error" : s.every((t) => t.status === "success") ? "ok" : "pending" : "ok";
}
o(tf, "getFileMutationsTotalStatus");
function j1(s) {
  return (s == null ? void 0 : s.filter((t) => {
    var e;
    return ((e = t.context) == null ? void 0 : e.status.state) === "conflict" || t.status === "error";
  })) || [];
}
o(j1, "getFileMutationsByConflictOrError");
function W1(s, t, e) {
  const i = s.queryClient;
  i.getMutationCache().findAll({
    mutationKey: ["apps", t.id, "files"],
    exact: !0,
    predicate: /* @__PURE__ */ o((r) => {
      var n, a;
      return /error|success/.test(r.state.status) && ((a = (n = r.state.variables) == null ? void 0 : n.blob) == null ? void 0 : a.name) === e;
    }, "predicate")
  }).forEach((r) => {
    i.getMutationCache().remove(r);
  });
}
o(W1, "removeSettledFileMutations");
function Q1(s, t, e) {
  const i = s.queryClient, r = ["apps", e.id, "files"];
  return {
    mutationFn: /* @__PURE__ */ o(async ({ blob: a, replace: c = !1 }) => {
      const l = await s.fetch("/api/apps/" + e.id + "/files", {
        method: "POST",
        body: JSON.stringify({ blob_id: a.id, replace: c })
      });
      if (!l.ok) {
        const u = await l.json();
        throw new Error(u.detail || u.title, { cause: u });
      }
      return await l.json();
    }, "mutationFn"),
    mutationKey: r,
    onMutate: /* @__PURE__ */ o(async (a) => {
      await i.cancelQueries({ queryKey: r, exact: !0 }), K1(s, e, a.blob.name), W1(s, e, a.blob.name);
      let c;
      try {
        c = a.blob.thumbnail_url && new URL(a.blob.thumbnail_url) || void 0;
      } catch {
      }
      const l = Ju(c, a.blob.name, a.blob.size, a.blob.media_type, t);
      return {
        type: a.replace ? "replace" : "create",
        file: l,
        status: { state: "pending" }
      };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((a, c, l) => (Vt(i, r, c, (u) => {
      u && (u.status.state = "ok", u.status.progress = void 0, u.status.text = void 0);
    }), i.invalidateQueries({ queryKey: r })), "onSuccess"),
    onError(a, c, l) {
      var u;
      ((u = a == null ? void 0 : a.cause) == null ? void 0 : u.status) === 409 ? Vt(i, r, c, (p) => {
        p && (p.status.progress = void 0, p.status.state = "conflict", p.status.text = a.message);
      }) : Vt(i, r, c, (p) => {
        p && (p.status.state = "error", p.status.progress = void 0, p.status.text = a.message);
      });
    }
  };
}
o(Q1, "getCreateFileMutationOptions");
function K1(s, t, e, i, r = "blobs") {
  const n = s.queryClient;
  n.getMutationCache().findAll({
    mutationKey: ["apps", t.id, r, i],
    exact: !0,
    status: "success",
    predicate: /* @__PURE__ */ o((a) => {
      var c;
      return ((c = a.state.data) == null ? void 0 : c.name) === e;
    }, "predicate")
  }).forEach((a) => {
    n.getMutationCache().remove(a);
  });
}
o(K1, "removeSuccessfulUploadBlobMutations");
async function ef(s, t, e) {
  const i = new FormData();
  i.append("blob", t);
  const r = await s.upload("/api/blobs", "POST", i, Ul.Auto, (a) => {
    e && e({ progress: a });
  });
  if (!r.ok) {
    const a = await r.json();
    throw new Error(a.detail || a.title, { cause: a });
  }
  return await r.json();
}
o(ef, "uploadBlob");
function G1(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async (e) => await ef(s, e.file, e.onProgress), "mutationFn")
    // TODO: implement onmutate, onsuccess, onerror...
  };
}
o(G1, "getSimpleUploadBlobMutationOptions");
function tp(s, t, e, i, r = "blobs") {
  const n = s.queryClient, a = i ? ["apps", e, r, i] : ["apps", e, r];
  return {
    mutationFn: /* @__PURE__ */ o(async (l) => await ef(s, l.file, l.onProgress), "mutationFn"),
    mutationKey: a,
    onMutate: /* @__PURE__ */ o(async (l) => {
      await n.cancelQueries({ queryKey: a, exact: !0 });
      const u = Ju(l.file, l.file.name, l.file.size, l.file.type, t);
      l.onProgress = ({ progress: w }) => {
        Vt(n, a, l, (b) => {
          b.status.state = "pending", b.status.progress = w;
        });
      };
      const p = await wu(l.file);
      return { type: "upload", file: u, status: { state: "pending" }, sha256: p };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((l, u, p) => {
      Vt(n, a, u, (w) => {
        w.status.state = "ok", w.status.progress = void 0, w.status.text = void 0;
      });
    }, "onSuccess"),
    onError(l, u, p) {
      const w = l.cause;
      w && w.status === 409 ? Vt(n, a, u, (b) => {
        b.status.state = "conflict", b.status.progress = void 0, b.status.text = w.detail || w.title;
      }) : Vt(n, a, u, (b) => {
        b && (b.status.state = "error", b.status.progress = void 0, b.status.text = w.detail || w.title);
      });
    }
  };
}
o(tp, "getUploadBlobMutationOptions");
const sf = Symbol.for("weavy-data-blobs"), rf = Symbol.for("weavy-context-id");
function Z1(s) {
  if (s)
    return s.match(/^[0-9]+$/) ? parseInt(s) : s;
}
o(Z1, "toIntOrString");
var Y1 = Object.defineProperty, X1 = Object.getOwnPropertyDescriptor, Tt = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? X1(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Y1(t, e, r), r;
}, "__decorateClass$1d"), Gc, Zc, Yc, Xc, Jc, zn, Mn, Pn, Sn, An, En, On, Rn, Js, tr, Ln, In, Tn, Fn, Dn, Hn, vs, Bi, $i, Vn, er;
const Tp = class Tp extends it {
  // PROPERTY INIT
  constructor() {
    super();
    // DEPRECATED .data property
    T(this, Gc);
    // SETTINGS
    // annotations
    T(this, Zc);
    // notifications
    T(this, Yc);
    // notificationsBadge
    T(this, Xc);
    // reactions
    T(this, Jc);
    // PROMISES
    // TODO: Switch to Promise.withResolvers() when allowed by typescript
    // Promise.withResolvers() is available in ES2024, that needs to be set in TSConfig
    // #resolveAgentUser?: (agent: AgentType) => void;
    // #whenAgentUser = new Promise<AgentType>((r) => {
    //   this.#resolveAgentUser = r;
    // });
    // async whenAgentUser() {
    //   return await this.#whenAgentUser;
    // }
    T(this, zn);
    T(this, Mn);
    T(this, Pn);
    T(this, Sn);
    T(this, An);
    T(this, En);
    T(this, On);
    T(this, Rn);
    T(this, Js);
    T(this, tr);
    T(this, Ln);
    T(this, In);
    T(this, Tn);
    T(this, Fn);
    T(this, Dn);
    T(this, Hn);
    T(this, vs);
    T(this, Bi);
    T(this, $i);
    T(this, Vn);
    T(this, er);
    this.storage = gw("localStorage"), this.contextId = fc(), this.storageLinkHandler = (e) => {
      e.storageArea === this.storage && e.key === "wy-link" && e.newValue && this.readStorageLink();
    }, this.linkEventHandler = async (e) => {
      e.defaultPrevented || (this.link && this.link.id === e.detail.link.id && (this.link = void 0, await this.updateComplete), this.link = e.detail.link, this.link || this.provideStorageLink(e.detail.link));
    }, this.notificationEventHandler = (e) => {
      e.stopPropagation(), e.defaultPrevented || this.isConnected && this.checkVisibility(qm) && this.matchesLink(e.detail.link) && e.preventDefault();
    }, S(this, Mn, new Promise((e) => {
      S(this, zn, e);
    })), S(this, Sn, new Promise((e) => {
      S(this, Pn, e);
    })), S(this, En, new Promise((e) => {
      S(this, An, e);
    })), S(this, Rn, new Promise((e) => {
      S(this, On, e);
    })), S(this, tr, new Promise((e) => {
      S(this, Js, e);
    })), S(this, In, new Promise((e) => {
      S(this, Ln, e);
    })), S(this, Fn, new Promise((e) => {
      S(this, Tn, e);
    })), S(this, Hn, new Promise((e) => {
      S(this, Dn, e);
    })), S(this, vs, new Ne(this)), S(this, Bi, new Ne(this)), S(this, $i, /* @__PURE__ */ new Map()), S(this, Vn, new Le(this)), S(this, er, new cr(this)), this.settings = new jl(this);
  }
  reset() {
    this.app && (this.app = void 0), this._appName !== this._initialAppName && (this._appName = this._initialAppName);
  }
  /**
   * Checks if an Entity is matching the component.
   *
   * @param {EntityType} link Entity to check for match
   * @returns { boolean } True if the entity is matching the component
   */
  matchesLink(e) {
    var i, r, n, a;
    return (
      // Messenger conversation
      (i = e == null ? void 0 : e.app) != null && i.type && !this.componentType && ((r = this.appTypes) != null && r.includes(e.app.type)) ? e.agent ? e.agent === this.agent : !0 : (
        // Normal contextual app
        !!(e && e.app && this.componentType !== Je.Unknown && (typeof this.uid == "string" && ((n = e.app) == null ? void 0 : n.uid) === this.uid || // Normal app with app uid
        typeof this.uid == "number" && ((a = e.app) == null ? void 0 : a.id) === this.uid || // Normal app with app id
        this.agent && e.app.type === this.componentType && e.agent === this.agent))
      )
    );
  }
  set link(e) {
    const i = this._link;
    !this.uid && this.componentType && this.componentType !== Je.Unknown ? this.whenApp().then(() => {
      this._link = this.matchesLink(e) ? e : void 0, this.requestUpdate("link", i);
    }) : (this._link = this.matchesLink(e) ? e : void 0, this.requestUpdate("link", i));
  }
  get link() {
    return this._link;
  }
  /**
   * Clears the link and resets the promise.
   */
  clearLink() {
    this.link && (S(this, tr, new Promise((e) => {
      S(this, Js, e);
    })), this.link = void 0);
  }
  /**
   * Shares a link with other blocks that may consume it automatically.
   *
   * @param {LinkType} link - The entity to provide
   */
  provideStorageLink(e) {
    var i;
    (i = this.storage) == null || i.setItem("wy-link", btoa(JSON.stringify(e)));
  }
  /**
   * Reads a link from storage provides it in the .link property/context.
   */
  readStorageLink() {
    if (!this.storage) {
      console.error("Storage not available");
      return;
    }
    const e = this.storage.getItem("wy-link");
    if (e)
      try {
        const i = JSON.parse(atob(e));
        i && (this.link = i);
      } catch (i) {
        console.error("Error parsing link", i);
      }
  }
  /**
   * Consumes a link in the storage. Make sure to consume it after it has been used.
   */
  consumeStorageLink() {
    var e;
    (e = this.storage) == null || e.removeItem("wy-link");
  }
  set agent(e) {
    this._agentUid = e || void 0;
  }
  get agent() {
    return this._agentUid;
  }
  set data(e) {
    console.warn(".data property array is deprecated. Use .contextualData string instead."), S(this, Gc, e);
  }
  get data() {
    return f(this, Gc);
  }
  set name(e) {
    this._initialAppName = e, this._appName = e;
  }
  get name() {
    return this._appName;
  }
  set annotations(e) {
    S(this, Zc, e);
  }
  get annotations() {
    var e;
    return f(this, Zc) ?? ((e = this.weavy) == null ? void 0 : e.annotations) ?? Rt.defaults.annotations;
  }
  set notifications(e) {
    S(this, Yc, e);
  }
  get notifications() {
    var e;
    return f(this, Yc) ?? ((e = this.weavy) == null ? void 0 : e.notifications) ?? Rt.defaults.notifications;
  }
  set notificationsBadge(e) {
    S(this, Xc, e);
  }
  get notificationsBadge() {
    var e;
    return f(this, Xc) ?? ((e = this.weavy) == null ? void 0 : e.notificationsBadge) ?? Rt.defaults.notificationsBadge;
  }
  set reactions(e) {
    S(this, Jc, e);
  }
  get reactions() {
    var e;
    return f(this, Jc) ?? ((e = this.weavy) == null ? void 0 : e.reactions) ?? Rt.defaults.reactions;
  }
  async whenApp() {
    return await f(this, Mn);
  }
  async whenContextDataBlobs() {
    return await f(this, Sn);
  }
  async whenContextId() {
    return await f(this, En);
  }
  async whenComponentFeatures() {
    return await f(this, Rn);
  }
  async whenLink() {
    return await f(this, tr);
  }
  async whenSettings() {
    return await f(this, In);
  }
  async whenUser() {
    return await f(this, Fn);
  }
  async whenWeavy() {
    return await f(this, Hn);
  }
  connectedCallback() {
    super.connectedCallback(), document.addEventListener("wy-link", this.linkEventHandler), window.addEventListener("storage", this.storageLinkHandler), this.app && this.requestUpdate("app"), this.componentFeatures && this.requestUpdate("componentFeatures"), this.contextDataBlobs && this.requestUpdate("contextDataBlobs"), this.contextId && this.requestUpdate("contextId"), this.link && this.requestUpdate("link"), this.settings && this.requestUpdate("settings"), this.user && this.requestUpdate("user"), this.weavy && this.requestUpdate("weavy");
  }
  disconnectedCallback() {
    var e;
    super.disconnectedCallback(), document.removeEventListener("wy-link", this.linkEventHandler), window.removeEventListener("storage", this.storageLinkHandler), (e = this.weavy) == null || e.host.removeEventListener("wy-notification", this.notificationEventHandler, { capture: !0 });
  }
  async scheduleUpdate() {
    await Xo(this), await super.scheduleUpdate();
  }
  async willUpdate(e) {
    var n, a, c, l, u, p, w, b, m, g, x, z, _, P, E, N, O, F, B;
    super.willUpdate(e), this.weavyContextConsumer ?? (this.weavyContextConsumer = new ji(this, { context: le, subscribe: !0 })), (n = this.weavyContextConsumer) != null && n.value && this.weavy !== ((a = this.weavyContextConsumer) == null ? void 0 : a.value) && (this.weavy = (c = this.weavyContextConsumer) == null ? void 0 : c.value);
    const i = Object.keys(this.settings);
    if ((e.has("weavy") || i.find((D) => e.has(D))) && (this.settings = new jl(this)), e.has("weavy") && this.weavy && await f(this, Bi).trackQuery(tc(this.weavy, ["user"])), (l = f(this, Bi).result) != null && l.isPending || (this.user && f(this, Bi).result.data && this.user.id !== f(this, Bi).result.data.id && (console.warn("User mismatch, resetting"), (u = this.weavy) == null || u.reset()), this.user = (p = f(this, Bi).result) == null ? void 0 : p.data), e.has("features") && this.componentFeatures && (this.componentFeatures.setAllowedFeatures(this.features), this.componentFeatures instanceof Ue && (this.componentFeatures = this.componentFeatures.immutable())), (e.has("autoUid") || e.has("user") || e.has("agent")) && this.autoUid && this.user && (this.componentType && Wl.has(this.componentType) && this.agent || this.componentType && !Wl.has(this.componentType))) {
      const D = [this.autoUid];
      this.agent && D.push(this.agent), this.user && D.push(this.user.uid || this.user.id), this.uid = D.join("-");
    }
    const r = this.name;
    if (e.has("componentType") || e.has("uid") || e.has("agent") || e.has("name") || e.has("weavy"))
      if (this._appName !== this._initialAppName && (this._appName = this._initialAppName, this.requestUpdate("name", r)), this.componentType && this.uid && this.weavy) {
        const D = this.name ? { name: this.name } : void 0, U = this.agent ? [this.agent] : void 0;
        await f(this, vs).trackQuery(
          Dv(this.weavy, this.uid, this.componentType, U, D)
        );
      } else
        f(this, vs).untrackQuery();
    if ((w = f(this, vs).result) != null && w.isPending || (this.app = (b = f(this, vs).result) == null ? void 0 : b.data, (m = this.app) != null && m.name && (this.app.name !== this.name || this._appName !== this.app.name) && (this._appName = this.app.name, this.requestUpdate("name", r))), (e.has("weavy") || e.has("contextId") || e.has("user") || e.has("componentFeatures")) && this.weavy && this.contextId && this.user && ((g = this.componentFeatures) != null && g.allowsFeature(A.ContextData)) && (await f(this, Vn).trackMutation(
      tp(this.weavy, this.user, this.contextId, void 0, "data")
    ), await f(this, er).trackMutationState(
      {
        filters: {
          mutationKey: ["apps", this.contextId, "data"],
          exact: !0
        }
      },
      this.weavy.queryClient
    )), e.has("contextualData") || e.has("data") || e.has("componentFeatures")) {
      const D = this.contextualData ? [this.contextualData] : this.data ? this.data : [], U = f(this, $i);
      if (S(this, $i, /* @__PURE__ */ new Map()), D.forEach((j) => {
        const J = U.get(j);
        if (J)
          f(this, $i).set(j, J);
        else {
          const wt = H1(j);
          wt && f(this, $i).set(j, wt);
        }
      }), f(this, $i) && ((x = this.componentFeatures) != null && x.allowsFeature(A.ContextData))) {
        for (const Y of Array.from(f(this, $i).values()))
          if (Y.type === "file") {
            const nt = await wu(Y.item);
            await tv(
              f(this, er).result ?? [],
              async (Zt) => {
                var ft, Ot;
                return (((ft = Zt.context) == null ? void 0 : ft.sha256) ?? await wu((Ot = Zt.variables) == null ? void 0 : Ot.file)) === nt;
              }
            ) || await f(this, Vn).mutate({ file: Y.item });
          }
        const j = f(this, er).result, J = j == null ? void 0 : j.some((Y) => Y.status === "pending"), wt = (j == null ? void 0 : j.map((Y) => {
          var nt;
          return (nt = Y.data) == null ? void 0 : nt.id;
        }).filter((Y) => Y).reverse()) ?? [];
        J || (this.contextDataBlobs = wt);
      } else
        this.contextDataBlobs = [];
    }
    if (e.has("uid") && (this.uid || e.get("uid")) && this.uid !== e.get("uid") && this.clearLink(), (!this.link && (e.has("uid") && this.uid || e.has("app") && this.app) && this.componentType && this.componentType !== Je.Unknown || (e.has("appTypes") || e.has("agent")) && this.appTypes) && this.readStorageLink(), e.has("link") && this.link && (console.info(
      `Opening notification link in ${this.uid ?? nf.get(this.componentType) ?? this.constructor.name}`
    ), this.consumeStorageLink()), e.has("app") && this.app) {
      const D = new CustomEvent("wy-app", {
        bubbles: !1,
        composed: !0,
        detail: {
          app: this.app
        }
      });
      this.dispatchEvent(D);
    }
    e.has("app") && this.app && (e.get("app") && S(this, Mn, new Promise((D) => {
      S(this, zn, D);
    })), (z = f(this, zn)) == null || z.call(this, this.app)), e.has("contextDataBlobs") && this.contextDataBlobs && (e.get("contextDataBlobs") && S(this, Sn, new Promise((D) => {
      S(this, Pn, D);
    })), (_ = f(this, Pn)) == null || _.call(this, this.contextDataBlobs)), e.has("contextId") && this.contextId && (e.get("contextId") && S(this, En, new Promise((D) => {
      S(this, An, D);
    })), (P = f(this, An)) == null || P.call(this, this.contextId)), e.has("componentFeatures") && this.componentFeatures && (e.get("componentFeatures") && S(this, Rn, new Promise((D) => {
      S(this, On, D);
    })), (E = f(this, On)) == null || E.call(this, this.componentFeatures)), e.has("link") && this.link && (e.get("link") && S(this, tr, new Promise((D) => {
      S(this, Js, D);
    })), (N = f(this, Js)) == null || N.call(this, this.link)), e.has("settings") && this.settings && (e.get("settings") && S(this, In, new Promise((D) => {
      S(this, Ln, D);
    })), (O = f(this, Ln)) == null || O.call(this, this.settings)), e.has("user") && this.user && (e.get("user") && S(this, Fn, new Promise((D) => {
      S(this, Tn, D);
    })), (F = f(this, Tn)) == null || F.call(this, this.user)), e.has("weavy") && this.weavy && (e.get("weavy") && S(this, Hn, new Promise((D) => {
      S(this, Dn, D);
    })), this.weavy.host.addEventListener("wy-notification", this.notificationEventHandler, { capture: !0 }), (B = f(this, Dn)) == null || B.call(this, this.weavy)), e.has("bot") && typeof this.bot == "string" && console.error(`Using .bot property is deprecated. Use .agent = "${this.bot}"; instead`);
  }
};
Gc = new WeakMap(), Zc = new WeakMap(), Yc = new WeakMap(), Xc = new WeakMap(), Jc = new WeakMap(), zn = new WeakMap(), Mn = new WeakMap(), Pn = new WeakMap(), Sn = new WeakMap(), An = new WeakMap(), En = new WeakMap(), On = new WeakMap(), Rn = new WeakMap(), Js = new WeakMap(), tr = new WeakMap(), Ln = new WeakMap(), In = new WeakMap(), Tn = new WeakMap(), Fn = new WeakMap(), Dn = new WeakMap(), Hn = new WeakMap(), vs = new WeakMap(), Bi = new WeakMap(), $i = new WeakMap(), Vn = new WeakMap(), er = new WeakMap(), o(Tp, "WeavyComponent");
let gt = Tp;
Tt([
  H()
], gt.prototype, "weavy", 2);
Tt([
  Rs({ context: Gu }),
  H()
], gt.prototype, "app", 2);
Tt([
  Rs({ context: sf }),
  H()
], gt.prototype, "contextDataBlobs", 2);
Tt([
  Rs({ context: rf }),
  H()
], gt.prototype, "contextId", 2);
Tt([
  Rs({ context: gd }),
  H()
], gt.prototype, "componentFeatures", 2);
Tt([
  Rs({ context: jw }),
  H()
], gt.prototype, "settings", 2);
Tt([
  Rs({ context: vd }),
  H()
], gt.prototype, "user", 2);
Tt([
  Rs({ context: Qw })
], gt.prototype, "_link", 2);
Tt([
  y({ type: Object })
], gt.prototype, "link", 1);
Tt([
  H()
], gt.prototype, "componentType", 2);
Tt([
  H()
], gt.prototype, "appTypes", 2);
Tt([
  y()
], gt.prototype, "features", 2);
Tt([
  y({ type: String })
], gt.prototype, "agent", 1);
Tt([
  y({
    attribute: !0,
    type: String
  })
], gt.prototype, "contextualData", 2);
Tt([
  y({
    attribute: !0,
    type: String,
    converter: {
      fromAttribute(s) {
        return Jm(s);
      }
    }
  })
], gt.prototype, "data", 1);
Tt([
  y()
], gt.prototype, "autoUid", 2);
Tt([
  y({ converter: Z1 })
], gt.prototype, "uid", 2);
Tt([
  y({ type: String })
], gt.prototype, "name", 1);
Tt([
  y({ type: String })
], gt.prototype, "annotations", 1);
Tt([
  y({ type: String })
], gt.prototype, "notifications", 1);
Tt([
  y({ type: String })
], gt.prototype, "notificationsBadge", 1);
Tt([
  y({ type: String })
], gt.prototype, "reactions", 1);
Tt([
  y()
], gt.prototype, "bot", 2);
const nf = new Map(ww(Ow)), J1 = new Map(ww(Rw)), Wl = new Map(Object.entries(Lw)), k3 = new Map(Object.entries(Iw));
var tg = Object.defineProperty, Is = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = void 0, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = a(t, e, r) || r);
  return r && tg(t, e, r), r;
}, "__decorateClass$1c"), Bn, tl, Un, el, qn, il, Nn, sl, jn, rl, Wn, nl, Qn, al, Kn, ol;
const Fp = class Fp extends it {
  constructor() {
    super();
    // PROMISES
    // TODO: Switch to Promise.withResolvers() when allowed by typescript
    T(this, Bn);
    T(this, tl, new Promise((e) => {
      S(this, Bn, e);
    }));
    // #resolveAgentUser?: (agentUser: AgentType) => void;
    // #whenAgentUser = new Promise<AgentType>((r) => {
    //   this.#resolveAgentUser = r;
    // });
    // async whenAgentUser() {
    //   return await this.#whenAgentUser;
    // }
    T(this, Un);
    T(this, el, new Promise((e) => {
      S(this, Un, e);
    }));
    T(this, qn);
    T(this, il, new Promise((e) => {
      S(this, qn, e);
    }));
    T(this, Nn);
    T(this, sl, new Promise((e) => {
      S(this, Nn, e);
    }));
    T(this, jn);
    T(this, rl, new Promise((e) => {
      S(this, jn, e);
    }));
    T(this, Wn);
    T(this, nl, new Promise((e) => {
      S(this, Wn, e);
    }));
    T(this, Qn);
    T(this, al, new Promise((e) => {
      S(this, Qn, e);
    }));
    T(this, Kn);
    T(this, ol, new Promise((e) => {
      S(this, Kn, e);
    }));
  }
  async whenApp() {
    return await f(this, tl);
  }
  async whenContextDataBlobs() {
    return await f(this, el);
  }
  async whenContextId() {
    return await f(this, il);
  }
  async whenComponentFeatures() {
    return await f(this, sl);
  }
  async whenLink() {
    return await f(this, rl);
  }
  async whenSettings() {
    return await f(this, nl);
  }
  async whenUser() {
    return await f(this, al);
  }
  async whenWeavy() {
    return await f(this, ol);
  }
  willUpdate(e) {
    var i, r, n, a, c, l, u, p;
    super.willUpdate(e), e.has("app") && this.app && (e.get("app") && S(this, tl, new Promise((w) => {
      S(this, Bn, w);
    })), (i = f(this, Bn)) == null || i.call(this, this.app)), e.has("contextDataBlobs") && this.contextDataBlobs && (e.get("contextDataBlobs") && S(this, el, new Promise((w) => {
      S(this, Un, w);
    })), (r = f(this, Un)) == null || r.call(this, this.contextDataBlobs)), e.has("contextId") && this.contextId && (e.get("contextId") && S(this, il, new Promise((w) => {
      S(this, qn, w);
    })), (n = f(this, qn)) == null || n.call(this, this.contextId)), e.has("componentFeatures") && this.componentFeatures && (e.get("componentFeatures") && S(this, sl, new Promise((w) => {
      S(this, Nn, w);
    })), (a = f(this, Nn)) == null || a.call(this, this.componentFeatures)), e.has("link") && this.link && (e.get("link") && S(this, rl, new Promise((w) => {
      S(this, jn, w);
    })), (c = f(this, jn)) == null || c.call(this, this.link)), e.has("settings") && this.settings && (e.get("settings") && S(this, nl, new Promise((w) => {
      S(this, Wn, w);
    })), (l = f(this, Wn)) == null || l.call(this, this.settings)), e.has("user") && this.user && (e.get("user") && S(this, al, new Promise((w) => {
      S(this, Qn, w);
    })), (u = f(this, Qn)) == null || u.call(this, this.user)), e.has("weavy") && this.weavy && (e.get("weavy") && S(this, ol, new Promise((w) => {
      S(this, Kn, w);
    })), (p = f(this, Kn)) == null || p.call(this, this.weavy));
  }
  connectedCallback() {
    super.connectedCallback(), this.app && this.requestUpdate("app"), this.contextDataBlobs && this.requestUpdate("contextDataBlobs"), this.contextId && this.requestUpdate("contextId"), this.componentFeatures && this.requestUpdate("componentFeatures"), this.link && this.requestUpdate("link"), this.settings && this.requestUpdate("settings"), this.user && this.requestUpdate("user"), this.weavy && this.requestUpdate("weavy");
  }
};
Bn = new WeakMap(), tl = new WeakMap(), Un = new WeakMap(), el = new WeakMap(), qn = new WeakMap(), il = new WeakMap(), Nn = new WeakMap(), sl = new WeakMap(), jn = new WeakMap(), rl = new WeakMap(), Wn = new WeakMap(), nl = new WeakMap(), Qn = new WeakMap(), al = new WeakMap(), Kn = new WeakMap(), ol = new WeakMap(), o(Fp, "WeavySubComponent");
let pt = Fp;
Is([
  ee({ context: Gu, subscribe: !0 }),
  H()
], pt.prototype, "app");
Is([
  ee({ context: sf, subscribe: !0 }),
  H()
], pt.prototype, "contextDataBlobs");
Is([
  ee({ context: rf, subscribe: !0 }),
  H()
], pt.prototype, "contextId");
Is([
  ee({ context: gd, subscribe: !0 }),
  H()
], pt.prototype, "componentFeatures");
Is([
  ee({ context: Qw, subscribe: !0 }),
  H()
], pt.prototype, "link");
Is([
  ee({ context: jw, subscribe: !0 }),
  H()
], pt.prototype, "settings");
Is([
  ee({ context: vd, subscribe: !0 }),
  H()
], pt.prototype, "user");
Is([
  ee({ context: le, subscribe: !0 }),
  H()
], pt.prototype, "weavy");
function eg(s) {
  return typeof s == "string" && s ? s = eval == null ? void 0 : (0, eval)(`"use strict";(${s})`) : s = void 0, s;
}
o(eg, "indirectEvalObject");
function bd(s) {
  if (s)
    try {
      return new URL(s, window.location.toString());
    } catch {
      console.warn("Invalid url: ", s);
    }
}
o(bd, "toUrl");
const q = /* @__PURE__ */ o((s) => (t, e) => {
  e !== void 0 ? e.addInitializer(() => {
    !customElements.get(s) && customElements.define(
      s,
      t
    );
  }) : !customElements.get(s) && customElements.define(s, t);
}, "customElement"), X = dt`@charset \"UTF-8\";:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]){box-sizing:border-box;text-align:initial;font-size:var(--wy-font-size, var(--wy-size, 1em))}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:before,:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:after{box-sizing:inherit}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(a),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(a){text-decoration:var(--wy-link-decoration, none);color:var(--wy-link, var(--wy-primary-40, #006399))}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(a):hover,:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(a):hover{text-decoration:var(--wy-link-hover-decoration, unset)}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(a):where(:not([href]):not([class])),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(a):where(:not([href]):not([class])):hover,:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(a):where(:not([href]):not([class])),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(a):where(:not([href]):not([class])):hover{text-decoration:none}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(p),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(p){margin-top:0;margin-bottom:calc(1 * var(--wy-size, 1rem))}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(label),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(label){cursor:inherit}:where(:host([hidden])),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"])[hidden],:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *[hidden]{display:none!important}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where([role=button]),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where([role=button]){cursor:pointer}.wy-scroll-y{scroll-padding-top:var(--wy-scrollbar-adjust-top, 0);scroll-padding-bottom:var(--wy-scrollbar-adjust-bottom, 0)}.wy-scroll-y{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-y:not(body){-webkit-overflow-scrolling:touch}.wy-scroll-y:not(.wy-scroll-x){overflow-x:hidden;touch-action:pan-y}.wy-scroll-x{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-x:not(.wy-scroll-y){overflow-y:hidden;touch-action:pan-x}.wy-appbars{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));background-color:var(--wy-component-background-color);box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 calc(-1 * var(--wy-border, 1px)) 0 0 inset}@supports (position: sticky){.wy-appbars{position:sticky;top:0;z-index:1020}}.wy-appbars>.wy-appbar,.wy-appbars>.wy-toolbar{background-color:transparent;box-shadow:none}.wy-appbar{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));display:grid;align-items:center;justify-content:space-between;justify-items:center;height:var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));padding:calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));flex:0 0 var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));grid-template-columns:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) minmax(0,max-content) var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));column-gap:calc(2 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))) + var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));line-height:var(--wy-line-height, 1.5);background-color:var(--wy-component-background-color);color:var(--wy-component-color);box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 calc(-1 * var(--wy-border, 1px)) 0 0 inset}.wy-appbar .wy-badge{align-self:center}.wy-appbar-buttons,.wy-toolbar-buttons,.wy-appbar-section{display:flex;flex:0 0 auto;align-items:center;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));max-width:100%}.wy-appbar-buttons-first{justify-content:flex-start}.wy-appbar-buttons-last{justify-content:flex-end}.wy-toolbar-buttons-last{margin-inline-start:auto}.wy-appbar-text{max-width:100%;display:block;color:inherit!important;-webkit-user-select:none;user-select:none}.wy-appbar-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-appbar-text a,.wy-appbar-text a:hover{color:inherit}.wy-appbar-text-trashed{text-decoration:line-through}.wy-toolbars-bottom{position:absolute;z-index:1030;bottom:calc(var(--wy-footerbar-height, calc(4 * var(--wy-size, 1rem))) / 2);left:0;right:0;min-height:var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));display:flex;flex-direction:column;justify-content:center;justify-items:center}.wy-toolbar{--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-start;justify-items:center;min-height:var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));padding:calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));flex:1 0 var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))));column-gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));line-height:var(--wy-line-height, 1.5);background-color:var(--wy-component-background-color);color:var(--wy-component-color);box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 calc(-1 * var(--wy-border, 1px)) 0 0 inset}.wy-toolbar-center{margin:0 auto;border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)))}.wy-toolbar-center .wy-input{text-align:center}.wy-toolbar-text{margin-left:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}[part~=wy-button]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399));color:var(--wy-component-color);background:var(--wy-component-background-color, transparent);height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));font-family:var(--wy-button-font-family, var(--wy-font-family, unset)),inherit;font-size:var(--wy-button-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-button-font-weight, var(--wy-font-weight, unset));line-height:var(--wy-button-line-height, var(--wy-line-height, 1.5));text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none;border:var(--wy-button-border-width, var(--wy-border-outline, 0)) solid var(--wy-outline, var(--wy-neutral-variant-50, #72777e));border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));display:inline-flex;align-items:center;justify-content:center;gap:var(--wy-button-gap, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));position:relative}[part~=wy-button][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .8);padding:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .25) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .5)}[part~=wy-button]:disabled{opacity:var(--wy-opacity-disabled, 38%);cursor:unset;pointer-events:none}[part~=wy-button-state-layer]>*{z-index:3}[part~=wy-button-state-layer]:before{content:\"\";z-index:2;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-button-state-layer]:hover:before{opacity:8%}[part~=wy-button-state-layer]:focus:before,[part~=wy-button-state-layer]:active:before,[part~=wy-button-state-layer][part~=wy-active]:before{opacity:12%}[part~=wy-button-icon]{--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));width:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));line-height:1;align-items:center;justify-content:center}[part~=wy-button-icon][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);width:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);padding:0;margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5)}[part~=wy-button-icon][part~=wy-button-sm][part~=wy-button-state-layer]:before{margin:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.1)}[part~=wy-button-icon][part~=wy-active]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-button-icon-inline]{height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));width:auto;min-width:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));background:var(--wy-component-background-color);color:currentColor;display:flex;padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))}[part~=wy-button-icon-inline][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);min-width:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);padding:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .25);margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5)}[part~=wy-button-icon-inline][part~=wy-button-sm][part~=wy-button-state-layer]:before{margin:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.1)}[part~=wy-button-inline]{border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));padding:calc(.5 * var(--wy-size, 1rem)) calc(.75 * var(--wy-size, 1rem));margin-inline:calc(-.25 * var(--wy-size, 1rem))}[part~=wy-button-primary]{--wy-component-background-color: var(--wy-primary, var(--wy-primary-40, #006399));--wy-component-color: var(--wy-on-primary, var(--wy-white, #ffffff))}[part~=wy-button-variant]{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}[part~=wy-button-primary-text]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-button-inherit-color]{--wy-component-color: currentColor}[part~=wy-button-no-color]{--wy-component-color: unset}[part=wy-button-link]{padding:0;color:var(--wy-link-color, var(--wy-primary, var(--wy-primary-40, #006399)));text-decoration:var(--wy-link-decoration, none)}[part=wy-button-link]:hover,[part=wy-button-link]:focus{text-decoration:var(--wy-link-hover-decoration, unset)}[part~=wy-buttons]{display:flex;align-items:center;flex-wrap:wrap;gap:calc(.5 * var(--wy-size, 1rem))}[part~=wy-buttons-reverse]{flex-direction:row-reverse}[part~=wy-buttons-floating]{position:sticky;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) 0;top:0;height:0;margin-bottom:calc(-1 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));z-index:1030;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}[part~=wy-buttons-sticky]{position:sticky;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));top:0;z-index:1030;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-code pre,.wy-editor .cm-content pre,.wy-content pre{text-wrap:pretty}.wy-code .code,.wy-code code[class*=language-],.wy-code pre[class*=language-],.wy-editor .cm-content .code,.wy-content .code,.wy-editor .cm-content code[class*=language-],.wy-content code[class*=language-],.wy-editor .cm-content pre[class*=language-],.wy-content pre[class*=language-]{color:var(--wy-code-text, var(--wy-code-text-light, #3b3b3b));font-family:var(--wy-font-monospace, ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace);text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:break-word;line-height:1.25;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}@media print{.wy-code code[class*=language-],.wy-code pre[class*=language-],.wy-editor .cm-content code[class*=language-],.wy-content code[class*=language-],.wy-editor .cm-content pre[class*=language-],.wy-content pre[class*=language-]{text-shadow:none}}.wy-code pre[class*=language-],.wy-editor .cm-content pre[class*=language-],.wy-content pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}.wy-code :not(pre)>code[class*=language-],.wy-code pre[class*=language-],.wy-editor .cm-content :not(pre)>code[class*=language-],.wy-content :not(pre)>code[class*=language-],.wy-editor .cm-content pre[class*=language-],.wy-content pre[class*=language-]{color:var(--wy-code-text, var(--wy-code-text-light, #3b3b3b));background:var(--wy-background, var(--wy-neutral-99, #fcfcff))}.wy-code :not(pre)>code[class*=language-],.wy-editor .cm-content :not(pre)>code[class*=language-],.wy-content :not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.wy-code .token.variable,.wy-editor .cm-content .token.variable,.wy-content .token.variable{color:var(--wy-code-variable, var(--wy-code-variable-light, #001080))}.wy-code .token.operator,.wy-editor .cm-content .token.operator,.wy-content .token.operator{color:var(--wy-code-operator, var(--wy-code-operator-light, #000000))}.wy-code .token.prolog,.wy-editor .cm-content .token.prolog,.wy-content .token.prolog{color:var(--wy-code-prolog, var(--wy-code-prolog-light, #000080))}.wy-code .token.comment,.wy-editor .cm-content .token.comment,.wy-content .token.comment{color:var(--wy-code-comment, var(--wy-code-comment-light, #008000))}.wy-code .token.builtin,.wy-editor .cm-content .token.builtin,.wy-content .token.builtin{color:var(--wy-code-builtin, var(--wy-code-builtin-light, #0070C1))}.wy-code .token.number,.wy-editor .cm-content .token.number,.wy-content .token.number{color:var(--wy-code-number, var(--wy-code-number-light, #098658))}.wy-code .token.inserted,.wy-editor .cm-content .token.inserted,.wy-content .token.inserted{color:var(--wy-code-inserted, var(--wy-code-inserted-light, #098658))}.wy-code .token.constant,.wy-editor .cm-content .token.constant,.wy-content .token.constant{color:var(--wy-code-constant, var(--wy-code-constant-light, #811F3F))}.wy-code .token.hexcode,.wy-editor .cm-content .token.hexcode,.wy-content .token.hexcode{color:var(--wy-code-hexcode, var(--wy-code-hexcode-light, #811F3F))}.wy-code .token.regex,.wy-editor .cm-content .token.regex,.wy-content .token.regex{color:var(--wy-code-regex, var(--wy-code-regex-light, #811F3F))}.wy-code .token.char,.wy-editor .cm-content .token.char,.wy-content .token.char{color:var(--wy-code-char, var(--wy-code-char-light, #811F3F))}.wy-code .token.tag,.wy-editor .cm-content .token.tag,.wy-content .token.tag{color:var(--wy-code-tag, var(--wy-code-tag-light, #800000))}.wy-code .token.attr-name,.wy-editor .cm-content .token.attr-name,.wy-content .token.attr-name{color:var(--wy-code-attr-name, var(--wy-code-attr-name-light, #E50000))}.wy-code .token.selector,.wy-editor .cm-content .token.selector,.wy-content .token.selector{color:var(--wy-code-selector, var(--wy-code-selector-light, #E50000))}.wy-code .token.property,.wy-editor .cm-content .token.property,.wy-content .token.property{color:var(--wy-code-property, var(--wy-code-property-light, #E50000))}.wy-code .token.deleted,.wy-editor .cm-content .token.deleted,.wy-content .token.deleted{color:var(--wy-code-deleted, var(--wy-code-deleted-light, #A31515))}.wy-code .token.string,.wy-editor .cm-content .token.string,.wy-content .token.string{color:var(--wy-code-string, var(--wy-code-string-light, #A31515))}.wy-code .token.changed,.wy-editor .cm-content .token.changed,.wy-content .token.changed{color:var(--wy-code-changed, var(--wy-code-changed-light, #0451A5))}.wy-code .token.punctuation,.wy-editor .cm-content .token.punctuation,.wy-content .token.punctuation{color:var(--wy-code-punctuation, var(--wy-code-punctuation-light, #000000))}.wy-code .token.function,.wy-editor .cm-content .token.function,.wy-content .token.function{color:var(--wy-code-function, var(--wy-code-function-light, #0000FF))}.wy-code .token.keyword,.wy-editor .cm-content .token.keyword,.wy-content .token.keyword{color:var(--wy-code-keyword, var(--wy-code-keyword-light, #AF00DB))}.wy-code .token.class-name,.wy-editor .cm-content .token.class-name,.wy-content .token.class-name{color:var(--wy-code-class-name, var(--wy-code-class-name-light, #267F99))}.wy-code .token.important,.wy-code .token.bold,.wy-editor .cm-content .token.important,.wy-content .token.important,.wy-editor .cm-content .token.bold,.wy-content .token.bold{font-weight:700}.wy-code .token.italic,.wy-editor .cm-content .token.italic,.wy-content .token.italic{font-style:italic}.wy-content{overflow-wrap:break-word;min-width:0}.wy-content:empty{display:none}.wy-content>:first-child{margin-top:0}.wy-content>:last-child{margin-bottom:0}.wy-content b,.wy-content strong{font-weight:var(--wy-font-weight-bold, 600)}.wy-content blockquote{border-left:calc(2 * var(--wy-border, 1px)) solid var(--wy-neutral-80, #c6c6c9);margin:var(--wy-size, 1rem) 0;padding:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));padding-left:var(--wy-size, 1rem)}.wy-content blockquote>p{margin:0}.wy-content pre,.wy-content code{font-family:var(--wy-font-monospace, ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace);font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-content :not(pre)>code{overflow-wrap:inherit}.wy-content pre>code{font-size:var(--wy-font-size, var(--wy-size, 1em));white-space:pre-wrap}.wy-content h1,.wy-content h2,.wy-content h3,.wy-content h4,.wy-content h5,.wy-content h6{font-family:var(--wy-headings-font-family, var(--wy-font-family, unset));font-weight:var(--wy-headings-font-weight, var(--wy-font-weight-bold, 600));line-height:var(--wy-headings-line-height, var(--wy-line-height, 1.2));margin:0 0 var(--wy-gap, calc(.5 * var(--wy-size, 1rem))) 0}.wy-content h1{font-size:calc(2 * var(--wy-font-size, var(--wy-size, 1em)))}.wy-content h2{font-size:calc(1.8 * var(--wy-font-size, var(--wy-size, 1em)))}.wy-content h3{font-size:calc(1.6 * var(--wy-font-size, var(--wy-size, 1em)))}.wy-content h4{font-size:calc(1.4 * var(--wy-font-size, var(--wy-size, 1em)))}.wy-content h5{font-size:calc(1.2 * var(--wy-font-size, var(--wy-size, 1em)))}.wy-content h6{font-size:var(--wy-font-size, var(--wy-size, 1em))}.wy-content table{display:block;width:100%;max-width:-moz-max-content;max-width:max-content;margin:0 auto;overflow-x:auto;white-space:nowrap;border-collapse:separate;border-spacing:0 0;margin-bottom:var(--wy-size, 1rem)}.wy-content table th,.wy-content table td{padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));border-color:inherit;border-style:solid}.wy-content table th{text-align:inherit;text-align:-webkit-match-parent;border-width:var(--wy-border, 1px) 0 var(--wy-border, 1px) var(--wy-border, 1px);font-weight:var(--wy-headings-font-weight, var(--wy-font-weight-bold, 600))}.wy-content table th:first-child{border-top-left-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-content table th:last-child{border-top-right-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));border-right-width:var(--wy-border, 1px)}.wy-content table td{border-width:0 0 var(--wy-border, 1px) var(--wy-border, 1px)}.wy-content table td:last-child{border-right-width:var(--wy-border, 1px)}.wy-content table tr:last-child td:first-child{border-bottom-left-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-content table tr:last-child td:last-child{border-bottom-right-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-content table>tbody{vertical-align:inherit}.wy-content table>thead{vertical-align:bottom}.wy-content img{max-width:100%;border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));margin-block:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}ol{list-style-type:decimal}ul{list-style-type:disc}li{margin:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))) 0}ol,ul{margin:var(--wy-size, 1rem) 0;padding:0 0 0 1.625em}ol>li,ul>li{padding-left:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}ol>li>:first-child,ul>li>:first-child{margin-bottom:0;margin-top:0}ol>li>:last-child,ul>li>:last-child{margin-bottom:0}.wy-hashtag{color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-mention{font-weight:700}.wy-emoji-icon{display:inline-flex;justify-content:center;align-items:center;line-height:1;width:1em;height:1em;font-size:calc(1.25 * var(--wy-size, 1rem))}.wy-emoji-icon-sm{width:calc(1.125 * var(--wy-size, 1rem));height:calc(1.125 * var(--wy-size, 1rem));font-size:calc(1.125 * var(--wy-size, 1rem))}.wy-empty{display:flex;align-items:center;justify-content:center;flex:1;min-width:0;position:relative;flex-direction:column;gap:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}[part~=wy-icon]{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative;width:var(--wy-component-icon-width);height:var(--wy-component-icon-height)}[part~=wy-icon][width=\"24\"]{width:var(--wy-component-icon-width, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-icon][height=\"24\"]{height:var(--wy-component-icon-height, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-icon-first]{margin-left:calc(-.5 * var(--wy-size, 1rem))}[part~=wy-icon-last]{margin-right:calc(-.5 * var(--wy-size, 1rem))}[part~=wy-icon-padded]{margin:16.66666667%}[part~=wy-icon-inline]{vertical-align:-.25em}[part~=wy-icon-overlay]{position:absolute;bottom:0;right:0;border-radius:50%}:host(wy-icon-stack),[part~=wy-icon-stack]{display:inline-flex;position:relative;line-height:1}[part~=wy-icon-stack-layer]{position:absolute}[part~=wy-icon-stack-overlay]{position:absolute;bottom:0;right:0;border-radius:50%;width:calc(var(--wy-component-icon-width) / 2);height:calc(var(--wy-component-icon-height) / 2)}[part~=wy-icon-current-color]{fill:currentColor}[part~=wy-icon-state]{transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));align-self:center;justify-self:center;margin:auto;opacity:0}[part~=wy-icon-state][part~=wy-active]{opacity:1}[part~=wy-icon-display]{color:var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));border-radius:var(--wy-component-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));margin:auto}[part~=wy-icon-display-icon]{color:var(--wy-component-color);--wy-component-icon-width: calc(4 * var(--wy-size, 1rem));--wy-component-icon-height: calc(4 * var(--wy-size, 1rem));padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-icon-display-text],[part~=wy-icon-display-meta]{color:var(--wy-component-color);padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));text-align:center}[part~=wy-icon-color-primary]{fill:var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-icon-color-secondary]{fill:var(--wy-secondary, var(--wy-secondary-40, #3b6a1c))}[part~=wy-icon-color-tertiary]{fill:var(--wy-tertiary, var(--wy-tertiary-40, #3b6a1c))}[part~=wy-icon-color-surface]{fill:var(--wy-surface, var(--wy-neutral-99, #fcfcff))}[part~=wy-icon-color-surface-variant]{fill:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}[part~=wy-icon-color-error]{fill:var(--wy-error, var(--wy-error-40, #ba1824))}[part~=wy-icon-color-warning]{fill:var(--wy-warning, var(--wy-warning-70, #afb140))}[part~=wy-icon-color-blue]{fill:var(--wy-blue, var(--wy-blue-light, #89a9fc))}[part~=wy-icon-color-indigo]{fill:var(--wy-indigo, var(--wy-indigo-light, #9185de))}[part~=wy-icon-color-purple]{fill:var(--wy-purple, var(--wy-purple-light, #c675b7))}[part~=wy-icon-color-pink]{fill:var(--wy-pink, var(--wy-pink-light, #d57194))}[part~=wy-icon-color-red]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-icon-color-orange]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-icon-color-yellow]{fill:var(--wy-yellow, var(--wy-yellow-light, #afb140))}[part~=wy-icon-color-green]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-icon-color-teal]{fill:var(--wy-teal, var(--wy-teal-light, #00a0a8))}[part~=wy-icon-color-cyan]{fill:var(--wy-cyan, var(--wy-cyan-light, #0082a1))}[part~=wy-icon-color-gray]{fill:var(--wy-gray, var(--wy-gray-light, #76777a))}[part~=wy-icon-color-black]{fill:var(--wy-black, var(--wy-black, #000000))}[part~=wy-icon-color-white]{fill:var(--wy-white, var(--wy-white, #ffffff))}[part*=wy-kind-]{fill:var(--wy-gray, var(--wy-gray-light, #76777a))}[part~=wy-kind-archive]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-kind-audio]{fill:var(--wy-teal, var(--wy-teal-light, #00a0a8))}[part~=wy-kind-code]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-kind-document]{fill:var(--wy-blue, var(--wy-blue-light, #89a9fc))}[part~=wy-kind-email]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-kind-presentation]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-kind-spreadsheet]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-kind-image]{fill:var(--wy-pink, var(--wy-pink-light, #d57194))}[part~=wy-kind-text]{fill:var(--wy-cyan, var(--wy-cyan-light, #0082a1))}[part~=wy-kind-video]{fill:var(--wy-purple, var(--wy-purple-light, #c675b7))}[part~=wy-ext-pdf]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-kind-text-icon]{width:calc(1.25 * var(--wy-size, 1rem));height:calc(1.25 * var(--wy-size, 1rem));vertical-align:calc(-.3125 * var(--wy-size, 1rem))}.wy-title{font-family:var(--wy-headings-font-family, var(--wy-font-family, unset));font-size:var(--wy-headings-font-size, 1.25em);font-style:var(--wy-headings-font-style, unset);font-weight:var(--wy-headings-font-weight, var(--wy-font-weight-bold, 600));line-height:var(--wy-headings-line-height, var(--wy-line-height, 1.2));margin-block:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-input{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));display:block;width:100%;min-height:calc(var(--wy-input-font-size, var(--wy-font-size, 1em)) * 1.5 * var(--wy-size, 1rem) + var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * 2 + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) * 2);padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)),inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-input-font-weight, var(--wy-font-weight, unset));line-height:var(--wy-input-line-height, var(--wy-line-height, calc(1.5 * var(--wy-size, 1rem))));background-clip:padding-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--wy-input-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))))}.wy-input:focus{--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));color:var(--wy-component-color);border-color:var(--wy-primary, var(--wy-primary-40, #006399));outline:0}.wy-input::placeholder{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:1}.wy-input:disabled{opacity:38%}.wy-input::file-selector-button,.wy-input::-webkit-file-upload-button{color:var(--wy-component-color);background-color:var(--wy-component-background-color);padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));margin:calc(-1 * var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) calc(-1 * var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));margin-inline-end:var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--wy-input-border-width, var(--wy-border, 1px));border-radius:0}.wy-input:hover:not(:disabled):not([readonly])::file-selector-button,.wy-input:hover:not(:disabled):not([readonly]) ::-webkit-file-upload-button{background-color:var(--wy-component-background-color)}.wy-input[type=file]{overflow:hidden}.wy-input[type=file]:not(:disabled):not([readonly]){cursor:pointer}.wy-input::-webkit-date-and-time-value{height:calc(var(--wy-input-line-height, var(--wy-line-height, calc(1.5 * var(--wy-size, 1rem)))) * 1em)}.wy-input[type=search]::-webkit-search-cancel-button{-webkit-appearance:none}.wy-input-filled{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-input-filled-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem)))));border-color:var(--wy-component-background-color)}.wy-input-filled:focus{border-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-label{display:inline-block;margin-bottom:calc(.5 * var(--wy-size, 1rem))}.wy-description{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));margin-top:calc(.25 * var(--wy-size, 1rem))}.wy-is-invalid,.wy-is-invalid:focus{border-color:var(--wy-error, var(--wy-error-40, #ba1824))}.wy-invalid-feedback{margin-top:calc(.25 * var(--wy-size, 1rem));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));color:var(--wy-error, var(--wy-error-40, #ba1824))}.wy-input-group{position:relative;display:flex;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));align-items:center;flex:1 0 auto}.wy-input-group-button-icon{--wy-component-background-color: transparent}.wy-input-group-input-with-overlay{padding-right:calc(var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) + var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))))}.wy-input-group-button-icon-overlay{position:absolute;display:inline-flex;top:0;right:0;z-index:4;border-radius:var(--wy-input-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));--wy-component-background-color: transparent}.wy-input-group-input:placeholder-shown~.wy-input-group-button-icon[type=reset]{display:none}.wy-input-group-input:not(:placeholder-shown)~.wy-input-group-button-icon[type=reset]+.wy-input-group-button-icon{display:none}.wy-item{--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));position:relative;display:flex;align-items:center;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));text-decoration:none}.wy-list-item{min-height:calc(3 * var(--wy-size, 1rem))}.wy-list-item-lg{min-height:calc(4.5 * var(--wy-size, 1rem))}.wy-item-inner{display:flex;align-items:center;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));flex:1 1 100%}.wy-item-body{width:100%;min-width:0}.wy-item-rows{display:flex;flex-direction:column;width:100%;row-gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));min-width:0}.wy-item-rows:only-child{margin-inline-start:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-item-rows-compact{row-gap:0}.wy-item-rows-single{margin-inline-start:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-item-title{color:var(--wy-component-color);font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset))}.wy-item-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-item-title-lg{color:var(--wy-component-color);font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset))}.wy-item-title-lg{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.wy-item-text{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-item-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-item-text .wy-icon{width:calc(1.25 * var(--wy-size, 1rem));height:calc(1.25 * var(--wy-size, 1rem));vertical-align:calc(-.3125 * var(--wy-size, 1rem))}.wy-item-quote{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-item-quote:before,.wy-item-quote:after{content:'\"'}.wy-item-actions{--wy-component-background-color: transparent;display:flex;align-items:center;justify-items:flex-end;flex:0 0 auto;margin:calc(-.25 * var(--wy-size, 1rem))}.wy-item-top{align-self:flex-start}.wy-item-actions-bottom{align-self:flex-start;margin-block:calc(-.5 * var(--wy-size, 1rem))}.wy-item-row{display:flex;align-items:center;column-gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-item-row .wy-item-title,.wy-item-row .wy-item-text{margin-right:auto}.wy-item-row .wy-meta{white-space:nowrap}.wy-item-right{margin-left:auto}.wy-item-hover{-webkit-user-select:none;user-select:none;cursor:pointer}.wy-item-hover:hover,.wy-item-hover:focus{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);text-decoration:none}.wy-item-hover:active{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-item-hover.wy-disabled,.wy-item-hover:disabled{opacity:var(--wy-opacity-disabled, 38%);pointer-events:none}.wy-item-hover.wy-active{--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-color:var(--wy-component-background-color)}.wy-item-trashed{text-decoration:line-through;opacity:var(--wy-opacity-disabled, 38%)}.wy-item-trashed.wy-item-hover:hover{opacity:1}.wy-list{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:flex;flex-direction:column;gap:var(--wy-border);min-width:0}.wy-list .wy-item:not(.wy-item-hover){--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-list .wy-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.wy-list .wy-item:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.wy-list-bordered{border:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));gap:0}.wy-list-bordered .wy-item{border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));border-left:none;border-right:none}.wy-list-bordered .wy-item:first-child{border-top:none}.wy-list-bordered .wy-item:last-child{border-bottom:none}.wy-list-bordered .wy-item+.wy-list-bordered .wy-item{border-top-width:0}@keyframes wy-highlight{0%{--wy-component-background-color: var(--wy-highlight, var(--wy-primary-95, #e8f2ff));--wy-component-color: var(--wy-on-highlight, var(--wy-primary-10, #001d32))}}.wy-messages{padding:var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));flex:1 1 100%}.wy-message-placeholder{opacity:.5}.wy-date-separator{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));pointer-events:none;margin:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));text-align:center;position:sticky;top:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));z-index:10}.wy-date-separator time{background:var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));color:var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:inline-block}.wy-message{display:flex;flex-direction:row;align-items:flex-start;margin-bottom:calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + .5 * var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));scroll-margin-block:6rem;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-message[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-message-area{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-message-meta{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));margin:0 0 calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));color:var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-message-bubble{background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));display:flex;flex-direction:column;padding:var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));max-width:min(32 * var(--wy-size, 1rem),100% - 2 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))))}.wy-message-bubble>div{flex:1 1 100%}.wy-message-author{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));margin:calc(1lh + .5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-size, 1rem)) 0 0}.wy-message-content{display:flex;flex-direction:column;width:100%;align-items:flex-start;flex-wrap:wrap;min-width:0;position:relative}.wy-message-content-row{display:flex;flex-direction:row;align-items:center;max-width:100%}.wy-message-agent{--wy-component-background-color: var(--wy-tertiary-container, var(--wy-tertiary-90, #bbf294));--wy-component-color: var(--wy-on-tertiary-container, var(--wy-tertiary-10, #0a2100))}.wy-message-me{margin-right:0;margin-left:calc(2.5 * var(--wy-size, 1rem));align-items:flex-end;--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32))}.wy-message-me .wy-message-meta{margin:0 calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) 0}.wy-message-me .wy-message-content{align-items:flex-end}.wy-message-me .wy-message-content-row{flex-direction:row-reverse}.wy-message-emoji .wy-message-bubble{background:none;padding:0 0 var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-message-emoji .wy-content .wy-emoji{width:calc(3 * var(--wy-size, 1rem));height:calc(3 * var(--wy-size, 1rem));margin:0}.wy-message-emoji.wy-message-me .wy-content{text-align:end}.wy-readby-status{display:flex;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));height:calc(1.125 * var(--wy-size, 1rem));justify-content:flex-end;margin-top:calc(-.125 * var(--wy-size, 1rem))}.wy-message-readmore{justify-self:center;text-align:center}.wy-meta{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-meta-sm{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)))}.wy-dialog{background:none;border:none;padding:0;margin:0}.wy-dialog[popover]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1055}.wy-overlay-dialog{width:100%;height:100%;align-items:center;justify-content:center;overflow:visible;max-width:100%;max-height:100%}.wy-overlay-dialog[open]{display:flex}.wy-overlay-dialog:popover-open{display:flex}.wy-overlay-dialog:focus-visible{outline:none}.wy-overlay{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column}.wy-overlay.wy-modal{width:100%;height:100%;overflow:hidden;border-radius:0}@media (min-width: 768px){.wy-overlay.wy-modal-padded{border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level4, 0 calc(1 * var(--wy-size, 1rem)) calc(2.25 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .14), 0 calc(.375 * var(--wy-size, 1rem)) calc(1.875 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .12), 0 calc(.5 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) calc(-.3125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));margin-left:calc(4 * var(--wy-size, 1rem));margin-top:auto;margin-right:calc(4 * var(--wy-size, 1rem));margin-bottom:auto;width:calc(32 * var(--wy-size, 1rem));max-height:calc(32 * var(--wy-size, 1rem))}}@media (min-width: 768px){.wy-overlay.wy-modal-full{margin:0;border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level4, 0 calc(1 * var(--wy-size, 1rem)) calc(2.25 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .14), 0 calc(.375 * var(--wy-size, 1rem)) calc(1.875 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .12), 0 calc(.5 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) calc(-.3125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));max-width:calc(100% - 2 * var(--wy-size, 1rem));max-height:calc(100% - 2 * var(--wy-size, 1rem))}}.wy-overlay{opacity:0;visibility:hidden;transition:opacity var(--wy-transition-fast, var(--wy-transition-duration-fast, .1s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) .01s,transform var(--wy-transition-fast, var(--wy-transition-duration-fast, .1s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) .01s,visibility .01s step-end var(--wy-transition-duration-fast, .1s)}.wy-overlay.wy-open{transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),transform var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),visibility var(--wy-transition-duration, .2s) step-start;visibility:visible}.wy-overlay.wy-open.wy-transition{opacity:1;transform:none}.wy-pane{display:flex;flex-direction:column;position:relative;min-height:0;height:100%;flex:1 1 auto}.wy-pane-body{display:flex;flex-direction:column;flex:1}.wy-pane-group{padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-pane-background{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-pane-toolbar{display:flex;flex:1;justify-content:space-evenly;align-items:center;padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-picker-list{background:var(--wy-component-background-color);color:var(--wy-component-color);border:none}.wy-picker-list>.wy-picker-list-item:first-child,.wy-picker-list>:first-child .wy-picker-list-item{border-top:none}.wy-picker-list>.wy-picker-list-item:last-child,.wy-picker-list>:last-child .wy-picker-list-item{border-bottom:none}.wy-picker-list-item{display:flex;align-items:center;padding:calc(.25 * var(--wy-size, 1rem)) calc(.5 * var(--wy-size, 1rem))}.wy-picker-list-item>wy-icon{margin-left:calc(.25 * var(--wy-size, 1rem));margin-right:calc(.25 * var(--wy-size, 1rem));flex:0 0 auto}.wy-picker-list-item>button{margin-block-start:auto;flex:0 0 auto}.wy-picker-list-item-title{flex-grow:1}.wy-picker-list-item-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-main{display:flex;height:calc(100% - var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem))))));min-height:0}@media (max-width: 767.98px){.wy-main{flex-direction:column}}.wy-preview{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column;align-items:stretch;justify-content:stretch;position:relative;flex:1 1 100%;min-width:calc(16 * var(--wy-size, 1rem));min-height:calc(16 * var(--wy-size, 1rem));max-height:100%;max-width:100%}.wy-preview-layout{width:100%;height:100%}.wy-preview-swiper{display:flex;flex-direction:row;flex:1 1 100%;align-items:center;justify-content:start;min-width:calc(16 * var(--wy-size, 1rem));min-height:calc(16 * var(--wy-size, 1rem));max-height:100%;max-width:100%;overflow-x:scroll;scroll-snap-type:x mandatory;scroll-behavior:auto;overscroll-behavior-x:none;scrollbar-width:none}.wy-preview-swiper::-webkit-scrollbar{display:none}.wy-preview-swiper-disabled{overflow-x:hidden}.wy-preview-area{position:relative;min-width:100%;min-height:100%;width:100%;height:100%;flex:1 1 auto;display:flex;flex-direction:column;scroll-snap-stop:always;scroll-snap-align:center}.wy-nav-prev,.wy-nav-next{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));background-color:var(--wy-component-background-color);position:absolute;top:50%;z-index:1000;border-radius:50%}.wy-nav-prev{left:calc(.5 * var(--wy-size, 1rem))}.wy-nav-next{right:calc(.5 * var(--wy-size, 1rem))}.wy-document{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);align-self:flex-start;padding:calc(2 * var(--wy-size, 1rem)) calc(3.5 * var(--wy-size, 1rem));width:100%;min-height:100%;flex:1 0 auto}@media (min-width: 768px){.wy-document{padding:calc(3 * var(--wy-size, 1rem)) calc(4 * var(--wy-size, 1rem));margin:calc(2 * var(--wy-size, 1rem)) auto;border-radius:calc(.125 * var(--wy-size, 1rem));box-shadow:var(--wy-shadow-level2, 0 calc(.25 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12), 0 calc(.125 * var(--wy-size, 1rem)) calc(.25 * var(--wy-size, 1rem)) calc(-.0625 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));width:120ch;min-height:170ch;max-width:calc(100% - 3.5 * var(--wy-size, 1rem))}}.wy-content-code{align-self:flex-start;width:100%;padding:calc(2 * var(--wy-size, 1rem)) calc(3.5 * var(--wy-size, 1rem));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-content-iframe{border:0;display:block;width:100%;height:100%;top:0;left:0;flex:1 1 100%}.wy-content-iframe.wy-loaded{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-content-iframe.wy-loaded~.wy-content-iframe-fallback,.wy-content-iframe.wy-loaded~.wy-spinner,.wy-content-iframe.wy-loaded~wy-spinner{display:none}.wy-content-iframe.wy-loading:not(.wy-loaded){position:absolute;visibility:hidden;z-index:-1;pointer-events:none}.wy-content-iframe.wy-loading:not(.wy-loaded):not(.wy-fallback)~.wy-content-iframe-fallback{display:none}.wy-content-iframe.wy-loading:not(.wy-loaded).wy-fallback~.wy-spinner,.wy-content-iframe.wy-loading:not(.wy-loaded).wy-fallback~wy-spinner{display:none}.wy-content-iframe~.wy-spinner,.wy-content-iframe~wy-spinner{margin:auto}.wy-content-html pre,.wy-content-html code{word-break:break-word;white-space:pre-wrap}.wy-content-image{min-width:0;display:flex;align-items:center;justify-content:center;position:relative;margin:auto;max-height:100%;max-width:100%;transition:transform var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),transform-origin var(--wy-transition-duration, .2s) step-end}.wy-content-image.wy-zoom{cursor:zoom-out;transition:transform var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),transform-origin var(--wy-transition-duration, .2s) step-start}.wy-content-image img{min-width:0;min-height:0;width:100%;height:100%}.wy-content-image img:not(.wy-loading-transition):not([data-controller~=image])~.wy-spinner,.wy-content-image img:not(.wy-loading-transition):not([data-controller~=image])~wy-spinner{display:none}.wy-content-image img.wy-loading,.wy-content-image img[data-controller~=image]{transition:opacity .15s ease-out;opacity:0}.wy-content-image img.wy-loading.wy-loaded,.wy-content-image img[data-controller~=image].wy-loaded{opacity:1;transition:opacity .15s ease-out}.wy-content-image img.wy-loading.wy-loaded~img,.wy-content-image img[data-controller~=image].wy-loaded~img{transition-delay:.15s;opacity:0}.wy-content-image img.wy-loading.wy-loaded~.wy-spinner,.wy-content-image img.wy-loading.wy-loaded~wy-spinner,.wy-content-image img[data-controller~=image].wy-loaded~.wy-spinner,.wy-content-image img[data-controller~=image].wy-loaded~wy-spinner{display:none}.wy-content-image img.wy-responsive-image-thumb{position:absolute;z-index:-1}.wy-content-image img~.wy-spinner,.wy-content-image img~wy-spinner{position:absolute}.wy-content-video:not(.wy-error){min-height:0;max-width:100%;max-height:100%;flex:1 1 auto}.wy-content-video,.wy-content-audio{margin:auto}.wy-content-video.wy-loading:not(.wy-loaded),.wy-content-video[data-controller~=media]:not(.wy-loaded),.wy-content-audio.wy-loading:not(.wy-loaded),.wy-content-audio[data-controller~=media]:not(.wy-loaded){visibility:hidden}.wy-content-video.wy-loading.wy-loaded~.wy-spinner,.wy-content-video.wy-loading.wy-loaded~wy-spinner,.wy-content-video[data-controller~=media].wy-loaded~.wy-spinner,.wy-content-video[data-controller~=media].wy-loaded~wy-spinner,.wy-content-audio.wy-loading.wy-loaded~.wy-spinner,.wy-content-audio.wy-loading.wy-loaded~wy-spinner,.wy-content-audio[data-controller~=media].wy-loaded~.wy-spinner,.wy-content-audio[data-controller~=media].wy-loaded~wy-spinner{display:none}.wy-content-video:focus,.wy-content-audio:focus{outline:none}.wy-pdf-container{position:absolute;width:100%;height:100%;bottom:0;left:0}.wy-pdf-container{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-pdf-container:not(body){-webkit-overflow-scrolling:touch}.wy-pdf-container{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-content-pdf .textLayer{position:absolute;text-align:initial;top:0;right:0;bottom:0;left:0;overflow:clip;opacity:1;line-height:1;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0;caret-color:CanvasText;z-index:0}.wy-content-pdf .textLayer.highlighting{touch-action:none}.wy-content-pdf .textLayer :is(span,br){color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}.wy-content-pdf .textLayer>:not(.markedContent),.wy-content-pdf .textLayer .markedContent span:not(.markedContent){z-index:1}.wy-content-pdf .textLayer span.markedContent{top:0;height:0}.wy-content-pdf .textLayer span[role=img]{-webkit-user-select:none;user-select:none;cursor:default}.wy-content-pdf .textLayer .highlight{--highlight-bg-color: rgb(180 0 170 / .25);--highlight-selected-bg-color: rgb(0 100 0 / .25);--highlight-backdrop-filter: none;--highlight-selected-backdrop-filter: none}@media screen and (forced-colors: active){.wy-content-pdf .textLayer .highlight{--highlight-bg-color: transparent;--highlight-selected-bg-color: transparent;--highlight-backdrop-filter: var(--hcm-highlight-filter);--highlight-selected-backdrop-filter: var(--hcm-highlight-selected-filter)}}.wy-content-pdf .textLayer .highlight{margin:-1px;padding:1px;background-color:var(--highlight-bg-color);-webkit-backdrop-filter:var(--highlight-backdrop-filter);backdrop-filter:var(--highlight-backdrop-filter);border-radius:4px}.wy-content-pdf .textLayer .highlight.appended{position:initial}.wy-content-pdf .textLayer .highlight.begin{border-radius:4px 0 0 4px}.wy-content-pdf .textLayer .highlight.end{border-radius:0 4px 4px 0}.wy-content-pdf .textLayer .highlight.middle{border-radius:0}.wy-content-pdf .textLayer .highlight.selected{background-color:var(--highlight-selected-bg-color);-webkit-backdrop-filter:var(--highlight-selected-backdrop-filter);backdrop-filter:var(--highlight-selected-backdrop-filter)}.wy-content-pdf .textLayer ::selection{background:#0000ff40;background:color-mix(in srgb,AccentColor,transparent 75%)}.wy-content-pdf .textLayer br::selection{background:transparent}.wy-content-pdf .textLayer .endOfContent{display:block;position:absolute;top:100%;right:0;bottom:0;left:0;z-index:0;cursor:default;-webkit-user-select:none;user-select:none}.wy-content-pdf .textLayer.selecting .endOfContent{top:0}.wy-content-pdf .annotationLayer{--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--input-focus-border-color: Highlight;--input-focus-outline: 1px solid Canvas;--input-unfocused-border-color: transparent;--input-disabled-border-color: transparent;--input-hover-border-color: black;--link-outline: none}@media screen and (forced-colors: active){.wy-content-pdf .annotationLayer{--input-focus-border-color: CanvasText;--input-unfocused-border-color: ActiveText;--input-disabled-border-color: GrayText;--input-hover-border-color: Highlight;--link-outline: 1.5px solid LinkText}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):required,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:required,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:required{outline:1.5px solid selectedItem}.wy-content-pdf .annotationLayer .linkAnnotation{outline:var(--link-outline)}.wy-content-pdf .annotationLayer .linkAnnotation:hover{-webkit-backdrop-filter:var(--hcm-highlight-filter);backdrop-filter:var(--hcm-highlight-filter)}.wy-content-pdf .annotationLayer .linkAnnotation>a:hover{opacity:0!important;background:none!important;box-shadow:none}.wy-content-pdf .annotationLayer .popupAnnotation .popup{outline:calc(1.5px * var(--scale-factor)) solid CanvasText!important;background-color:ButtonFace!important;color:ButtonText!important}.wy-content-pdf .annotationLayer .highlightArea:hover:after{position:absolute;top:0;left:0;width:100%;height:100%;-webkit-backdrop-filter:var(--hcm-highlight-filter);backdrop-filter:var(--hcm-highlight-filter);content:\"\";pointer-events:none}.wy-content-pdf .annotationLayer .popupAnnotation.focused .popup{outline:calc(3px * var(--scale-factor)) solid Highlight!important}}.wy-content-pdf .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}.wy-content-pdf .annotationLayer[data-main-rotation=\"90\"] .norotate{transform:rotate(270deg) translate(-100%)}.wy-content-pdf .annotationLayer[data-main-rotation=\"180\"] .norotate{transform:rotate(180deg) translate(-100%,-100%)}.wy-content-pdf .annotationLayer[data-main-rotation=\"270\"] .norotate{transform:rotate(90deg) translateY(-100%)}.wy-content-pdf .annotationLayer.disabled section,.wy-content-pdf .annotationLayer.disabled .popup{pointer-events:none}.wy-content-pdf .annotationLayer .annotationContent{position:absolute;width:100%;height:100%;pointer-events:none}.wy-content-pdf .annotationLayer .annotationContent.freetext{background:transparent;border:none;top:0;right:0;bottom:0;left:0;overflow:visible;white-space:nowrap;font:10px sans-serif;line-height:1.35;-webkit-user-select:none;user-select:none}.wy-content-pdf .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}.wy-content-pdf .annotationLayer section:has(div.annotationContent) canvas.annotationContent{display:none}.textLayer.selecting~.wy-content-pdf .annotationLayer section{pointer-events:none}.wy-content-pdf .annotationLayer :is(.linkAnnotation,.buttonWidgetAnnotation.pushButton)>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}.wy-content-pdf .annotationLayer :is(.linkAnnotation,.buttonWidgetAnnotation.pushButton):not(.hasBorder)>a:hover{opacity:.2;background-color:#ff0;box-shadow:0 2px 10px #ff0}.wy-content-pdf .annotationLayer .linkAnnotation.hasBorder:hover{background-color:#ff03}.wy-content-pdf .annotationLayer .hasBorder{background-size:100% 100%}.wy-content-pdf .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%;top:0;left:0}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea),.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input{background-image:var(--annotation-unfocused-field-background);border:2px solid var(--input-unfocused-border-color);box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):required,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:required,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:required{outline:1.5px solid red}.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select option{padding:0}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}.wy-content-pdf .annotationLayer .textWidgetAnnotation textarea{resize:none}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea)[disabled],.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select[disabled],.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input[disabled]{background:none;border:2px solid var(--input-disabled-border-color);cursor:not-allowed}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):hover,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:hover,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input:hover{border:2px solid var(--input-hover-border-color)}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):hover,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:hover,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:hover{border-radius:2px}.wy-content-pdf .annotationLayer .textWidgetAnnotation :is(input,textarea):focus,.wy-content-pdf .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:2px solid var(--input-focus-border-color);border-radius:2px;outline:var(--input-focus-outline)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) :focus{background-image:none;background-color:transparent}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox :focus{border:2px solid var(--input-focus-border-color);border-radius:2px;outline:var(--input-focus-outline)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.radioButton :focus{border:2px solid var(--input-focus-border-color);outline:var(--input-focus-outline)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:\"\";display:block;position:absolute}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before,.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:25%;top:25%;width:50%}.wy-content-pdf .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}.wy-content-pdf .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}.wy-content-pdf .annotationLayer .buttonWidgetAnnotation:is(.checkBox,.radioButton) input{-webkit-appearance:none;-moz-appearance:none;appearance:none}.wy-content-pdf .annotationLayer .fileAttachmentAnnotation .popupTriggerArea{height:100%;width:100%}.wy-content-pdf .annotationLayer .popupAnnotation{position:absolute;font-size:calc(9px * var(--scale-factor));pointer-events:none;width:max-content;max-width:45%;height:auto}.wy-content-pdf .annotationLayer .popup{background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));outline:1.5px solid rgb(255,255,74);padding:calc(6px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}.wy-content-pdf .annotationLayer .popupAnnotation.focused .popup{outline-width:3px}.wy-content-pdf .annotationLayer .popup *{font-size:calc(9px * var(--scale-factor))}.wy-content-pdf .annotationLayer .popup>.header{display:inline-block}.wy-content-pdf .annotationLayer .popup>.header h1{display:inline}.wy-content-pdf .annotationLayer .popup>.header .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor));width:fit-content}.wy-content-pdf .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}.wy-content-pdf .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}.wy-content-pdf .annotationLayer .popupTriggerArea{cursor:pointer}.wy-content-pdf .annotationLayer section svg{position:absolute;width:100%;height:100%;top:0;left:0}.wy-content-pdf .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}.wy-content-pdf .annotationLayer .annotationTextContent span{width:100%;display:inline-block}.wy-content-pdf .annotationLayer svg.quadrilateralsContainer{contain:strict;width:0;height:0;position:absolute;top:0;left:0;z-index:-1}:host{--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-focus-outline: auto}@media screen and (forced-colors: active){:host{--xfa-focus-outline: 2px solid CanvasText}.wy-content-pdf .xfaLayer *:required{outline:1.5px solid selectedItem}}.wy-content-pdf .xfaLayer{background-color:transparent}.wy-content-pdf .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}.wy-content-pdf .xfaLayer .highlight.appended{position:initial}.wy-content-pdf .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}.wy-content-pdf .xfaLayer .highlight.end{border-radius:0 4px 4px 0}.wy-content-pdf .xfaLayer .highlight.middle{border-radius:0}.wy-content-pdf .xfaLayer .highlight.selected{background-color:#cbdfcb}.wy-content-pdf .xfaPage{overflow:hidden;position:relative}.wy-content-pdf .xfaContentarea{position:absolute}.wy-content-pdf .xfaPrintOnly{display:none}.wy-content-pdf .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}.wy-content-pdf .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}.wy-content-pdf .xfaLayer *:required{outline:1.5px solid red}.wy-content-pdf .xfaLayer div,.wy-content-pdf .xfaLayer svg,.wy-content-pdf .xfaLayer svg *{pointer-events:none}.wy-content-pdf .xfaLayer a{color:#00f}.wy-content-pdf .xfaRich li{margin-left:3em}.wy-content-pdf .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}.wy-content-pdf .xfaCaption{overflow:hidden;flex:0 0 auto}.wy-content-pdf .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}.wy-content-pdf .xfaLabel{height:100%;width:100%}.wy-content-pdf .xfaLeft{display:flex;flex-direction:row;align-items:center}.wy-content-pdf .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}.wy-content-pdf :is(.xfaLeft,.xfaRight)>:is(.xfaCaption,.xfaCaptionForCheckButton){max-height:100%}.wy-content-pdf .xfaTop{display:flex;flex-direction:column;align-items:flex-start}.wy-content-pdf .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}.wy-content-pdf :is(.xfaTop,.xfaBottom)>:is(.xfaCaption,.xfaCaptionForCheckButton){width:100%}.wy-content-pdf .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}.wy-content-pdf .xfaWrapped{width:100%;height:100%}.wy-content-pdf :is(.xfaTextfield,.xfaSelect):focus{background-image:none;background-color:transparent;outline:var(--xfa-focus-outline);outline-offset:-1px}.wy-content-pdf :is(.xfaCheckbox,.xfaRadio):focus{outline:var(--xfa-focus-outline)}.wy-content-pdf .xfaTextfield,.wy-content-pdf .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}.wy-content-pdf .xfaSelect{padding-inline:2px}.wy-content-pdf :is(.xfaTop,.xfaBottom)>:is(.xfaTextfield,.xfaSelect){flex:0 1 auto}.wy-content-pdf .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}.wy-content-pdf .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}.wy-content-pdf .xfaCheckbox,.wy-content-pdf .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}.wy-content-pdf .xfaRich{white-space:pre-wrap;width:100%;height:100%}.wy-content-pdf .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}.wy-content-pdf .xfaLrTb,.wy-content-pdf .xfaRlTb,.wy-content-pdf .xfaTb{display:flex;flex-direction:column;align-items:stretch}.wy-content-pdf .xfaLr{display:flex;flex-direction:row;align-items:stretch}.wy-content-pdf .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}.wy-content-pdf .xfaTb>div{justify-content:left}.wy-content-pdf .xfaPosition,.wy-content-pdf .xfaArea{position:relative}.wy-content-pdf .xfaValignMiddle{display:flex;align-items:center}.wy-content-pdf .xfaTable{display:flex;flex-direction:column;align-items:stretch}.wy-content-pdf .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}.wy-content-pdf .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}.wy-content-pdf .xfaTable .xfaRlRow>div{flex:1}.wy-content-pdf :is(.xfaNonInteractive,.xfaDisabled,.xfaReadOnly) :is(input,textarea){background:initial}@media print{.wy-content-pdf .xfaTextfield,.wy-content-pdf .xfaSelect{background:transparent}.wy-content-pdf .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:\"\"}}:host{--viewer-container-height: 0;--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--loading-icon-delay: .4s}@media screen and (forced-colors: active){:host{--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--spreadHorizontalWrapped-margin-LR: 3.5px}}.wy-content-pdf [data-main-rotation=\"90\"]{transform:rotate(90deg) translateY(-100%)}.wy-content-pdf [data-main-rotation=\"180\"]{transform:rotate(180deg) translate(-100%,-100%)}.wy-content-pdf [data-main-rotation=\"270\"]{transform:rotate(270deg) translate(-100%)}.wy-content-pdf #hiddenCopyElement,.wy-content-pdf .hiddenCanvasElement{position:absolute;top:0;left:0;width:0;height:0;display:none}.wy-content-pdf .pdfViewer{--scale-factor: 1;--page-bg-color: unset;padding-bottom:var(--pdfViewer-padding-bottom);--hcm-highlight-filter: none;--hcm-highlight-selected-filter: none}@media screen and (forced-colors: active){.wy-content-pdf .pdfViewer{--hcm-highlight-filter: invert(100%)}}.wy-content-pdf .pdfViewer.copyAll{cursor:wait}.wy-content-pdf .pdfViewer .canvasWrapper{overflow:hidden;width:100%;height:100%}.wy-content-pdf .pdfViewer .canvasWrapper canvas{position:absolute;top:0;left:0;margin:0;display:block;width:100%;height:100%;contain:content}.wy-content-pdf .pdfViewer .canvasWrapper canvas .structTree{contain:strict}.wy-content-pdf .pdfViewer .page{--scale-round-x: 1px;--scale-round-y: 1px;direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;background-color:var(--page-bg-color, rgb(255, 255, 255))}.wy-content-pdf .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}.wy-content-pdf .pdfViewer.noUserSelect{-webkit-user-select:none;user-select:none}.wy-content-pdf .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}.wy-content-pdf .pdfViewer.singlePageView{display:inline-block}.wy-content-pdf .pdfViewer.singlePageView .page{margin:0;border:none}.wy-content-pdf .pdfViewer:is(.scrollHorizontal,.scrollWrapped),.wy-content-pdf .spread{margin-inline:3.5px;text-align:center}.wy-content-pdf .pdfViewer.scrollHorizontal,.wy-content-pdf .spread{white-space:nowrap}.wy-content-pdf .pdfViewer.removePageBorders,.wy-content-pdf .pdfViewer:is(.scrollHorizontal,.scrollWrapped) .spread{margin-inline:0}.wy-content-pdf .spread :is(.page,.dummyPage),.wy-content-pdf .pdfViewer:is(.scrollHorizontal,.scrollWrapped) :is(.page,.spread){display:inline-block;vertical-align:middle}.wy-content-pdf .spread .page,.wy-content-pdf .pdfViewer:is(.scrollHorizontal,.scrollWrapped) .page{margin-inline:var(--spreadHorizontalWrapped-margin-LR)}.wy-content-pdf .pdfViewer.removePageBorders .spread .page,.wy-content-pdf .pdfViewer.removePageBorders:is(.scrollHorizontal,.scrollWrapped) .page{margin-inline:5px}.wy-content-pdf .pdfViewer .page.loadingIcon:after{position:absolute;top:0;left:0;content:\"\";width:100%;height:100%;display:none;transition-property:display;transition-delay:var(--loading-icon-delay);z-index:5;contain:strict}.wy-content-pdf .pdfViewer .page.loading:after{display:block}.wy-content-pdf .pdfViewer .page:not(.loading):after{transition-property:none;display:none}.wy-content-pdf .pdfPresentationMode .pdfViewer{padding-bottom:0}.wy-content-pdf .pdfPresentationMode .spread{margin:0}.wy-content-pdf .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}.wy-content-pdf .pdfViewer .page{box-shadow:var(--wy-shadow-level2, 0 calc(.25 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12), 0 calc(.125 * var(--wy-size, 1rem)) calc(.25 * var(--wy-size, 1rem)) calc(-.0625 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));background-color:var(--wy-white, var(--wy-white, #ffffff))}.wy-content-pdf .pdfViewer .page.loadingIcon:after{background:url(\"data:image/svg+xml,%3Csvg viewBox='0 0 24 24' width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cstyle type='text/css'%3Eg%7Banimation:rotate 2s linear infinite;transform-origin:center center%7Dcircle%7Bstroke-dasharray:1,100;stroke-dashoffset:0;animation:dash 1.5s ease-in-out infinite,color 6s ease-in-out infinite%7D@keyframes rotate%7B100%25%7Btransform:rotate(360deg)%7D%7D@keyframes dash%7B0%25%7Bstroke-dasharray:1,100;stroke-dashoffset:0%7D50%25%7Bstroke-dasharray:44.5,100;stroke-dashoffset:-17.5px%7D100%25%7Bstroke-dasharray:44.5,100;stroke-dashoffset:-62px%7D%7D@keyframes color%7B0%25,100%25%7Bstroke:%23216eb4%7D40%25%7Bstroke:%2328b7cf%7D66%25%7Bstroke:%23216eb4%7D80%25,90%25%7Bstroke:%2328b7cf%7D%7D%3C/style%3E%3Cg%3E%3Ccircle fill='none' cx='12' cy='12' r='11' stroke-linecap='butt' stroke-width='2' /%3E%3C/g%3E%3C/svg%3E\") center no-repeat}.wy-pdf-page-number{width:calc(3 * var(--wy-size, 1rem))}.wy-pdf-zoom-level{width:calc(5 * var(--wy-size, 1rem))}.wy-content-text{word-break:break-word;white-space:pre-wrap}.wy-sheet{--wy-scrollbar-adjust-top: 0;--wy-scrollbar-adjust-bottom: 0;--wy-component-background-color: var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);position:fixed;z-index:1055;display:flex;flex-direction:column;overflow:hidden;bottom:calc(.5 * var(--wy-size, 1rem));left:calc(.5 * var(--wy-size, 1rem));right:calc(.5 * var(--wy-size, 1rem));max-height:max(50vh,50%);min-height:calc(3 * var(--wy-size, 1rem));margin:calc(.5 * var(--wy-size, 1rem)) auto;max-width:calc(32 * var(--wy-size, 1rem));transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12))}.wy-sheet>.wy-appbars,.wy-sheet>.wy-appbar{border-top-left-radius:inherit;border-top-right-radius:inherit}.wy-sheet-body{overflow:hidden;padding:calc(.5 * var(--wy-size, 1rem));position:relative;min-height:calc(3 * var(--wy-size, 1rem))}.wy-sheet-body.wy-scroll-y{overflow-y:auto}.wy-sheet-no-padding{padding:0}.wy-sheet:not(.wy-show){opacity:0;transform:translateY(calc(32 * var(--wy-size, 1rem)))}.wy-sheet.wy-show{opacity:1;transform:none;transition:transform var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));pointer-events:auto}@starting-style{.wy-sheet.wy-show{opacity:0;transform:translateY(calc(32 * var(--wy-size, 1rem)))}}.wy-toasts{background:none;border:none;padding:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));margin:0;width:100%;height:100%;display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;align-items:flex-end;justify-content:flex-end;pointer-events:none}.wy-toasts[popover]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1070}.wy-toasts>::slotted(*){pointer-events:auto}.wy-toast{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background:var(--wy-component-background-color);color:var(--wy-component-color);gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));margin-top:0;margin-bottom:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));display:flex;cursor:pointer;border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));padding:0;-webkit-user-select:none;user-select:none;box-shadow:var(--wy-shadow-level2, 0 calc(.25 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.625 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12), 0 calc(.125 * var(--wy-size, 1rem)) calc(.25 * var(--wy-size, 1rem)) calc(-.0625 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2));position:relative;overflow:hidden;min-height:calc(4.5 * var(--wy-size, 1rem));max-width:calc(32 * var(--wy-size, 1rem))}.wy-toast.wy-fade{transition-property:opacity,min-height,padding-top,padding-bottom,margin-top,margin-bottom,height;transition-duration:var(--wy-transition-duration, .2s);transition-timing-function:var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))}.wy-toast.wy-fade:not(.wy-show){opacity:0;min-height:0;height:0;padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;pointer-events:none}.wy-toast-action{position:sticky;top:calc(4.5 * var(--wy-size, 1rem));bottom:calc(4.5 * var(--wy-size, 1rem));z-index:990;background-color:var(--wy-primary, var(--wy-primary-40, #006399));color:var(--wy-on-primary, var(--wy-white, #ffffff));padding:calc(.5 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem));margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:calc(.5 * var(--wy-size, 1rem));border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));width:max-content;min-height:0;max-width:calc(100% - 3 * var(--wy-size, 1rem));height:auto;align-self:center;text-align:center;box-shadow:none}.wy-toast-primary{background:var(--wy-on-primary-container, var(--wy-primary-10, #001d32));color:var(--wy-primary-container, var(--wy-primary-90, #cde5ff))}.wy-placeholder{cursor:wait;color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));background:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));opacity:.5;animation:wy-placeholder-glow 2s ease-in-out infinite}@keyframes wy-placeholder-glow{50%{opacity:.2}}.wy-meeting .wy-item-title{font-weight:700}.wy-meeting .wy-item-text{font-size:var(--wy-font-size, var(--wy-size, 1em))}.wy-meeting.wy-disabled .wy-item-title{font-weight:400}.wy-dragging:after{content:attr(data-drag-title);background-color:#ffffff80;display:flex;justify-content:center;align-items:center;border:calc(.125 * var(--wy-size, 1rem)) dashed var(--wy-primary, var(--wy-primary-40, #006399));font-weight:var(--wy-font-weight-bold, 600);z-index:10000;position:absolute;top:0;left:0;bottom:0;right:0}.wy-message-editor-top{background-color:var(--wy-component-background-color);color:var(--wy-component-color)}@supports (position: sticky){.wy-message-editor-top{position:sticky;top:0;z-index:1020}}.wy-message-editor-bottom{background-color:var(--wy-component-background-color);color:var(--wy-component-color)}@supports (position: sticky){.wy-message-editor-bottom{position:sticky;bottom:0;z-index:1020}}.wy-message-form .wy-spinner{display:none}.wy-message-form.wy-uploading .wy-spinner{display:block}.wy-message-form.wy-uploading [data-icon=plus]{display:none}.wy-message-form .wy-picker-list:not(:empty){border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-message-editor-inputs{display:flex;flex-direction:row;align-items:flex-end;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));min-height:calc(var(--wy-input-font-size, var(--wy-font-size, 1em)) * 1.5 * var(--wy-size, 1rem) + var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * 2 + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) * 2)}.wy-message-editor-buttons{flex:1 0 auto}.wy-message-editor-text{flex:1 1 100%;display:flex;flex-direction:column;margin-inline:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-message-editor-mention,.wy-message-editor-link{background:#00f;color:#fff}.wy-message-editor .cm-editor,.wy-message-editor-grow:after,.wy-message-editor-grow>textarea,.wy-message-editor-textfield{flex:1 1 100%;max-height:11.25em;background-color:var(--wy-background, var(--wy-neutral-99, #fcfcff));color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));border-radius:var(--wy-input-filled-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem)))));border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-background, var(--wy-neutral-99, #fcfcff))}.wy-message-editor .cm-editor:focus,.wy-message-editor-grow:focus:after,.wy-message-editor-grow>textarea:focus,.wy-message-editor-textfield:focus{border-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-message-editor .cm-editor .cm-content,.wy-message-editor-textcontent{font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)), inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));min-height:calc(var(--wy-input-font-size, var(--wy-font-size, 1em)) * 1.5 * var(--wy-size, 1rem) + var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * 2 - var(--wy-input-border-width, var(--wy-border, 1px)));line-height:calc(1.5 * var(--wy-size, 1rem))}.wy-message-editor-grow{display:grid}.wy-message-editor-grow:after,.wy-message-editor-grow>textarea{grid-area:1/1/2/2}.wy-message-editor-grow:after{content:attr(data-replicated-value) \" \";white-space:pre-wrap;visibility:hidden}.wy-message-editor-grow>textarea{resize:none;overflow:hidden}.wy-editor .cm-scroller{font-family:unset;line-height:1.5}.wy-editor .cm-widgetBuffer{vertical-align:unset}.wy-editor .cm-placeholder{pointer-events:none;color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-editor .cm-content{caret-color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e))}.wy-editor .cm-content .wy-link{text-decoration:var(--wy-link-decoration, none);color:var(--wy-link, var(--wy-primary-40, #006399))}.wy-editor .cm-editor{box-sizing:border-box;flex-direction:column;position:relative!important;display:flex!important}.wy-editor .cm-editor.cm-focused{--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));color:var(--wy-component-color);border-color:var(--wy-primary, var(--wy-primary-40, #006399));outline:0}.wy-editor .cm-editor .cm-scroller{overflow:auto}.wy-editor .cm-editor .cm-line{display:block;padding:0px var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) 0px var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-editor .cm-tooltip.cm-tooltip-autocomplete>ul{font-family:unset;max-height:calc(15 * var(--wy-size, 1rem))}.wy-editor .cm-tooltip.cm-tooltip-autocomplete>ul>li{padding:0}.wy-editor .cm-tooltip{border:none;background-clip:padding-box;background-color:var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));color:var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12));overflow:hidden;z-index:1000}.wy-editor .cm-tooltip-autocomplete ul li[aria-selected]{background:var(--wy-primary-container, var(--wy-primary-90, #cde5ff));color:unset}.wy-editor .cm-tooltip-autocomplete .cm-completionLabel{display:none}.wy-editor .cm-tooltip-autocomplete .wy-item-hover:hover,.wy-editor .cm-tooltip-autocomplete .wy-item-hover:focus{background:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}.wy-message-editor .cm-editor.cm-focused{border-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-message-editor .wy-is-invalid+[data-editor-target] .cm-editor,.wy-message-editor .wy-is-invalid .cm-editor{border-color:var(--wy-error, var(--wy-error-40, #ba1824))!important}.wy-chat-conversation{overflow-anchor:none;display:flex;flex-direction:column;flex:1 0 min-content;height:100%;width:100%;min-height:0;min-width:0}.wy-truncated-text-and-icon{display:flex;align-items:center;gap:.25rem}.wy-truncated-text-and-icon>:first-child{line-height:var(--wy-line-height, 1.5);flex:0 1 auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wy-truncated-text-and-icon>:last-child:not(:first-child){flex:0 0 auto;white-space:nowrap}[part~=wy-filename]{font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);display:flex;flex-direction:column;justify-content:center}[part~=wy-filename] .wy-truncated-text-and-icon{justify-content:space-between}.wy-files{position:relative;display:flex;flex-direction:column;flex:1;min-height:0;container-type:inline-size}@supports (position: sticky){wy-files-appbar{position:sticky;top:0;z-index:1020}}.wy-table-files thead{text-align:left;display:none}@container (inline-size >= 576px){.wy-table-files thead{display:table-header-group}}.wy-table-files tr[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-table-files tr>:nth-child(2){width:100%}.wy-table-files tr>:nth-child(2) td{padding:0 var(--wy-table-cell-padding-x, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))))}.wy-table-files tr>:nth-child(4){width:calc(7 * var(--wy-size, 1rem));display:none}@container (inline-size >= 768px){.wy-table-files tr>:nth-child(4){display:table-cell}}.wy-table-files tr>:nth-child(4){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-table-files tr>:nth-child(5){width:calc(7.5 * var(--wy-size, 1rem));text-align:right;display:none}@container (inline-size >= 768px){.wy-table-files tr>:nth-child(5){display:table-cell}}.wy-table-files tr>:nth-child(5){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-table-files tr>:nth-child(6){width:calc(7 * var(--wy-size, 1rem));text-align:right;display:none}@container (inline-size >= 576px){.wy-table-files tr>:nth-child(6){display:table-cell}}.wy-table-files tr>:nth-child(6){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-sidebar{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background:var(--wy-component-background-color);color:var(--wy-component-color);min-width:0;min-height:0;flex-grow:0;flex-shrink:0;flex-basis:calc(18 * var(--wy-size, 1rem));z-index:10;display:flex;flex-direction:column;transition:flex-basis var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));position:relative;order:9999;overflow:clip}.wy-sidebar>*{transition:opacity var(--wy-transition-fast, var(--wy-transition-duration-fast, .1s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) calc(var(--wy-transition-duration, .2s) - var(--wy-transition-duration-fast, .1s));min-width:calc(18 * var(--wy-size, 1rem))}.wy-sidebar[hidden]{display:flex!important;flex-basis:0}.wy-sidebar[hidden]>*{transition:opacity var(--wy-transition-fast, var(--wy-transition-duration-fast, .1s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));opacity:0}@media (min-width: 768px){.wy-sidebar>*{min-width:calc(18 * var(--wy-size, 1rem))}.wy-sidebar .wy-sidebar-handle{display:none}}@media (max-width: 767.98px){.wy-sidebar{transition:flex-basis var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))),margin-top var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));border-top-left-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border-top-right-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));flex-basis:50vh}.wy-sidebar:not([hidden]){margin-top:calc(-1 * var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))))}.wy-sidebar:not([hidden]).wy-maximized{flex-basis:calc(100% - var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem))))) * .5);margin-top:calc(-50% + var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem))))) * 2.5 - var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))))}.wy-sidebar:not([hidden]).wy-maximized~* .wy-nav-prev,.wy-sidebar:not([hidden]).wy-maximized~* .wy-nav-next{display:none}.wy-sidebar>*{min-height:var(--wy-appbar-height, calc(max(1lh, var(--wy-button-size, calc(2.5 * var(--wy-size, 1rem)))) + 2 * var(--wy-padding, calc(.25 * var(--wy-size, 1rem)))))}}.wy-sidebar-handle{width:calc(4 * var(--wy-size, 1rem));background-clip:content-box;background-color:var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));height:calc(1 * var(--wy-size, 1rem));border:calc(.375 * var(--wy-size, 1rem)) solid transparent;position:absolute;top:0;z-index:2;left:50%;margin-left:calc(-2 * var(--wy-size, 1rem));border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));cursor:pointer}.wy-table{table-layout:fixed;width:100%;vertical-align:top;border-collapse:collapse}.wy-table th,.wy-table td{background-color:var(--wy-component-background-color);padding:var(--wy-table-cell-padding-y, var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) var(--wy-table-cell-padding-x, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 -1px 0 0 inset;line-height:1;vertical-align:middle;height:calc(2.5 * var(--wy-size, 1rem))}.wy-table th:first-child,.wy-table td:first-child{padding-left:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-table th:last-child,.wy-table td:last-child{padding-right:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-table>tbody{vertical-align:inherit}.wy-table>thead{vertical-align:bottom}.wy-table .wy-table-cell-icon{vertical-align:middle;text-align:center;padding:calc(var(--wy-table-cell-padding-y, var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .5) var(--wy-table-cell-padding-x, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));width:calc(calc(2.5 * var(--wy-size, 1rem)) + var(--wy-table-cell-padding-x, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))) * 2);font-size:var(--wy-font-size, var(--wy-size, 1em));font-weight:var(--wy-font-weight, unset);text-transform:none;letter-spacing:normal}.wy-table .wy-table-cell-text{width:100%}.wy-table .wy-table-cell-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-table-hover>tbody>tr:hover>*{--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));color:var(--wy-component-color);cursor:pointer}.wy-table-row-trashed th,.wy-table-row-trashed td{text-decoration:line-through}.wy-table-row-trashed th:not(:last-child)>*,.wy-table-row-trashed td:not(:last-child)>*{opacity:var(--wy-opacity-disabled, 38%)}.wy-table-row-trashed th>a,.wy-table-row-trashed td>a{color:var(--wy-component-color)}.wy-table-row-trashed:hover th,.wy-table-row-trashed:hover td{opacity:1}.wy-table-no-result{text-align:center;padding:calc(1 * var(--wy-size, 1rem))}.wy-table-sort-link{display:inline-flex;align-items:center;color:var(--wy-link, var(--wy-primary-40, #006399));cursor:pointer}[part~=wy-image]{padding:0;width:50%;position:relative;flex:auto;background-color:inherit;background-clip:content-box}[part~=wy-image-full-width]{flex-basis:100%!important}[part~=wy-image-grid]{display:flex;flex-wrap:wrap;justify-content:space-evenly;position:relative;overflow:hidden;column-gap:1px;row-gap:1px}[part~=wy-image-area]{display:block;height:100%;cursor:pointer}[part~=wy-image-content]{position:absolute;height:100%;width:100%;object-fit:contain}[part~=wy-image-content][part~=wy-loading]{transition:opacity .15s ease-out;opacity:0}[part~=wy-image-content][part~=wy-loading][part~=wy-loaded]{opacity:1;transition:opacity .15s ease-out}[part~=wy-image-content][part~=wy-loading][part~=wy-loaded]~[part~=wy-image-preview]{transition-delay:.15s;opacity:0}[part~=wy-image-grid-more]{position:absolute;line-height:100%;color:var(--wy-white, #ffffff);top:0;left:0;bottom:0;right:0;display:flex;align-items:center;justify-content:center;font-size:calc(1.5 * var(--wy-size, 1rem));background:rgba(0,0,0,var(--wy-opacity-disabled, 38%))}.wy-posts{display:flex;flex-direction:column;gap:calc(1 * var(--wy-size, 1rem))}.wy-post{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column;position:relative;--wy-component-border-radius: var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border-radius:var(--wy-component-border-radius)}.wy-post[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-post wy-comment-list{border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-post-area{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-post-area-full-width{border-radius:0}.wy-post-body{display:flex;flex-direction:column;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));gap:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-post-body:empty{display:none}.wy-post-footer{display:flex;align-items:center;justify-content:space-between;padding:0 calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) * .75) calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) * .75)}.wy-post-footer .wy-meta{margin-right:calc(.5 * var(--wy-size, 1rem))}.wy-post-comments:not(:empty){padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-post-dragging:after{content:attr(data-drag-title,\"Drop files here to upload.\");background-color:#ffffff80;display:flex;justify-content:center;align-items:center;border:calc(.125 * var(--wy-size, 1rem)) dashed var(--wy-primary, var(--wy-primary-40, #006399));font-weight:var(--wy-font-weight-bold, 600);z-index:10000;position:absolute;top:0;left:0;bottom:0;right:0}.wy-poll{flex:1 1 100%;min-width:0;display:flex;flex-direction:column;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-poll-form{background:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-poll-form:empty{display:none}.wy-poll-option{overflow:hidden;position:relative;background-color:var(--wy-background, var(--wy-neutral-99, #fcfcff));border:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));min-height:calc(2.5 * var(--wy-size, 1rem));cursor:pointer}.wy-poll-option .wy-progress{position:absolute;top:0;left:0;bottom:0;background-color:var(--wy-surface-5, var(--wy-surface-5-light, #dce2ea))}.wy-poll-option>:not(.wy-progress){z-index:1}.wy-embed{display:flex;flex-direction:column;word-wrap:break-word;border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));clip-path:border-box;overflow:hidden}.wy-embed-photo a{display:flex}.wy-embed-photo img{width:100%;height:auto}.wy-embed-photo-sm a{padding:0 calc(1 * var(--wy-size, 1rem))}.wy-embed-photo-sm img{display:block;margin:0 auto;width:auto;max-width:100%;border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-embed-video{position:relative;display:block;width:100%;padding:0;overflow:hidden}.wy-embed-video:before{display:block;content:\"\";padding-top:56.25%}.wy-embed-video iframe,.wy-embed-video embed,.wy-embed-video object,.wy-embed-video video{position:absolute;top:0;bottom:0;left:0;width:100%;height:100%;border:0}.wy-embed-caption{--wy-component-background-color: var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);padding:calc(.5 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem));position:relative}.wy-embed-link{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));text-transform:uppercase;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-embed-link:after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;content:\"\"}.wy-embed-title{font-weight:var(--wy-headings-font-weight, var(--wy-font-weight-bold, 600));margin-bottom:calc(.5 * var(--wy-size, 1rem))}.wy-embed-description{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-embed-preview a[target=_blank]{pointer-events:none}.wy-embed-preview .wy-embed{border:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));display:none}.wy-embed-preview .wy-embed:first-child{display:block}.wy-embed-preview .wy-embed-caption{border-bottom-left-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border-bottom-right-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)))}.wy-embed-preview .wy-embed-actions{display:flex}.wy-embed-actions{display:none;justify-content:space-between;padding:calc(.5 * var(--wy-size, 1rem)) calc(.25 * var(--wy-size, 1rem))}.wy-embed-cycle{visibility:hidden}.wy-embed-show-cycle .wy-embed-cycle{visibility:visible}.wy-post-editor{padding:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:flex;flex-direction:column;gap:var(--wy-gap-lg, calc(1.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-post-editor.wy-uploading .wy-icon-active-stack>:first-child{opacity:0}.wy-post-editor.wy-uploading .wy-icon-active-stack>:last-child{opacity:1}.wy-post-editor .wy-picker-list:not(:empty){margin-top:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-post-editor-inputs{display:flex;flex-direction:row;align-items:flex-end;justify-content:space-between;flex-wrap:wrap;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-post-editor-buttons{display:flex;flex-direction:row;align-items:flex-end;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));flex:1 0 auto}.wy-post-editor-text{flex:1 1 100%;display:flex;flex-direction:column}.wy-post-editor-mention,.wy-post-editor-link{background:#00f;color:#fff}.wy-post-editor .cm-editor,.wy-post-editor-grow:after,.wy-post-editor-grow>textarea,.wy-post-editor-textfield{flex:1 1 100%;max-height:11.25em;min-height:4em;background-color:var(--wy-background, var(--wy-neutral-99, #fcfcff));color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));caret-color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-post-editor .cm-editor:focus,.wy-post-editor-grow:focus:after,.wy-post-editor-grow>textarea:focus,.wy-post-editor-textfield:focus{border-color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-post-editor .cm-editor .cm-content,.wy-post-editor-textcontent{font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)),inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-post-editor-grow{display:grid}.wy-post-editor-grow:after,.wy-post-editor-grow>textarea{grid-area:1/1/2/2}.wy-post-editor-grow:after{content:attr(data-replicated-value) \" \";white-space:pre-wrap;visibility:hidden}.wy-post-editor-grow>textarea{resize:none;overflow:hidden}.wy-post-editor .cm-editor .cm-line{padding:0}.wy-post-editor .wy-is-invalid+[data-editor-target] .cm-editor,.wy-post-editor .wy-is-invalid .cm-editor{border-color:var(--wy-error, var(--wy-error-40, #ba1824))!important}.wy-comments{display:flex;flex-direction:column;gap:var(--wy-gap-xl, calc(2 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));margin-bottom:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-comments-padded{margin:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-comment{--wy-component-background-color: var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));--wy-component-border-radius: var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));border-radius:var(--wy-component-border-radius);background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;flex-direction:column;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));position:relative}.wy-comment[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-comment-body{flex:1 0 auto;z-index:1}.wy-comment-content{padding:0 var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));display:flex;flex-direction:column;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-comment-area{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-comment-editor .wy-spinner{display:none}.wy-comment-editor.wy-uploading .wy-spinner{display:block}.wy-comment-editor.wy-uploading [data-icon=plus]{display:none}.wy-comment-editor .wy-picker-list:not(:empty){border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-comment-editor.wy-comment-editor-bottom{position:sticky;bottom:0;z-index:999;background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-comment-editor-inputs{display:flex;flex-direction:row;align-items:flex-end;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));min-height:calc(3.5 * var(--wy-size, 1rem));gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-comment-editor-buttons{flex:1 0 auto}.wy-comment-editor-text{flex:1 1 100%;display:flex;flex-direction:column}.wy-comment-editor-mention,.wy-comment-editor-link{background:#00f;color:#fff}.wy-comment-editor .cm-editor,.wy-comment-editor-grow:after,.wy-comment-editor-grow>textarea,.wy-comment-editor-textfield{flex:1 1 100%;max-height:calc(11.25 * var(--wy-size, 1rem));background-color:var(--wy-background, var(--wy-neutral-99, #fcfcff));color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));border-radius:calc(1.25 * var(--wy-size, 1rem));border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-comment-editor .cm-editor:focus,.wy-comment-editor-grow:focus:after,.wy-comment-editor-grow>textarea:focus,.wy-comment-editor-textfield:focus{border-color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-comment-editor .cm-editor .cm-content,.wy-comment-editor-textcontent{font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)),inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-comment-editor-grow{display:grid}.wy-comment-editor-grow:after,.wy-comment-editor-grow>textarea{grid-area:1/1/2/2}.wy-comment-editor-grow:after{content:attr(data-replicated-value) \" \";white-space:pre-wrap;visibility:hidden}.wy-comment-editor-grow>textarea{resize:none;overflow:hidden}.wy-comment-editor{position:relative}.wy-comment-editor .wy-is-invalid+.cm-editor,.wy-comment-editor .wy-is-invalid .cm-editor{border-color:var(--wy-error, var(--wy-error-40, #ba1824))!important}.wy-badge{display:inline-block;padding:.35em .65em;font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));font-weight:var(--wy-font-weight-bold, 600);line-height:1;color:var(--wy-on-primary, var(--wy-white, #ffffff));text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));background-color:var(--wy-primary, var(--wy-primary-40, #006399))}.wy-badge:empty{display:none}.wy-badge-reveal{opacity:1;transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) calc(var(--wy-transition-duration, .2s) + var(--wy-transition-reveal-delay, 1s))}@starting-style{.wy-badge-reveal{opacity:0}}.wy-button-badge{position:absolute;right:0;top:0;margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5);padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));min-width:calc(var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em))) + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));max-width:calc(var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em))) * 3 + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) * 2);height:calc(var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em))) + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));line-height:calc(var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em))) - var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));display:block;text-align:center}.wy-button-badge{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-button-badge:empty{display:none}.wy-button-dot{position:absolute;right:0;top:0;content-visibility:hidden;padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));margin:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));line-height:0;min-width:0;height:0}.wy-button-dot:empty{display:none}[part~=wy-tabs]{display:flex;overflow-y:hidden;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));flex:1 1 auto}[part~=wy-tabs]{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}[part~=wy-tabs]{scrollbar-width:thin;scrollbar-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) transparent}[part~=wy-tabs]::-webkit-scrollbar{height:.375rem;width:.375rem;background:transparent;z-index:999}[part~=wy-tabs]::-webkit-scrollbar-track{background:transparent}[part~=wy-tabs]::-webkit-scrollbar-thumb{background-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));opacity:75%;border:0 solid transparent;border-radius:0;background-clip:padding-box}[part~=wy-tabs]::-webkit-scrollbar-thumb:hover{background-color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:75%}[part~=wy-tabs]::-webkit-scrollbar-thumb:window-inactive{background-color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:50%}[part~=wy-tab]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399));--wy-component-background-color: transparent;color:var(--wy-component-color);background:var(--wy-component-background-color);border:none;border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));display:inline-flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));position:relative;text-align:center;text-decoration:none;cursor:pointer;-webkit-user-select:none;user-select:none}[part~=wy-tab] .wy-tab-icon{position:relative;padding:calc(.25 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem));border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));display:inline-flex}[part~=wy-tab] .wy-tab-icon:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-tab]:hover .wy-tab-icon:before{opacity:8%}[part~=wy-tab]:focus .wy-tab-icon:before,[part~=wy-tab]:active .wy-tab-icon:before,[part~=wy-tab].wy-active .wy-tab-icon:before{opacity:12%}[part~=wy-tab] .wy-tab-label{font-family:var(--wy-button-font-family, var(--wy-font-family, unset)),inherit;line-height:var(--wy-button-line-height, var(--wy-line-height, 1.5));font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));font-weight:var(--wy-font-weight, unset)}[part~=wy-button-state-layer][part~=wy-button-sm][part~=wy-tab-sm]{padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .5);margin:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) auto;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6)}[part~=wy-button-state-layer][part~=wy-button-sm][part~=wy-tab-sm]:before{margin:calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.25) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * 0)}.wy-conversations{position:relative}.wy-conversation{display:flex;position:relative}.wy-conversation .wy-item-title{font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset));font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em))}.wy-conversation.wy-unread .wy-item-title{font-weight:var(--wy-font-weight-bold, 600)}.wy-conversation.wy-unread .wy-item-text,.wy-conversation.wy-unread .wy-meta{color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));font-weight:var(--wy-font-weight-bold, 600)}.wy-conversation .wy-item-text .wy-typing-show{font-weight:var(--wy-font-weight, unset)}.wy-conversation .wy-item-text .wy-typing-show{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`, yt = dt`:host{display:contents}`;
var ig = Object.defineProperty, sg = Object.getOwnPropertyDescriptor, ie = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? sg(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && ig(t, e, r), r;
}, "__decorateClass$1b");
function my(s) {
  return s != null && s !== !1;
}
o(my, "acceptedValue");
const rg = "wy-context";
var Gn;
let Bt = (Gn = class extends it {
  constructor() {
    super(), this.provider = !1, this.annotations = Ft.defaults.annotations, this.cloudFilePickerUrl = Ft.defaults.cloudFilePickerUrl, this.disableEnvironmentImports = Ft.defaults.disableEnvironmentImports, this.locale = Ft.defaults.locale, this.locales = Ft.defaults.locales, this.gcTime = Ft.defaults.gcTime, this.notificationEvents = Ft.defaults.notificationEvents, this.scrollBehavior = Ft.defaults.scrollBehavior, this.staleTime = Ft.defaults.staleTime, this.tokenFactory = Ft.defaults.tokenFactory, this.tokenFactoryRetryDelay = Ft.defaults.tokenFactoryRetryDelay, this.tokenFactoryTimeout = Ft.defaults.tokenFactoryTimeout, this.tokenUrl = Ft.defaults.tokenUrl, this.url = Ft.defaults.url, this.notifications = Ft.defaults.notifications, this.notificationsBadge = Ft.defaults.notificationsBadge, this.reactions = Ft.defaults.reactions, this.childElementCount && (this.provider = !0), this.weavy ?? (this.weavy = new Ft({ host: this.provider ? this : void 0 }));
  }
  /**
   * The semver version of the package.
   */
  get version() {
    return Ft.version;
  }
  /**
   * The Weavy source name; package name.
   */
  get sourceName() {
    return Ft.sourceName;
  }
  willUpdate(t) {
    if (super.willUpdate(t), this.weavy) {
      const e = {};
      Array.from(t.keys()).forEach((i) => {
        i !== "weavy" && (my(this[i]) || my(t.get(i))) && Object.assign(e, { [i]: this[i] });
      }), Object.assign(this.weavy, e);
    }
  }
  render() {
    return h` <slot></slot> `;
  }
}, o(Gn, "WyContext"), Gn);
Bt.styles = [
  X,
  We,
  yt
];
ie([
  y({ attribute: !0, type: Boolean })
], Bt.prototype, "provider", 2);
ie([
  y()
], Bt.prototype, "annotations", 2);
ie([
  y({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ o((s) => bd(s), "fromAttribute")
    }
  })
], Bt.prototype, "cloudFilePickerUrl", 2);
ie([
  y({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ o((s) => bd(s), "fromAttribute")
    }
  }),
  y({ type: Boolean })
], Bt.prototype, "disableEnvironmentImports", 2);
ie([
  y({ attribute: !0 })
], Bt.prototype, "locale", 2);
ie([
  y({ attribute: !0, type: Array })
], Bt.prototype, "locales", 2);
ie([
  y({ attribute: !0, type: Number })
], Bt.prototype, "gcTime", 2);
ie([
  y({ type: Boolean })
], Bt.prototype, "notificationEvents", 2);
ie([
  y({ attribute: !0 })
], Bt.prototype, "scrollBehavior", 2);
ie([
  y({ attribute: !0, type: Number })
], Bt.prototype, "staleTime", 2);
ie([
  y({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ o((s) => eg(s), "fromAttribute")
    }
  })
], Bt.prototype, "tokenFactory", 2);
ie([
  y({ attribute: !0, type: Number })
], Bt.prototype, "tokenFactoryRetryDelay", 2);
ie([
  y({ attribute: !0, type: Number })
], Bt.prototype, "tokenFactoryTimeout", 2);
ie([
  y({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ o((s) => bd(s), "fromAttribute")
    }
  })
], Bt.prototype, "tokenUrl", 2);
ie([
  y({
    attribute: !0,
    converter: {
      fromAttribute: /* @__PURE__ */ o((s) => bd(s), "fromAttribute")
    }
  })
], Bt.prototype, "url", 2);
ie([
  y({ attribute: !0 })
], Bt.prototype, "notifications", 2);
ie([
  y({ attribute: !0 })
], Bt.prototype, "notificationsBadge", 2);
ie([
  y({ attribute: !0 })
], Bt.prototype, "reactions", 2);
ie([
  H()
], Bt.prototype, "weavy", 2);
Bt = ie([
  q(rg)
], Bt);
var Zn, cl;
const Dp = class Dp {
  constructor(t, e) {
    T(this, Zn);
    T(this, cl);
    S(this, Zn, !0), this.styles = [], t.addController(this), this.host = t, e && (this.styles = e);
  }
  get themeColor() {
    return f(this, cl);
  }
  set themeColor(t) {
    S(this, cl, t), this.checkThemeUpdate();
  }
  checkThemeUpdate() {
    const t = this.themeColor || cu(this.host) || lu();
    if (t && t !== this._resolvedThemeColor) {
      this._resolvedThemeColor = t, console.info("Configuring theme", this._resolvedThemeColor);
      const e = C1(this._resolvedThemeColor).join(""), i = dt`
        :host {
          ${Gm(e)};
        }
      `, r = this.host.renderRoot;
      Zm(r, [...this.styles, i]);
    }
  }
  hostUpdate() {
    f(this, Zn) && (this.checkThemeUpdate(), S(this, Zn, !1));
  }
  hostConnected() {
    this.cssObserverDisconnect = b1(this.host, () => this.checkThemeUpdate()), this.metaObserverDisconnect = x1(() => this.checkThemeUpdate());
  }
  hostDisconnected() {
    var t, e;
    (t = this.cssObserverDisconnect) == null || t.call(this), (e = this.metaObserverDisconnect) == null || e.call(this);
  }
};
Zn = new WeakMap(), cl = new WeakMap(), o(Dp, "ThemeController");
let li = Dp;
const Ji = dt`:host{font-family:var(--wy-font-family, unset)}`;
var ng = Object.defineProperty, ag = Object.getOwnPropertyDescriptor, ep = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? ag(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && ng(t, e, r), r;
}, "__decorateClass$1a");
const og = "wy-component";
var Yn;
let To = (Yn = class extends gt {
  constructor() {
    super(...arguments), this.componentType = Je.Unknown, this.componentFeatures = new Ue(Zu(yu)), this.theme = new li(this, To.styles);
  }
  render() {
    return h`<slot></slot>`;
  }
}, o(Yn, "WyComponent"), Yn);
To.styles = [We, yt, Ji];
ep([
  y({
    converter: {
      fromAttribute(s, t) {
        return J1.get(s) ?? s;
      }
    }
  })
], To.prototype, "componentType", 2);
ep([
  y({
    converter: {
      fromAttribute(s, t) {
        const e = typeof s == "string" ? Ww(s, yu) : yu;
        return new Ue(Zu(e));
      }
    }
  })
], To.prototype, "componentFeatures", 2);
To = ep([
  q(og)
], To);
const Ts = dt`:host{position:relative;display:flex;flex-direction:column;flex:1;min-height:3rem;min-width:16rem;isolation:isolate}`, Cr = dt`.wy-scroll-y{scroll-padding-top:var(--wy-scrollbar-adjust-top, 0);scroll-padding-bottom:var(--wy-scrollbar-adjust-bottom, 0)}.wy-scroll-y{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-y:not(body){-webkit-overflow-scrolling:touch}.wy-scroll-y:not(.wy-scroll-x){overflow-x:hidden;touch-action:pan-y}.wy-scroll-x{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-x:not(.wy-scroll-y){overflow-y:hidden;touch-action:pan-x}:host{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}:host:not(body){-webkit-overflow-scrolling:touch}`;
function cg(s, t, e = {}, i) {
  var r, n;
  if (s) {
    if (s = JSON.parse(JSON.stringify(s)), s != null && s.pages) {
      let a = -1;
      return {
        pages: [...s.pages.map((l, u) => {
          if (a >= 0)
            return l;
          const p = l.data || [], w = p.filter(
            (b) => b.id !== t.id && !0
          );
          return e && e.by ? (a = w.findIndex((b) => {
            let m = e.by && b[e.by], g = e.by && t[e.by];
            if (e.by === "updated_at" && (m ?? (m = b.created_at), g ?? (g = t.created_at)), typeof m == "string" && typeof g == "string") {
              const x = m.localeCompare(g, void 0, {
                sensitivity: "base",
                numeric: !0
              });
              return e.descending ? x < 0 : x > 0;
            }
            return m && g && (e.descending ? m < g : m > g);
          }), a >= 0 ? (w.splice(a, 0, t), l.data = [...w], l.end && (l.end += 1 + w.length - p.length)) : s && u == s.pages.length - 1 && l.end === l.count ? (l.data = [...w, t], l.end && (l.end += 1 + w.length - p.length)) : l.data = [...w]) : u === 0 && (e.descending ? l.data = [t, ...w] : l.data = [...w, t], l.end && (l.end += 1 + w.length - p.length)), l;
        }) ?? []],
        pageParams: [...s.pageParams]
      };
    } else if ((r = s == null ? void 0 : s.data) != null && r.length) {
      let a = -1;
      const c = [
        ...((n = s.data) == null ? void 0 : n.filter(
          (u) => u.id !== t.id && !0
        )) || []
      ];
      let l = s.count;
      return e && e.by ? (a = c.findIndex((u) => {
        let p = u[e.by], w = t[e.by];
        if (e.by === "updated_at" && (p ?? (p = u.created_at), w ?? (w = t.created_at)), typeof p == "string" && typeof w == "string") {
          const b = p.localeCompare(w, void 0, {
            sensitivity: "base",
            numeric: !0
          });
          return e.descending ? b < 0 : b > 0;
        }
        return p && w && (e.descending ? p < w : p > w);
      }), a >= 0 ? c.splice(a, 0, t) : (c.push(t), l++)) : (e.descending ? c.unshift(t) : c.push(t), l++), {
        data: c,
        count: l
      };
    }
  }
  return s;
}
o(cg, "addToQueryData");
function af(s, t, e) {
  var r, n;
  const i = t === void 0 ? () => !0 : t instanceof Function ? t : (a) => a.id === t;
  return s && (s = JSON.parse(JSON.stringify(s)), s.pages ? {
    pages: s.pages.map((c) => (c.data && (c.data = [
      ...c.data.map((l) => (i(l) && (l = { ...l }, e(l)), l))
    ]), c)) ?? [],
    pageParams: s.pageParams
  } : (r = s.data) != null && r.length ? {
    ...s,
    data: [
      ...((n = s.data) == null ? void 0 : n.map((a) => (i(a) && (a = { ...a }, e(a)), a))) || []
    ]
  } : s.data ? {
    data: [
      ...s.data.map((c) => (i(c) && (c = { ...c }, e(c)), c))
    ],
    count: s.count
  } : s);
}
o(af, "updateQueryData");
function of(s, t) {
  var e, i, r;
  if (t !== void 0) {
    const n = t instanceof Function ? t : (a) => a.id === t;
    if (s) {
      if (s = JSON.parse(JSON.stringify(s)), s.pages)
        return {
          pages: s.pages.map((c) => (c.data && (c.data = [...c.data.filter((l) => !n(l))]), c)) ?? [],
          pageParams: s.pageParams
        };
      if ((e = s.data) != null && e.length) {
        const a = (i = s.data) == null ? void 0 : i.length;
        let c = s.count;
        const l = [...((r = s.data) == null ? void 0 : r.filter((u) => !n(u))) || []];
        return a !== l.length && c--, {
          data: l,
          count: c
        };
      }
    }
  }
  return s;
}
o(of, "removeQueryData");
const $s = /* @__PURE__ */ o((s, t, e, i) => s.setQueryData(t, (r) => cg(r, e, i)), "addCacheItem"), jt = /* @__PURE__ */ o((s, t, e, i) => s.setQueryData(t, (r) => af(
  r,
  e,
  i
)), "updateCacheItem"), at = /* @__PURE__ */ o((s, t, e, i) => {
  s.setQueriesData(t, (r) => af(
    r,
    e,
    i
  ));
}, "updateCacheItems"), xd = /* @__PURE__ */ o((s, t, e) => s.setQueryData(t, (i) => of(
  i,
  e
)), "removeCacheItem"), lg = /* @__PURE__ */ o((s, t, e) => {
  s.setQueriesData(t, (i) => of(i, e));
}, "removeCacheItems"), Ql = /* @__PURE__ */ o((s, t, e) => {
  s.setQueriesData(t, (i) => {
    const { count: r } = i;
    return { count: e(r) };
  });
}, "updateCacheItemsCount");
function vy(s, t, e, i = 1) {
  var n;
  if (!s)
    return;
  const r = s.getQueryData(t);
  (n = r == null ? void 0 : r.pages) != null && n.length && r.pages.length > 1 && s.setQueryData(
    t,
    (a) => ({
      pages: a.pages.slice(0, i),
      pageParams: a.pageParams.slice(0, i)
    }),
    e
  );
}
o(vy, "keepPages");
function lr(s, t, e) {
  const i = s.getQueryCache().find({ queryKey: t });
  if (i && i.state.data) {
    const r = i.state.data.pages.flatMap((n) => n.data).filter((n) => n && n.id < 0).sort((n, a) => n && a ? n.id - a.id : 0);
    return r.length ? e ? r[r.length - 1] : r[0] : null;
  }
  return null;
}
o(lr, "getPendingCacheItem");
function $d(s, t, e) {
  const i = s.getQueryCache().find({ queryKey: t });
  return i && i.state.data ? i.state.data.pages.flatMap((r) => r.data).find((r) => (r == null ? void 0 : r.id) === e) : null;
}
o($d, "getCacheItem");
function ts(s) {
  return ((s == null ? void 0 : s.pages.flatMap((t) => t.data)) || []).filter((t) => t);
}
o(ts, "getFlatInfiniteResultData");
function gy(s) {
  return !s || !(s != null && s.pages.some((t) => {
    var e;
    return (e = t.data) == null ? void 0 : e.length;
  }));
}
o(gy, "isInfiniteResultDataEmpty");
function dg(s, t, e = {}) {
  return {
    ...e,
    initialPageParam: 0,
    queryKey: ["messages", t],
    queryFn: /* @__PURE__ */ o(async (i) => {
      var l;
      const r = i.pageParam, n = "/api/apps/" + t + "/messages?order_by=id+desc&skip=" + r, c = await (await s.fetch(n)).json();
      return c.data = ((l = c.data) == null ? void 0 : l.reverse()) || [], c;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ o((i) => {
      if (i != null && i.end && (i == null ? void 0 : i.end) < (i == null ? void 0 : i.count))
        return i.end;
    }, "getNextPageParam"),
    select: /* @__PURE__ */ o((i) => ({
      // reverse scroll
      pages: [...i.pages].reverse(),
      pageParams: [...i.pageParams].reverse()
    }), "select")
  };
}
o(dg, "getMessagesOptions");
function hg(s, t) {
  return {
    mutationFn: /* @__PURE__ */ o(async (i) => await (await s.fetch("/api/apps/" + i.app_id + "/messages", {
      method: "POST",
      body: JSON.stringify({
        text: i.text,
        blobs: i.blobs,
        embed_id: i.embed_id || null,
        meeting_id: i.meeting_id,
        options: i.poll_options.filter((n) => n.text.trim() !== "").map((n) => ({ text: n.text })),
        metadata: i.metadata || null,
        context: i.context
      })
    })).json(), "mutationFn"),
    mutationKey: t,
    onMutate: /* @__PURE__ */ o((i) => {
      const r = ["messages", i.app_id], n = lr(s.queryClient, r, !1), a = {
        id: n ? n.id - 1 : -1,
        app: { id: i.app_id },
        text: i.text,
        html: i.text,
        plain: i.text,
        created_by: i.user,
        created_at: (/* @__PURE__ */ new Date()).toUTCString(),
        attachments: { count: 0 },
        reactions: { count: 0 },
        is_starred: !1,
        is_subscribed: !0,
        is_trashed: !1
      };
      $s(s.queryClient, r, a);
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((i) => {
      at(
        s.queryClient,
        { queryKey: ["members", i.app.id] },
        i.created_by.id,
        (a) => {
          a.marked_id = i.id, a.marked_at = i.created_at;
        }
      );
      const r = ["messages", i.app.id];
      if (!$d(s.queryClient, r, i.id)) {
        const a = lr(s.queryClient, r, !0);
        a ? jt(s.queryClient, r, a.id, (c) => {
          c.id = i.id, c.app = i.app, c.text = i.text, c.html = i.html, c.embed = i.embed, c.meeting = i.meeting, c.attachments = i.attachments, c.options = i.options, c.created_at = i.created_at, c.created_by = i.created_by, c.updated_at = i.updated_at, c.updated_by = i.updated_by;
        }) : $s(s.queryClient, r, i);
      }
    }, "onSuccess")
  };
}
o(hg, "getAddMessageMutationOptions");
const Hp = class Hp {
  get result() {
    var t;
    return this._result && this.observer ? this.observer.trackResult(this._result) : ((t = this.observer) == null ? void 0 : t.getCurrentResult()) ?? { isPending: !0 };
  }
  constructor(t) {
    t.addController(this), this.host = t, this.whenContext = new Promise((e) => this.resolveContext = e), this.whenQueryClient = new Promise((e) => this.resolveQueryClient = e), this.setContext();
  }
  async setContext() {
    await Xo(this.host), this.context = new ji(this.host, {
      context: le,
      subscribe: !0,
      callback: /* @__PURE__ */ o((t) => {
        var e, i;
        t && ((e = this.resolveContext) == null || e.call(this, t), this.queryClient = t.queryClient, (i = this.resolveQueryClient) == null || i.call(this, t.queryClient));
      }, "callback")
    });
  }
  async trackInfiniteQuery(t, e = !0) {
    var n;
    (n = this.observerUnsubscribe) == null || n.call(this);
    const i = await this.whenQueryClient;
    if (!i)
      throw new Error("No QueryClient provided");
    const r = new Sv(i, t);
    this.observer = r, this.observerSubscribe(e);
  }
  observerSubscribe(t = !0) {
    var e;
    if (this.queryClient && this.observer) {
      t ? this._result = this.observer.getOptimisticResult(
        this.observer.options
      ) : this._result = this.observer.getCurrentResult(), this.observerUnsubscribe = this.observer.subscribe(() => {
        if (this.observer) {
          const r = dl(this.result, this.observer.getCurrentResult());
          r !== this._result && (this._result = r, this.host.requestUpdate());
        }
      }), this.observer.updateResult(), this.host.requestUpdate();
      let i;
      t ? i = this.observer.fetchOptimistic(this.observer.options) : i = (e = this.queryClient.getQueryCache().get(
        this.observer.options.queryHash
      )) == null ? void 0 : e.promise, i == null || i.catch(() => {
      }).finally(() => {
        var r;
        (r = this.observer) == null || r.updateResult();
      });
    }
  }
  untrackInfiniteQuery() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this), this.observerUnsubscribe = void 0, this._result = void 0, this.observer = void 0, this.host.requestUpdate();
  }
  hostConnected() {
    this.observerSubscribe();
  }
  hostDisconnected() {
    var t;
    (t = this.observerUnsubscribe) == null || t.call(this);
  }
};
o(Hp, "InfiniteQueryController");
let Wi = Hp;
function ug(s) {
  for (; s; )
    if (s = s.nextElementSibling, s instanceof HTMLElement && /absolute|sticky|fixed/.test(getComputedStyle(s).position) === !1)
      return s;
  return null;
}
o(ug, "getNextPositionedChild");
function Cd(s, t = !1) {
  if (Ie(), s) {
    let e = getComputedStyle(s);
    const i = e.position === "absolute", r = t ? /(auto|scroll|overlay|hidden)/ : /(auto|overlay|scroll)/;
    if (e.position === "fixed" && document.scrollingElement)
      return document.scrollingElement;
    for (let n = s; n = n.parentElement || n.parentNode || n.host; )
      if (n instanceof Element && (e = getComputedStyle(n), !(i && e.position === "static") && r.test(e.overflow + e.overflowY + e.overflowX)))
        return n;
  }
  return document.scrollingElement || s;
}
o(Cd, "getScrollParent");
function pg(s) {
  if (s && s.isConnected) {
    const t = Cd(s);
    return t.clientHeight !== t.scrollHeight;
  }
  return !1;
}
o(pg, "hasScroll");
function yg(s, t = 32) {
  if (s) {
    const e = Cd(s);
    return Math.abs(e.scrollTop + e.clientHeight - e.scrollHeight) < t;
  }
  return !1;
}
o(yg, "isParentAtBottom");
async function wg(s, t = !1) {
  if (s) {
    const e = Cd(s);
    Math.abs(e.scrollTop + e.clientHeight - e.scrollHeight) > 1 && (t ? e.scrollTo({
      top: e.scrollHeight,
      left: 0,
      behavior: "smooth"
    }) : e.scrollTop = e.scrollHeight), await new Promise((i) => {
      let r = e.scrollTop;
      const n = /* @__PURE__ */ o(() => {
        t && e.scrollTop === r && (e.scrollTop = e.scrollHeight), r = e.scrollTop, Math.abs(e.scrollTop + e.clientHeight - e.scrollHeight) > 1 ? requestAnimationFrame(n) : i(void 0);
      }, "scrollCheck");
      requestAnimationFrame(n);
    });
  }
}
o(wg, "scrollParentToBottom");
const fg = 0, mg = void 0;
function vg(s, t, e = !1) {
  Ie(), t ?? (t = /* @__PURE__ */ o(() => Promise.reject(new Error("No scroll function defined")), "whenNext"));
  const i = e ? Cd(s) : document.documentElement, r = i === document.documentElement ? document : i;
  let n = !1;
  const a = new IntersectionObserver(
    (c) => {
      c.forEach((l) => {
        if (l.isIntersecting && !n)
          if (n = !0, e && i && r instanceof HTMLElement) {
            const u = ug(l.target) || l.target, p = i.scrollHeight, w = u.offsetTop, b = /* @__PURE__ */ o(() => {
              queueMicrotask(() => {
                if (p !== i.scrollHeight) {
                  if (u != null && u.isConnected) {
                    const m = u.offsetTop - w;
                    i.scrollTop += m;
                  }
                  requestAnimationFrame(() => n = !1);
                } else
                  queueMicrotask(() => {
                    if (p !== i.scrollHeight) {
                      if (u != null && u.isConnected) {
                        const m = u.offsetTop - w;
                        i.scrollTop += m;
                      }
                      requestAnimationFrame(() => n = !1);
                    } else
                      requestAnimationFrame(() => {
                        if (a.takeRecords().length && (u != null && u.isConnected)) {
                          const m = u.offsetTop - w;
                          i.scrollTop += m;
                        }
                        requestAnimationFrame(() => n = !1);
                      });
                  });
              });
            }, "afterNext");
            t().then(b);
          } else
            t().then(() => {
              requestAnimationFrame(() => n = !1);
            });
      });
    },
    { root: r, threshold: fg, rootMargin: mg }
  );
  return a.observe(s), a;
}
o(vg, "createScroller");
const Vp = class Vp {
  constructor(t, e = !1) {
    this.reverse = !1, this.isObservePending = !1, t.addController(this), this.host = t, this.reverse = e;
  }
  observe(t, e) {
    t && e && !t.isLoading && !this.isObservePending && (this.isObservePending = !0, requestAnimationFrame(() => {
      var i;
      this.loadMoreRefElement = e, (i = this.scroller) == null || i.disconnect(), this.scroller = vg(
        e,
        async () => {
          t.hasNextPage && !t.isFetching && (await t.fetchNextPage({ cancelRefetch: !1 }), this.reverse && await this.host.updateComplete);
        },
        this.reverse
      ), this.isObservePending = !1;
    }));
  }
  hostConnected() {
    var t;
    this.loadMoreRefElement && ((t = this.scroller) == null || t.observe(this.loadMoreRefElement));
  }
  hostDisconnected() {
    var t;
    (t = this.scroller) == null || t.disconnect();
  }
};
o(Vp, "InfiniteScrollController");
let Qi = Vp;
const Bp = class Bp extends Qi {
  constructor(t) {
    super(t, !0);
  }
};
o(Bp, "ReverseInfiniteScrollController");
let fu = Bp;
const { I: gg } = Ym, bg = /* @__PURE__ */ o((s) => s.strings === void 0, "f$1"), by = /* @__PURE__ */ o(() => document.createComment(""), "s$1"), uc = /* @__PURE__ */ o((s, t, e) => {
  var n;
  const i = s._$AA.parentNode, r = t === void 0 ? s._$AB : t._$AA;
  if (e === void 0) {
    const a = i.insertBefore(by(), r), c = i.insertBefore(by(), r);
    e = new gg(a, c, s, s.options);
  } else {
    const a = e._$AB.nextSibling, c = e._$AM, l = c !== s;
    if (l) {
      let u;
      (n = e._$AQ) == null || n.call(e, s), e._$AM = s, e._$AP !== void 0 && (u = s._$AU) !== c._$AU && e._$AP(u);
    }
    if (a !== r || l) {
      let u = e._$AA;
      for (; u !== a; ) {
        const p = u.nextSibling;
        i.insertBefore(u, r), u = p;
      }
    }
  }
  return e;
}, "r$1"), Bs = /* @__PURE__ */ o((s, t, e = s) => (s._$AI(t, e), s), "v"), xg = {}, cf = /* @__PURE__ */ o((s, t = xg) => s._$AH = t, "m"), $g = /* @__PURE__ */ o((s) => s._$AH, "p"), Oh = /* @__PURE__ */ o((s) => {
  var i;
  (i = s._$AP) == null || i.call(s, !1, !0);
  let t = s._$AA;
  const e = s._$AB.nextSibling;
  for (; t !== e; ) {
    const r = t.nextSibling;
    t.remove(), t = r;
  }
}, "M");
const sc = { ATTRIBUTE: 1, CHILD: 2 }, Fs = /* @__PURE__ */ o((s) => (...t) => ({ _$litDirective$: s, values: t }), "e$3");
var Xn;
let kr = (Xn = class {
  constructor(t) {
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AT(t, e, i) {
    this._$Ct = t, this._$AM = e, this._$Ci = i;
  }
  _$AS(t, e) {
    return this.update(t, e);
  }
  update(t, e) {
    return this.render(...e);
  }
}, o(Xn, "i"), Xn);
const mc = /* @__PURE__ */ o((s, t) => {
  var i;
  const e = s._$AN;
  if (e === void 0) return !1;
  for (const r of e) (i = r._$AO) == null || i.call(r, t, !1), mc(r, t);
  return !0;
}, "s"), Kl = /* @__PURE__ */ o((s) => {
  let t, e;
  do {
    if ((t = s._$AM) === void 0) break;
    e = t._$AN, e.delete(s), s = t;
  } while ((e == null ? void 0 : e.size) === 0);
}, "o$5"), lf = /* @__PURE__ */ o((s) => {
  for (let t; t = s._$AM; s = t) {
    let e = t._$AN;
    if (e === void 0) t._$AN = e = /* @__PURE__ */ new Set();
    else if (e.has(s)) break;
    e.add(s), _g(t);
  }
}, "r");
function Cg(s) {
  this._$AN !== void 0 ? (Kl(this), this._$AM = s, lf(this)) : this._$AM = s;
}
o(Cg, "h$1");
function kg(s, t = !1, e = 0) {
  const i = this._$AH, r = this._$AN;
  if (r !== void 0 && r.size !== 0) if (t) if (Array.isArray(i)) for (let n = e; n < i.length; n++) mc(i[n], !1), Kl(i[n]);
  else i != null && (mc(i, !1), Kl(i));
  else mc(this, s);
}
o(kg, "n$2");
const _g = /* @__PURE__ */ o((s) => {
  s.type == sc.CHILD && (s._$AP ?? (s._$AP = kg), s._$AQ ?? (s._$AQ = Cg));
}, "c$1"), Up = class Up extends kr {
  constructor() {
    super(...arguments), this._$AN = void 0;
  }
  _$AT(t, e, i) {
    super._$AT(t, e, i), lf(this), this.isConnected = t._$AU;
  }
  _$AO(t, e = !0) {
    var i, r;
    t !== this.isConnected && (this.isConnected = t, t ? (i = this.reconnected) == null || i.call(this) : (r = this.disconnected) == null || r.call(this)), e && (mc(this, t), Kl(this));
  }
  setValue(t) {
    if (bg(this._$Ct)) this._$Ct._$AI(t, this);
    else {
      const e = [...this._$Ct._$AH];
      e[this._$Ci] = t, this._$Ct._$AI(e, this, 0);
    }
  }
  disconnected() {
  }
  reconnected() {
  }
};
o(Up, "f");
let mu = Up;
const st = /* @__PURE__ */ o(() => new vu(), "e$2"), qp = class qp {
};
o(qp, "h");
let vu = qp;
const Rh = /* @__PURE__ */ new WeakMap(), Q = Fs(class extends mu {
  render(s) {
    return C;
  }
  update(s, [t]) {
    var i;
    const e = t !== this.G;
    return e && this.G !== void 0 && this.rt(void 0), (e || this.lt !== this.ct) && (this.G = t, this.ht = (i = s.options) == null ? void 0 : i.host, this.rt(this.ct = s.element)), C;
  }
  rt(s) {
    if (this.isConnected || (s = void 0), typeof this.G == "function") {
      const t = this.ht ?? globalThis;
      let e = Rh.get(t);
      e === void 0 && (e = /* @__PURE__ */ new WeakMap(), Rh.set(t, e)), e.get(this.G) !== void 0 && this.G.call(this.ht, void 0), e.set(this.G, s), s !== void 0 && this.G.call(this.ht, s);
    } else this.G.value = s;
  }
  get lt() {
    var s, t;
    return typeof this.G == "function" ? (s = Rh.get(this.ht ?? globalThis)) == null ? void 0 : s.get(this.G) : (t = this.G) == null ? void 0 : t.value;
  }
  disconnected() {
    this.lt === this.ct && this.rt(void 0);
  }
  reconnected() {
    this.rt(this.ct);
  }
});
function zg(s, t, e) {
  const i = s.queryClient;
  return {
    mutationKey: ["apps", t, "polls"],
    mutationFn: /* @__PURE__ */ o(async ({ optionId: a }) => {
      const c = await s.fetch(`/api/options/${a}/vote`, { method: "POST" });
      if (!c.ok) {
        const l = await c.json();
        throw new Error(l.detail || l.title, { cause: l });
      }
      return await c.json();
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((a) => (at(i, { queryKey: e }, a.parentId, (c) => {
      var l, u;
      (l = c.options) != null && l.data && (c.options.data = (u = c.options.data) == null ? void 0 : u.map((p) => {
        var w, b;
        if (p.has_voted) {
          p.has_voted = !1;
          const m = ((w = p.votes) == null ? void 0 : w.count) || 1;
          p.votes ? p.votes.count = m - 1 : p.votes = { count: m - 1 };
        } else if (!p.has_voted && p.id === a.optionId) {
          p.has_voted = !0;
          const m = ((b = p.votes) == null ? void 0 : b.count) || 0;
          p.votes ? p.votes.count = m + 1 : p.votes = { count: m + 1 };
        }
        return p;
      }));
    }), { id: a.optionId }), "onMutate"),
    onSuccess: /* @__PURE__ */ o(async (a, c) => {
      const u = await (await s.fetch("/api/" + c.parentType + "/" + c.parentId)).json();
      at(
        i,
        { queryKey: e, exact: !1 },
        c.parentId,
        (p) => Object.assign(p, u)
      );
    }, "onSuccess")
    /*onError(error: Error, variables: MutatePollVariables) {
      updateCacheItems(queryClient, { queryKey: postsKey, exact: false }, variables.id, (existingPost: PostType) => Object.assign(existingPost, { is_subscribed: variables..is_subscribed }));
    },*/
  };
}
o(zg, "getPollMutationOptions");
function ip(s, t, e) {
  return new kt(s.queryClient, zg(s, t, e));
}
o(ip, "getPollMutation");
function Mg(s, t) {
  return {
    queryKey: ["votes", t],
    enabled: !1,
    queryFn: /* @__PURE__ */ o(async () => await (await s.fetch(`/api/options/${t}`)).json(), "queryFn")
  };
}
o(Mg, "getVotesOptions");
const Fo = /* @__PURE__ */ o((s, t) => !!(s && t && t.indexOf(s) !== -1), "hasPermission");
function Pg(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e, messageId: i }) => {
      const r = i ? `/api/apps/${e}/mark?messageId=${i}` : `/api/apps/${e}/mark`;
      await s.fetch(r, { method: i ? "PUT" : "DELETE" });
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o(async (e) => {
      await s.queryClient.cancelQueries({ queryKey: ["apps", e.appId] }), await s.queryClient.cancelQueries({ queryKey: ["apps", "list"], exact: !1 }), await s.queryClient.cancelQueries({ queryKey: ["members", e.appId] }), s.queryClient.setQueryData(
        ["apps", e.appId],
        (i) => i && { ...i, is_unread: !e.messageId || e.messageId < i.last_message.id }
      ), at(
        s.queryClient,
        { queryKey: ["apps", "list"], exact: !1 },
        e.appId,
        (i) => {
          i.is_unread = !e.messageId || e.messageId < i.last_message.id;
        }
      ), e.userId && at(s.queryClient, { queryKey: ["members", e.appId] }, e.userId, (i) => {
        e.messageId ? (i.marked_at = (/* @__PURE__ */ new Date()).toISOString(), i.marked_id = e.messageId) : (i.marked_at = void 0, i.marked_id = void 0);
      });
    }, "onMutate"),
    onError: /* @__PURE__ */ o((e, i) => {
      console.error(e.message), at(
        s.queryClient,
        { queryKey: ["apps", "list"], exact: !1 },
        i.appId,
        (r) => {
          r.is_unread = !r.is_unread;
        }
      );
    }, "onError"),
    onSettled: /* @__PURE__ */ o(async (e, i, r) => {
      await s.queryClient.invalidateQueries({ queryKey: ["apps", r.appId] }), await s.queryClient.invalidateQueries({ queryKey: ["apps", "list"], exact: !1 }), await s.queryClient.invalidateQueries({ queryKey: ["members", r.appId] });
    }, "onSettled")
  };
}
o(Pg, "getMarkConversationMutationOptions");
function Sg(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e, star: i }) => {
      await s.fetch(`/api/apps/${e}/stars`, { method: i ? "POST" : "DELETE" });
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((e) => {
      at(
        s.queryClient,
        { queryKey: ["apps", "list"], exact: !1 },
        e.appId,
        (i) => {
          i.is_starred = e.star;
        }
      );
    }, "onMutate"),
    onError: /* @__PURE__ */ o((e, i) => {
      console.error(e.message), at(
        s.queryClient,
        { queryKey: ["apps", "list"], exact: !1 },
        i.appId,
        (r) => {
          r.is_starred = !i.star;
        }
      );
    }, "onError")
  };
}
o(Sg, "getStarConversationMutationOptions");
function Ag(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e, pin: i }) => {
      await s.fetch(`/api/apps/${e}/pin`, { method: i ? "PUT" : "DELETE" });
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((e) => {
      at(
        s.queryClient,
        { queryKey: ["apps", "list"], exact: !1 },
        e.appId,
        (i) => {
          i.is_pinned = e.pin;
        }
      );
    }, "onMutate"),
    onSettled: /* @__PURE__ */ o(async () => {
      await s.queryClient.invalidateQueries({ queryKey: ["apps"] });
    }, "onSettled")
  };
}
o(Ag, "getPinConversationMutationOptions");
function Eg(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e, members: i }) => {
      await s.fetch(`/api/apps/${e}/members/${i.join(",")}`, { method: "DELETE" });
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((e) => {
      xd(s.queryClient, ["apps", "list"], e.appId);
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((e, i) => {
      s.queryClient.removeQueries({ queryKey: ["apps", i.appId] }), s.queryClient.removeQueries({ queryKey: ["members", i.appId] });
    }, "onSuccess"),
    onSettled: /* @__PURE__ */ o(async () => {
      await s.queryClient.invalidateQueries({ queryKey: ["apps"] }), await s.queryClient.invalidateQueries({ queryKey: ["members"] });
    }, "onSettled")
  };
}
o(Eg, "getLeaveConversationMutationOptions");
function Og(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e }) => {
      await s.fetch(`/api/apps/${e}/remove`, { method: "POST" });
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((e) => {
      xd(s.queryClient, ["apps", "list"], e.appId);
    }, "onMutate"),
    onSettled: /* @__PURE__ */ o(async () => {
      await s.queryClient.invalidateQueries({ queryKey: ["apps"] });
    }, "onSettled")
  };
}
o(Og, "getRemoveConversationMutationOptions");
function Rg(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e, userId: i, access: r }) => {
      await s.fetch(`/api/apps/${e}/members/${i}`, { method: "PUT", body: JSON.stringify({ access: r }) });
    }, "mutationFn"),
    onSettled: /* @__PURE__ */ o(async (e, i, r) => {
      await s.queryClient.invalidateQueries({ queryKey: ["apps"] }), await s.queryClient.invalidateQueries({ queryKey: ["members", r.appId] });
    }, "onSettled")
  };
}
o(Rg, "getUpdateMemberMutationOptions");
function Lg(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e, members: i }) => {
      await s.fetch(`/api/apps/${e}/members`, {
        method: "PUT",
        body: JSON.stringify(
          i.map((r) => ({ id: r, access: "write" }))
        )
      });
    }, "mutationFn"),
    onSettled: /* @__PURE__ */ o(async (e, i, r) => {
      await s.queryClient.invalidateQueries({ queryKey: ["apps"] }), await s.queryClient.invalidateQueries({ queryKey: ["members", r.appId] });
    }, "onSettled")
  };
}
o(Lg, "getAddMembersToConversationMutationOptions");
function Ig(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e, name: i, blobId: r }) => await (await s.fetch(`/api/apps/${e}`, {
      method: "PATCH",
      body: JSON.stringify({
        name: i,
        picture: r
      })
    })).json(), "mutationFn"),
    onMutate: /* @__PURE__ */ o((e) => {
      const i = /* @__PURE__ */ o((r) => {
        typeof e.name == "string" && (r.name = e.name), typeof (e == null ? void 0 : e.thumbnailUrl) == "string" && (r.avatar_url = e.thumbnailUrl);
      }, "modifyAppItem");
      jt(s.queryClient, ["apps", e.appId], void 0, i), at(s.queryClient, { queryKey: ["apps", "list"], exact: !1 }, e.appId, i);
    }, "onMutate")
  };
}
o(Ig, "getUpdateConversationMutationOptions");
function Tg(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ appId: e }) => {
      await s.fetch(`/api/apps/${e}/trash`, { method: "POST" });
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((e) => {
      xd(s.queryClient, ["apps", "list"], e.appId);
    }, "onMutate"),
    onSettled: /* @__PURE__ */ o(async () => {
      await s.queryClient.invalidateQueries({ queryKey: ["apps"] });
    }, "onSettled")
  };
}
o(Tg, "getTrashConversationMutationOptions");
function df(s) {
  return new kt(s.queryClient, Pg(s));
}
o(df, "getMarkConversationMutation");
function Fg(s) {
  return new kt(s.queryClient, Sg(s));
}
o(Fg, "getStarConversationMutation");
function Dg(s) {
  return new kt(s.queryClient, Ag(s));
}
o(Dg, "getPinConversationMutation");
function hf(s) {
  return new kt(s.queryClient, Eg(s));
}
o(hf, "getLeaveConversationMutation");
function Hg(s) {
  return new kt(s.queryClient, Og(s));
}
o(Hg, "getRemoveConversationMutation");
function Vg(s) {
  return new kt(s.queryClient, Rg(s));
}
o(Vg, "getUpdateMemberMutation");
function Bg(s) {
  return new kt(s.queryClient, Lg(s));
}
o(Bg, "getAddMembersToConversationMutation");
function uf(s) {
  return new kt(s.queryClient, Ig(s));
}
o(uf, "getUpdateConversationMutation");
function Ug(s) {
  return new kt(s.queryClient, Tg(s));
}
o(Ug, "getTrashConversationMutation");
function qg(s, t, e = [ct.ChatRoom, ct.PrivateChat], i) {
  return tc(s, ["apps", t], void 0, {
    initialData: /* @__PURE__ */ o(() => {
      var r;
      return (r = s == null ? void 0 : s.queryClient.getQueryData(["apps", "list", e, i])) == null ? void 0 : r.pages.flatMap((n) => n.data).find((n) => (n == null ? void 0 : n.id) === t);
    }, "initialData")
  });
}
o(qg, "getConversationOptions");
function xy(s, t, e = [ct.ChatRoom, ct.PrivateChat], i) {
  return su(s, ["apps", t], void 0, {
    initialData: /* @__PURE__ */ o(() => {
      var r;
      return (r = s == null ? void 0 : s.queryClient.getQueryData(["apps", "list", e, i])) == null ? void 0 : r.pages.flatMap((n) => n.data).find((n) => (n == null ? void 0 : n.id) === t);
    }, "initialData")
  });
}
o(xy, "getConversation");
async function Ng(s, t, e, i) {
  let r;
  if (typeof t == "number")
    r = await xy(s, t, e, i);
  else if (typeof t.id == "number" && !t.type)
    r = await xy(s, t.id, e, i);
  else if (typeof t.type == "string")
    r = t;
  else
    return;
  return e.includes(r.type) ? r : void 0;
}
o(Ng, "resolveAppWithType");
const Np = class Np {
  constructor(t, e) {
    this.additionalTargets = /* @__PURE__ */ new Set(), this.setExportParts = (i) => {
      (!this.host.hasAttribute("exportparts") || this.shadowParts) && (this.shadowParts ?? (this.shadowParts = /* @__PURE__ */ new Set()), i.forEach((r) => {
        var n;
        r.part.forEach((a) => {
          var c;
          return (c = this.shadowParts) == null ? void 0 : c.add(a);
        }), (n = r.getAttribute("exportparts")) == null || n.split(", ").forEach((a) => {
          var c;
          return (c = this.shadowParts) == null ? void 0 : c.add(a);
        });
      }), this.shadowParts.size && this.host.setAttribute("exportparts", Array.from(this.shadowParts.values()).join(", ")));
    }, t.addController(this), this.host = t, this.addLocalName = e;
  }
  addPartsFrom(t) {
    var e;
    t && !this.additionalTargets.has(t) && (this.setExportParts([t]), (e = this.observer) == null || e.observe(t, {
      attributeFilter: ["part", "exportparts"]
    }), this.additionalTargets.add(t));
  }
  async hostConnected() {
    if (await this.host.updateComplete, ey(this.host) && this.host.shadowRoot) {
      const t = Array.from(this.host.shadowRoot.querySelectorAll("[part], [exportparts]"));
      this.setExportParts(t), this.observer = new MutationObserver((e) => {
        const i = e.filter((r) => r.target instanceof Element).map((r) => r.target);
        this.setExportParts(i);
      }), this.observer.observe(this.host.shadowRoot, {
        subtree: !0,
        childList: !0,
        attributeFilter: ["part", "exportparts"]
      }), Array.from(this.additionalTargets).forEach((e) => {
        var i;
        (i = this.observer) == null || i.observe(e, {
          attributeFilter: ["part", "exportparts"]
        });
      });
    }
  }
  hostUpdated() {
    ey(this.host) && this.addLocalName !== !1 && !this.host.part.contains(this.host.localName) && (this.addLocalName || getComputedStyle(this.host).display !== "contents") && this.host.part.add(this.host.localName);
  }
  hostDisconnected() {
    var t;
    (t = this.observer) == null || t.disconnect();
  }
};
o(Np, "ShadowPartsController");
let W = Np;
function gu(s, t, e, i) {
  return {
    queryKey: ["members", t, i],
    queryFn: /* @__PURE__ */ o(async () => await (await s.fetch(`/api/apps/${t}/members${i !== void 0 ? `?member=false&agent=${!!i}` : ""}`)).json(), "queryFn"),
    ...e
  };
}
o(gu, "getMemberOptions");
function jg(s, t, e, i) {
  return {
    queryKey: ["search__members", e],
    initialPageParam: 0,
    enabled: !0,
    queryFn: /* @__PURE__ */ o(async (r) => {
      const n = t(), a = r.pageParam;
      let c;
      e ? c = await s.fetch(`/api/apps/${e}/members?q=${n}${i() !== void 0 ? `&agent=${!!i()}` : ""}&member=false&system=false&skip=${a}`) : c = await s.fetch(`/api/users?q=${n}${i() !== void 0 ? `&agent=${!!i()}` : ""}&system=false&skip=${a}`);
      const l = await c.json();
      return l.data = l.data || [], l;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ o((r) => {
      if (r.end && r.end < r.count)
        return r.end;
    }, "getNextPageParam")
  };
}
o(jg, "getInfiniteSearchMemberOptions");
const lt = /* @__PURE__ */ o((s) => s ?? C, "o$3"), pf = dt`[part~=wy-footerbar]{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));position:absolute;bottom:0;left:0;right:0;z-index:1020}[part~=wy-footerbar]:after{content:\"\";background-color:var(--wy-component-background-color);color:var(--wy-component-color);box-shadow:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) 0 var(--wy-border, 1px) 0 0 inset;position:absolute;width:100%;left:0;bottom:0;height:100%;z-index:-1}[part~=wy-footerbar-sticky]{position:sticky}`, Ds = dt`[part~=wy-pager]{position:relative;align-self:center;justify-self:center}[part~=wy-pager-bottom]{width:16px;height:256px;max-height:100%;margin-top:-256px;margin-inline:auto;pointer-events:none}[part~=wy-pager-top]{width:16px;height:256px;max-height:100%;margin-bottom:-256px;margin-inline:auto;pointer-events:none}`;
var sp = /* @__PURE__ */ ((s) => (s.Active = "active", s.Away = "away", s))(sp || {});
const jp = class jp extends kr {
  constructor(t) {
    var e;
    if (super(t), t.type !== sc.ATTRIBUTE || t.name !== "part" || ((e = t.strings) == null ? void 0 : e.length) > 2)
      throw new Error(
        "`partMap()` can only be used in the `part` attribute and must be the only section in the attribute."
      );
  }
  render(t) {
    return " " + Object.keys(t).filter((e) => t[e]).join(" ") + " ";
  }
  update(t, [e]) {
    var r, n;
    if (this._previousShadowParts === void 0) {
      this._previousShadowParts = /* @__PURE__ */ new Set(), t.strings !== void 0 && (this._staticShadowParts = new Set(
        t.strings.join(" ").split(/\s/).filter((a) => a !== "")
      ));
      for (const a in e)
        e[a] && !((r = this._staticShadowParts) != null && r.has(a)) && this._previousShadowParts.add(a);
      return this.render(e);
    }
    const i = t.element.part;
    for (const a of this._previousShadowParts)
      a in e || (i.remove(a), this._previousShadowParts.delete(a));
    for (const a in e) {
      const c = !!e[a];
      c !== this._previousShadowParts.has(a) && !((n = this._staticShadowParts) != null && n.has(a)) && (c ? (i.add(a), this._previousShadowParts.add(a)) : (i.remove(a), this._previousShadowParts.delete(a)));
    }
    return ll;
  }
};
o(jp, "ShadowPartMapDirective");
let bu = jp;
const Xt = Fs(bu), ne = dt`:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]){box-sizing:border-box;text-align:initial;font-size:var(--wy-font-size, var(--wy-size, 1em))}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:before,:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:after{box-sizing:inherit}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(a),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(a){text-decoration:var(--wy-link-decoration, none);color:var(--wy-link, var(--wy-primary-40, #006399))}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(a):hover,:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(a):hover{text-decoration:var(--wy-link-hover-decoration, unset)}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(a):where(:not([href]):not([class])),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(a):where(:not([href]):not([class])):hover,:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(a):where(:not([href]):not([class])),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(a):where(:not([href]):not([class])):hover{text-decoration:none}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(p),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(p){margin-top:0;margin-bottom:calc(1 * var(--wy-size, 1rem))}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where(label),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where(label){cursor:inherit}:where(:host([hidden])),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"])[hidden],:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *[hidden]{display:none!important}:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]):where([role=button]),:where(:host,:host>*,[class^=wy-],[class*=\" wy-\"]) *:where([role=button]){cursor:pointer}`, rp = dt`:host(wy-avatar){position:relative;display:inline-flex}[part~=wy-avatar-shape]{border-radius:var(--wy-avatar-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, 50%)))}[part~=wy-avatar-img]{width:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));height:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));object-fit:cover}[part~=wy-avatar-initials]{background-color:var(--wy-component-avatar-background-color, var(--wy-primary, var(--wy-primary-40, #006399)));color:var(--wy-component-avatar-color, var(--wy-on-primary, var(--wy-white, #ffffff)));width:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));height:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));display:flex;align-items:center;align-content:center;justify-content:center;justify-items:center;font-size:calc(var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem))))}[part~=wy-avatar-initials-text]{font-size:max(8px,var(--wy-avatar-font-size, .382em));font-weight:var(--wy-avatar-font-weight, var(--wy-font-weight-bold, unset));line-height:1}[part~=wy-avatar-type]{display:flex;position:absolute;z-index:1;bottom:0;right:-8.3333333333%;border-radius:50%;color:var(--wy-primary-50, var(--wy-primary-50, #1e7dba));stroke:var(--wy-on-primary, var(--wy-white, #ffffff))}:host(wy-avatar-group){position:relative;display:inline-flex;flex-shrink:0;width:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)));height:var(--wy-component-avatar-size, calc(2 * var(--wy-size, 1rem)))}[part~=wy-avatar-back]{position:absolute;top:0;left:0}[part~=wy-avatar-front]{position:absolute;bottom:0;right:0}:host(wy-avatar-header){padding:calc(1.5 * var(--wy-size, 1rem));margin-left:auto;margin-right:auto;text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center}[part~=wy-avatar-description]{padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}`, yf = dt`[part~=wy-presence]{width:calc(.75 * var(--wy-size, 1rem));height:calc(.75 * var(--wy-size, 1rem));border-radius:50%;position:absolute;bottom:0;right:-5%;box-sizing:border-box}[part~=wy-presence]:not([part~=wy-presence-active]){display:none}[part~=wy-presence]:after{content:\"\";position:absolute;width:100%;height:100%;top:0;left:0;border-radius:inherit;background-color:var(--wy-presence-active, var(--wy-green-light, #00a38b));background-clip:content-box;padding:calc(.125 * var(--wy-size, 1rem));box-sizing:border-box}[part~=wy-presence-mask]{-webkit-mask-image:radial-gradient(circle calc(.75 * var(--wy-size, 1rem)) at bottom calc(.375 * var(--wy-size, 1rem)) right calc(.375 * var(--wy-size, 1rem) - 5%),rgba(0,0,0,0) calc(.375 * var(--wy-size, 1rem)),rgb(0,0,0) calc(.375 * var(--wy-size, 1rem) + 1px));mask-image:radial-gradient(circle calc(.75 * var(--wy-size, 1rem)) at bottom calc(.375 * var(--wy-size, 1rem)) right calc(.375 * var(--wy-size, 1rem) - 5%),#0000 calc(.375 * var(--wy-size, 1rem)),#000 calc(.375 * var(--wy-size, 1rem) + 1px))}[part~=wy-presence-in-text]{position:absolute;bottom:unset;right:unset}[part~=wy-presence-in-text]:after{left:calc(-1 * var(--wy-size, 1rem))}`;
var Wg = Object.defineProperty, Qg = Object.getOwnPropertyDescriptor, np = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Qg(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Wg(t, e, r), r;
}, "__decorateClass$19"), Jn;
let Do = (Jn = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.placement = "avatar";
  }
  render() {
    const t = {
      "wy-presence": !0,
      "wy-presence-active": this.status === sp.Active,
      "wy-presence-in-text": this.placement === "text"
    };
    return h` <span part=${Xt(t)} data-presence-id=${this.id}></span> `;
  }
}, o(Jn, "WyPresence"), Jn);
Do.styles = [
  ne,
  yf,
  yt
];
np([
  y()
], Do.prototype, "placement", 2);
np([
  y()
], Do.prototype, "status", 2);
Do = np([
  q("wy-presence")
], Do);
var Kg = "M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M1,10V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z", Gg = "M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z", Zg = "M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z", Yg = "M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z", Xg = "M13 13H11V7H13M11 15H13V17H11M15.73 3H8.27L3 8.27V15.73L8.27 21H15.73L21 15.73V8.27L15.73 3Z", $y = "M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z", Jg = "M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z", wf = "M7.5,18A5.5,5.5 0 0,1 2,12.5A5.5,5.5 0 0,1 7.5,7H18A4,4 0 0,1 22,11A4,4 0 0,1 18,15H9.5A2.5,2.5 0 0,1 7,12.5A2.5,2.5 0 0,1 9.5,10H17V11.5H9.5A1,1 0 0,0 8.5,12.5A1,1 0 0,0 9.5,13.5H18A2.5,2.5 0 0,0 20.5,11A2.5,2.5 0 0,0 18,8.5H7.5A4,4 0 0,0 3.5,12.5A4,4 0 0,0 7.5,16.5H17V18H7.5Z", t0 = "M12,3A9,9 0 0,0 3,12H0L4,16L8,12H5A7,7 0 0,1 12,5A7,7 0 0,1 19,12A7,7 0 0,1 12,19C10.5,19 9.09,18.5 7.94,17.7L6.5,19.14C8.04,20.3 9.94,21 12,21A9,9 0 0,0 21,12A9,9 0 0,0 12,3M14,12A2,2 0 0,0 12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12Z", ff = "M21,19V20H3V19L5,17V11C5,7.9 7.03,5.17 10,4.29C10,4.19 10,4.1 10,4A2,2 0 0,1 12,2A2,2 0 0,1 14,4C14,4.1 14,4.19 14,4.29C16.97,5.17 19,7.9 19,11V17L21,19M14,21A2,2 0 0,1 12,23A2,2 0 0,1 10,21", mf = "M20.84,22.73L18.11,20H3V19L5,17V11C5,9.86 5.29,8.73 5.83,7.72L1.11,3L2.39,1.73L22.11,21.46L20.84,22.73M19,15.8V11C19,7.9 16.97,5.17 14,4.29C14,4.19 14,4.1 14,4A2,2 0 0,0 12,2A2,2 0 0,0 10,4C10,4.1 10,4.19 10,4.29C9.39,4.47 8.8,4.74 8.26,5.09L19,15.8M12,23A2,2 0 0,0 14,21H10A2,2 0 0,0 12,23Z", e0 = "M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M9 17H7V10H9V17M13 17H11V7H13V17M17 17H15V13H17V17Z", Lh = "M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z", i0 = "M0.41,13.41L6,19L7.41,17.58L1.83,12M22.24,5.58L11.66,16.17L7.5,12L6.07,13.41L11.66,19L23.66,7M18,7L16.59,5.58L10.24,11.93L11.66,13.34L18,7Z", s0 = "M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z", r0 = "M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M12 20C7.59 20 4 16.41 4 12S7.59 4 12 4 20 7.59 20 12 16.41 20 12 20M16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z", n0 = "M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z", a0 = "M19,19H5V5H15V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V11H19M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z", o0 = "M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z", c0 = "M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z", l0 = "M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z", d0 = "M6.5 20Q4.22 20 2.61 18.43 1 16.85 1 14.58 1 12.63 2.17 11.1 3.35 9.57 5.25 9.15 5.88 6.85 7.75 5.43 9.63 4 12 4 14.93 4 16.96 6.04 19 8.07 19 11 20.73 11.2 21.86 12.5 23 13.78 23 15.5 23 17.38 21.69 18.69 20.38 20 18.5 20Z", h0 = "M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9Z", u0 = "M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9M10,16V19.08L13.08,16H20V4H4V16H10Z", p0 = "M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z", y0 = "M19,1L17.74,3.75L15,5L17.74,6.26L19,9L20.25,6.26L23,5L20.25,3.75M9,4L6.5,9.5L1,12L6.5,14.5L9,20L11.5,14.5L17,12L11.5,9.5M19,15L17.74,17.74L15,19L17.74,20.25L19,23L20.25,20.25L23,19L20.25,17.74", w0 = "M13,19A1,1 0 0,0 14,20H16V22H13.5C12.95,22 12,21.55 12,21C12,21.55 11.05,22 10.5,22H8V20H10A1,1 0 0,0 11,19V5A1,1 0 0,0 10,4H8V2H10.5C11.05,2 12,2.45 12,3C12,2.45 12.95,2 13.5,2H16V4H14A1,1 0 0,0 13,5V19Z", vf = "M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z", gf = "M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8.46,11.88L9.87,10.47L12,12.59L14.12,10.47L15.53,11.88L13.41,14L15.53,16.12L14.12,17.53L12,15.41L9.88,17.53L8.47,16.12L10.59,14L8.46,11.88M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z", f0 = "M14,14H16L12,10L8,14H10V18H14V14M6,7H18V19C18,19.5 17.8,20 17.39,20.39C17,20.8 16.5,21 16,21H8C7.5,21 7,20.8 6.61,20.39C6.2,20 6,19.5 6,19V7M19,4V6H5V4H8.5L9.5,3H14.5L15.5,4H19Z", m0 = "M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z", v0 = "M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z", g0 = "M17.9,17.39C17.64,16.59 16.89,16 16,16H15V13A1,1 0 0,0 14,12H8V10H10A1,1 0 0,0 11,9V7H13A2,2 0 0,0 15,5V4.59C17.93,5.77 20,8.64 20,12C20,14.08 19.2,15.97 17.9,17.39M11,19.93C7.05,19.44 4,16.08 4,12C4,11.38 4.08,10.78 4.21,10.21L9,15V16A2,2 0 0,0 11,18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z", b0 = "M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z", x0 = "M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z", Cy = "M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M6.12,15.5L9.86,19.24L11.28,17.83L8.95,15.5L11.28,13.17L9.86,11.76L6.12,15.5M17.28,15.5L13.54,11.76L12.12,13.17L14.45,15.5L12.12,17.83L13.54,19.24L17.28,15.5Z", ky = "M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z", $0 = "M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.8,20H14L12,16.6L10,20H8.2L11.1,15.5L8.2,11H10L12,14.4L14,11H15.8L12.9,15.5L15.8,20M13,9V3.5L18.5,9H13Z", C0 = "M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M6,20H15L18,20V12L14,16L12,14L6,20M8,9A2,2 0 0,0 6,11A2,2 0 0,0 8,13A2,2 0 0,0 10,11A2,2 0 0,0 8,9Z", k0 = "M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13,13H11V18A2,2 0 0,1 9,20A2,2 0 0,1 7,18A2,2 0 0,1 9,16C9.4,16 9.7,16.1 10,16.3V11H13V13M13,9V3.5L18.5,9H13Z", _0 = "M12.6,12.3H10.6V15.5H12.7C13.3,15.5 13.6,15.3 13.9,15C14.2,14.7 14.3,14.4 14.3,13.9C14.3,13.4 14.2,13.1 13.9,12.8C13.6,12.5 13.2,12.3 12.6,12.3M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.2,16C14.6,16.5 14.1,16.7 12.8,16.7H10.6V20H9V11H12.8C14.1,11 14.7,11.3 15.2,11.8C15.8,12.4 16,13 16,13.9C16,14.8 15.8,15.5 15.2,16M13,9V3.5L18.5,9H13Z", z0 = "M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13.5,16V19H10.5V16H8L12,12L16,16H13.5M13,9V3.5L18.5,9H13Z", M0 = "M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M17,19V13L14,15.2V13H7V19H14V16.8L17,19Z", P0 = "M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M15.2,20H13.8L12,13.2L10.2,20H8.8L6.6,11H8.1L9.5,17.8L11.3,11H12.6L14.4,17.8L15.8,11H17.3L15.2,20M13,9V3.5L18.5,9H13Z", S0 = "M20,2H4C2.89,2 2,2.89 2,4V20C2,21.11 2.89,22 4,22H20C21.11,22 22,21.11 22,20V4C22,2.89 21.11,2 20,2M12,4L15,7H13V9H11V7H9M7,15L4,12L7,9V11H9V13H7M12,20L9,17H11V15H13V17H15M17,15V13H15V11H17V9L20,12", A0 = "M17 4H20C21.1 4 22 4.9 22 6V8H20V6H17V4M4 8V6H7V4H4C2.9 4 2 4.9 2 6V8H4M20 16V18H17V20H20C21.1 20 22 19.1 22 18V16H20M7 18H4V16H2V18C2 19.1 2.9 20 4 20H7V18M18 8H6V16H18V8Z", E0 = "M20 6H12L10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6M18 12H16V14H18V16H16V18H14V16H16V14H14V12H16V10H14V8H16V10H18V12Z", O0 = "M17,7H22V17H17V19A1,1 0 0,0 18,20H20V22H17.5C16.95,22 16,21.55 16,21C16,21.55 15.05,22 14.5,22H12V20H14A1,1 0 0,0 15,19V5A1,1 0 0,0 14,4H12V2H14.5C15.05,2 16,2.45 16,3C16,2.45 16.95,2 17.5,2H20V4H18A1,1 0 0,0 17,5V7M2,7H13V9H4V15H13V17H2V7M20,15V9H17V15H20Z", R0 = "M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z", L0 = "M13.5,8H12V13L16.28,15.54L17,14.33L13.5,12.25V8M13,3A9,9 0 0,0 4,12H1L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3", I0 = "M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z", T0 = "M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z", F0 = "M7,10L12,15L17,10H7Z", D0 = "M7,15L12,10L17,15H7Z", H0 = "M19,13H5V11H19V13Z", V0 = "M21 2C22.05 2 22.92 2.81 23 3.85L23 4V16C23 17.05 22.18 17.92 21.15 18L21 18H14V20H16V22H8V20H10V18H3C1.95 18 1.08 17.18 1 16.15L1 16V4C1 2.94 1.81 2.08 2.85 2L3 2H21M21 4H3V16H21V4M12 11C14.21 11 16 11.9 16 13V14H8V13C8 11.9 9.79 11 12 11M12 6C13.11 6 14 6.9 14 8S13.11 10 12 10 10 9.11 10 8 10.9 6 12 6Z", B0 = "M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z", xu = "M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z", U0 = "M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z", q0 = "M2,5.27L3.28,4L20,20.72L18.73,22L12.8,16.07V22H11.2V16H6V14L8,12V11.27L2,5.27M16,12L18,14V16H17.82L8,6.18V4H7V2H17V4H16V12Z", bf = "M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z", N0 = "M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z", xf = "M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3Z", j0 = "M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z", W0 = "M2,21L23,12L2,3V10L17,12L2,14V21Z", Q0 = "M13,19H14A1,1 0 0,1 15,20H15.73L13,17.27V19M22,20V21.18L20.82,20H22M21,22.72L19.73,24L17.73,22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H4A1,1 0 0,1 3,16V12A1,1 0 0,1 4,11H6.73L4.73,9H4A1,1 0 0,1 3,8V7.27L1,5.27L2.28,4L21,22.72M4,3H20A1,1 0 0,1 21,4V8A1,1 0 0,1 20,9H9.82L7,6.18V5H5.82L3.84,3C3.89,3 3.94,3 4,3M20,11A1,1 0 0,1 21,12V16A1,1 0 0,1 20,17H17.82L11.82,11H20M9,7H10V5H9V7M9,15H10V14.27L9,13.27V15M5,13V15H7V13H5Z", K0 = "M12 1L3 5V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V5L12 1M15.08 16L12 14.15L8.93 16L9.74 12.5L7.03 10.16L10.61 9.85L12 6.55L13.39 9.84L16.97 10.15L14.26 12.5L15.08 16Z", G0 = "M21 11C21 16.55 17.16 21.74 12 23C6.84 21.74 3 16.55 3 11V5L12 1L21 5V11M12 21C15.75 20 19 15.54 19 11.22V6.3L12 3.18L5 6.3V11.22C5 15.54 8.25 20 12 21M15.05 16L11.97 14.15L8.9 16L9.71 12.5L7 10.16L10.58 9.85L11.97 6.55L13.37 9.84L16.95 10.15L14.23 12.5L15.05 16", Z0 = "M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z", Y0 = "M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z", X0 = "M12,1L9,9L1,12L9,15L12,23L15,15L23,12L15,9L12,1Z", J0 = "M20.8 22.7L17.9 19.8L18.2 21L12 17.3L5.8 21L7.4 14L2 9.2L6.9 8.8L1.1 3L2.4 1.7L22.1 21.4L20.8 22.7M22 9.2L14.8 8.6L12 2L10 6.8L16.9 13.7L22 9.2Z", tb = "M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z", eb = "M9,3L5,7H8V14H10V7H13M16,17V10H14V17H11L15,21L19,17H16Z", ib = "M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z", sb = "M5,9V21H1V9H5M9,21A2,2 0 0,1 7,19V9C7,8.45 7.22,7.95 7.59,7.59L14.17,1L15.23,2.06C15.5,2.33 15.67,2.7 15.67,3.11L15.64,3.43L14.69,8H21C22.11,8 23,8.9 23,10V12C23,12.26 22.95,12.5 22.86,12.73L19.84,19.78C19.54,20.5 18.83,21 18,21H9M9,19H18.03L21,12V10H12.21L13.34,4.68L9,9.03V19Z", rb = "M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M9,8H11V17H9V8M13,8H15V17H13V8Z", nb = "M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z", ab = "M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z", ob = "M3 5V19H20V5H3M7 7V9H5V7H7M5 13V11H7V13H5M5 15H7V17H5V15M18 17H9V15H18V17M18 13H9V11H18V13M18 9H9V7H18V9Z", cb = "M4 5V18H21V5H4M14 7V10.5H11V7H14M6 7H9V10.5H6V7M6 16V12.5H9V16H6M11 16V12.5H14V16H11M19 16H16V12.5H19V16M16 10.5V7H19V10.5H16Z", lb = "M2.28,3L1,4.27L2.47,5.74C2.04,6 1.61,6.29 1.2,6.6L3,9C3.53,8.6 4.08,8.25 4.66,7.93L6.89,10.16C6.15,10.5 5.44,10.91 4.8,11.4L6.6,13.8C7.38,13.22 8.26,12.77 9.2,12.47L11.75,15C10.5,15.07 9.34,15.5 8.4,16.2L12,21L14.46,17.73L17.74,21L19,19.72M12,3C9.85,3 7.8,3.38 5.9,4.07L8.29,6.47C9.5,6.16 10.72,6 12,6C15.38,6 18.5,7.11 21,9L22.8,6.6C19.79,4.34 16.06,3 12,3M12,9C11.62,9 11.25,9 10.88,9.05L14.07,12.25C15.29,12.53 16.43,13.07 17.4,13.8L19.2,11.4C17.2,9.89 14.7,9 12,9Z";
const _y = j0, zy = {
  "zoom-meetings": '<path d="M21.5 12.5c0 .96-.08 1.91-.23 2.83a7.198 7.198 0 01-5.95 5.95 17.527 17.527 0 01-5.66 0 7.198 7.198 0 01-5.95-5.95 17.527 17.527 0 010-5.66c.49-3.05 2.9-5.46 5.95-5.95a17.527 17.527 0 015.66 0c3.05.49 5.46 2.9 5.95 5.95.15.92.23 1.86.23 2.83z" fill="#0b5cff"/><path d="M14.43 14.75c0 .53-.43.96-.96.96H9.29c-1.07 0-1.93-.86-1.93-1.93v-3.54c0-.53.43-.96.96-.96h4.18c1.07 0 1.93.86 1.93 1.93v3.54zM16.87 9.86l-1.41 1.06c-.24.18-.39.47-.39.77v1.61c0 .3.14.59.39.77l1.41 1.06c.32.24.77.01.77-.39v-4.5c0-.4-.45-.62-.77-.39z" fill="#fff"/>',
  "google-meet": '<path fill="#1e88e5" d="M3.5 9.07v5.86l2.09.42 2.1-.42V9.07l-2.1-.42-2.09.42z"/><path d="M17.73 12v5.86c0 .69-.56 1.26-1.26 1.26H7.69l-.42-2.09.42-2.09h5.86v-2.93l2.09-.42 2.09.42z" fill="#4caf50"/><path d="M17.73 6.14V12h-4.19V9.07H7.68l-.42-2.09.42-2.09h8.79c.69 0 1.26.56 1.26 1.26z" fill="#fbc02d"/><path d="M7.69 14.93v4.19H4.76c-.69 0-1.26-.56-1.26-1.26v-2.93h4.19z" fill="#1565c0"/><path fill="#e53935" d="M7.69 4.88v4.19H3.5l4.19-4.19z"/><path fill="#2e7d32" d="M18.15 12l-.42 3.54L13.55 12l4.18-3.54.42 3.54z"/><path d="M21.5 6.19v11.63c0 .35-.41.55-.68.33l-3.09-2.6V8.48l3.09-2.6c.27-.22.68-.03.68.33z" fill="#4caf50"/>',
  "webex-meetings": '<defs><radialGradient id="prefix__b" cx="-951.63" cy="549.04" fx="-951.63" fy="549.04" r=".05" gradientTransform="matrix(-87.16473 -146.04628 -122.52671 73.12756 -15652.44 -179117.85)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#007383"/><stop offset=".41" stop-color="#00717e" stop-opacity=".75"/><stop offset=".87" stop-color="#007281" stop-opacity="0"/></radialGradient><radialGradient id="prefix__c" cx="-952.67" cy="549.07" fx="-952.67" fy="549.07" r=".05" gradientTransform="rotate(-126.7 -53497.341 -58162.752) scale(138.69 -91.09)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#218970"/><stop offset=".46" stop-color="#267e6a"/><stop offset="1" stop-color="#026c51" stop-opacity="0"/></radialGradient><radialGradient id="prefix__d" cx="-952.61" cy="541.2" fx="-952.61" fy="541.2" r=".05" gradientTransform="matrix(-33.8827 -107.79009 -56.09397 17.63256 -1902.72 -112216.84)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#178697"/><stop offset=".41" stop-color="#17838f" stop-opacity=".79"/><stop offset=".87" stop-color="#007281" stop-opacity="0"/></radialGradient><radialGradient id="prefix__e" cx="-949.76" cy="547.24" fx="-949.76" fy="547.24" r=".05" gradientTransform="matrix(-146.98086 -246.36712 -75.94201 45.30646 -98045.43 -258761.67)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#25342f" stop-opacity=".3"/><stop offset="1" stop-color="#25342f" stop-opacity="0"/></radialGradient><radialGradient id="prefix__f" cx="-942.87" cy="563.62" fx="-942.87" fy="563.62" r=".05" gradientTransform="rotate(85.1 -69752.427 38265.017) scale(108.08 -61.22)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#056d4f"/><stop offset=".23" stop-color="#056c4e" stop-opacity=".75"/><stop offset=".6" stop-color="#056c4e" stop-opacity=".3"/><stop offset=".87" stop-color="#056c4f" stop-opacity="0"/></radialGradient><radialGradient id="prefix__g" cx="-940.36" cy="556.77" fx="-940.36" fy="556.77" r=".05" gradientTransform="matrix(68.96997 106.65216 55.9082 -36.1548 33735.1 120422.29)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#22b67b"/><stop offset=".41" stop-color="#24be82"/><stop offset="1" stop-color="#24be82" stop-opacity=".07"/></radialGradient><radialGradient id="prefix__i" cx="-940.77" cy="554.96" fx="-940.77" fy="554.96" r=".05" gradientTransform="rotate(49.69 -177135.555 122596.9) scale(165.85 -165.4)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#09f8ff"/><stop offset="1" stop-color="#0bf7f9" stop-opacity="0"/></radialGradient><radialGradient id="prefix__j" cx="-944.1" cy="553.18" fx="-944.1" fy="553.18" r=".05" gradientTransform="rotate(48.05 -367132.581 263331.898) scale(336.36 -335.78)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#00b8ff"/><stop offset=".75" stop-color="#00b9fc" stop-opacity="0"/></radialGradient><radialGradient id="prefix__k" cx="-951.17" cy="546.23" fx="-951.17" fy="546.23" r=".05" gradientTransform="matrix(-48.64247 -154.74493 -107.10322 33.66679 12252.88 -165563.53)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#00bcff" stop-opacity=".76"/><stop offset=".57" stop-color="#00bafc" stop-opacity="0"/></radialGradient><radialGradient id="prefix__l" cx="-953.78" cy="550.07" fx="-953.78" fy="550.07" r=".05" gradientTransform="matrix(-72.9418 -88.45403 -61.91396 51.05608 -35502.54 -112443.2)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#5fec50"/><stop offset="1" stop-color="#3cc08e" stop-opacity="0"/></radialGradient><radialGradient id="prefix__m" cx="-954.59" cy="523.18" fx="-954.59" fy="523.18" r=".05" gradientTransform="rotate(-79.11 -8961.313 -26349.067) scale(34.73 -23.99)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#28855b"/><stop offset="1" stop-color="#14795c" stop-opacity="0"/></radialGradient><radialGradient id="prefix__n" cx="-955.7" cy="534.72" fx="-955.7" fy="534.72" r=".05" gradientTransform="matrix(6.00138 -27.99393 -39.07222 -8.37636 26647.75 -22260.21)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#28855b"/><stop offset="1" stop-color="#14795c" stop-opacity="0"/></radialGradient><radialGradient id="prefix__o" cx="-954.99" cy="550.19" fx="-954.99" fy="550.19" r=".05" gradientTransform="matrix(-64.43177 -69.7019 -48.95728 45.25565 -34575.21 -91452.74)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#5ff05b"/><stop offset=".81" stop-color="#5de955" stop-opacity="0"/></radialGradient><radialGradient id="prefix__p" cx="-938.28" cy="553.05" fx="-938.28" fy="553.05" r=".05" gradientTransform="matrix(66.96005 51.3617 71.4219 -93.11248 23342.15 99701.75)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".97" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__q" cx="-940.1" cy="550.5" fx="-940.1" fy="550.5" r=".05" gradientTransform="matrix(98.43675 14.71147 21.98813 -147.126 80455.97 94829.3)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".59" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__r" cx="-938.38" cy="551.97" fx="-938.38" fy="551.97" r=".05" gradientTransform="rotate(24.69 -231174.852 140478.806) scale(85.04 -151.66)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".76" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__s" cx="-945.2" cy="560.82" fx="-945.2" fy="560.82" r=".05" gradientTransform="rotate(95.79 -93552.04 41883.384) scale(153.04 -83.75)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".59" stop-color="#123aa8" stop-opacity="0"/><stop offset="1" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__t" cx="-945.05" cy="562.66" fx="-945.05" fy="562.66" r=".05" gradientTransform="rotate(93.66 -104350.43 63182.76) scale(184.18 -65.64)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".88" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__u" cx="-942.29" cy="567.94" fx="-942.29" fy="567.94" r=".05" gradientTransform="matrix(8.78957 97.33394 51.50044 -4.65066 -20951.98 94373.6)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".88" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__v" cx="-942.85" cy="562.23" fx="-942.85" fy="562.23" r=".05" gradientTransform="matrix(4.89377 101.88254 84.00315 -4.03496 -42611.94 98338.06)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".88" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__w" cx="-941.74" cy="549.74" fx="-941.74" fy="549.74" r=".05" gradientTransform="rotate(-23.2 244205.91 -321749.854) scale(113.62 -222.29)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#123aa8"/><stop offset=".71" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__x" cx="-959.91" cy="553.32" fx="-959.91" fy="553.32" r=".05" gradientTransform="matrix(-70.50332 -26.36011 -45.18376 120.84945 -42670.87 -92159.05)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#1a3da0"/><stop offset=".71" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__y" cx="-940.3" cy="551.63" fx="-940.3" fy="551.63" r=".05" gradientTransform="matrix(137.44492 41.41855 41.86 -138.90985 106154.62 115588.85)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#1e3882"/><stop offset=".76" stop-color="#123aa8" stop-opacity="0"/></radialGradient><radialGradient id="prefix__A" cx="-940.77" cy="554.96" fx="-940.77" fy="554.96" r=".05" gradientTransform="rotate(49.69 -177135.55 122596.884) scale(165.85 -165.4)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#09f8ff"/><stop offset="1" stop-color="#0bf7f9" stop-opacity="0"/></radialGradient><radialGradient id="prefix__D" cx="-951.17" cy="546.23" fx="-951.17" fy="546.23" r=".05" gradientTransform="matrix(-48.64247 -154.74493 -107.10322 33.66679 12252.88 -165563.53)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#00bcff" stop-opacity=".76"/><stop offset=".57" stop-color="#00bafc" stop-opacity="0"/></radialGradient><linearGradient id="prefix__a" x1="76.14" y1="-95.89" x2="64.37" y2="-99.75" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#5cee64"/><stop offset="1" stop-color="#0bf"/></linearGradient><linearGradient id="prefix__h" x1="56.74" y1="-98.36" x2="65.09" y2="-98.43" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#09f8ff"/><stop offset="1" stop-color="#0bf7f9" stop-opacity="0"/></linearGradient><linearGradient id="prefix__z" x1="61.48" y1="-92.95" x2="67.9" y2="-97.04" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset=".23" stop-color="#1dc4ff"/><stop offset="1" stop-color="#1cc1ff" stop-opacity="0"/></linearGradient><linearGradient id="prefix__B" x1="63.13" y1="-92.11" x2="64.93" y2="-93.74" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#26fbff"/><stop offset=".64" stop-color="#0bf7f9" stop-opacity="0"/></linearGradient><linearGradient id="prefix__C" x1="60.36" y1="-97.78" x2="62.85" y2="-97.95" gradientTransform="matrix(1 0 0 -1 -58.17 -86.5)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#26fbff"/><stop offset=".64" stop-color="#0bf7f9" stop-opacity="0"/></linearGradient></defs><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__a)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__b)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__c)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__d)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__e)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__f)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__g)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__h)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__i)"/><path d="M15.37 5.44c-1.34 0-2.88.45-3.9 2.4-.59 1.12-.89 2.38-1.16 3.63-.09.41-.18.83-.28 1.22v5.66c.51-.14 1.05-.42 1.57-.95 1.96-1.99 2.28-7.2 3.26-8.19.11-.11.23-.18.36-.18.39 0 .7.5.99 1.1.32.67.71 1.43 1.84 1.43.52 0 1.72-.38 1.72-1.85 0-.88-1.47-4.28-4.39-4.28z" fill="url(#prefix__j)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__k)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__l)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__m)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__n)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__o)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="#316aff"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__p)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__q)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__r)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__s)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__t)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__u)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__v)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__w)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__x)"/><path d="M19.22 7.44c-.13 0-.26.01-.39.04.62.89.93 1.83.93 2.23 0 1.47-1.2 1.85-1.72 1.85-.41 0-.71-.1-.96-.25v.03c-.07.29-.13.61-.23.92-.19.6-.45 1.28-.73 1.81-.3.57-.59.9-.94.89-.4-.02-.72-.54-1.13-1.99-.13-.47-.25-.98-.36-1.49-.28-1.25-.62-2.52-1.2-3.63-.95-1.82-2.56-2.4-3.85-2.4-1.2 0-2.09.57-2.79 1.28-.19.2-.41.46-.62.78.61.15 1.19.61 1.28 1.48.02.17.15 1.49.58 3.03.12-.38.3-.95.72-1.88.2-.42.39-.7.56-.87.15-.16.29-.22.41-.22.13 0 .59.12 1.03 1.68.55 1.93.96 5.01 2.52 6.65.69.72 1.65 1.19 2.99 1.19 1.17 0 2.15-.52 2.84-1.24 1.14-1.18 1.77-3.14 2-3.86.64-2.06.82-3.92.84-4.11.12-1.12-.83-1.91-1.77-1.91z" fill="url(#prefix__y)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__z)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__A)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__B)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__C)"/><path d="M8.59 18.51c-3.33 0-4.47-4.22-4.72-5.04-.64-2.06-.83-3.92-.85-4.11-.12-1.12.78-1.91 1.77-1.91.75 0 1.62.45 1.73 1.54.02.18.17 1.76.71 3.48.56 1.8 1.16 2.49 1.59 2.49.69 0 1.12-1.78 1.49-3.48.28-1.25.57-2.51 1.16-3.63 1.02-1.95 2.57-2.4 3.9-2.4 2.93 0 4.39 3.4 4.39 4.28 0 1.47-1.2 1.85-1.72 1.85-1.14 0-1.52-.76-1.84-1.43-.29-.6-.6-1.1-.99-1.1-.13 0-.25.07-.36.18-.98 1-1.31 6.2-3.26 8.19-1.08 1.1-2.26 1.1-3 1.1z" fill="url(#prefix__D)"/>',
  "microsoft-teams": '<path d="M15.56 9.91h4.65c.44 0 .8.36.8.8v4.24c0 1.61-1.31 2.92-2.92 2.92h-.01c-1.61 0-2.92-1.31-2.92-2.92v-4.62c0-.23.19-.42.42-.42z" fill="#5059c9"/><circle cx="18.7" cy="7.19" r="1.88" fill="#5059c9"/><circle cx="12.84" cy="6.35" r="2.72" fill="#7b83eb"/><path d="M16.47 9.91H8.8a.79.79 0 00-.77.8v4.83c-.06 2.6 2 4.77 4.6 4.83 2.6-.06 4.67-2.23 4.6-4.83v-4.83a.783.783 0 00-.77-.8z" fill="#7b83eb"/><path d="M3.77 7.4h7.67c.42 0 .77.34.77.77v7.67c0 .42-.34.77-.77.77H3.77a.77.77 0 01-.77-.77V8.17c0-.42.34-.77.77-.77z" fill="#5a62c3"/><path d="M9.62 10.32H8.09v4.18h-.98v-4.18H5.58v-.81h4.04v.81z" fill="#fff"/>'
}, db = {
  box: "M15.39,14.04V14.04C15.39,12.62 14.24,11.47 12.82,11.47C11.41,11.47 10.26,12.62 10.26,14.04V14.04C10.26,15.45 11.41,16.6 12.82,16.6C14.24,16.6 15.39,15.45 15.39,14.04M17.1,14.04C17.1,16.4 15.18,18.31 12.82,18.31C11.19,18.31 9.77,17.39 9.05,16.04C8.33,17.39 6.91,18.31 5.28,18.31C2.94,18.31 1.04,16.43 1,14.11V14.11H1V7H1V7C1,6.56 1.39,6.18 1.86,6.18C2.33,6.18 2.7,6.56 2.71,7V7H2.71V10.62C3.43,10.08 4.32,9.76 5.28,9.76C6.91,9.76 8.33,10.68 9.05,12.03C9.77,10.68 11.19,9.76 12.82,9.76C15.18,9.76 17.1,11.68 17.1,14.04V14.04M7.84,14.04V14.04C7.84,12.62 6.69,11.47 5.28,11.47C3.86,11.47 2.71,12.62 2.71,14.04V14.04C2.71,15.45 3.86,16.6 5.28,16.6C6.69,16.6 7.84,15.45 7.84,14.04M22.84,16.96V16.96C22.95,17.12 23,17.3 23,17.47C23,17.73 22.88,18 22.66,18.15C22.5,18.26 22.33,18.32 22.15,18.32C21.9,18.32 21.65,18.21 21.5,18L19.59,15.47L17.7,18V18C17.53,18.21 17.28,18.32 17.03,18.32C16.85,18.32 16.67,18.26 16.5,18.15C16.29,18 16.17,17.72 16.17,17.46C16.17,17.29 16.23,17.11 16.33,16.96V16.96H16.33V16.96L18.5,14.04L16.33,11.11V11.11H16.33V11.11C16.22,10.96 16.17,10.79 16.17,10.61C16.17,10.35 16.29,10.1 16.5,9.93C16.89,9.65 17.41,9.72 17.7,10.09V10.09L19.59,12.61L21.5,10.09C21.76,9.72 22.29,9.65 22.66,9.93C22.89,10.1 23,10.36 23,10.63C23,10.8 22.95,10.97 22.84,11.11V11.11H22.84V11.11L20.66,14.04L22.84,16.96V16.96H22.84Z",
  dropbox: "M3 6.2L8 9.39L13 6.2L8 3L3 6.2M13 6.2L18 9.39L23 6.2L18 3L13 6.2M3 12.55L8 15.74L13 12.55L8 9.35L3 12.55M18 9.35L13 12.55L18 15.74L23 12.55L18 9.35M8.03 16.8L13.04 20L18.04 16.8L13.04 13.61L8.03 16.8Z",
  "google-drive": "M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z",
  onedrive: "M18.21 10.29Q19 10.34 19.7 10.68 20.39 11 20.9 11.57 21.41 12.12 21.71 12.83 22 13.54 22 14.34 22 15.18 21.68 15.92 21.36 16.66 20.8 17.21 20.25 17.76 19.5 18.08 18.78 18.41 17.94 18.41H7Q5.97 18.41 5.06 18 4.15 17.61 3.47 16.94 2.79 16.26 2.4 15.35 2 14.44 2 13.41 2 12.59 2.26 11.83 2.5 11.08 3 10.45 3.44 9.82 4.08 9.35 4.72 8.88 5.5 8.63 5.87 8.5 6.21 8.5 6.56 8.43 6.93 8.41H6.94Q7.37 7.75 7.95 7.23 8.5 6.71 9.2 6.34 9.87 6 10.62 5.78 11.37 5.59 12.16 5.59 13.22 5.59 14.2 5.94 15.18 6.29 16 6.91 16.8 7.53 17.37 8.39 17.95 9.26 18.21 10.29M12.16 6.84Q11.05 6.84 10.06 7.3 9.06 7.75 8.36 8.6 8.73 8.7 9.07 8.85 9.4 9 9.73 9.2L13.71 11.58L16 10.62Q16.21 10.53 16.44 10.45 16.67 10.38 16.92 10.33 16.68 9.55 16.21 8.91 15.74 8.27 15.11 7.81 14.5 7.35 13.73 7.1 13 6.84 12.16 6.84M4 15.66L12.27 12.18L9.08 10.26Q8.59 9.97 8.06 9.81 7.5 9.66 6.95 9.66 6.19 9.66 5.5 9.96 4.84 10.26 4.34 10.77 3.84 11.29 3.54 11.97 3.25 12.65 3.25 13.41 3.25 14 3.45 14.59 3.64 15.19 4 15.66M17.94 17.16Q18.41 17.16 18.84 17 19.27 16.86 19.64 16.58L13.61 13L5.03 16.59Q5.47 16.86 5.97 17 6.47 17.16 7 17.16M20.45 15.61Q20.75 15 20.75 14.34 20.75 13.7 20.5 13.17 20.26 12.65 19.85 12.28 19.43 11.91 18.88 11.71 18.32 11.5 17.7 11.5 17.35 11.5 17 11.6 16.66 11.68 16.33 11.81 16 11.93 15.67 12.08 15.35 12.23 15.04 12.37Z"
}, hb = {
  email: b0,
  file: x0,
  "file-upload": z0,
  "file-music": k0,
  "file-image": C0,
  "file-video": M0,
  "file-code": Cy,
  "file-xml": Cy,
  "file-document": ky,
  "file-word": P0,
  "file-excel": $0,
  "file-pdf": ky,
  "file-powerpoint": _0,
  "file-compressed": E0
}, My = {
  "account-minus": Kg,
  "account-plus": Gg,
  alert: Zg,
  "alert-circle": Yg,
  "alert-octagon": Xg,
  attachment: wf,
  back: $y,
  "backup-restore": t0,
  bell: ff,
  "bell-off": mf,
  agent: X0,
  check: Lh,
  "check-all": i0,
  "check-circle-outline": r0,
  "checkbox-blank": n0,
  "checkbox-marked": a0,
  "circle-outline": o0,
  "check-circle": s0,
  close: c0,
  "close-circle": l0,
  cloud: d0,
  comment: h0,
  "comment-outline": u0,
  "content-save": p0,
  delete: vf,
  "delete-restore": f0,
  "delete-forever": gf,
  "dots-vertical": m0,
  download: v0,
  earth: g0,
  "emoticon-plus": "M 19 0 L 19 3 L 16 3 L 16 5 L 19 5 L 19 8 L 21 8 L 21 5 L 24 5 L 24 3 L 21 3 L 21 0 L 19 0 z M 12 2 C 6.5 2 2 6.5 2 12 C 2 17.5 6.5 22 12 22 C 17.5 22 22 17.5 22 12 L 20 12 C 20 16.4 16.4 20 12 20 C 7.6 20 4 16.4 4 12 C 4 7.6 7.6 4 12 4 L 12 2 z M 8.5 8 C 7.7 8 7 8.7 7 9.5 C 7 10.3 7.7 11 8.5 11 C 9.3 11 10 10.3 10 9.5 C 10 8.7 9.3 8 8.5 8 z M 15.5 8 C 14.7 8 14 8.7 14 9.5 C 14 10.3 14.7 11 15.5 11 C 16.3 11 17 10.3 17 9.5 C 17 8.7 16.3 8 15.5 8 z M 6.9 14 C 7.7 16 9.7 17.5 12 17.5 C 14.3 17.5 16.3 16 17.1 14 L 6.9 14 z",
  "fit-screen": A0,
  "fit-width": S0,
  "help-circle": R0,
  information: I0,
  magnify: T0,
  meeting: V0,
  "menu-down": F0,
  "menu-up": D0,
  minus: H0,
  next: Jg,
  "open-in-new": B0,
  pencil: xu,
  pin: U0,
  unpin: q0,
  plus: bf,
  "plus-circle-outline": N0,
  poll: e0,
  previous: $y,
  read: Lh,
  restore: xf,
  unread: Lh,
  send: W0,
  "server-network-off": Q0,
  "shield-star": K0,
  "shield-star-outline": G0,
  sort: Z0,
  star: Y0,
  unstar: J0,
  stars: y0,
  "swap-horizontal": tb,
  textbox: O0,
  "thumb-up": ib,
  "thumb-up-outline": sb,
  trashcan: rb,
  video: ab,
  "view-list-outline": ob,
  "view-module-outline": cb,
  "wifi-off": lb,
  ...hb,
  ...db
}, Py = {
  attach: wf,
  create: bf,
  "delete-forever": gf,
  edit: xu,
  modify: xu,
  rename: w0,
  replace: eb,
  restore: xf,
  subscribe: ff,
  trash: vf,
  unsubscribe: mf,
  upload: nb,
  version: L0
}, Sy = {
  dropbox: "#0061fe",
  onedrive: "#0078d4",
  box: "#0161d5",
  "google-drive": "#1a73e8",
  zoom: "#4a8cff"
};
function Ay(s) {
  return s && s in My ? My[s] : "";
}
o(Ay, "getIconMapping");
function ub(s) {
  return s && s in zy ? zy[s] : "";
}
o(ub, "getSvgMapping");
function pb(s) {
  return s && s in Py ? Py[s] : "";
}
o(pb, "getFileActionIconMapping");
var ta;
let Gl = (ta = class extends kr {
  constructor(t) {
    if (super(t), this.it = C, t.type !== sc.CHILD) throw Error(this.constructor.directiveName + "() can only be used in child bindings");
  }
  render(t) {
    if (t === C || t == null) return this._t = void 0, this.it = t;
    if (t === ll) return t;
    if (typeof t != "string") throw Error(this.constructor.directiveName + "() called with a non-string value");
    if (t === this.it) return this._t;
    this.it = t;
    const e = [t];
    return e.raw = e, this._t = { _$litType$: this.constructor.resultType, strings: e, values: [] };
  }
}, o(ta, "e"), ta);
Gl.directiveName = "unsafeHTML", Gl.resultType = 1;
const dr = Fs(Gl);
const Wp = class Wp extends Gl {
};
o(Wp, "t");
let Cc = Wp;
Cc.directiveName = "unsafeSVG", Cc.resultType = 2;
const Ey = Fs(Cc), ap = dt`[part~=wy-icon]{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative;width:var(--wy-component-icon-width);height:var(--wy-component-icon-height)}[part~=wy-icon][width=\"24\"]{width:var(--wy-component-icon-width, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-icon][height=\"24\"]{height:var(--wy-component-icon-height, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-icon-first]{margin-left:calc(-.5 * var(--wy-size, 1rem))}[part~=wy-icon-last]{margin-right:calc(-.5 * var(--wy-size, 1rem))}[part~=wy-icon-padded]{margin:16.66666667%}[part~=wy-icon-inline]{vertical-align:-.25em}[part~=wy-icon-overlay]{position:absolute;bottom:0;right:0;border-radius:50%}:host(wy-icon-stack),[part~=wy-icon-stack]{display:inline-flex;position:relative;line-height:1}[part~=wy-icon-stack-layer]{position:absolute}[part~=wy-icon-stack-overlay]{position:absolute;bottom:0;right:0;border-radius:50%;width:calc(var(--wy-component-icon-width) / 2);height:calc(var(--wy-component-icon-height) / 2)}[part~=wy-icon-current-color]{fill:currentColor}[part~=wy-icon-state]{transition:opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1)));align-self:center;justify-self:center;margin:auto;opacity:0}[part~=wy-icon-state][part~=wy-active]{opacity:1}[part~=wy-icon-display]{color:var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));border-radius:var(--wy-component-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));margin:auto}[part~=wy-icon-display-icon]{color:var(--wy-component-color);--wy-component-icon-width: calc(4 * var(--wy-size, 1rem));--wy-component-icon-height: calc(4 * var(--wy-size, 1rem));padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-icon-display-text],[part~=wy-icon-display-meta]{color:var(--wy-component-color);padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));text-align:center}[part~=wy-icon-color-primary]{fill:var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-icon-color-secondary]{fill:var(--wy-secondary, var(--wy-secondary-40, #3b6a1c))}[part~=wy-icon-color-tertiary]{fill:var(--wy-tertiary, var(--wy-tertiary-40, #3b6a1c))}[part~=wy-icon-color-surface]{fill:var(--wy-surface, var(--wy-neutral-99, #fcfcff))}[part~=wy-icon-color-surface-variant]{fill:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}[part~=wy-icon-color-error]{fill:var(--wy-error, var(--wy-error-40, #ba1824))}[part~=wy-icon-color-warning]{fill:var(--wy-warning, var(--wy-warning-70, #afb140))}[part~=wy-icon-color-blue]{fill:var(--wy-blue, var(--wy-blue-light, #89a9fc))}[part~=wy-icon-color-indigo]{fill:var(--wy-indigo, var(--wy-indigo-light, #9185de))}[part~=wy-icon-color-purple]{fill:var(--wy-purple, var(--wy-purple-light, #c675b7))}[part~=wy-icon-color-pink]{fill:var(--wy-pink, var(--wy-pink-light, #d57194))}[part~=wy-icon-color-red]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-icon-color-orange]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-icon-color-yellow]{fill:var(--wy-yellow, var(--wy-yellow-light, #afb140))}[part~=wy-icon-color-green]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-icon-color-teal]{fill:var(--wy-teal, var(--wy-teal-light, #00a0a8))}[part~=wy-icon-color-cyan]{fill:var(--wy-cyan, var(--wy-cyan-light, #0082a1))}[part~=wy-icon-color-gray]{fill:var(--wy-gray, var(--wy-gray-light, #76777a))}[part~=wy-icon-color-black]{fill:var(--wy-black, var(--wy-black, #000000))}[part~=wy-icon-color-white]{fill:var(--wy-white, var(--wy-white, #ffffff))}[part*=wy-kind-]{fill:var(--wy-gray, var(--wy-gray-light, #76777a))}[part~=wy-kind-archive]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-kind-audio]{fill:var(--wy-teal, var(--wy-teal-light, #00a0a8))}[part~=wy-kind-code]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-kind-document]{fill:var(--wy-blue, var(--wy-blue-light, #89a9fc))}[part~=wy-kind-email]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-kind-presentation]{fill:var(--wy-orange, var(--wy-orange-light, #e89a3a))}[part~=wy-kind-spreadsheet]{fill:var(--wy-green, var(--wy-green-light, #00a38b))}[part~=wy-kind-image]{fill:var(--wy-pink, var(--wy-pink-light, #d57194))}[part~=wy-kind-text]{fill:var(--wy-cyan, var(--wy-cyan-light, #0082a1))}[part~=wy-kind-video]{fill:var(--wy-purple, var(--wy-purple-light, #c675b7))}[part~=wy-ext-pdf]{fill:var(--wy-red, var(--wy-red-light, #db726c))}[part~=wy-kind-text-icon]{width:calc(1.25 * var(--wy-size, 1rem));height:calc(1.25 * var(--wy-size, 1rem));vertical-align:calc(-.3125 * var(--wy-size, 1rem))}`;
var yb = Object.defineProperty, wb = Object.getOwnPropertyDescriptor, Kt = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? wb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && yb(t, e, r), r;
}, "__decorateClass$18"), ea;
let Lt = (ea = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.color = "", this.size = 24, this.path = _y, this.inline = !1, this.first = !1, this.last = !1, this.padded = !1, this.layer = !1, this.state = !1, this.active = !1, this.uniqueId = `wy-icon-${bc()}`;
  }
  willUpdate(t) {
    super.willUpdate(t), t.has("name") && this.name && (this.path = Ay(this.name) || _y, this.overlayPath = Ay(this.overlayName) || this.overlayPath, this.nativeIconColor = this.color === "native" && Sy[this.name] || void 0, this.nativeOverlayColor = this.overlayName && Sy[this.overlayName] || void 0);
  }
  render() {
    var l;
    const t = this.kind ? fw(this.kind) : this.kind, e = (l = this.ext) != null && l.startsWith(".") ? this.ext.substring(1) : this.ext, i = {
      "wy-icon": !0,
      "wy-icon-current-color": !t && !this.color,
      ["wy-kind-" + t]: !!t,
      ["wy-ext-" + e]: !!e,
      ["wy-icon-color-" + this.color]: !!this.color,
      "wy-icon-first": this.first,
      "wy-icon-last": this.last,
      "wy-icon-padded": this.padded,
      "wy-icon-inline": this.inline,
      "wy-icon-stack-layer": this.layer,
      "wy-icon-state": this.state,
      "wy-active": this.active
    }, r = this.size !== 24, n = this.size / 16, a = r ? `width: var(--wy-component-icon-width, calc(${n} * var(--wy-size, 1rem))); height: var(--wy-component-icon-height, calc(${n} * var(--wy-size, 1rem)));` : "", c = this.svg && ub(this.svg);
    return this.overlayPath ? [
      h`
          <style>
            .icon-mask-bg {
              width: var(--wy-component-icon-width, calc(${n} * var(--wy-size, 1rem)));
              height: var(--wy-component-icon-height, calc(${n} * var(--wy-size, 1rem)));
              fill: white;
            }

            .icon-mask {
              width: calc(var(--wy-component-icon-width, calc(${n} * var(--wy-size, 1rem))));
              height: calc(var(--wy-component-icon-height, calc(${n} * var(--wy-size, 1rem))));
              ry: calc(var(--wy-border-radius-pill, var(--wy-border-radius, 50%)));
              x: calc(var(--wy-component-icon-width, calc(${n} * var(--wy-size, 1rem))) / 2);
              y: calc(var(--wy-component-icon-height, calc(${n} * var(--wy-size, 1rem))) / 2);
              stroke: black;
              stroke-width: 4px;
              fill: black;
            }
          </style>
        `,
      h`
          <wy-icon-stack style="${a}">
            <svg
              part=${Xt(i)}
              viewBox="0 0 24 24"
              width="${this.size}"
              height="${this.size}"
              style="mask-image: url(#${this.uniqueId}-mask); -webkit-mask-image: url(#${this.uniqueId}-mask);"
            >
              <defs>
                <mask id="${this.uniqueId}-mask">
                  <rect class="icon-mask-bg" />
                  <rect class="icon-mask" />
                </mask>
              </defs>
              ${c ? Ey(c) : iy`
          <path d="${this.path}" style="fill: ${lt(this.nativeIconColor)}" />
        `}
              <!--rect width="24" height="24" fill="transparent" /-->
            </svg>
            <svg part="wy-icon-stack-overlay" viewBox="0 0 24 24" width="${this.size / 2}" height="${this.size / 2}">
              <path d="${this.overlayPath}" style="fill: ${lt(this.nativeOverlayColor)}" />
              <!--rect width="24" height="24" fill="transparent" /-->
            </svg>
          </wy-icon-stack>
        `
    ] : h`
      <svg
        part=${Xt(i)}
        style="${a}"
        viewBox="0 0 24 24"
        width="${this.size}"
        height="${this.size}"
      >
        ${c ? Ey(c) : iy`
          <path d="${this.path}" style="fill: ${lt(this.nativeIconColor)}" />
        `}
        <!--rect width="24" height="24" fill="transparent" /-->
      </svg>
    `;
  }
}, o(ea, "WyIcon"), ea);
Lt.styles = [
  ne,
  ap,
  yt
];
Kt([
  y()
], Lt.prototype, "name", 2);
Kt([
  y()
], Lt.prototype, "overlayName", 2);
Kt([
  y()
], Lt.prototype, "svg", 2);
Kt([
  y()
], Lt.prototype, "color", 2);
Kt([
  y({ type: Number })
], Lt.prototype, "size", 2);
Kt([
  y()
], Lt.prototype, "kind", 2);
Kt([
  y()
], Lt.prototype, "ext", 2);
Kt([
  y({ attribute: !1 })
], Lt.prototype, "path", 2);
Kt([
  y({ attribute: !1 })
], Lt.prototype, "overlayPath", 2);
Kt([
  y({ type: Boolean })
], Lt.prototype, "inline", 2);
Kt([
  y({ type: Boolean })
], Lt.prototype, "first", 2);
Kt([
  y({ type: Boolean })
], Lt.prototype, "last", 2);
Kt([
  y({ type: Boolean })
], Lt.prototype, "padded", 2);
Kt([
  y({ type: Boolean })
], Lt.prototype, "layer", 2);
Kt([
  y({ type: Boolean })
], Lt.prototype, "state", 2);
Kt([
  y({ type: Boolean })
], Lt.prototype, "active", 2);
Kt([
  H()
], Lt.prototype, "nativeIconColor", 2);
Kt([
  H()
], Lt.prototype, "nativeOverlayColor", 2);
Lt = Kt([
  q("wy-icon")
], Lt);
var ia;
let $u = (ia = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  render() {
    return h`<slot></slot>`;
  }
}, o(ia, "WyIconStack"), ia);
$u.styles = [ne, ap];
$u = Kt([
  q("wy-icon-stack")
], $u);
var sa;
let Cu = (sa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  render() {
    return h`
      <div part="wy-icon-display-icon">
        <slot></slot>
      </div>
      <div part="wy-icon-display-text">
        <slot name="text"></slot>
      </div>
      <div part="wy-icon-display-meta">
        <slot name="meta"></slot>
      </div>
    `;
  }
}, o(sa, "WyIconDisplay"), sa);
Cu.styles = [ne, ap];
Cu = Kt([
  q("wy-icon-display")
], Cu);
var fb = Object.defineProperty, mb = Object.getOwnPropertyDescriptor, Ke = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? mb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && fb(t, e, r), r;
}, "__decorateClass$17"), ra;
let _i = (ra = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.size = 32, this.src = "", this.name = "", this.description = "", this.isAgent = !1;
  }
  render() {
    const t = this.size / 16;
    let e;
    !this.src && this.name && (e = nv(this.name));
    const i = {
      "wy-avatar-shape": !0,
      "wy-avatar-img": !!this.src,
      "wy-avatar-initials": !this.src,
      "wy-presence-mask": this.presence === sp.Active
    };
    return h`
      ${this.src ? h`
            <img
              alt=""
              title="${this.name}${this.description ? ` • ${this.description}` : ""}"
              part=${Xt(i)}
              style="--wy-component-avatar-size: calc(${t} * var(--wy-size, 1rem));"
              height="${this.size}"
              width="${this.size}"
              src="${this.src}"
              decoding="async"
              loading="lazy"
            />
          ` : h`
            <div
              part=${Xt(i)}
              style="--wy-component-avatar-size: calc(${t} * var(--wy-size, 1rem));"
              title="${this.name}${this.description ? ` • ${this.description}` : ""}"
            >
              <span part="wy-avatar-initials-text">${e}</span>
            </div>
          `}
      ${this.isAgent ? h`<wy-icon part="wy-avatar-type" name="agent" size="${this.size / 3 * 1.25}"></wy-icon>` : C}
      ${this.presence && !this.isAgent ? h`<wy-presence .status=${this.presence} id=${this.id}></wy-presence>` : C}
    `;
  }
}, o(ra, "WyAvatar"), ra);
_i.styles = [ne, rp, yf];
Ke([
  y({ type: Number })
], _i.prototype, "size", 2);
Ke([
  y()
], _i.prototype, "src", 2);
Ke([
  y()
], _i.prototype, "name", 2);
Ke([
  y()
], _i.prototype, "description", 2);
Ke([
  y({ type: Boolean, reflect: !0 })
], _i.prototype, "isAgent", 2);
Ke([
  y()
], _i.prototype, "presence", 2);
_i = Ke([
  q("wy-avatar")
], _i);
var na;
let hr = (na = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.size = 32, this.uniqueId = `wy-avatar-${bc()}`;
  }
  render() {
    if (!this.user)
      return C;
    const t = this.size / 16, e = (this.members || []).filter((n) => {
      var a;
      return n.id !== ((a = this.user) == null ? void 0 : a.id);
    }).slice(0, 2).reverse(), i = (e == null ? void 0 : e.shift()) || this.user, r = (e == null ? void 0 : e.shift()) || (i !== this.user ? this.user : void 0);
    return [
      h`
        <style>
          :host {
            --wy-component-avatar-size: calc(${t} * var(--wy-size, 1rem));
          }

          .avatar-mask-bg {
            width: calc(${t * 2 / 3} * var(--wy-size, 1rem));
            height: calc(${t * 2 / 3} * var(--wy-size, 1rem));
            fill: white;
          }

          .avatar-mask {
            width: calc(${t * 2 / 3} * var(--wy-size, 1rem));
            height: calc(${t * 2 / 3} * var(--wy-size, 1rem));
            ry: var(--wy-avatar-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, 50%)));
            x: calc(${t / 3} * var(--wy-size, 1rem));
            y: calc(${t / 3} * var(--wy-size, 1rem));
            stroke: black;
            stroke-width: 4px;
            fill: black;
          }
        </style>
      `,
      h`
        <svg>
          <defs>
            <mask id="${this.uniqueId}-mask">
              <rect class="avatar-mask-bg" />
              <rect class="avatar-mask" />
            </mask>
          </defs>
        </svg>
      `,
      h`
        <wy-avatar
          part="wy-avatar-back"
          style="mask-image: url(#${this.uniqueId}-mask); -webkit-mask-image: url(#${this.uniqueId}-mask);"
          .src=${r == null ? void 0 : r.avatar_url}
          .name=${r == null ? void 0 : r.name}
          size=${this.size * 2 / 3}
        ></wy-avatar>
        <wy-avatar
          part="wy-avatar-front"
          .src=${i.avatar_url}
          .name=${i.name}
          .isAgent=${i.is_agent}
          size=${this.size * 2 / 3}
        ></wy-avatar>
      `
    ];
  }
}, o(na, "WyAvatarGroup"), na);
hr.styles = [
  ne,
  rp,
  yt
];
Ke([
  y({ type: Number })
], hr.prototype, "size", 2);
Ke([
  y({
    type: Array,
    attribute: !1
  })
], hr.prototype, "members", 2);
Ke([
  ee({ context: vd, subscribe: !0 }),
  H()
], hr.prototype, "user", 2);
hr = Ke([
  q("wy-avatar-group")
], hr);
var aa;
let Zl = (aa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  render() {
    return h`
      <slot></slot>
      ${this.description ? h`
        <div part="wy-avatar-description">${this.description}</div>
          ` : C}
      `;
  }
}, o(aa, "WyAvatarHeader"), aa);
Zl.styles = [ne, rp];
Ke([
  y()
], Zl.prototype, "description", 2);
Zl = Ke([
  q("wy-avatar-header")
], Zl);
const vb = dt`[part~=wy-progress]{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative;width:var(--wy-component-icon-width);height:var(--wy-component-icon-height)}[part~=wy-progress]:not([width]),[part~=wy-progress][width=\"24\"]{width:var(--wy-component-icon-width, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-progress]:not([height]),[part~=wy-progress][height=\"24\"]{height:var(--wy-component-icon-height, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-progress-padded]{margin:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-progress-reveal]{opacity:1;transition:width var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),height var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),margin var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) calc(var(--wy-transition-duration, .2s) + var(--wy-transition-reveal-delay, 1s))}@starting-style{[part~=wy-progress-reveal]{width:0;height:0;opacity:0;margin:0}}[part~=wy-progress][part~=wy-primary]{color:var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-progress-remaining]{fill:none;stroke:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}[part~=wy-progress-done]{fill:none;stroke:currentColor}[part~=wy-spinner]{align-self:center;justify-self:center;margin:auto}[part~=wy-spinner-padded]{margin:calc(1 * var(--wy-size, 1rem))}[part~=wy-spinner-overlay]{position:absolute;left:0;right:0;top:0;bottom:0;margin:auto}[part~=wy-spinner-reveal]{opacity:1;transition:width var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),height var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),margin var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) calc(var(--wy-transition-duration, .2s) + var(--wy-transition-reveal-delay, 1s))}@starting-style{[part~=wy-spinner-reveal]{width:0;height:0;opacity:0;margin:0}}[part~=wy-spinner-circle]{stroke-dasharray:1,100;stroke-dashoffset:0;transform-origin:center;fill:none!important}[part~=wy-spinner][part~=wy-spin]{animation:wy-rotate 1.4s linear infinite}[part~=wy-spinner-circle][part~=wy-spin]{animation:wy-dash 1.4s ease-in-out infinite,wy-color 2.8s ease-in-out infinite}@keyframes wy-rotate{to{transform:rotate(360deg)}}@keyframes wy-dash{0%{stroke-dasharray:1,100;stroke-dashoffset:0}50%{stroke-dasharray:44.5,100;stroke-dashoffset:-17.5}to{stroke-dasharray:44.5,100;stroke-dashoffset:-62}}@keyframes wy-color{0%,to{stroke:var(--wy-primary, var(--wy-primary-40, #006399))}25%{stroke:var(--wy-primary, var(--wy-primary-40, #006399))}50%{stroke:transparent}75%{stroke:var(--wy-primary, var(--wy-primary-40, #006399))}}`, gb = dt`[part~=wy-progress]{display:inline-flex;align-items:center;justify-content:center;flex:0 0 auto;position:relative;width:var(--wy-component-icon-width);height:var(--wy-component-icon-height)}[part~=wy-progress]:not([width]),[part~=wy-progress][width=\"24\"]{width:var(--wy-component-icon-width, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-progress]:not([height]),[part~=wy-progress][height=\"24\"]{height:var(--wy-component-icon-height, calc(1.5 * var(--wy-size, 1rem)))}[part~=wy-progress-padded]{margin:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem))}[part~=wy-progress-reveal]{opacity:1;transition:width var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),height var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),margin var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) calc(var(--wy-transition-duration, .2s) + var(--wy-transition-reveal-delay, 1s))}@starting-style{[part~=wy-progress-reveal]{width:0;height:0;opacity:0;margin:0}}[part~=wy-progress][part~=wy-primary]{color:var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-progress-remaining]{fill:none;stroke:var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb))}[part~=wy-progress-done]{fill:none;stroke:currentColor}`;
var bb = Object.defineProperty, xb = Object.getOwnPropertyDescriptor, _r = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? xb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && bb(t, e, r), r;
}, "__decorateClass$16"), oa;
let zi = (oa = class extends it {
  constructor() {
    super(...arguments), this.shadowParts = new W(this), this.size = 24, this.noSpin = !1, this.padded = !1, this.overlay = !1, this.progress = NaN, this.reveal = !1;
  }
  render() {
    const t = this.noSpin && this.progress && 100 - this.progress || void 0;
    if (t !== void 0) {
      const i = Math.PI * 20, r = {
        "wy-progress": !0,
        "wy-primary": !0,
        "wy-progress-padded": this.padded,
        "wy-progress-reveal": this.reveal
      };
      return h`<svg
        part="${Xt(r)}"
        viewBox="0 0 24 24"
        width=${this.size}
        height=${this.size}
        transform="rotate(-90)"
      >
        <circle
          part="wy-progress-circle wy-progress-remaining"
          cx="12"
          cy="12"
          r=${10}
          stroke-linecap="butt"
          stroke-width="2"
          fill="none"
          stroke="#eee"
        ></circle>
        <circle
          part="wy-progress-circle wy-progress-done"
          cx="12"
          cy="12"
          r=${10}
          stroke-dasharray=${i}
          stroke-dashoffset=${i * t / 100}
          stroke-linecap="butt"
          stroke-width="2"
          fill="none"
          stroke="currentColor"
          path-length="200"
        ></circle>
      </svg>`;
    } else {
      const e = {
        "wy-spinner": !0,
        "wy-spin": !this.noSpin,
        "wy-spinner-overlay": this.overlay,
        "wy-spinner-padded": this.padded,
        "wy-spinner-reveal": this.reveal
      }, i = {
        "wy-spinner-circle": !0,
        "wy-spin": !this.noSpin
      };
      return h`<svg
        part="${Xt(e)}"
        width=${this.size}
        height=${this.size}
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle
          part="${Xt(i)}"
          fill="none"
          cx="12"
          cy="12"
          r="11"
          stroke-linecap="butt"
          stroke-width="2"
        />
      </svg>`;
    }
  }
}, o(oa, "WySpinner"), oa);
zi.styles = [
  ne,
  vb,
  gb,
  yt
];
_r([
  y({ type: Number })
], zi.prototype, "size", 2);
_r([
  y({ type: Boolean })
], zi.prototype, "noSpin", 2);
_r([
  y({ type: Boolean })
], zi.prototype, "padded", 2);
_r([
  y({ type: Boolean })
], zi.prototype, "overlay", 2);
_r([
  y({ type: Number })
], zi.prototype, "progress", 2);
_r([
  y({ type: Boolean })
], zi.prototype, "reveal", 2);
zi = _r([
  q("wy-spinner")
], zi);
var $b = Object.defineProperty, Cb = Object.getOwnPropertyDescriptor, op = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Cb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && $b(t, e, r), r;
}, "__decorateClass$15"), ca;
let Ho = (ca = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.noNetwork = !1, this.handleUpdate = () => this.requestUpdate();
  }
  willUpdate(t) {
    if (super.willUpdate(t), t.has("weavy")) {
      const e = t.get("weavy");
      e && e !== this.weavy && e.removeNetworkListener(this.handleUpdate), this.weavy && e !== this.weavy && this.weavy.addNetworkListener(this.handleUpdate);
    }
  }
  render() {
    var t, e, i, r;
    return h`
      <div class="wy-empty">
        ${this.weavy && !this.noNetwork && ((t = this.weavy) == null ? void 0 : t.network.state) === "unreachable" ? h`
              <wy-icon-display>
                <wy-icon name="server-network-off"></wy-icon>
                <span slot="text">${$("The server is offline, try again in a few minutes...")}</span>
                <wy-spinner slot="meta" ?hidden=${!((e = this.weavy) != null && e.network.isPending)}></wy-spinner>
              </wy-icon-display>
            ` : !this.noNetwork && ((i = this.weavy) == null ? void 0 : i.network.state) === "offline" ? h`
              <wy-icon-display>
                <wy-icon name="wifi-off"></wy-icon>
                <span slot="text">${$("You are currently offline.")}</span>
                <wy-spinner slot="meta" ?hidden=${!((r = this.weavy) != null && r.network.isPending)}></wy-spinner>
              </wy-icon-display>
            ` : h`
              <slot>
                <wy-icon-display>
                  <wy-icon name="information"></wy-icon>
                  <slot slot="text" name="title">
                    <span>${$("Nothing to see here yet.")}</span>
                  </slot>
                </wy-icon-display>
              </slot>
            `}
      </div>
    `;
  }
  connectedCallback() {
    var t;
    super.connectedCallback(), (t = this.weavy) == null || t.addNetworkListener(this.handleUpdate);
  }
  disconnectedCallback() {
    var t;
    super.disconnectedCallback(), (t = this.weavy) == null || t.removeNetworkListener(this.handleUpdate);
  }
}, o(ca, "WyEmpty"), ca);
Ho.styles = [
  X,
  yt
];
op([
  ee({ context: le, subscribe: !0 }),
  H()
], Ho.prototype, "weavy", 2);
op([
  y({ type: Boolean })
], Ho.prototype, "noNetwork", 2);
Ho = op([
  q("wy-empty"),
  rt()
], Ho);
const Oy = /* @__PURE__ */ o((s, t, e) => {
  const i = /* @__PURE__ */ new Map();
  for (let r = t; r <= e; r++) i.set(s[r], r);
  return i;
}, "u"), Te = Fs(class extends kr {
  constructor(s) {
    if (super(s), s.type !== sc.CHILD) throw Error("repeat() can only be used in text expressions");
  }
  dt(s, t, e) {
    let i;
    e === void 0 ? e = t : t !== void 0 && (i = t);
    const r = [], n = [];
    let a = 0;
    for (const c of s) r[a] = i ? i(c, a) : a, n[a] = e(c, a), a++;
    return { values: n, keys: r };
  }
  render(s, t, e) {
    return this.dt(s, t, e).values;
  }
  update(s, [t, e, i]) {
    const r = $g(s), { values: n, keys: a } = this.dt(t, e, i);
    if (!Array.isArray(r)) return this.ut = a, n;
    const c = this.ut ?? (this.ut = []), l = [];
    let u, p, w = 0, b = r.length - 1, m = 0, g = n.length - 1;
    for (; w <= b && m <= g; ) if (r[w] === null) w++;
    else if (r[b] === null) b--;
    else if (c[w] === a[m]) l[m] = Bs(r[w], n[m]), w++, m++;
    else if (c[b] === a[g]) l[g] = Bs(r[b], n[g]), b--, g--;
    else if (c[w] === a[g]) l[g] = Bs(r[w], n[g]), uc(s, l[g + 1], r[w]), w++, g--;
    else if (c[b] === a[m]) l[m] = Bs(r[b], n[m]), uc(s, r[w], r[b]), b--, m++;
    else if (u === void 0 && (u = Oy(a, m, g), p = Oy(c, w, b)), u.has(c[w])) if (u.has(c[b])) {
      const x = p.get(a[m]), z = x !== void 0 ? r[x] : null;
      if (z === null) {
        const _ = uc(s, r[w]);
        Bs(_, n[m]), l[m] = _;
      } else l[m] = Bs(z, n[m]), uc(s, r[w], z), r[x] = null;
      m++;
    } else Oh(r[b]), b--;
    else Oh(r[w]), w++;
    for (; m <= g; ) {
      const x = uc(s, l[g + 1]);
      Bs(x, n[m]), l[m++] = x;
    }
    for (; w <= b; ) {
      const x = r[w++];
      x !== null && Oh(x);
    }
    return this.ut = a, cf(s, l), ll;
  }
});
const Rl = Fs(class extends kr {
  constructor() {
    super(...arguments), this.key = C;
  }
  render(s, t) {
    return this.key = s, t;
  }
  update(s, [t, e]) {
    return t !== this.key && (cf(s), this.key = t), e;
  }
});
function Cs(s) {
  s.stopPropagation();
}
o(Cs, "inputConsume");
function kb(s) {
  s.key === "Escape" && (s.preventDefault(), s.stopPropagation(), s.target.value = "", s.target.dispatchEvent(new InputEvent("input", { data: "", inputType: "deleteContent" })));
}
o(kb, "inputClearOnEscape");
function Yl(s) {
  s.key === "Escape" && (s.preventDefault(), s.stopPropagation(), s.target.blur(), s.target.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
}
o(Yl, "inputBlurOnEscape");
function _b(s) {
  s.key === "Enter" && s.target.blur();
}
o(_b, "inputBlurOnEnter");
function zb(s) {
  s.target.value ? kb(s) : Yl(s);
}
o(zb, "inputClearAndBlurOnEscape");
function $f(s) {
  s.key === "Enter" && (s.preventDefault(), s.stopPropagation(), s.target.click());
}
o($f, "clickOnEnter");
function Mb(s) {
  s.key === " " && (s.preventDefault(), s.stopPropagation());
}
o(Mb, "consumeOnSpace");
function ye(s) {
  $f(s), Mb(s);
}
o(ye, "clickOnEnterAndConsumeOnSpace");
function Fe(s) {
  s.key === " " && (s.preventDefault(), s.stopPropagation(), s.target.click());
}
o(Fe, "clickOnSpace");
function cp(s) {
  $f(s), Fe(s);
}
o(cp, "clickOnEnterAndSpace");
const Mt = Fs(class extends kr {
  constructor(s) {
    var t;
    if (super(s), s.type !== sc.ATTRIBUTE || s.name !== "class" || ((t = s.strings) == null ? void 0 : t.length) > 2) throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.");
  }
  render(s) {
    return " " + Object.keys(s).filter((t) => s[t]).join(" ") + " ";
  }
  update(s, [t]) {
    var i, r;
    if (this.st === void 0) {
      this.st = /* @__PURE__ */ new Set(), s.strings !== void 0 && (this.nt = new Set(s.strings.join(" ").split(/\s/).filter((n) => n !== "")));
      for (const n in t) t[n] && !((i = this.nt) != null && i.has(n)) && this.st.add(n);
      return this.render(t);
    }
    const e = s.element.classList;
    for (const n of this.st) n in t || (e.remove(n), this.st.delete(n));
    for (const n in t) {
      const a = !!t[n];
      a === this.st.has(n) || (r = this.nt) != null && r.has(n) || (a ? (e.add(n), this.st.add(n)) : (e.remove(n), this.st.delete(n)));
    }
    return ll;
  }
});
function Cf(s) {
  const t = [s];
  for (; s && s.parent; )
    s = s.parent, t.push(s);
  return t;
}
o(Cf, "getEntityChain");
function kf(s, t, e) {
  return s.type === t && (!e || s.id === e.id);
}
o(kf, "isEntityMatch");
function kd(s, t, e) {
  return Cf(s).some((r) => r && kf(r, t, e));
}
o(kd, "isEntityChainMatch");
function _f(s, t, e) {
  return Cf(s).find((r) => r && kf(r, t, e));
}
o(_f, "getEntityChainMatch");
function zf(s, t, e, i) {
  const r = _f(s, i);
  return r && r.parent ? kd(r.parent, t, e) : !1;
}
o(zf, "hasEntityChildType");
async function Mf(s, t, e) {
  var n, a, c;
  let i;
  if (t && ((n = e.link.app) != null && n.id)) {
    const l = await t.fetch(`/api/apps/${e.link.app.id}`);
    l.ok && (i = (await l.json()).metadata);
  }
  const r = new CustomEvent("wy-link", {
    bubbles: !0,
    composed: !0,
    cancelable: !0,
    detail: {
      link: {
        ...e.link,
        agent: Pf(e)
      },
      app_type: ((a = e.link.app) == null ? void 0 : a.type) && nf.get((c = e.link.app) == null ? void 0 : c.type) || Je.Unknown,
      source_name: i == null ? void 0 : i.source_name,
      source_url: i == null ? void 0 : i.source_url,
      source_data: i == null ? void 0 : i.source_data
    }
  });
  return s.dispatchEvent(r);
}
o(Mf, "dispatchLinkEvent");
function Pf(s) {
  var t, e;
  return (t = s.link.app) != null && t.type && Wl.has((e = s.link.app) == null ? void 0 : e.type) && s.actor.is_agent ? s.actor.uid : void 0;
}
o(Pf, "getAgentName");
function Sf(s) {
  const t = s.args;
  switch (s.template) {
    case "**{0}** added *{1}* to **{2}**": {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} added ${i} to ${r}`),
        titleHtml: $(h`<strong>${e}</strong> added <em>${i}</em> to <strong>${r}</strong>`)
      };
    }
    case "**{0}** edited *{1}*": {
      const [e, i] = t;
      return {
        title: $(vt`${e} edited ${i}`),
        titleHtml: $(h`<strong>${e}</strong> edited <em>${i}</em>`)
      };
    }
    case '**{0}** commented on *{1}*: "{2}"': {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} commented on ${i}`),
        titleHtml: $(h`<strong>${e}</strong> commented on <em>${i}</em>`),
        detail: r
      };
    }
    case '**{0}** commented on **{1}**: "{2}"': {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} commented on ${i}`),
        titleHtml: $(h`<strong>${e}</strong> commented on <strong>${i}</strong>`),
        detail: r
      };
    }
    case '**{0}** replied to your post: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} replied to your post`),
        titleHtml: $(h`<strong>${e}</strong> replied to your post`),
        detail: i
      };
    }
    case '**{0}** replied to a post: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} replied to a post`),
        titleHtml: $(h`<strong>${e}</strong> replied to a post`),
        detail: i
      };
    }
    case '**{0}** mentioned you in a comment: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} mentioned you in a comment`),
        titleHtml: $(h`<strong>${e}</strong> mentioned you in a comment`),
        detail: i
      };
    }
    case '**{0}** posted in **{1}**: "{2}"': {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} posted in ${i}`),
        titleHtml: $(h`<strong>${e}</strong> posted in <strong>${i}</strong>`),
        detail: r
      };
    }
    case '**{0}** mentioned you in a post: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} mentioned you in a post`),
        titleHtml: $(h`<strong>${e}</strong> mentioned you in a post`),
        detail: i
      };
    }
    case 'New message from **{0}**: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`New message from ${e}`),
        titleHtml: $(h`New message from <strong>${e}</strong>`),
        detail: i
      };
    }
    case '**{0}** sent a message in **{1}**: "{2}"': {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} sent a message in ${i}`),
        titleHtml: $(h`<strong>${e}</strong> sent a message in <strong>${i}</strong>`),
        detail: r
      };
    }
    case '**{0}** mentioned you in a message: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} mentioned you in a message`),
        titleHtml: $(h`<strong>${e}</strong> mentioned you in a message`),
        detail: i
      };
    }
    case '**{0}** edited a post: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} edited a post`),
        titleHtml: $(h`<strong>${e}</strong> edited a post`),
        detail: i
      };
    }
    case "**{0}** liked *{1}*": {
      const [e, i] = t;
      return {
        title: $(vt`${e} liked ${i}`),
        titleHtml: $(h`<strong>${e}</strong> liked <em>${i}</em>`)
      };
    }
    case "**{0}** reacted {2} to *{1}*": {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} reacted ${i} to ${r}`),
        titleHtml: $(h`<strong>${e}</strong> reacted ${i} to <em>${r}</em>`)
      };
    }
    case '**{0}** liked your comment: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} liked your comment`),
        titleHtml: $(h`<strong>${e}</strong> liked your comment`),
        detail: i
      };
    }
    case '**{0}** reacted {1} to your comment: "{2}"': {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} reacted ${i} to your comment`),
        titleHtml: $(h`<strong>${e}</strong> reacted ${i} to your comment`),
        detail: r
      };
    }
    case '**{0}** liked your message: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} liked your message`),
        titleHtml: $(h`<strong>${e}</strong> liked your message`),
        detail: i
      };
    }
    case '**{0}** reacted {1} to your message: "{2}"': {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} reacted ${i} to your message`),
        titleHtml: $(h`<strong>${e}</strong> reacted ${i} to your message`),
        detail: r
      };
    }
    case '**{0}** liked your post: "{1}"': {
      const [e, i] = t;
      return {
        title: $(vt`${e} liked your post`),
        titleHtml: $(h`<strong>${e}</strong> liked your post`),
        detail: i
      };
    }
    case '**{0}** reacted {1} to your post: "{2}"': {
      const [e, i, r] = t;
      return {
        title: $(vt`${e} reacted ${i} to your post`),
        titleHtml: $(h`<strong>${e}</strong> reacted ${i} to your post`),
        detail: r
      };
    }
    case "**{0}** voted on your poll": {
      const [e] = t;
      return {
        title: $(vt`${e} voted on your poll`),
        titleHtml: $(h`<strong>${e}</strong> voted on your poll`)
      };
    }
    case "**{0}** and **{1}** voted on your poll": {
      const [e, i] = t;
      return {
        title: $(vt`${e} and ${i} voted on your poll`),
        titleHtml: $(h`<strong>${e}</strong> and <strong>${i}</strong> voted on your poll`)
      };
    }
    case "**{0}**, **{1}** and **{2}** voted on your poll": {
      const [e, i, r] = t;
      return {
        title: $(vt`${e}, ${i} and ${r} voted on your poll`),
        titleHtml: $(
          h`<strong>${e}</strong>, <strong>${i}</strong> and <strong>${r}</strong> voted on your poll`
        )
      };
    }
    case "**{0}** and {1} others voted on your poll": {
      const [e, i] = t;
      return {
        title: $(vt`${e} and ${i} others voted on your poll`),
        titleHtml: $(h`<strong>${e}</strong> and ${i} others voted on your poll`)
      };
    }
    default:
      return console.error(`Notification template not found! '${s.template}'`), { title: "", titleHtml: C };
  }
}
o(Sf, "getNotificationText");
const Af = dt`[part~=wy-button]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399));color:var(--wy-component-color);background:var(--wy-component-background-color, transparent);height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));font-family:var(--wy-button-font-family, var(--wy-font-family, unset)),inherit;font-size:var(--wy-button-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-button-font-weight, var(--wy-font-weight, unset));line-height:var(--wy-button-line-height, var(--wy-line-height, 1.5));text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none;border:var(--wy-button-border-width, var(--wy-border-outline, 0)) solid var(--wy-outline, var(--wy-neutral-variant-50, #72777e));border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));display:inline-flex;align-items:center;justify-content:center;gap:var(--wy-button-gap, var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))))));position:relative}[part~=wy-button][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .8);padding:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .25) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .5)}[part~=wy-button]:disabled{opacity:var(--wy-opacity-disabled, 38%);cursor:unset;pointer-events:none}[part~=wy-button-state-layer]>*{z-index:3}[part~=wy-button-state-layer]:before{content:\"\";z-index:2;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-button-state-layer]:hover:before{opacity:8%}[part~=wy-button-state-layer]:focus:before,[part~=wy-button-state-layer]:active:before,[part~=wy-button-state-layer][part~=wy-active]:before{opacity:12%}[part~=wy-button-icon]{--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));width:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));line-height:1;align-items:center;justify-content:center}[part~=wy-button-icon][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);width:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);padding:0;margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5)}[part~=wy-button-icon][part~=wy-button-sm][part~=wy-button-state-layer]:before{margin:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.1)}[part~=wy-button-icon][part~=wy-active]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-button-icon-inline]{height:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));width:auto;min-width:var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));background:var(--wy-component-background-color);color:currentColor;display:flex;padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))}[part~=wy-button-icon-inline][part~=wy-button-sm]{height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);min-width:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6);padding:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .25);margin:calc(var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * .5)}[part~=wy-button-icon-inline][part~=wy-button-sm][part~=wy-button-state-layer]:before{margin:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.1)}[part~=wy-button-inline]{border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));padding:calc(.5 * var(--wy-size, 1rem)) calc(.75 * var(--wy-size, 1rem));margin-inline:calc(-.25 * var(--wy-size, 1rem))}[part~=wy-button-primary]{--wy-component-background-color: var(--wy-primary, var(--wy-primary-40, #006399));--wy-component-color: var(--wy-on-primary, var(--wy-white, #ffffff))}[part~=wy-button-variant]{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}[part~=wy-button-primary-text]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399))}[part~=wy-button-inherit-color]{--wy-component-color: currentColor}[part~=wy-button-no-color]{--wy-component-color: unset}[part=wy-button-link]{padding:0;color:var(--wy-link-color, var(--wy-primary, var(--wy-primary-40, #006399)));text-decoration:var(--wy-link-decoration, none)}[part=wy-button-link]:hover,[part=wy-button-link]:focus{text-decoration:var(--wy-link-hover-decoration, unset)}[part~=wy-buttons]{display:flex;align-items:center;flex-wrap:wrap;gap:calc(.5 * var(--wy-size, 1rem))}[part~=wy-buttons-reverse]{flex-direction:row-reverse}[part~=wy-buttons-floating]{position:sticky;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) 0;top:0;height:0;margin-bottom:calc(-1 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))));z-index:1030;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}[part~=wy-buttons-sticky]{position:sticky;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));top:0;z-index:1030;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}`, Ef = dt`.wy-scroll-y{scroll-padding-top:var(--wy-scrollbar-adjust-top, 0);scroll-padding-bottom:var(--wy-scrollbar-adjust-bottom, 0)}.wy-scroll-y{overflow-y:auto;max-height:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-y:not(body){-webkit-overflow-scrolling:touch}.wy-scroll-y:not(.wy-scroll-x){overflow-x:hidden;touch-action:pan-y}.wy-scroll-x{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}.wy-scroll-x:not(.wy-scroll-y){overflow-y:hidden;touch-action:pan-x}[part~=wy-tabs]{display:flex;overflow-y:hidden;padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));flex:1 1 auto}[part~=wy-tabs]{overflow-x:auto;max-width:100%;overflow-anchor:none;touch-action:pan-y,pan-x;will-change:scroll-position,opacity;backface-visibility:hidden}[part~=wy-tabs]{scrollbar-width:thin;scrollbar-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce)) transparent}[part~=wy-tabs]::-webkit-scrollbar{height:.375rem;width:.375rem;background:transparent;z-index:999}[part~=wy-tabs]::-webkit-scrollbar-track{background:transparent}[part~=wy-tabs]::-webkit-scrollbar-thumb{background-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));opacity:75%;border:0 solid transparent;border-radius:0;background-clip:padding-box}[part~=wy-tabs]::-webkit-scrollbar-thumb:hover{background-color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:75%}[part~=wy-tabs]::-webkit-scrollbar-thumb:window-inactive{background-color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:50%}[part~=wy-tab]{--wy-component-color: var(--wy-primary, var(--wy-primary-40, #006399));--wy-component-background-color: transparent;color:var(--wy-component-color);background:var(--wy-component-background-color);border:none;border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));display:inline-flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));position:relative;text-align:center;text-decoration:none;cursor:pointer;-webkit-user-select:none;user-select:none}[part~=wy-tab] .wy-tab-icon{position:relative;padding:calc(.25 * var(--wy-size, 1rem)) calc(1 * var(--wy-size, 1rem));border-radius:var(--wy-button-border-radius, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))));display:inline-flex}[part~=wy-tab] .wy-tab-icon:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-tab]:hover .wy-tab-icon:before{opacity:8%}[part~=wy-tab]:focus .wy-tab-icon:before,[part~=wy-tab]:active .wy-tab-icon:before,[part~=wy-tab].wy-active .wy-tab-icon:before{opacity:12%}[part~=wy-tab] .wy-tab-label{font-family:var(--wy-button-font-family, var(--wy-font-family, unset)),inherit;line-height:var(--wy-button-line-height, var(--wy-line-height, 1.5));font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));font-weight:var(--wy-font-weight, unset)}[part~=wy-button-state-layer][part~=wy-button-sm][part~=wy-tab-sm]{padding:var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .5);margin:var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) auto;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));height:calc(var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * .6)}[part~=wy-button-state-layer][part~=wy-button-sm][part~=wy-tab-sm]:before{margin:calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * -.25) calc(var(--wy-button-padding-x, calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) * 0)}`;
var Pb = Object.defineProperty, Sb = Object.getOwnPropertyDescriptor, yi = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Sb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Pb(t, e, r), r;
}, "__decorateClass$14"), la;
let Mi = (la = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this, !1), this.kind = "filled", this.active = !1, this.small = !1, this.disabled = !1;
  }
  render() {
    const t = {
      "wy-button": !0,
      "wy-active": !!this.active,
      "wy-disabled": !!this.disabled,
      "wy-button-inline": this.kind === "inline",
      "wy-button-icon": this.kind === "icon",
      "wy-button-icon-inline": this.kind === "icon-inline",
      "wy-button-link": this.kind === "link",
      "wy-button-primary": this.color === "primary",
      "wy-button-primary-text": this.color === "primary-text",
      "wy-button-inherit-color": this.color === "inherit",
      "wy-button-no-color": this.color === "none",
      "wy-button-variant": this.color === "variant",
      "wy-button-type-submit": this.type === "submit",
      "wy-button-type-reset": this.type === "reset",
      "wy-button-state-layer": this.kind !== "link" && !this.disabled,
      "wy-button-sm": !!this.small,
      "wy-tab": this.kind === "tab",
      "wy-tab-sm": this.kind === "tab" && !!this.small
    };
    return h`
      <button part=${Xt(t)} type=${lt(this.type)} ?disabled=${this.disabled}>
        <slot></slot>
      </button>
    `;
  }
}, o(la, "WyButton"), la);
Mi.styles = [
  ne,
  Af,
  Ef,
  yt,
  dt`
      :host {
        position: relative;
      }
    `
];
yi([
  y()
], Mi.prototype, "type", 2);
yi([
  y()
], Mi.prototype, "kind", 2);
yi([
  y({ type: Boolean })
], Mi.prototype, "active", 2);
yi([
  y()
], Mi.prototype, "color", 2);
yi([
  y({ type: Boolean })
], Mi.prototype, "small", 2);
yi([
  y({ type: Boolean, reflect: !0 })
], Mi.prototype, "disabled", 2);
Mi = yi([
  q("wy-button")
], Mi);
var da;
let ur = (da = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.tabs = !1, this.position = "normal", this.reverse = !1;
  }
  render() {
    const t = {
      "wy-buttons": !this.tabs,
      "wy-buttons-reverse": this.reverse,
      "wy-tabs": this.tabs,
      "wy-buttons-floating": this.position === "floating",
      "wy-buttons-sticky": this.position === "sticky"
    };
    return h`<div part=${Xt(t)}><slot></slot></div>`;
  }
}, o(da, "WyButtons"), da);
ur.styles = [
  ne,
  Af,
  Ef,
  yt
];
yi([
  y({ type: Boolean })
], ur.prototype, "tabs", 2);
yi([
  y({ type: String })
], ur.prototype, "position", 2);
yi([
  y({ type: Boolean })
], ur.prototype, "reverse", 2);
ur = yi([
  q("wy-buttons")
], ur);
var Ab = Object.defineProperty, Eb = Object.getOwnPropertyDescriptor, lp = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Eb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Ab(t, e, r), r;
}, "__decorateClass$13"), ha;
let Vo = (ha = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.enableSwap = !1;
  }
  createRenderRoot() {
    return this;
  }
  dispatchRemove(t) {
    const e = new CustomEvent("embed-remove", { detail: { id: t } });
    return this.dispatchEvent(e);
  }
  dispatchSwap() {
    const t = new CustomEvent("embed-swap", { detail: {} });
    return this.dispatchEvent(t);
  }
  render() {
    const t = this.embed.type === "photo" && this.embed.provider_name.toLocaleLowerCase() === "giphy", e = !this.embed.html && !t;
    return h`
      <div class="wy-embed-actions">
        ${this.enableSwap ? h`<wy-button kind="icon" @click=${() => this.dispatchSwap()}
              ><wy-icon name="swap-horizontal"></wy-icon
            ></wy-button>` : h`<wy-button class="wy-embed-cycle"></wy-button>`}

        <wy-button kind="icon" @click=${() => this.dispatchRemove(this.embed.id)}
          ><wy-icon name="close-circle"></wy-icon
        ></wy-button>
      </div>

      ${this.embed.type === "audio" ? h`<div class="wy-embed-audio"></div>` : C}
      ${this.embed.type === "video" && this.embed.html ? h`<div class="wy-embed-video"><div>${dr(this.embed.html)}</div></div>` : C}
      ${this.embed.type === "rich" ? h`<div class="wy-embed-rich"></div>` : C}
      ${this.embed.type === "photo" && this.embed.thumbnail_url ? h`
            <div
              class=${Mt({
      "wy-embed-photo": !0,
      "wy-embed-photo-sm": (this.embed.thumbnail_width || 0) < 250
    })}>
              <a href=${this.embed.original_url} target="_blank">
                <img
                  src=${this.embed.thumbnail_url}
                  width=${lt(this.embed.thumbnail_width)}
                  height=${lt(this.embed.thumbnail_height)}
                  alt="" />
              </a>
            </div>
          ` : C}
      ${this.embed.type !== "audio" && this.embed.type !== "video" && this.embed.type !== "rich" && this.embed.type !== "photo" && this.embed.thumbnail_url ? h`
            <div
              class=${Mt({
      "wy-embed-photo": !0,
      "wy-embed-photo-sm": (this.embed.thumbnail_width || 0) < 250
    })}>
              <a href=${this.embed.original_url} target="_blank">
                <img
                  src=${this.embed.thumbnail_url}
                  width=${lt(this.embed.thumbnail_width)}
                  height=${lt(this.embed.thumbnail_height)}
                  alt="" />
              </a>
            </div>
          ` : C}
      ${e ? h` <div class="wy-embed-caption">
            <a class="wy-embed-link" href=${this.embed.original_url} target="_blank">${this.embed.host}</a>
            ${this.embed.title ? h`<div class="wy-embed-title">${this.embed.title}</div>` : C}
            ${this.embed.description ? h`<div class="wy-embed-description">${this.embed.description}</div>` : C}
          </div>` : C}
    `;
  }
}, o(ha, "WyEmbed"), ha);
Vo.styles = X;
lp([
  y({ attribute: !1 })
], Vo.prototype, "embed", 2);
lp([
  y({ type: Boolean, attribute: !1 })
], Vo.prototype, "enableSwap", 2);
Vo = lp([
  q("wy-embed")
], Vo);
var Ob = Object.defineProperty, Rb = Object.getOwnPropertyDescriptor, rc = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Rb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Ob(t, e, r), r;
}, "__decorateClass$12"), ua;
let Ki = (ua = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.name = "", this.previewUrl = "", this.url = "", this.size = 0;
  }
  render() {
    const t = this.size && this.size > 0 ? ic(this.size) : null, e = Qe(this.name), { icon: i } = Ei(this.name), r = hl(this.name), n = Ls(this.provider);
    return h`
      <a href=${this.previewUrl || this.url} class="wy-item wy-list-item-lg" target="_blank" title=${this.name}>
        <wy-icon name=${i} .overlayName=${n} size="48" kind=${r} ext=${e}></wy-icon>
        <div class="wy-item-body ">
          <div class="wy-item-title">${this.name}</div>
          ${t ? h`<div class="wy-item-text" title="${t}">${t}</div>` : ""}
        </div>
      </a>
    `;
  }
}, o(ua, "WyAttachment"), ua);
Ki.styles = X;
rc([
  y()
], Ki.prototype, "name", 2);
rc([
  y()
], Ki.prototype, "previewUrl", 2);
rc([
  y()
], Ki.prototype, "url", 2);
rc([
  y()
], Ki.prototype, "provider", 2);
rc([
  y({ type: Number })
], Ki.prototype, "size", 2);
Ki = rc([
  q("wy-attachment")
], Ki);
const Of = "important", Lb = " !" + Of, kc = Fs(class extends kr {
  constructor(s) {
    var t;
    if (super(s), s.type !== sc.ATTRIBUTE || s.name !== "style" || ((t = s.strings) == null ? void 0 : t.length) > 2) throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");
  }
  render(s) {
    return Object.keys(s).reduce((t, e) => {
      const i = s[e];
      return i == null ? t : t + `${e = e.includes("-") ? e : e.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, "-$&").toLowerCase()}:${i};`;
    }, "");
  }
  update(s, [t]) {
    const { style: e } = s.element;
    if (this.ft === void 0) return this.ft = new Set(Object.keys(t)), this.render(t);
    for (const i of this.ft) t[i] == null && (this.ft.delete(i), i.includes("-") ? e.removeProperty(i) : e[i] = null);
    for (const i in t) {
      const r = t[i];
      if (r != null) {
        this.ft.add(i);
        const n = typeof r == "string" && r.endsWith(Lb);
        i.includes("-") || n ? e.setProperty(i, n ? r.slice(0, -11) : r, n ? Of : "") : e[i] = r;
      }
    }
    return ll;
  }
});
function Xl(s) {
  const t = s;
  t && (t.complete && t.naturalHeight !== 0 ? t.classList.contains("wy-loading") ? t.decode().then(() => {
    t.classList.add("wy-loaded"), t.part.add("wy-loaded");
  }) : (t.classList.add("wy-loading", "wy-loaded"), t.part.add("wy-loading", "wy-loaded")) : (t.classList.add("wy-loading"), t.part.add("wy-loading")));
}
o(Xl, "checkImageLoad");
function Jl(s) {
  const t = s.target;
  t.tagName === "IMG" && t.classList.contains("wy-loading") && !t.classList.contains("wy-loaded") && (t.classList.add("wy-loaded"), t.part.add("wy-loaded"));
}
o(Jl, "imageLoaded");
const Ib = dt`[part~=wy-image]{padding:0;width:50%;position:relative;flex:auto;background-color:inherit;background-clip:content-box}[part~=wy-image-full-width]{flex-basis:100%!important}[part~=wy-image-grid]{display:flex;flex-wrap:wrap;justify-content:space-evenly;position:relative;overflow:hidden;column-gap:1px;row-gap:1px}[part~=wy-image-area]{display:block;height:100%;cursor:pointer}[part~=wy-image-content]{position:absolute;height:100%;width:100%;object-fit:contain}[part~=wy-image-content][part~=wy-loading]{transition:opacity .15s ease-out;opacity:0}[part~=wy-image-content][part~=wy-loading][part~=wy-loaded]{opacity:1;transition:opacity .15s ease-out}[part~=wy-image-content][part~=wy-loading][part~=wy-loaded]~[part~=wy-image-preview]{transition-delay:.15s;opacity:0}[part~=wy-image-grid-more]{position:absolute;line-height:100%;color:var(--wy-white, #ffffff);top:0;left:0;bottom:0;right:0;display:flex;align-items:center;justify-content:center;font-size:calc(1.5 * var(--wy-size, 1rem));background:rgba(0,0,0,var(--wy-opacity-disabled, 38%))}`;
var Tb = Object.defineProperty, Fb = Object.getOwnPropertyDescriptor, dp = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Fb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Tb(t, e, r), r;
}, "__decorateClass$11"), pa;
let Bo = (pa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.images = [], this.limit = 3;
  }
  dispatchFileOpen(t, e) {
    if (t.preventDefault(), !e.is_trashed) {
      const i = new CustomEvent("file-open", { detail: { fileId: e.id } });
      this.dispatchEvent(i);
    }
  }
  render() {
    const t = this.images.length > this.limit ? this.images.length - this.limit : 0, e = this.images.slice(0, this.limit);
    return h`
      <div part="wy-image-grid">
        ${e.map((i, r) => {
      const n = i.width && i.height ? i.width / i.height : 1, a = 64, c = 2, l = n.toPrecision(5), u = (n * a).toPrecision(5) + "px", p = (100 / n).toPrecision(5) + "%", w = i.width + "px", b = i.width && i.width > 0 ? c * i.width + "px" : "none", m = this.images.length !== 2 && r === 0;
      return i.preview_url ? h`
            <a
              href="#"
              @click=${(g) => {
        !g.defaultPrevented && this.dispatchFileOpen(g, i);
      }}
              part=${Xt({
        "wy-image": !0,
        "wy-image-full-width": m
      })}
              style=${kc({
        flexBasis: u,
        flexGrow: l,
        flexShrink: l,
        width: w,
        maxWidth: b
      })}>
              <div part="wy-image-area" style=${kc({ paddingBottom: p })}>
                <img
                  part="wy-image-content"
                  src=${i.preview_url}
                  ${Q(Xl)}
                  @load=${Jl}
                  alt=""
                  loading="lazy"
                  decoding="async" />
                ${r === e.length - 1 && t ? h`<span part="wy-image-grid-more">+${t}</span>` : ""}
              </div>
            </a>
          ` : C;
    })}
      </div>
    `;
  }
}, o(pa, "WyImageGrid"), pa);
Bo.styles = [Ib, yt];
dp([
  y({ attribute: !1 })
], Bo.prototype, "images", 2);
dp([
  y({ type: Number })
], Bo.prototype, "limit", 2);
Bo = dp([
  q("wy-image-grid")
], Bo);
var Db = Object.defineProperty, Hb = Object.getOwnPropertyDescriptor, Rf = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Hb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Db(t, e, r), r;
}, "__decorateClass$10"), ya;
let td = (ya = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.files = [];
  }
  dispatchFileOpen(t, e) {
    t.preventDefault();
    const i = new CustomEvent("file-open", { detail: { fileId: e.id } });
    return this.dispatchEvent(i);
  }
  render() {
    var t;
    return ((t = this.settings) == null ? void 0 : t.annotations) === "none" ? C : h`
      <div part="wy-annotations">
        ${this.files.map((e) => {
      const i = e.size && e.size > 0 ? ic(e.size) : null, r = Qe(e.name), { icon: n } = Ei(e.name), a = hl(e.name), c = Ls(e.provider), l = `${e.name}${i ? ` • ${i}` : ""}`;
      return h`
            <wy-button
              part="wy-annotation"
              @click=${(u) => {
        !u.defaultPrevented && !e.is_trashed && this.dispatchFileOpen(u, e);
      }}
              kind="filled"
              small
              title=${l}
            >
              <wy-icon part="wy-annotation-icon" name=${n} .overlayName=${c} size="24" kind=${a} ext=${r}></wy-icon>
              <span part="wy-annotation-text">${e.name}</span>
            </wy-button>
          `;
    })}
      </div>
    `;
  }
}, o(ya, "WyAttachmentsList"), ya);
td.styles = [yt];
Rf([
  y({ attribute: !1 })
], td.prototype, "files", 2);
td = Rf([
  q("wy-annotations-list")
], td);
var Vb = Object.defineProperty, Bb = Object.getOwnPropertyDescriptor, Lf = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Bb(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Vb(t, e, r), r;
}, "__decorateClass$$"), wa;
let _c = (wa = class extends it {
  constructor() {
    super(...arguments), this.files = [];
  }
  //protected exportParts = new ShadowPartsController(this);
  createRenderRoot() {
    return this;
  }
  dispatchFileOpen(t, e) {
    t.preventDefault();
    const i = new CustomEvent("file-open", { detail: { fileId: e.id } });
    return this.dispatchEvent(i);
  }
  render() {
    return h`
      <div class="wy-list wy-list-bordered">
        ${this.files.map((t) => {
      const e = t.size && t.size > 0 ? ic(t.size) : null, i = Qe(t.name), { icon: r } = Ei(t.name), n = hl(t.name), a = Ls(t.provider);
      return h`
            <a
              @click=${(c) => {
        !c.defaultPrevented && !t.is_trashed && this.dispatchFileOpen(c, t);
      }}
              class="wy-item wy-list-item"
              href="${lt(t.download_url)}"
              title=${t.name}
            >
              <wy-icon name=${r} .overlayName=${a} size="48" kind=${n} ext=${i}></wy-icon>
              <div class="wy-item-body ">
                <div class="wy-item-title">${t.name}</div>
                ${e ? h`<div class="wy-item-text" title="${e}">${e}</div>` : ""}
              </div>
            </a>
          `;
    })}
      </div>
    `;
  }
}, o(wa, "WyAttachmentsList"), wa);
_c.styles = X;
Lf([
  y({ attribute: !1 })
], _c.prototype, "files", 2);
_c = Lf([
  q("wy-attachments-list")
], _c);
const ed = Math.min, nr = Math.max, id = Math.round, Sl = Math.floor, ki = /* @__PURE__ */ o((s) => ({
  x: s,
  y: s
}), "createCoords"), Ub = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
}, qb = {
  start: "end",
  end: "start"
};
function Ry(s, t, e) {
  return nr(s, ed(t, e));
}
o(Ry, "clamp");
function _d(s, t) {
  return typeof s == "function" ? s(t) : s;
}
o(_d, "evaluate");
function pr(s) {
  return s.split("-")[0];
}
o(pr, "getSide");
function zd(s) {
  return s.split("-")[1];
}
o(zd, "getAlignment");
function If(s) {
  return s === "x" ? "y" : "x";
}
o(If, "getOppositeAxis");
function Tf(s) {
  return s === "y" ? "height" : "width";
}
o(Tf, "getAxisLength");
function bs(s) {
  return ["top", "bottom"].includes(pr(s)) ? "y" : "x";
}
o(bs, "getSideAxis");
function Ff(s) {
  return If(bs(s));
}
o(Ff, "getAlignmentAxis");
function Nb(s, t, e) {
  e === void 0 && (e = !1);
  const i = zd(s), r = Ff(s), n = Tf(r);
  let a = r === "x" ? i === (e ? "end" : "start") ? "right" : "left" : i === "start" ? "bottom" : "top";
  return t.reference[n] > t.floating[n] && (a = sd(a)), [a, sd(a)];
}
o(Nb, "getAlignmentSides");
function jb(s) {
  const t = sd(s);
  return [ku(s), t, ku(t)];
}
o(jb, "getExpandedPlacements");
function ku(s) {
  return s.replace(/start|end/g, (t) => qb[t]);
}
o(ku, "getOppositeAlignmentPlacement");
function Wb(s, t, e) {
  const i = ["left", "right"], r = ["right", "left"], n = ["top", "bottom"], a = ["bottom", "top"];
  switch (s) {
    case "top":
    case "bottom":
      return e ? t ? r : i : t ? i : r;
    case "left":
    case "right":
      return t ? n : a;
    default:
      return [];
  }
}
o(Wb, "getSideList");
function Qb(s, t, e, i) {
  const r = zd(s);
  let n = Wb(pr(s), e === "start", i);
  return r && (n = n.map((a) => a + "-" + r), t && (n = n.concat(n.map(ku)))), n;
}
o(Qb, "getOppositeAxisPlacements");
function sd(s) {
  return s.replace(/left|right|bottom|top/g, (t) => Ub[t]);
}
o(sd, "getOppositePlacement");
function Kb(s) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...s
  };
}
o(Kb, "expandPaddingObject");
function Gb(s) {
  return typeof s != "number" ? Kb(s) : {
    top: s,
    right: s,
    bottom: s,
    left: s
  };
}
o(Gb, "getPaddingObject");
function rd(s) {
  const {
    x: t,
    y: e,
    width: i,
    height: r
  } = s;
  return {
    width: i,
    height: r,
    top: e,
    left: t,
    right: t + i,
    bottom: e + r,
    x: t,
    y: e
  };
}
o(rd, "rectToClientRect");
function Ly(s, t, e) {
  let {
    reference: i,
    floating: r
  } = s;
  const n = bs(t), a = Ff(t), c = Tf(a), l = pr(t), u = n === "y", p = i.x + i.width / 2 - r.width / 2, w = i.y + i.height / 2 - r.height / 2, b = i[c] / 2 - r[c] / 2;
  let m;
  switch (l) {
    case "top":
      m = {
        x: p,
        y: i.y - r.height
      };
      break;
    case "bottom":
      m = {
        x: p,
        y: i.y + i.height
      };
      break;
    case "right":
      m = {
        x: i.x + i.width,
        y: w
      };
      break;
    case "left":
      m = {
        x: i.x - r.width,
        y: w
      };
      break;
    default:
      m = {
        x: i.x,
        y: i.y
      };
  }
  switch (zd(t)) {
    case "start":
      m[a] -= b * (e && u ? -1 : 1);
      break;
    case "end":
      m[a] += b * (e && u ? -1 : 1);
      break;
  }
  return m;
}
o(Ly, "computeCoordsFromPlacement");
const Zb = /* @__PURE__ */ o(async (s, t, e) => {
  const {
    placement: i = "bottom",
    strategy: r = "absolute",
    middleware: n = [],
    platform: a
  } = e, c = n.filter(Boolean), l = await (a.isRTL == null ? void 0 : a.isRTL(t));
  let u = await a.getElementRects({
    reference: s,
    floating: t,
    strategy: r
  }), {
    x: p,
    y: w
  } = Ly(u, i, l), b = i, m = {}, g = 0;
  for (let x = 0; x < c.length; x++) {
    const {
      name: z,
      fn: _
    } = c[x], {
      x: P,
      y: E,
      data: N,
      reset: O
    } = await _({
      x: p,
      y: w,
      initialPlacement: i,
      placement: b,
      strategy: r,
      middlewareData: m,
      rects: u,
      platform: a,
      elements: {
        reference: s,
        floating: t
      }
    });
    p = P ?? p, w = E ?? w, m = {
      ...m,
      [z]: {
        ...m[z],
        ...N
      }
    }, O && g <= 50 && (g++, typeof O == "object" && (O.placement && (b = O.placement), O.rects && (u = O.rects === !0 ? await a.getElementRects({
      reference: s,
      floating: t,
      strategy: r
    }) : O.rects), {
      x: p,
      y: w
    } = Ly(u, b, l)), x = -1);
  }
  return {
    x: p,
    y: w,
    placement: b,
    strategy: r,
    middlewareData: m
  };
}, "computePosition$1");
async function Df(s, t) {
  var e;
  t === void 0 && (t = {});
  const {
    x: i,
    y: r,
    platform: n,
    rects: a,
    elements: c,
    strategy: l
  } = s, {
    boundary: u = "clippingAncestors",
    rootBoundary: p = "viewport",
    elementContext: w = "floating",
    altBoundary: b = !1,
    padding: m = 0
  } = _d(t, s), g = Gb(m), z = c[b ? w === "floating" ? "reference" : "floating" : w], _ = rd(await n.getClippingRect({
    element: (e = await (n.isElement == null ? void 0 : n.isElement(z))) == null || e ? z : z.contextElement || await (n.getDocumentElement == null ? void 0 : n.getDocumentElement(c.floating)),
    boundary: u,
    rootBoundary: p,
    strategy: l
  })), P = w === "floating" ? {
    x: i,
    y: r,
    width: a.floating.width,
    height: a.floating.height
  } : a.reference, E = await (n.getOffsetParent == null ? void 0 : n.getOffsetParent(c.floating)), N = await (n.isElement == null ? void 0 : n.isElement(E)) ? await (n.getScale == null ? void 0 : n.getScale(E)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, O = rd(n.convertOffsetParentRelativeRectToViewportRelativeRect ? await n.convertOffsetParentRelativeRectToViewportRelativeRect({
    elements: c,
    rect: P,
    offsetParent: E,
    strategy: l
  }) : P);
  return {
    top: (_.top - O.top + g.top) / N.y,
    bottom: (O.bottom - _.bottom + g.bottom) / N.y,
    left: (_.left - O.left + g.left) / N.x,
    right: (O.right - _.right + g.right) / N.x
  };
}
o(Df, "detectOverflow");
const Yb = /* @__PURE__ */ o(function(s) {
  return s === void 0 && (s = {}), {
    name: "flip",
    options: s,
    async fn(t) {
      var e, i;
      const {
        placement: r,
        middlewareData: n,
        rects: a,
        initialPlacement: c,
        platform: l,
        elements: u
      } = t, {
        mainAxis: p = !0,
        crossAxis: w = !0,
        fallbackPlacements: b,
        fallbackStrategy: m = "bestFit",
        fallbackAxisSideDirection: g = "none",
        flipAlignment: x = !0,
        ...z
      } = _d(s, t);
      if ((e = n.arrow) != null && e.alignmentOffset)
        return {};
      const _ = pr(r), P = bs(c), E = pr(c) === c, N = await (l.isRTL == null ? void 0 : l.isRTL(u.floating)), O = b || (E || !x ? [sd(c)] : jb(c)), F = g !== "none";
      !b && F && O.push(...Qb(c, x, g, N));
      const B = [c, ...O], D = await Df(t, z), U = [];
      let j = ((i = n.flip) == null ? void 0 : i.overflows) || [];
      if (p && U.push(D[_]), w) {
        const nt = Nb(r, a, N);
        U.push(D[nt[0]], D[nt[1]]);
      }
      if (j = [...j, {
        placement: r,
        overflows: U
      }], !U.every((nt) => nt <= 0)) {
        var J, wt;
        const nt = (((J = n.flip) == null ? void 0 : J.index) || 0) + 1, Nt = B[nt];
        if (Nt && (!(w === "alignment" ? P !== bs(Nt) : !1) || // We leave the current main axis only if every placement on that axis
        // overflows the main axis.
        j.every((ft) => ft.overflows[0] > 0 && bs(ft.placement) === P)))
          return {
            data: {
              index: nt,
              overflows: j
            },
            reset: {
              placement: Nt
            }
          };
        let Zt = (wt = j.filter((_t) => _t.overflows[0] <= 0).sort((_t, ft) => _t.overflows[1] - ft.overflows[1])[0]) == null ? void 0 : wt.placement;
        if (!Zt)
          switch (m) {
            case "bestFit": {
              var Y;
              const _t = (Y = j.filter((ft) => {
                if (F) {
                  const Ot = bs(ft.placement);
                  return Ot === P || // Create a bias to the `y` side axis due to horizontal
                  // reading directions favoring greater width.
                  Ot === "y";
                }
                return !0;
              }).map((ft) => [ft.placement, ft.overflows.filter((Ot) => Ot > 0).reduce((Ot, tt) => Ot + tt, 0)]).sort((ft, Ot) => ft[1] - Ot[1])[0]) == null ? void 0 : Y[0];
              _t && (Zt = _t);
              break;
            }
            case "initialPlacement":
              Zt = c;
              break;
          }
        if (r !== Zt)
          return {
            reset: {
              placement: Zt
            }
          };
      }
      return {};
    }
  };
}, "flip$1");
async function Xb(s, t) {
  const {
    placement: e,
    platform: i,
    elements: r
  } = s, n = await (i.isRTL == null ? void 0 : i.isRTL(r.floating)), a = pr(e), c = zd(e), l = bs(e) === "y", u = ["left", "top"].includes(a) ? -1 : 1, p = n && l ? -1 : 1, w = _d(t, s);
  let {
    mainAxis: b,
    crossAxis: m,
    alignmentAxis: g
  } = typeof w == "number" ? {
    mainAxis: w,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: w.mainAxis || 0,
    crossAxis: w.crossAxis || 0,
    alignmentAxis: w.alignmentAxis
  };
  return c && typeof g == "number" && (m = c === "end" ? g * -1 : g), l ? {
    x: m * p,
    y: b * u
  } : {
    x: b * u,
    y: m * p
  };
}
o(Xb, "convertValueToCoords");
const Jb = /* @__PURE__ */ o(function(s) {
  return s === void 0 && (s = 0), {
    name: "offset",
    options: s,
    async fn(t) {
      var e, i;
      const {
        x: r,
        y: n,
        placement: a,
        middlewareData: c
      } = t, l = await Xb(t, s);
      return a === ((e = c.offset) == null ? void 0 : e.placement) && (i = c.arrow) != null && i.alignmentOffset ? {} : {
        x: r + l.x,
        y: n + l.y,
        data: {
          ...l,
          placement: a
        }
      };
    }
  };
}, "offset$1"), t2 = /* @__PURE__ */ o(function(s) {
  return s === void 0 && (s = {}), {
    name: "shift",
    options: s,
    async fn(t) {
      const {
        x: e,
        y: i,
        placement: r
      } = t, {
        mainAxis: n = !0,
        crossAxis: a = !1,
        limiter: c = {
          fn: /* @__PURE__ */ o((z) => {
            let {
              x: _,
              y: P
            } = z;
            return {
              x: _,
              y: P
            };
          }, "fn")
        },
        ...l
      } = _d(s, t), u = {
        x: e,
        y: i
      }, p = await Df(t, l), w = bs(pr(r)), b = If(w);
      let m = u[b], g = u[w];
      if (n) {
        const z = b === "y" ? "top" : "left", _ = b === "y" ? "bottom" : "right", P = m + p[z], E = m - p[_];
        m = Ry(P, m, E);
      }
      if (a) {
        const z = w === "y" ? "top" : "left", _ = w === "y" ? "bottom" : "right", P = g + p[z], E = g - p[_];
        g = Ry(P, g, E);
      }
      const x = c.fn({
        ...t,
        [b]: m,
        [w]: g
      });
      return {
        ...x,
        data: {
          x: x.x - e,
          y: x.y - i,
          enabled: {
            [b]: n,
            [w]: a
          }
        }
      };
    }
  };
}, "shift$1");
function Md() {
  return typeof window < "u";
}
o(Md, "hasWindow");
function nc(s) {
  return Hf(s) ? (s.nodeName || "").toLowerCase() : "#document";
}
o(nc, "getNodeName");
function qe(s) {
  var t;
  return (s == null || (t = s.ownerDocument) == null ? void 0 : t.defaultView) || window;
}
o(qe, "getWindow");
function Oi(s) {
  var t;
  return (t = (Hf(s) ? s.ownerDocument : s.document) || window.document) == null ? void 0 : t.documentElement;
}
o(Oi, "getDocumentElement");
function Hf(s) {
  return Md() ? s instanceof Node || s instanceof qe(s).Node : !1;
}
o(Hf, "isNode");
function di(s) {
  return Md() ? s instanceof Element || s instanceof qe(s).Element : !1;
}
o(di, "isElement");
function Pi(s) {
  return Md() ? s instanceof HTMLElement || s instanceof qe(s).HTMLElement : !1;
}
o(Pi, "isHTMLElement");
function Iy(s) {
  return !Md() || typeof ShadowRoot > "u" ? !1 : s instanceof ShadowRoot || s instanceof qe(s).ShadowRoot;
}
o(Iy, "isShadowRoot");
function ul(s) {
  const {
    overflow: t,
    overflowX: e,
    overflowY: i,
    display: r
  } = hi(s);
  return /auto|scroll|overlay|hidden|clip/.test(t + i + e) && !["inline", "contents"].includes(r);
}
o(ul, "isOverflowElement");
function e2(s) {
  return ["table", "td", "th"].includes(nc(s));
}
o(e2, "isTableElement");
function Pd(s) {
  return [":popover-open", ":modal"].some((t) => {
    try {
      return s.matches(t);
    } catch {
      return !1;
    }
  });
}
o(Pd, "isTopLayer");
function hp(s) {
  const t = up(), e = di(s) ? hi(s) : s;
  return ["transform", "translate", "scale", "rotate", "perspective"].some((i) => e[i] ? e[i] !== "none" : !1) || (e.containerType ? e.containerType !== "normal" : !1) || !t && (e.backdropFilter ? e.backdropFilter !== "none" : !1) || !t && (e.filter ? e.filter !== "none" : !1) || ["transform", "translate", "scale", "rotate", "perspective", "filter"].some((i) => (e.willChange || "").includes(i)) || ["paint", "layout", "strict", "content"].some((i) => (e.contain || "").includes(i));
}
o(hp, "isContainingBlock");
function i2(s) {
  let t = ks(s);
  for (; Pi(t) && !Uo(t); ) {
    if (hp(t))
      return t;
    if (Pd(t))
      return null;
    t = ks(t);
  }
  return null;
}
o(i2, "getContainingBlock");
function up() {
  return typeof CSS > "u" || !CSS.supports ? !1 : CSS.supports("-webkit-backdrop-filter", "none");
}
o(up, "isWebKit");
function Uo(s) {
  return ["html", "body", "#document"].includes(nc(s));
}
o(Uo, "isLastTraversableNode");
function hi(s) {
  return qe(s).getComputedStyle(s);
}
o(hi, "getComputedStyle$1");
function Sd(s) {
  return di(s) ? {
    scrollLeft: s.scrollLeft,
    scrollTop: s.scrollTop
  } : {
    scrollLeft: s.scrollX,
    scrollTop: s.scrollY
  };
}
o(Sd, "getNodeScroll");
function ks(s) {
  if (nc(s) === "html")
    return s;
  const t = (
    // Step into the shadow DOM of the parent of a slotted node.
    s.assignedSlot || // DOM Element detected.
    s.parentNode || // ShadowRoot detected.
    Iy(s) && s.host || // Fallback.
    Oi(s)
  );
  return Iy(t) ? t.host : t;
}
o(ks, "getParentNode");
function Vf(s) {
  const t = ks(s);
  return Uo(t) ? s.ownerDocument ? s.ownerDocument.body : s.body : Pi(t) && ul(t) ? t : Vf(t);
}
o(Vf, "getNearestOverflowAncestor");
function zc(s, t, e) {
  var i;
  t === void 0 && (t = []), e === void 0 && (e = !0);
  const r = Vf(s), n = r === ((i = s.ownerDocument) == null ? void 0 : i.body), a = qe(r);
  if (n) {
    const c = _u(a);
    return t.concat(a, a.visualViewport || [], ul(r) ? r : [], c && e ? zc(c) : []);
  }
  return t.concat(r, zc(r, [], e));
}
o(zc, "getOverflowAncestors");
function _u(s) {
  return s.parent && Object.getPrototypeOf(s.parent) ? s.frameElement : null;
}
o(_u, "getFrameElement");
function Bf(s) {
  const t = hi(s);
  let e = parseFloat(t.width) || 0, i = parseFloat(t.height) || 0;
  const r = Pi(s), n = r ? s.offsetWidth : e, a = r ? s.offsetHeight : i, c = id(e) !== n || id(i) !== a;
  return c && (e = n, i = a), {
    width: e,
    height: i,
    $: c
  };
}
o(Bf, "getCssDimensions");
function pp(s) {
  return di(s) ? s : s.contextElement;
}
o(pp, "unwrapElement");
function Qr(s) {
  const t = pp(s);
  if (!Pi(t))
    return ki(1);
  const e = t.getBoundingClientRect(), {
    width: i,
    height: r,
    $: n
  } = Bf(t);
  let a = (n ? id(e.width) : e.width) / i, c = (n ? id(e.height) : e.height) / r;
  return (!a || !Number.isFinite(a)) && (a = 1), (!c || !Number.isFinite(c)) && (c = 1), {
    x: a,
    y: c
  };
}
o(Qr, "getScale");
const s2 = /* @__PURE__ */ ki(0);
function Uf(s) {
  const t = qe(s);
  return !up() || !t.visualViewport ? s2 : {
    x: t.visualViewport.offsetLeft,
    y: t.visualViewport.offsetTop
  };
}
o(Uf, "getVisualOffsets");
function r2(s, t, e) {
  return t === void 0 && (t = !1), !e || t && e !== qe(s) ? !1 : t;
}
o(r2, "shouldAddVisualOffsets");
function yr(s, t, e, i) {
  t === void 0 && (t = !1), e === void 0 && (e = !1);
  const r = s.getBoundingClientRect(), n = pp(s);
  let a = ki(1);
  t && (i ? di(i) && (a = Qr(i)) : a = Qr(s));
  const c = r2(n, e, i) ? Uf(n) : ki(0);
  let l = (r.left + c.x) / a.x, u = (r.top + c.y) / a.y, p = r.width / a.x, w = r.height / a.y;
  if (n) {
    const b = qe(n), m = i && di(i) ? qe(i) : i;
    let g = b, x = _u(g);
    for (; x && i && m !== g; ) {
      const z = Qr(x), _ = x.getBoundingClientRect(), P = hi(x), E = _.left + (x.clientLeft + parseFloat(P.paddingLeft)) * z.x, N = _.top + (x.clientTop + parseFloat(P.paddingTop)) * z.y;
      l *= z.x, u *= z.y, p *= z.x, w *= z.y, l += E, u += N, g = qe(x), x = _u(g);
    }
  }
  return rd({
    width: p,
    height: w,
    x: l,
    y: u
  });
}
o(yr, "getBoundingClientRect");
function yp(s, t) {
  const e = Sd(s).scrollLeft;
  return t ? t.left + e : yr(Oi(s)).left + e;
}
o(yp, "getWindowScrollBarX");
function qf(s, t, e) {
  e === void 0 && (e = !1);
  const i = s.getBoundingClientRect(), r = i.left + t.scrollLeft - (e ? 0 : (
    // RTL <body> scrollbar.
    yp(s, i)
  )), n = i.top + t.scrollTop;
  return {
    x: r,
    y: n
  };
}
o(qf, "getHTMLOffset");
function n2(s) {
  let {
    elements: t,
    rect: e,
    offsetParent: i,
    strategy: r
  } = s;
  const n = r === "fixed", a = Oi(i), c = t ? Pd(t.floating) : !1;
  if (i === a || c && n)
    return e;
  let l = {
    scrollLeft: 0,
    scrollTop: 0
  }, u = ki(1);
  const p = ki(0), w = Pi(i);
  if ((w || !w && !n) && ((nc(i) !== "body" || ul(a)) && (l = Sd(i)), Pi(i))) {
    const m = yr(i);
    u = Qr(i), p.x = m.x + i.clientLeft, p.y = m.y + i.clientTop;
  }
  const b = a && !w && !n ? qf(a, l, !0) : ki(0);
  return {
    width: e.width * u.x,
    height: e.height * u.y,
    x: e.x * u.x - l.scrollLeft * u.x + p.x + b.x,
    y: e.y * u.y - l.scrollTop * u.y + p.y + b.y
  };
}
o(n2, "convertOffsetParentRelativeRectToViewportRelativeRect");
function a2(s) {
  return Array.from(s.getClientRects());
}
o(a2, "getClientRects");
function o2(s) {
  const t = Oi(s), e = Sd(s), i = s.ownerDocument.body, r = nr(t.scrollWidth, t.clientWidth, i.scrollWidth, i.clientWidth), n = nr(t.scrollHeight, t.clientHeight, i.scrollHeight, i.clientHeight);
  let a = -e.scrollLeft + yp(s);
  const c = -e.scrollTop;
  return hi(i).direction === "rtl" && (a += nr(t.clientWidth, i.clientWidth) - r), {
    width: r,
    height: n,
    x: a,
    y: c
  };
}
o(o2, "getDocumentRect");
function c2(s, t) {
  const e = qe(s), i = Oi(s), r = e.visualViewport;
  let n = i.clientWidth, a = i.clientHeight, c = 0, l = 0;
  if (r) {
    n = r.width, a = r.height;
    const u = up();
    (!u || u && t === "fixed") && (c = r.offsetLeft, l = r.offsetTop);
  }
  return {
    width: n,
    height: a,
    x: c,
    y: l
  };
}
o(c2, "getViewportRect");
function l2(s, t) {
  const e = yr(s, !0, t === "fixed"), i = e.top + s.clientTop, r = e.left + s.clientLeft, n = Pi(s) ? Qr(s) : ki(1), a = s.clientWidth * n.x, c = s.clientHeight * n.y, l = r * n.x, u = i * n.y;
  return {
    width: a,
    height: c,
    x: l,
    y: u
  };
}
o(l2, "getInnerBoundingClientRect");
function Ty(s, t, e) {
  let i;
  if (t === "viewport")
    i = c2(s, e);
  else if (t === "document")
    i = o2(Oi(s));
  else if (di(t))
    i = l2(t, e);
  else {
    const r = Uf(s);
    i = {
      x: t.x - r.x,
      y: t.y - r.y,
      width: t.width,
      height: t.height
    };
  }
  return rd(i);
}
o(Ty, "getClientRectFromClippingAncestor");
function Nf(s, t) {
  const e = ks(s);
  return e === t || !di(e) || Uo(e) ? !1 : hi(e).position === "fixed" || Nf(e, t);
}
o(Nf, "hasFixedPositionAncestor");
function d2(s, t) {
  const e = t.get(s);
  if (e)
    return e;
  let i = zc(s, [], !1).filter((c) => di(c) && nc(c) !== "body"), r = null;
  const n = hi(s).position === "fixed";
  let a = n ? ks(s) : s;
  for (; di(a) && !Uo(a); ) {
    const c = hi(a), l = hp(a);
    !l && c.position === "fixed" && (r = null), (n ? !l && !r : !l && c.position === "static" && !!r && ["absolute", "fixed"].includes(r.position) || ul(a) && !l && Nf(s, a)) ? i = i.filter((p) => p !== a) : r = c, a = ks(a);
  }
  return t.set(s, i), i;
}
o(d2, "getClippingElementAncestors");
function h2(s) {
  let {
    element: t,
    boundary: e,
    rootBoundary: i,
    strategy: r
  } = s;
  const a = [...e === "clippingAncestors" ? Pd(t) ? [] : d2(t, this._c) : [].concat(e), i], c = a[0], l = a.reduce((u, p) => {
    const w = Ty(t, p, r);
    return u.top = nr(w.top, u.top), u.right = ed(w.right, u.right), u.bottom = ed(w.bottom, u.bottom), u.left = nr(w.left, u.left), u;
  }, Ty(t, c, r));
  return {
    width: l.right - l.left,
    height: l.bottom - l.top,
    x: l.left,
    y: l.top
  };
}
o(h2, "getClippingRect");
function u2(s) {
  const {
    width: t,
    height: e
  } = Bf(s);
  return {
    width: t,
    height: e
  };
}
o(u2, "getDimensions");
function p2(s, t, e) {
  const i = Pi(t), r = Oi(t), n = e === "fixed", a = yr(s, !0, n, t);
  let c = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const l = ki(0);
  function u() {
    l.x = yp(r);
  }
  if (o(u, "setLeftRTLScrollbarOffset"), i || !i && !n)
    if ((nc(t) !== "body" || ul(r)) && (c = Sd(t)), i) {
      const m = yr(t, !0, n, t);
      l.x = m.x + t.clientLeft, l.y = m.y + t.clientTop;
    } else r && u();
  n && !i && r && u();
  const p = r && !i && !n ? qf(r, c) : ki(0), w = a.left + c.scrollLeft - l.x - p.x, b = a.top + c.scrollTop - l.y - p.y;
  return {
    x: w,
    y: b,
    width: a.width,
    height: a.height
  };
}
o(p2, "getRectRelativeToOffsetParent");
function Ih(s) {
  return hi(s).position === "static";
}
o(Ih, "isStaticPositioned");
function Fy(s, t) {
  if (!Pi(s) || hi(s).position === "fixed")
    return null;
  if (t)
    return t(s);
  let e = s.offsetParent;
  return Oi(s) === e && (e = e.ownerDocument.body), e;
}
o(Fy, "getTrueOffsetParent");
function jf(s, t) {
  const e = qe(s);
  if (Pd(s))
    return e;
  if (!Pi(s)) {
    let r = ks(s);
    for (; r && !Uo(r); ) {
      if (di(r) && !Ih(r))
        return r;
      r = ks(r);
    }
    return e;
  }
  let i = Fy(s, t);
  for (; i && e2(i) && Ih(i); )
    i = Fy(i, t);
  return i && Uo(i) && Ih(i) && !hp(i) ? e : i || i2(s) || e;
}
o(jf, "getOffsetParent");
const y2 = /* @__PURE__ */ o(async function(s) {
  const t = this.getOffsetParent || jf, e = this.getDimensions, i = await e(s.floating);
  return {
    reference: p2(s.reference, await t(s.floating), s.strategy),
    floating: {
      x: 0,
      y: 0,
      width: i.width,
      height: i.height
    }
  };
}, "getElementRects");
function w2(s) {
  return hi(s).direction === "rtl";
}
o(w2, "isRTL");
const f2 = {
  convertOffsetParentRelativeRectToViewportRelativeRect: n2,
  getDocumentElement: Oi,
  getClippingRect: h2,
  getOffsetParent: jf,
  getElementRects: y2,
  getClientRects: a2,
  getDimensions: u2,
  getScale: Qr,
  isElement: di,
  isRTL: w2
};
function Wf(s, t) {
  return s.x === t.x && s.y === t.y && s.width === t.width && s.height === t.height;
}
o(Wf, "rectsAreEqual");
function m2(s, t) {
  let e = null, i;
  const r = Oi(s);
  function n() {
    var c;
    clearTimeout(i), (c = e) == null || c.disconnect(), e = null;
  }
  o(n, "cleanup");
  function a(c, l) {
    c === void 0 && (c = !1), l === void 0 && (l = 1), n();
    const u = s.getBoundingClientRect(), {
      left: p,
      top: w,
      width: b,
      height: m
    } = u;
    if (c || t(), !b || !m)
      return;
    const g = Sl(w), x = Sl(r.clientWidth - (p + b)), z = Sl(r.clientHeight - (w + m)), _ = Sl(p), E = {
      rootMargin: -g + "px " + -x + "px " + -z + "px " + -_ + "px",
      threshold: nr(0, ed(1, l)) || 1
    };
    let N = !0;
    function O(F) {
      const B = F[0].intersectionRatio;
      if (B !== l) {
        if (!N)
          return a();
        B ? a(!1, B) : i = setTimeout(() => {
          a(!1, 1e-7);
        }, 1e3);
      }
      B === 1 && !Wf(u, s.getBoundingClientRect()) && a(), N = !1;
    }
    o(O, "handleObserve");
    try {
      e = new IntersectionObserver(O, {
        ...E,
        // Handle <iframe>s
        root: r.ownerDocument
      });
    } catch {
      e = new IntersectionObserver(O, E);
    }
    e.observe(s);
  }
  return o(a, "refresh"), a(!0), n;
}
o(m2, "observeMove");
function Qf(s, t, e, i) {
  i === void 0 && (i = {});
  const {
    ancestorScroll: r = !0,
    ancestorResize: n = !0,
    elementResize: a = typeof ResizeObserver == "function",
    layoutShift: c = typeof IntersectionObserver == "function",
    animationFrame: l = !1
  } = i, u = pp(s), p = r || n ? [...u ? zc(u) : [], ...zc(t)] : [];
  p.forEach((_) => {
    r && _.addEventListener("scroll", e, {
      passive: !0
    }), n && _.addEventListener("resize", e);
  });
  const w = u && c ? m2(u, e) : null;
  let b = -1, m = null;
  a && (m = new ResizeObserver((_) => {
    let [P] = _;
    P && P.target === u && m && (m.unobserve(t), cancelAnimationFrame(b), b = requestAnimationFrame(() => {
      var E;
      (E = m) == null || E.observe(t);
    })), e();
  }), u && !l && m.observe(u), m.observe(t));
  let g, x = l ? yr(s) : null;
  l && z();
  function z() {
    const _ = yr(s);
    x && !Wf(x, _) && e(), x = _, g = requestAnimationFrame(z);
  }
  return o(z, "frameLoop"), e(), () => {
    var _;
    p.forEach((P) => {
      r && P.removeEventListener("scroll", e), n && P.removeEventListener("resize", e);
    }), w == null || w(), (_ = m) == null || _.disconnect(), m = null, l && cancelAnimationFrame(g);
  };
}
o(Qf, "autoUpdate");
const Kf = Jb, Gf = t2, Zf = Yb, Yf = /* @__PURE__ */ o((s, t, e) => {
  const i = /* @__PURE__ */ new Map(), r = {
    platform: f2,
    ...e
  }, n = {
    ...r.platform,
    _c: i
  };
  return Zb(s, t, {
    ...r,
    platform: n
  });
}, "computePosition");
function v2(s, t, e, i, r, n, a) {
  return new kt(s.queryClient, {
    mutationFn: /* @__PURE__ */ o(async () => await s.fetch(`/api/${r}/${i}/reactions`, {
      method: n ? "POST" : "DELETE",
      body: JSON.stringify({ content: n })
    }), "mutationFn"),
    onMutate: /* @__PURE__ */ o(() => {
      const c = e === "apps" && r === "posts" ? [r, t] : [e, t, r];
      jt(s.queryClient, c, i, (l) => {
        Mc(l, n, a);
      });
    }, "onMutate")
  });
}
o(v2, "reactionMutation");
function g2(s, t, e) {
  return {
    queryKey: [t, e, "reactions"],
    enabled: !1,
    queryFn: /* @__PURE__ */ o(async () => await (await s.fetch("/api/" + t + "/" + e + "/reactions")).json(), "queryFn")
  };
}
o(g2, "getReactionListOptions");
function Mc(s, t, e) {
  var i;
  return !t && !((i = s.reactions) != null && i.data) || (s.reactions || (s.reactions = { count: 0, data: [] }), s.reactions.data || (s.reactions.data = []), t ? s.reactions.data = [
    ...s.reactions.data.filter((r) => {
      var n;
      return ((n = r.created_by) == null ? void 0 : n.id) !== e.id;
    }),
    { content: t, created_by: e }
  ] : s.reactions.data && (s.reactions.data = [...s.reactions.data.filter((r) => {
    var n;
    return ((n = r.created_by) == null ? void 0 : n.id) !== e.id;
  })])), s;
}
o(Mc, "updateReaction");
var b2 = Object.defineProperty, x2 = Object.getOwnPropertyDescriptor, wp = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? x2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && b2(t, e, r), r;
}, "__decorateClass$_"), fa;
let qo = (fa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.noPadding = !1, this.show = !1, this.viewportRef = st();
  }
  close() {
    var t, e, i;
    this.show = !1;
    try {
      (t = this.viewportRef.value) != null && t.popover ? (e = this.viewportRef.value) == null || e.hidePopover() : (i = this.viewportRef.value) == null || i.close();
    } catch {
    }
  }
  handleClose(t) {
    (t.type === "toggle" && t.newState === "closed" || t.type === "close") && (this.show = !1, this.dispatchEvent(new CustomEvent("close")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
  }
  render() {
    return h`
      <dialog class="wy-dialog" tabindex="0" ${Q(this.viewportRef)} popover="auto">
        <div class="wy-sheet ${this.show ? "wy-show" : ""}">
          <slot name="header">
            <header class="wy-appbars">
              <nav class="wy-appbar">
                <wy-button kind="icon" @click=${() => this.close()}>
                  <wy-icon name="close"></wy-icon>
                </wy-button>
                <slot name="appbar-text" class="wy-appbar-text"></slot>
                <slot name="appbar-buttons" class="wy-appbar-buttons wy-appbar-buttons-last"></slot>
              </nav>
            </header>
          </slot>
          <div class="wy-sheet-body wy-scroll-y ${this.noPadding ? "wy-sheet-no-padding" : ""}">
            <slot></slot>
          </div>
        </div>
      </dialog>
    `;
  }
  updated(t) {
    var e, i, r, n, a, c, l;
    if (t.has("show"))
      try {
        this.show ? (e = this.viewportRef.value) != null && e.popover ? (i = this.viewportRef.value) == null || i.showPopover() : (r = this.viewportRef.value) == null || r.show() : (n = this.viewportRef.value) != null && n.popover ? (a = this.viewportRef.value) == null || a.hidePopover() : (c = this.viewportRef.value) == null || c.close();
      } catch {
      }
    t.has("show") && this.show && ((l = this.viewportRef.value) == null || l.focus());
  }
  firstUpdated(t) {
    var e;
    (e = this.viewportRef.value) == null || e.addEventListener(
      this.viewportRef.value.popover ? "toggle" : "close",
      (i) => this.handleClose(i)
    );
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this.close();
  }
}, o(fa, "WySheet"), fa);
qo.styles = [
  X,
  yt
];
wp([
  y({ type: Boolean })
], qo.prototype, "noPadding", 2);
wp([
  y({ type: Boolean })
], qo.prototype, "show", 2);
qo = wp([
  q("wy-sheet")
], qo);
const $2 = dt`[part~=wy-reaction]{font-size:calc(1.125 * var(--wy-size, 1rem))}[part~=wy-reactions]{display:inline-flex;align-items:center;column-gap:calc(.25 * var(--wy-size, 1rem))}[part~=wy-reactions] :first-child:not(:only-child){margin-left:calc(.25 * var(--wy-size, 1rem))}[part~=wy-reactions] :last-child:not(:only-child){margin-right:calc(.25 * var(--wy-size, 1rem))}[part~=wy-reaction-count]{margin:0 calc(.25 * var(--wy-size, 1rem)) 0;line-height:1;font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}[part~=wy-reaction-menu]{width:max-content;position:absolute;z-index:1000;border:none;--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);display:flex;margin:0;text-align:left;background-clip:padding-box;box-shadow:var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12));overflow:hidden;padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));font-size:calc(1.25 * var(--wy-size, 1rem));border-radius:var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem))))}[part~=wy-reaction-picker]{display:flex;flex-direction:row;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}[part~=wy-reactions-line]{display:flex;align-items:center;padding-left:calc(.1875 * var(--wy-size, 1rem));padding-right:calc(.1875 * var(--wy-size, 1rem));gap:calc(.1875 * var(--wy-size, 1rem));justify-content:end}[part~=wy-reactions-line-reverse]{flex-direction:row-reverse;justify-content:start}[part~=wy-reactions-line-bottom]{position:absolute;bottom:calc(-1 * var(--wy-size, 1rem));right:calc(.25 * var(--wy-size, 1rem));z-index:1}[part~=wy-reactions-line-below]{position:relative;height:0;min-height:0;max-height:0;margin:calc(var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))) - var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(-1 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))) calc(-1 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));padding-left:calc(.125 * var(--wy-size, 1rem));padding-right:calc(.125 * var(--wy-size, 1rem));gap:calc(.125 * var(--wy-size, 1rem));flex:1 0 auto;justify-content:flex-end}`, Xf = dt`.wy-item{--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));position:relative;display:flex;align-items:center;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));text-decoration:none}.wy-list-item{min-height:calc(3 * var(--wy-size, 1rem))}.wy-list-item-lg{min-height:calc(4.5 * var(--wy-size, 1rem))}.wy-item-inner{display:flex;align-items:center;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));flex:1 1 100%}.wy-item-body{width:100%;min-width:0}.wy-item-rows{display:flex;flex-direction:column;width:100%;row-gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));min-width:0}.wy-item-rows:only-child{margin-inline-start:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-item-rows-compact{row-gap:0}.wy-item-rows-single{margin-inline-start:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))))}.wy-item-title{color:var(--wy-component-color);font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset))}.wy-item-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-item-title-lg{color:var(--wy-component-color);font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset))}.wy-item-title-lg{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.wy-item-text{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-item-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wy-item-text .wy-icon{width:calc(1.25 * var(--wy-size, 1rem));height:calc(1.25 * var(--wy-size, 1rem));vertical-align:calc(-.3125 * var(--wy-size, 1rem))}.wy-item-quote{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}.wy-item-quote:before,.wy-item-quote:after{content:'\"'}.wy-item-actions{--wy-component-background-color: transparent;display:flex;align-items:center;justify-items:flex-end;flex:0 0 auto;margin:calc(-.25 * var(--wy-size, 1rem))}.wy-item-top{align-self:flex-start}.wy-item-actions-bottom{align-self:flex-start;margin-block:calc(-.5 * var(--wy-size, 1rem))}.wy-item-row{display:flex;align-items:center;column-gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))}.wy-item-row .wy-item-title,.wy-item-row .wy-item-text{margin-right:auto}.wy-item-row .wy-meta{white-space:nowrap}.wy-item-right{margin-left:auto}.wy-item-hover{-webkit-user-select:none;user-select:none;cursor:pointer}.wy-item-hover:hover,.wy-item-hover:focus{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);text-decoration:none}.wy-item-hover:active{--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-item-hover.wy-disabled,.wy-item-hover:disabled{opacity:var(--wy-opacity-disabled, 38%);pointer-events:none}.wy-item-hover.wy-active{--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-color:var(--wy-component-background-color)}.wy-item-trashed{text-decoration:line-through;opacity:var(--wy-opacity-disabled, 38%)}.wy-item-trashed.wy-item-hover:hover{opacity:1}`, Jf = dt`.wy-emoji-icon{display:inline-flex;justify-content:center;align-items:center;line-height:1;width:1em;height:1em;font-size:calc(1.25 * var(--wy-size, 1rem))}.wy-emoji-icon-sm{width:calc(1.125 * var(--wy-size, 1rem));height:calc(1.125 * var(--wy-size, 1rem));font-size:calc(1.125 * var(--wy-size, 1rem))}`;
var C2 = Object.defineProperty, k2 = Object.getOwnPropertyDescriptor, se = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? k2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && C2(t, e, r), r;
}, "__decorateClass$Z"), ma;
let Wt = (ma = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.directionX = "left", this.directionY = "up", this.small = !1, this.reactions = [], this.emojis = "", this.parentType = "apps", this.entityType = "messages", this.line = !1, this.lineReverse = !1, this.lineBottom = !1, this.lineBelow = !1, this._placement = "bottom-start", this.show = !1, this.showSheet = !1, this.buttonRef = st(), this.menuRef = st(), this.reactionListQuery = new Ne(this), this._documentClickHandler = (t) => {
      var e;
      this.show && (t.preventDefault(), (e = this.menuRef.value) != null && e.popover || (this.show = !1));
    }, this.handleReaction = async (t) => {
      var i;
      if (!this.weavy || !this.parentId || !this.user)
        return;
      const e = v2(
        this.weavy,
        this.parentId,
        this.parentType,
        this.entityId,
        this.entityType,
        this.reactedEmoji === t ? void 0 : t,
        this.user
      );
      this.reactedEmoji = t, await e.mutate(), (i = this.reactionListQuery.observer) == null || i.refetch();
    };
  }
  handleClose(t) {
    (t.type === "toggle" && t.newState === "closed" || t.type === "click") && (this.show = !1, this.dispatchEvent(new CustomEvent("close")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
  }
  handleClickToggle(t) {
    t.stopPropagation(), this.show = !this.show;
  }
  handleReactionsClick() {
    var t;
    (t = this.reactionListQuery.observer) == null || t.refetch(), this.showSheet = !this.showSheet, this.show = !1;
  }
  async willUpdate(t) {
    var e, i, r, n, a;
    if (super.willUpdate(t), (t.has("weavy") || t.has("entityId") || t.has("showSheet")) && this.weavy && this.entityId && this.showSheet && await this.reactionListQuery.trackQuery(g2(this.weavy, this.entityType, this.entityId)), (t.has("reactions") || t.has("user")) && this.user && (this.reactedEmoji = (i = (e = this.reactions) == null ? void 0 : e.find((c) => {
      var l, u;
      return ((l = c.created_by) == null ? void 0 : l.id) === ((u = this.user) == null ? void 0 : u.id);
    })) == null ? void 0 : i.content), (t.has("directionX") || t.has("directionY")) && (this._placement = this.directionX === "right" && this.directionY === "down" ? "bottom-start" : this.directionX === "left" && this.directionY === "down" ? "bottom-end" : this.directionX === "right" && this.directionY === "up" ? "top-start" : "top-end"), t.has("show") && (this.show && !this._computePositionCleanup && this.buttonRef.value && this.menuRef.value ? this._computePositionCleanup = Qf(this.buttonRef.value, this.menuRef.value, () => {
      requestAnimationFrame(() => {
        this.buttonRef.value && this.menuRef.value && Yf(this.buttonRef.value, this.menuRef.value, {
          placement: this._placement,
          strategy: this.menuRef.value.popover ? "absolute" : "fixed",
          middleware: [
            Zf(),
            Kf({ mainAxis: 0, alignmentAxis: -8 }),
            Gf({ mainAxis: !0, crossAxis: !0, padding: 4, altBoundary: !0 })
          ]
        }).then(({ x: c, y: l }) => {
          this.menuRef.value && Object.assign(this.menuRef.value.style, {
            marginLeft: `${c}px`,
            marginTop: `${l}px`,
            top: 0,
            left: 0,
            position: this.menuRef.value.popover ? void 0 : "fixed",
            zIndex: this.menuRef.value.popover ? void 0 : 1075
          });
        });
      });
    }) : !this.show && this._computePositionCleanup && (this._computePositionCleanup(), this._computePositionCleanup = void 0)), this.show) {
      requestAnimationFrame(() => {
        document.addEventListener("click", this._documentClickHandler, { once: !0, capture: !0 });
      });
      try {
        (r = this.menuRef.value) == null || r.showPopover();
      } catch {
      }
    } else
      try {
        (n = this.menuRef.value) == null || n.hidePopover();
      } catch {
      }
    t.has("settings") && ((a = this.settings) != null && a.reactions) && this.emojis != this.settings.reactions && (this.emojis = this.settings.reactions);
  }
  render() {
    var u, p, w, b, m, g;
    const { data: t, isPending: e } = this.reactionListQuery.result ?? {};
    if (!((u = this.emojis) != null && u.length))
      return C;
    const i = ((p = this.emojis) == null ? void 0 : p.length) === 1 ? this.emojis[0] : "", r = [
      ...new Map((w = this.reactions) == null ? void 0 : w.map((x) => [x.content, x])).values()
    ], n = {
      "wy-emoji-icon": !0,
      "wy-emoji-icon-sm": this.small
    }, a = i ? h`
          ${this.reactions && ((b = this.reactions) == null ? void 0 : b.length) > 1 ? h`<wy-button
                kind="icon-inline"
                ?active=${this.showSheet}
                ?small=${this.small}
                @click=${() => this.handleReactionsClick()}
              >
                <div part="wy-reactions">
                  <span class=${Mt(n)}>
                    <small part="wy-reaction-count">${this.reactions.length}</small>
                  </span>
                </div>
              </wy-button>` : C}

          <div>
            <wy-button
              part="wy-reaction-menu-button"
              kind="icon"
              ?small=${this.small}
              ?active=${this.reactedEmoji === i}
              @click=${() => {
      this.handleReaction(i);
    }}
              @keydown=${ye}
              @keyup=${Fe}
              title=${$("React", { desc: "Button action to react" })}
            >
              <span class=${Mt(n)} title=${i}>${i}</span>
            </wy-button>
          </div>
        ` : h`
          ${r.length ? h`
                <wy-button
                  kind="icon-inline"
                  ?active=${this.showSheet}
                  ?small=${this.small}
                  @click=${() => this.handleReactionsClick()}
                >
                  <div part="wy-reactions">
                    ${r.map((x) => h`<span class=${Mt(n)} title="">${x.content}</span>`)}
                    ${this.reactions && ((m = this.reactions) == null ? void 0 : m.length) > 1 ? h`<small part="wy-reaction-count">${this.reactions.length}</small>` : C}
                  </div>
                </wy-button>
              ` : C}

          <div ${Q(this.buttonRef)}>
            <wy-button
              part="wy-reaction-menu-button"
              kind="icon"
              ?active=${this.show}
              ?small=${this.small}
              @click=${(x) => this.handleClickToggle(x)}
              @keydown=${ye}
              @keyup=${Fe}
              title=${$("React", { desc: "Button action to react" })}
            >
              <wy-icon name="emoticon-plus" size=${this.small ? 18 : 20}></wy-icon>
            </wy-button>
          </div>

          <div
            ${Q(this.menuRef)}
            part="wy-reaction-menu"
            @click=${(x) => this.handleClickToggle(x)}
            @keyup=${cp}
            ?hidden=${!this.show}
            popover=${lt(Vh() ? void 0 : "auto")}
          >
            <div part="wy-reaction-picker">
              ${this.emojis.split(" ").map(
      (x) => h`
                    <wy-button
                      kind="icon"
                      color="none"
                      ?active=${this.reactedEmoji === x}
                      @click=${() => {
        this.handleReaction(x);
      }}
                    >
                      <span class="wy-emoji-icon">${x}</span>
                    </wy-button>
                  `
    )}
            </div>
          </div>
        `, c = h`
      ${this.weavy && this.showSheet ? h`
            <wy-sheet
              .show=${this.showSheet}
              @close=${() => this.showSheet = !1}
              @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
            >
              <span slot="appbar-text">${$("Reactions")}</span>
              <!-- <wy-spinner></wy-spinner> -->
              ${this.showSheet && t && !e ? h`
                    ${(g = t.data) == null ? void 0 : g.map(
      (x) => h` <wy-reaction-item .reaction=${x}></wy-reaction-item> `
    )}
                  ` : C}
            </wy-sheet>
          ` : C}
    `, l = {
      "wy-reactions-line": !0,
      "wy-reactions-line-reverse": this.lineReverse,
      "wy-reactions-line-bottom": this.lineBottom,
      "wy-reactions-line-below": this.lineBelow
    };
    return this.line || this.lineReverse || this.lineBottom || this.lineBelow ? h`
          <div part=${Xt(l)}>${a}</div>
          ${c}
        ` : [a, c];
  }
  firstUpdated(t) {
    var e;
    (e = this.menuRef.value) == null || e.addEventListener(
      this.menuRef.value.popover ? "toggle" : "click",
      (i) => this.handleClose(i)
    );
  }
  disconnectedCallback() {
    var t;
    (t = this._computePositionCleanup) == null || t.call(this), super.disconnectedCallback();
  }
}, o(ma, "WyReactions"), ma);
Wt.styles = [ne, $2, Jf, yt];
se([
  y()
], Wt.prototype, "directionX", 2);
se([
  y()
], Wt.prototype, "directionY", 2);
se([
  y({ type: Boolean })
], Wt.prototype, "small", 2);
se([
  y({ attribute: !1 })
], Wt.prototype, "reactions", 2);
se([
  y({ attribute: !1 })
], Wt.prototype, "emojis", 2);
se([
  y({ type: String })
], Wt.prototype, "parentType", 2);
se([
  y({ attribute: !0, type: Number })
], Wt.prototype, "parentId", 2);
se([
  y({ attribute: !0, type: String })
], Wt.prototype, "entityType", 2);
se([
  y({ attribute: !0, type: Number })
], Wt.prototype, "entityId", 2);
se([
  y({ type: Boolean })
], Wt.prototype, "line", 2);
se([
  y({ type: Boolean })
], Wt.prototype, "lineReverse", 2);
se([
  y({ type: Boolean })
], Wt.prototype, "lineBottom", 2);
se([
  y({ type: Boolean })
], Wt.prototype, "lineBelow", 2);
se([
  H()
], Wt.prototype, "_placement", 2);
se([
  H()
], Wt.prototype, "reactedEmoji", 2);
se([
  H()
], Wt.prototype, "show", 2);
se([
  H()
], Wt.prototype, "showSheet", 2);
Wt = se([
  q("wy-reactions"),
  rt()
], Wt);
var va;
let Pc = (va = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  render() {
    var t, e, i;
    return h`
      <div class="wy-item wy-list-item">
        <wy-avatar
          .src=${(t = this.reaction.created_by) == null ? void 0 : t.avatar_url}
          .name=${(e = this.reaction.created_by) == null ? void 0 : e.name}
        ></wy-avatar>
        <div class="wy-item-body">${(i = this.reaction.created_by) == null ? void 0 : i.name}</div>
        <span class="wy-emoji-icon">${this.reaction.content}</span>
      </div>
    `;
  }
}, o(va, "WyReactionItem"), va);
Pc.styles = [ne, Xf, Jf];
se([
  y({ attribute: !1 })
], Pc.prototype, "reaction", 2);
Pc = se([
  q("wy-reaction-item")
], Pc);
function zu(s) {
  switch (s) {
    case "zoom":
      return "zoom-meetings";
    case "microsoft":
      return "microsoft-teams";
    case "google":
      return "google-meet";
  }
}
o(zu, "getMeetingIconName");
function Mu(s) {
  switch (s) {
    case "zoom":
      return $("Zoom meeting");
    case "microsoft":
      return $("Teams meeting");
    case "google":
      return $("Google Meet");
  }
}
o(Mu, "getMeetingTitle");
var _2 = Object.defineProperty, z2 = Object.getOwnPropertyDescriptor, tm = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? z2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && _2(t, e, r), r;
}, "__decorateClass$Y"), ga;
let Sc = (ga = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  render() {
    const t = ((/* @__PURE__ */ new Date()).getTime() - new Date(this.meeting.created_at).getTime()) / 36e5 > 2;
    return h`
      <div class="wy-list">
        ${t ? h`<div class="wy-item wy-list-item wy-meeting wy-disabled" title="${$("Meeting ended")}">
                <wy-icon svg="${zu(this.meeting.provider)}" size="48" ></wy-icon>                
                <div class="wy-item-body">
                  <div class="wy-item-title">${Mu(this.meeting.provider)}</div>
                  <div class="wy-item-text">${this.meeting.code}</div>
                </div> 
              </div>` : h`<a class="wy-item wy-list-item wy-meeting" href=${this.meeting.join_url} target="_blank"  title="${$("Join meeting")}">
              <wy-icon svg="${zu(this.meeting.provider)}" size="48" color="native"></wy-icon>
              <div class="wy-item-body">
                <div class="wy-item-title">${Mu(this.meeting.provider)}</div>
                <div class="wy-item-text">${this.meeting.code}</div>                
              </div>
            </a>`}
      </div>
    `;
  }
}, o(ga, "WyMeetingCard"), ga);
Sc.styles = X;
tm([
  y({ attribute: !1 })
], Sc.prototype, "meeting", 2);
Sc = tm([
  q("wy-meeting-card"),
  rt()
], Sc);
var M2 = Object.defineProperty, P2 = Object.getOwnPropertyDescriptor, em = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? P2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && M2(t, e, r), r;
}, "__decorateClass$X"), ba;
let Ac = (ba = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.text = "";
  }
  render() {
    const t = this.text.trim();
    let e = "";
    return t.length && (e = t.split(/(\n+)/).map((r) => `<div>${r.split(/(\s+)/).map((a) => `<span class="wy-placeholder">${this.escapeHTML(a)}</span>`).join(" ")}</div>`).join(" ")), h`
      <div>${dr(e)}</div>
    `;
  }
  escapeHTML(t) {
    const e = document.createElement("div");
    return e.textContent = t, e.innerHTML;
  }
}, o(ba, "WySkeleton"), ba);
Ac.styles = X;
em([
  y()
], Ac.prototype, "text", 2);
Ac = em([
  q("wy-skeleton")
], Ac);
const Qp = class Qp {
  constructor(t) {
    this.delay = NaN, this.sleep = !1, t.addController(this), this.host = t;
  }
  createObserver(t) {
    var e;
    (e = this.scrollObserver) == null || e.disconnect(), this.swipeElement = t, this.scrollObserver = new IntersectionObserver(
      (i) => {
        i.forEach(async (r) => {
          r.isIntersecting && !this.sleep && r.intersectionRatio >= 1 && (this.sleep = !0, Number.isNaN(this.delay) || await new Promise((n) => {
            setTimeout(n, this.delay);
          }), r.target === this.prevElement && this.whenPrev && await this.whenPrev(), r.target === this.nextElement && this.whenNext && await this.whenNext(), await this.host.updateComplete);
        });
      },
      { root: t, threshold: 1, rootMargin: "0px" }
    );
  }
  observe(t, e) {
    var i, r, n, a;
    this.prevElement && ((i = this.scrollObserver) == null || i.unobserve(this.prevElement), this.prevElement = void 0), this.nextElement && ((r = this.scrollObserver) == null || r.unobserve(this.nextElement), this.nextElement = void 0), t && ((n = this.scrollObserver) == null || n.observe(t), this.prevElement = t), e && ((a = this.scrollObserver) == null || a.observe(e), this.nextElement = e), this.sleep = !1;
  }
  clearObserver() {
    var t;
    this.prevElement = void 0, this.nextElement = void 0, (t = this.scrollObserver) == null || t.disconnect(), this.sleep = !1;
  }
  hostConnected() {
    this.scrollObserver && (this.prevElement && this.scrollObserver.observe(this.prevElement), this.nextElement && this.scrollObserver.observe(this.nextElement), this.sleep = !1);
  }
  hostDisconnected() {
    var t;
    (t = this.scrollObserver) == null || t.disconnect();
  }
};
o(Qp, "SwipeScrollController");
let Pu = Qp;
var Ui, ir;
const Kp = class Kp {
  constructor(t) {
    T(this, Ui);
    T(this, ir);
    if (S(this, Ui, /* @__PURE__ */ new Map()), this.keyPrefix = "WEAVY_OFFLINE_CACHE", t)
      S(this, ir, t);
    else
      try {
        Ie(), S(this, ir, window.sessionStorage);
      } catch {
        console.warn("Session storage not available.");
      }
  }
  resetPersistPropertiesCache() {
    f(this, Ui).clear();
  }
  getStorageItem(t, e) {
    var r;
    const i = (r = f(this, ir)) == null ? void 0 : r.getItem(`${t}-${e.toString()}`);
    if (i)
      return JSON.parse(i);
  }
  setStorageItem(t, e, i) {
    var n;
    const r = JSON.stringify(i);
    r && ((n = f(this, ir)) == null || n.setItem(`${t}-${e.toString()}`, r));
  }
  persistProperties(t, e, i, r) {
    const n = `${this.keyPrefix}:${r ? `${r}:` : ""}${typeof t}:${e}`;
    for (const a of i) {
      if (!f(this, Ui).has(a.name)) {
        const c = this.getStorageItem(n, a.name);
        c && (a.override || !t[a.name]) && (t[a.name] = c), f(this, Ui).set(a.name, c);
      }
      if (t[a.name] !== f(this, Ui).get(a.name)) {
        const c = t[a.name];
        f(this, Ui).set(a.name, c), this.setStorageItem(n, a.name, c);
      }
    }
  }
};
Ui = new WeakMap(), ir = new WeakMap(), o(Kp, "PersistStorageCache");
let Su = Kp;
var sr, xa;
const Gp = class Gp {
  constructor(t) {
    T(this, sr);
    T(this, xa);
    S(this, sr, ""), this.properties = [], this.initialProperties = /* @__PURE__ */ new Map(), this.persistStorageCache = new Su(), t.addController(this), this.host = t;
  }
  get prefixKey() {
    return f(this, sr);
  }
  set prefixKey(t) {
    t !== f(this, sr) && (this.persistStorageCache.resetPersistPropertiesCache(), S(this, sr, t), this.host.requestUpdate());
  }
  get cachePrefix() {
    return f(this, xa);
  }
  set cachePrefix(t) {
    t !== f(this, xa) && (this.persistStorageCache.resetPersistPropertiesCache(), S(this, xa, t), this.host.requestUpdate());
  }
  observe(t, e, i) {
    this.properties = t;
    const r = !!(this.prefixKey && this.prefixKey !== e || this.cachePrefix && this.cachePrefix !== i);
    this.properties.forEach((n) => {
      r && this.initialProperties.has(n.name) ? this.host[n.name] = this.initialProperties.get(n.name) : this.initialProperties.has(n.name) || this.initialProperties.set(n.name, this.host[n.name]);
    }), e && (this.prefixKey = e), i && (this.cachePrefix = i);
  }
  hostUpdate() {
    this.prefixKey && this.properties && this.host.weavy && this.persistStorageCache.persistProperties(this.host, this.prefixKey, this.properties, this.cachePrefix ? `${this.host.weavy.cachePrefix}:${this.cachePrefix}` : this.host.weavy.cachePrefix);
  }
};
sr = new WeakMap(), xa = new WeakMap(), o(Gp, "PersistStateController");
let Ec = Gp;
var S2 = Object.defineProperty, A2 = Object.getOwnPropertyDescriptor, pl = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? A2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && S2(t, e, r), r;
}, "__decorateClass$W"), $a;
let _s = ($a = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.show = !0, this.maximized = !1, this.filled = !1, this.header = !1, this.viewportRef = st();
  }
  close() {
    var t;
    (t = this.viewportRef.value) == null || t.close(), this.show = !1;
  }
  handleClose(t) {
    this.show = !1, this.dispatchEvent(new CustomEvent("close")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }));
  }
  willUpdate(t) {
    var e, i;
    super.willUpdate(t), t.has("show") && (this.show ? (e = this.viewportRef.value) == null || e.showModal() : (i = this.viewportRef.value) == null || i.close());
  }
  render() {
    const t = {
      "wy-open": this.show,
      "wy-modal-padded": !this.filled && !this.maximized,
      "wy-modal-full": this.maximized && !this.filled
    };
    return h`
      <dialog class="wy-dialog wy-overlay-dialog" ${Q(this.viewportRef)}>
        <div class="wy-overlay wy-transition wy-modal ${Mt(t)}">
          ${this.header ? h`
                <slot name="header">
                  <header class="wy-appbars">
                    <nav class="wy-appbar">
                      <wy-button kind="icon" @click=${() => this.close()}><wy-icon name="close"></wy-icon></wy-button>
                      <slot name="appbar-text" class="wy-appbar-text"></slot>
                      <slot name="appbar-buttons" class="wy-appbar-buttons wy-appbar-buttons-last"></slot>
                    </nav>
                  </header>
                </slot>
              ` : C}
          <slot></slot>
        </div>
      </dialog>
    `;
  }
  updated(t) {
    var e;
    t.has("show") && this.show && ((e = this.viewportRef.value) == null || e.focus());
  }
  firstUpdated(t) {
    var e;
    (e = this.viewportRef.value) == null || e.addEventListener("close", (i) => this.handleClose(i));
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this.close();
  }
}, o($a, "WyOverlay"), $a);
_s.styles = [
  X,
  We,
  yt
];
pl([
  y({ type: Boolean })
], _s.prototype, "show", 2);
pl([
  y({ type: Boolean })
], _s.prototype, "maximized", 2);
pl([
  y({ type: Boolean })
], _s.prototype, "filled", 2);
pl([
  y({ type: Boolean })
], _s.prototype, "header", 2);
_s = pl([
  q("wy-overlay")
], _s);
const Ad = dt`.wy-dropdown{position:relative}.wy-dropdown-toggle{white-space:nowrap}.wy-dropdown-menu{width:max-content;position:absolute;z-index:1000;min-width:calc(10 * var(--wy-size, 1rem));border:none;padding:0;--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);font-size:var(--wy-font-size, var(--wy-size, 1em));text-align:left;background-clip:padding-box;border-radius:var(--wy-dropdown-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));box-shadow:var(--wy-dropdown-shadow, var(--wy-shadow-level1, 0 calc(.125 * var(--wy-size, 1rem)) calc(.125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .14), 0 calc(.1875 * var(--wy-size, 1rem)) calc(.0625 * var(--wy-size, 1rem)) calc(-.125 * var(--wy-size, 1rem)) rgba(0, 0, 0, .2), 0 calc(.0625 * var(--wy-size, 1rem)) calc(.3125 * var(--wy-size, 1rem)) 0 rgba(0, 0, 0, .12)));overflow:hidden}.wy-dropdown-menu:not([popover]){display:block}.wy-dropdown-item{background-color:transparent;color:var(--wy-component-color, var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e)));width:100%;padding:var(--wy-dropdown-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-dropdown-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));clear:both;font-family:var(--wy-font-family, unset),inherit;font-size:inherit;font-weight:var(--wy-font-weight, unset);line-height:1;text-align:inherit;text-decoration:none;white-space:nowrap;border:0;gap:var(--wy-dropdown-gap, var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));cursor:pointer;display:flex;align-items:center}.wy-dropdown-item:hover,.wy-dropdown-item:focus{--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e));--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));color:var(--wy-component-color);background-color:var(--wy-component-background-color);text-decoration:none}.wy-dropdown-item.wy-active,.wy-dropdown-item:active{--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32));--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));color:var(--wy-component-color);background-color:var(--wy-component-background-color);text-decoration:none}.wy-dropdown-item.wy-disabled,.wy-dropdown-item:disabled{color:var(--wy-component-color);background-color:var(--wy-component-background-color);pointer-events:none;opacity:var(--wy-opacity-disabled, 38%)}.wy-dropdown-item>img,.wy-dropdown-item>wy-icon{margin-right:calc(.5 * var(--wy-size, 1rem))}.wy-dropdown-item>img,.wy-dropdown-item>img .wy-icon,.wy-dropdown-item>wy-icon,.wy-dropdown-item>wy-icon .wy-icon{color:inherit}.wy-dropdown-item:active>wy-icon,.wy-dropdown-item:active>wy-icon .wy-icon{color:inherit}.wy-dropdown-item.wy-option wy-icon{visibility:hidden}.wy-dropdown-item.wy-option.wy-selected wy-icon{visibility:visible}.wy-dropdown-divider{height:0;margin:0;overflow:hidden;border:none;border-top:var(--wy-dropdown-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}`;
var E2 = Object.defineProperty, O2 = Object.getOwnPropertyDescriptor, fe = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? O2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && E2(t, e, r), r;
}, "__decorateClass$V"), Ca;
let De = (Ca = class extends it {
  constructor() {
    super(), this.exportParts = new W(this), this.directionX = "right", this.directionY = "down", this.icon = "dots-vertical", this.small = !1, this.noWrapper = !1, this.disabled = !1, this._placement = "bottom-start", this.showMenu = !1, this.buttonRef = st(), this.menuRef = st(), this._documentClickHandler = (t) => {
      var e;
      this.showMenu && (t.preventDefault(), (e = this.menuRef.value) != null && e.popover || (this.showMenu = !1));
    }, this.addEventListener("click", (t) => {
      t.preventDefault();
    });
  }
  handleClose(t) {
    (t.type === "toggle" && t.newState === "closed" || t.type === "click") && (this.showMenu = !1, this.dispatchEvent(new CustomEvent("close")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
  }
  handleClickToggle(t) {
    t.stopPropagation(), this.showMenu = this.disabled ? !1 : !this.showMenu;
  }
  willUpdate(t) {
    var e, i, r;
    if (super.willUpdate(t), (t.has("disabled") || t.has("showMenu")) && this.disabled && this.showMenu && (this.showMenu = !1), (t.has("directionX") || t.has("directionY")) && (this._placement = this.directionX === "right" && this.directionY === "down" ? "bottom-start" : this.directionX === "left" && this.directionY === "down" ? "bottom-end" : this.directionX === "right" && this.directionY === "up" ? "top-start" : "top-end"), t.has("showMenu") && (this.showMenu && !this.computePositionCleanup && this.buttonRef.value && this.menuRef.value ? this.computePositionCleanup = Qf(this.buttonRef.value, this.menuRef.value, () => {
      this.buttonRef.value && this.menuRef.value && Yf(this.buttonRef.value, this.menuRef.value, {
        placement: this._placement,
        strategy: this.menuRef.value.popover ? "absolute" : "fixed",
        middleware: [
          Zf(),
          Kf(({ placement: n }) => n.includes("top") ? 9 : 13),
          Gf({ mainAxis: !0, crossAxis: !0, padding: 4, altBoundary: !0 })
        ]
      }).then(({ x: n, y: a }) => {
        this.menuRef.value && Object.assign(this.menuRef.value.style, {
          marginLeft: `${n}px`,
          marginTop: `${a}px`,
          top: 0,
          left: 0,
          position: this.menuRef.value.popover ? void 0 : "fixed",
          zIndex: this.menuRef.value.popover ? void 0 : 1075
        });
      });
    }) : !this.showMenu && this.computePositionCleanup && ((e = this.computePositionCleanup) == null || e.call(this), this.computePositionCleanup = void 0)), this.showMenu) {
      requestAnimationFrame(() => {
        document.addEventListener("click", this._documentClickHandler, { once: !0, capture: !0 });
      });
      try {
        (i = this.menuRef.value) == null || i.showPopover();
      } catch {
      }
    } else
      try {
        (r = this.menuRef.value) == null || r.hidePopover();
      } catch {
      }
  }
  render() {
    const t = this._slotButton.length === 0 || this._slotButton.length === 1 && this._slotButton[0] instanceof Lt;
    return h`
      <span>
        <span
          ${Q(this.buttonRef)}
          @click=${(e) => this.handleClickToggle(e)}
          @keydown=${ye}
          @keyup=${Fe}
        >
          <wy-button
            .kind=${t ? "icon" : void 0}
            ?small=${this.small}
            title=${this.title}
            ?active=${this.showMenu}
            ?disabled=${this.disabled}
          >
            <slot name="button" @slotchange=${() => this.requestUpdate()}>
              <wy-icon name=${this.icon}></wy-icon>
            </slot>
          </wy-button>
        </span>

        <div
          ${Q(this.menuRef)}
          @click=${(e) => this.handleClickToggle(e)}
          @keyup=${cp}
          class="wy-dropdown-menu"
          ?hidden=${Vh() && !this.showMenu}
          popover=${lt(Vh() ? void 0 : "auto")}
        >
          <slot></slot>
        </div>
      </span>
    `;
  }
  firstUpdated(t) {
    var e;
    (e = this.menuRef.value) == null || e.addEventListener(this.menuRef.value.popover ? "toggle" : "click", (i) => this.handleClose(i));
  }
  disconnectedCallback() {
    var t;
    (t = this.computePositionCleanup) == null || t.call(this), super.disconnectedCallback();
  }
}, o(Ca, "WyDropdown"), Ca);
De.styles = [
  ne,
  Ad
];
fe([
  y()
], De.prototype, "directionX", 2);
fe([
  y()
], De.prototype, "directionY", 2);
fe([
  y()
], De.prototype, "icon", 2);
fe([
  y({ type: Boolean })
], De.prototype, "small", 2);
fe([
  y({ type: Boolean })
], De.prototype, "noWrapper", 2);
fe([
  y({ type: Boolean })
], De.prototype, "disabled", 2);
fe([
  H()
], De.prototype, "_placement", 2);
fe([
  H()
], De.prototype, "showMenu", 2);
fe([
  Nw({ slot: "button" })
], De.prototype, "_slotButton", 2);
fe([
  H()
], De.prototype, "computePositionCleanup", 2);
De = fe([
  q("wy-dropdown")
], De);
var ka;
let Oc = (ka = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.active = !1;
  }
  render() {
    return h`<div class="wy-dropdown-item ${Mt({ "wy-active": this.active })}" tabindex="0"
      ><slot></slot
    ></div>`;
  }
}, o(ka, "WyDropdownItem"), ka);
Oc.styles = [
  ne,
  Ad,
  yt
];
fe([
  y({ type: Boolean })
], Oc.prototype, "active", 2);
Oc = fe([
  q("wy-dropdown-item")
], Oc);
var _a;
let No = (_a = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.active = !1, this.selected = !1;
  }
  render() {
    const t = {
      visibility: this.selected ? null : "hidden"
    };
    return h`
      <div
        class="wy-dropdown-item wy-option ${Mt({ "wy-active": this.active, "wy-selected": this.selected })}"
        tabindex="0"
      >
        <slot name="icon" style=${kc(t)}><wy-icon name="check"></wy-icon></slot>
        <slot></slot>
      </div>
    `;
  }
}, o(_a, "WyDropdownOption"), _a);
No.styles = [
  ne,
  Ad,
  yt
];
fe([
  y({ type: Boolean })
], No.prototype, "active", 2);
fe([
  y({ type: Boolean })
], No.prototype, "selected", 2);
No = fe([
  q("wy-dropdown-option")
], No);
var za;
let nd = (za = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  render() {
    return h`<hr class="wy-dropdown-divider" />`;
  }
}, o(za, "WyDropdownDivider"), za);
nd.styles = [
  ne,
  Ad,
  yt
];
nd = fe([
  q("wy-dropdown-divider")
], nd);
var R2 = Object.defineProperty, L2 = Object.getOwnPropertyDescriptor, Ed = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? L2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && R2(t, e, r), r;
}, "__decorateClass$U"), Ma;
let wr = (Ma = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  render() {
    const t = this.icon, e = Ls(this.provider);
    return h`
      <wy-icon-display>
        <wy-icon name=${t} .overlayName=${e}></wy-icon>
        <span slot="text">
          ${this.provider ? h`
                <span>${$("No preview available :(")} </span>
                <a href=${this.src} target="_blank">${$(vt`Open in ${this.provider}?`)}</a>
              ` : h`<span>${$("No preview available :(")}</span>`}
        </span>
      </wy-icon-display>
    `;
  }
}, o(Ma, "WyPreviewIcon"), Ma);
wr.styles = [
  X,
  yt
];
Ed([
  y()
], wr.prototype, "src", 2);
Ed([
  y()
], wr.prototype, "icon", 2);
Ed([
  y()
], wr.prototype, "provider", 2);
wr = Ed([
  q("wy-preview-icon"),
  rt()
], wr);
var I2 = Object.defineProperty, T2 = Object.getOwnPropertyDescriptor, Od = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? T2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && I2(t, e, r), r;
}, "__decorateClass$T"), Pa;
let fr = (Pa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  render() {
    if (this.width && this.height) {
      const t = { "--width": this.width, "--height": this.height };
      return h`
        <div class="wy-content-image wy-responsive-image" style=${kc(t)}>
          <img
            class="wy-loading-transition"
            src=${this.src}
            ${Q(Xl)}
            @load=${Jl}
            width=${this.width}
            height=${this.height}
            decoding="async"
            alt=${$("Preview")} />
          <wy-spinner></wy-spinner>
        </div>
      `;
    } else
      return h`
        <div class="wy-content-image wy-responsive-image wy-intrinsic-image">
          <img src=${this.src} ${Q(Xl)} @load=${Jl} decoding="async" alt=${$("Preview")} />
        </div>
      `;
  }
}, o(Pa, "WyPreviewImage"), Pa);
fr.styles = [
  X,
  yt
];
Od([
  y()
], fr.prototype, "src", 2);
Od([
  y({ type: Number })
], fr.prototype, "width", 2);
Od([
  y({ type: Number })
], fr.prototype, "height", 2);
fr = Od([
  q("wy-preview-image"),
  rt()
], fr);
function im(s) {
  s.classList.contains("wy-loading") && s.classList.add("wy-loaded"), s.classList.add("wy-error"), s.outerHTML = s.outerHTML.replace(/<(video|audio)/, "<div").replace(/(video|audio)>/, "div>");
}
o(im, "mediaFallback");
function Dy(s) {
  const t = s.target;
  (t.tagName === "VIDEO" || t.tagName === "AUDIO") && t.classList.contains("wy-loading") && t.classList.add("wy-loaded");
}
o(Dy, "mediaLoaded");
function Hy(s) {
  const t = s.target;
  if (t.tagName === "SOURCE" && t.parentNode) {
    const e = t.parentNode, i = parseInt(e.dataset.errors || "0") + 1;
    e.dataset.errors = i.toString(), e.querySelectorAll("source").length >= i && (console.warn(e.tagName.toLowerCase() + " source error, switching to fallback"), im(e));
  }
}
o(Hy, "mediaError");
function Vy(s) {
  const t = s.target;
  (t.tagName === "VIDEO" || t.tagName === "AUDIO") && (t.tagName === "VIDEO" && !t.videoWidth || t.tagName === "AUDIO" && !t.duration) && (console.warn(t.tagName.toLowerCase() + " track not available, switching to fallback"), im(t));
}
o(Vy, "codecError");
var F2 = Object.defineProperty, D2 = Object.getOwnPropertyDescriptor, ac = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? D2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && F2(t, e, r), r;
}, "__decorateClass$S"), Sa;
let Gi = (Sa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.format = "", this.play = !1, this.name = "";
  }
  registerLoading(t) {
    this.unregisterLoading(), t && (this.mediaElement = t, t.classList.add("wy-loading"), t.addEventListener("error", Hy, !0), t.addEventListener("loadedmetadata", Dy, !0), t.addEventListener("loadedmetadata", Vy, !0));
  }
  unregisterLoading() {
    this.mediaElement && (this.mediaElement.pause(), this.mediaElement.removeAttribute("autoplay"), this.mediaElement.setAttribute("preload", "none"), this.mediaElement.removeEventListener("error", Hy, !0), this.mediaElement.removeEventListener("loadedmetadata", Dy, !0), this.mediaElement.removeEventListener("loadedmetadata", Vy, !0), this.mediaElement = void 0);
  }
  render() {
    return this.format === "video" ? h`
          <video ${Q((t) => this.registerLoading(t))} class="wy-content-video" controls crossorigin="use-credentials">
            <source src=${this.src} type=${lt(this.mediaType)} />
            <wy-preview-icon src=${this.src} icon="file-video"></wy-preview-icon>
          </video>
          <wy-spinner></wy-spinner>
        ` : h`
          <audio ${Q((t) => this.registerLoading(t))} class="wy-content-audio" controls crossorigin="use-credentials">
            <source src=${this.src} type=${lt(this.mediaType)} />
          </audio>
        `;
  }
  updated(t) {
    super.updated(t), t.has("play") && this.mediaElement && (this.play ? this.mediaElement.play() : this.mediaElement.pause());
  }
  disconnectedCallback() {
    this.unregisterLoading(), super.disconnectedCallback();
  }
}, o(Sa, "WyPreviewMedia"), Sa);
Gi.styles = [
  X,
  yt
];
ac([
  y()
], Gi.prototype, "format", 2);
ac([
  y()
], Gi.prototype, "src", 2);
ac([
  y({ type: Boolean })
], Gi.prototype, "play", 2);
ac([
  y()
], Gi.prototype, "name", 2);
ac([
  y()
], Gi.prototype, "mediaType", 2);
Gi = ac([
  q("wy-preview-media")
], Gi);
var H2 = Object.defineProperty, V2 = Object.getOwnPropertyDescriptor, zr = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? V2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && H2(t, e, r), r;
}, "__decorateClass$R"), Aa;
let Si = (Aa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.html = !1, this.code = !1, this.textOrHtmlContent = "", this.loading = !0;
  }
  updated(t) {
    super.updated(t), (t.has("weavy") || t.has("src")) && this.weavy && (this.loading = !0, this.weavy.fetchOptions().then((e) => fetch(this.src, e)).then(cv).then((e) => new Response(e)).then((e) => e.text()).then((e) => {
      this.loading = !1, this.textOrHtmlContent = e;
    }));
  }
  render() {
    return this.loading ? h` <wy-empty><wy-spinner></wy-spinner></wy-empty> ` : this.html ? this.code ? h` <div class="wy-content-code wy-code">${dr(this.textOrHtmlContent)}</div> ` : h`
            <div class="wy-document wy-light">
              <div class="wy-content-html">${dr(this.textOrHtmlContent)}</div>
            </div>
          ` : this.code ? h` <div class="wy-content-code">${this.textOrHtmlContent}</div> ` : h`
          <div class="wy-document wy-light">
            <pre class="wy-content-text">${this.textOrHtmlContent}</pre>
          </div>
        `;
  }
}, o(Aa, "WyPreviewText"), Aa);
Si.styles = [X, We, yt];
zr([
  ee({ context: le, subscribe: !0 }),
  H()
], Si.prototype, "weavy", 2);
zr([
  y()
], Si.prototype, "src", 2);
zr([
  y({ type: Boolean })
], Si.prototype, "html", 2);
zr([
  y({ type: Boolean })
], Si.prototype, "code", 2);
zr([
  H()
], Si.prototype, "textOrHtmlContent", 2);
zr([
  H()
], Si.prototype, "loading", 2);
Si = zr([
  q("wy-preview-text")
], Si);
var B2 = Object.defineProperty, U2 = Object.getOwnPropertyDescriptor, yl = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? U2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && B2(t, e, r), r;
}, "__decorateClass$Q"), Ea;
let zs = (Ea = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  registerLoading(t) {
    var e;
    if ((e = this.unregisterLoading) == null || e.call(this), t) {
      this.embedElement = t, t.classList.add("wy-loading");
      const i = window.setTimeout(() => {
        t.classList.add("wy-fallback");
      }, 2500), r = /* @__PURE__ */ o((n) => {
        const a = n.target;
        a.tagName === "OBJECT" && a.classList.contains("wy-loading") && !a.classList.contains("wy-loaded") && (a.classList.add("wy-loaded"), window.clearTimeout(i));
      }, "embedLoaded");
      t.addEventListener("load", r, !0), this.unregisterLoading = () => {
        this.embedElement && (t.removeEventListener("load", r, !0), window.clearTimeout(i), this.embedElement = void 0);
      };
    }
  }
  render() {
    return h`
      <object title=${$("Preview")} ${Q((t) => this.registerLoading(t))} class="wy-content-iframe" data=${this.src}></object>
      <wy-spinner overlay></wy-spinner>
      <wy-preview-icon
        src=${this.src}
        icon=${this.icon}
        provider=${lt(this.provider)}
        class="wy-content-iframe-fallback"></wy-preview-icon>
    `;
  }
  disconnectedCallback() {
    var t;
    (t = this.unregisterLoading) == null || t.call(this), super.disconnectedCallback();
  }
}, o(Ea, "WyPreviewEmbed"), Ea);
zs.styles = [
  X,
  yt
];
yl([
  y()
], zs.prototype, "src", 2);
yl([
  y()
], zs.prototype, "name", 2);
yl([
  y()
], zs.prototype, "icon", 2);
yl([
  y()
], zs.prototype, "provider", 2);
zs = yl([
  q("wy-preview-embed"),
  rt()
], zs);
function vc(s = "", t = "", e = "", i = !1) {
  if (Ie(), s) {
    const r = document.createElement("a");
    i && (/^(data:|blob:)/.test(s) ? r.download = e || "download" : s = s.includes("?d=1") || s.includes("&d=1") ? s : s.includes("?") ? s + "&d=1" : s + "?d=1"), t && (r.target = t), r.href = s, document.body.appendChild(r);
    try {
      r.click();
    } catch {
      if (console.warn("Could not open link normally, trying fallback"), /^(?:blob:|data:)/.test(s))
        console.error(`Could not ${i ? "download" : "open"} ${e}`);
      else
        try {
          window.open(s, t);
        } catch {
          console.error(`Could not ${i ? "download" : "open"} ${e}`);
        }
    }
    document.body.removeChild(r);
  }
}
o(vc, "openUrl");
function By(s, t) {
  return new URL(
    s,
    typeof WEAVY_IMPORT_URL == "string" && (!t || !new URL(t).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : t
  );
}
o(By, "environmentUrl");
var q2 = Object.defineProperty, N2 = Object.getOwnPropertyDescriptor, Rd = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? N2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && q2(t, e, r), r;
}, "__decorateClass$P"), Oa;
let mr = (Oa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.whenPdfjs = new Promise((t) => {
      this.whenPdfjsResolve = t;
    }), this.MAX_CANVAS_PIXELS = 0, this.TEXT_LAYER_MODE = 0, this.MAX_IMAGE_SIZE = -1, this.CMAP_PACKED = !0, this.DEFAULT_SCALE_DELTA = 1.1, this.MIN_SCALE = 0.25, this.MAX_SCALE = 10, this.DEFAULT_SCALE_VALUE = "auto", this.ENABLE_XFA = !0, this.DEFAULT_WORKER_URL = "/pdfjs/pdf.worker.min.mjs", this.DEFAULT_CMAPS_URL = "/pdfjs/cmaps/", this.pageNumberRef = st(), this.totalPagesRef = st(), this.zoomLevelRef = st(), this.viewerContainerRef = st(), this.resizer = new ResizeObserver(() => {
      this.pdfViewer && (this.delayedResize && (clearTimeout(this.delayedResize), this.delayedResize = void 0), this.delayedResize = window.setTimeout(() => {
        this.pdfViewer && (this.pdfViewer.currentScaleValue = this.pdfViewer._currentScaleValue);
      }, 100));
    });
  }
  ////////
  async open() {
    var i;
    const { pdfjsLib: t } = await this.whenPdfjs;
    if (!this.pdfViewer || !this.pdfHistory || !this.l10n || !this.pdfLinkService)
      return;
    this.pdfLoadingTask && await this.close();
    const e = t.getDocument({
      url: this.src,
      maxImageSize: this.MAX_IMAGE_SIZE,
      enableXfa: this.ENABLE_XFA,
      cMapUrl: ((i = this.CMAP_URL) == null ? void 0 : i.toString()) || "",
      cMapPacked: this.CMAP_PACKED
    });
    this.pdfLoadingTask = e, e.onProgress = (r) => {
    };
    try {
      const r = await e.promise;
      this.pdfDocument = r, this.pdfViewer.setDocument(r), this.pdfLinkService.setDocument(r), this.pdfHistory.initialize({
        // @ts-expect-error Type 'string | null' is not assignable to type 'string'.
        fingerprint: r.fingerprints[0]
      });
    } catch (r) {
      let n = "pdfjs-loading-error";
      r instanceof t.InvalidPDFException ? n = "pdfjs-invalid-file-error" : r instanceof t.MissingPDFException ? n = "pdfjs-missing-file-error" : r instanceof t.UnexpectedResponseException && (n = "pdfjs-unexpected-response-error"), await this.l10n.get(n, void 0, void 0).then((a) => {
        this.pdfViewError(t, a, { message: r == null ? void 0 : r.message });
      });
    }
  }
  async close() {
    var e, i;
    if (!this.pdfLoadingTask)
      return Promise.resolve();
    const t = this.pdfLoadingTask.destroy();
    return this.pdfLoadingTask = void 0, this.pdfDocument && (this.pdfDocument = void 0, (e = this.pdfViewer) == null || e.setDocument(null), (i = this.pdfLinkService) == null || i.setDocument(null, null), this.pdfHistory && this.pdfHistory.reset()), await t;
  }
  pdfViewError(t, e, i) {
    const r = [`PDF.js v${(t == null ? void 0 : t.version) || "?"} (build: ${(t == null ? void 0 : t.build) || "?"})`];
    i && (r.push(`Message: ${i.message}`), i.stack ? r.push(`Stack: ${i.stack}`) : (i.filename && r.push(`File: ${i.filename}`), i.lineNumber && r.push(`Line: ${i.lineNumber}`))), console.error(`${e}

${r.join(`
`)}`);
  }
  ///////
  setPage(t) {
    this.pdfViewer && (this.pdfViewer.currentPageNumber = t);
  }
  zoomIn(t = 0) {
    if (this.pdfViewer) {
      let e = this.pdfViewer.currentScale;
      do
        e = parseFloat((e * this.DEFAULT_SCALE_DELTA).toFixed(2)), e = Math.ceil(e * 10) / 10, e = Math.min(this.MAX_SCALE, e);
      while (--t && e < this.MAX_SCALE);
      this.pdfViewer.currentScaleValue = e.toFixed(2);
    }
  }
  zoomOut(t = 0) {
    if (this.pdfViewer) {
      let e = this.pdfViewer.currentScale;
      do
        e = parseFloat((e / this.DEFAULT_SCALE_DELTA).toFixed(2)), e = Math.floor(e * 10) / 10, e = Math.max(this.MIN_SCALE, e);
      while (--t && e > this.MIN_SCALE);
      this.pdfViewer.currentScaleValue = e.toFixed(2);
    }
  }
  setScale(t) {
    this.pdfViewer && (this.pdfViewer.currentScaleValue = typeof t == "number" ? t.toFixed(2) : t);
  }
  updatePage() {
    if (this.pdfViewer && this.pageNumberRef.value) {
      const t = parseInt(this.pageNumberRef.value.value);
      isNaN(t) ? this.setPage(this.pdfViewer.currentPageNumber) : t > this.pdfViewer.pagesCount ? this.setPage(this.pdfViewer.pagesCount) : t <= 0 ? this.setPage(1) : this.setPage(t);
    }
  }
  select(t) {
    const e = t.target;
    e && e.setSelectionRange(0, e.value.length);
  }
  fitToPage() {
    this.setScale("page-fit");
  }
  fitToWidth() {
    this.setScale("page-width");
  }
  updateZoom() {
    if (this.pdfViewer && this.zoomLevelRef.value) {
      const t = parseFloat(this.zoomLevelRef.value.value.replace("%", ""));
      isNaN(t) ? this.setScale(this.pdfViewer.currentScale + 1e-4) : this.setScale(t / 100);
    }
  }
  // clearDocument() {
  //   try {
  //     this.loadingTask?.destroy();
  //     //console.debug("loadingTask cleanup", loadingTask)
  //   } catch (e) {
  //     /* No worries */
  //   }
  //   try {
  //     // eslint-disable-next-line @typescript-eslint/ban-ts-comment
  //     // @ts-ignore due to incorrect param type def?
  //     this.pdfViewer?.setDocument(null);
  //   } catch (e) {
  //     /* No worries */
  //   }
  //   try {
  //     this.pdfLinkService.setDocument(null, null);
  //   } catch (e) {
  //     /* No worries */
  //   }
  // }
  async willUpdate(t) {
    var e;
    super.willUpdate(t), t.has("weavy") && this.weavy && (this.pdfjsLib || (await this.weavy.whenUrl(), this.pdfjsLib = await import(
      /* webpackIgnore: true */
      /* @vite-ignore */
      new URL("./es/pdfjs-dist/build/pdf.mjs.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
    ), globalThis.pdfjsLib = this.pdfjsLib, this.pdfjsViewer = await import(
      /* webpackIgnore: true */
      /* @vite-ignore */
      new URL("./es/pdfjs-dist/web/pdf_viewer.mjs.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
    ), (e = this.whenPdfjsResolve) == null || e.call(this, {
      pdfjsLib: this.pdfjsLib,
      pdfjsViewer: this.pdfjsViewer
    })), this.pdfjsLib && !this.WORKER_URL && (this.WORKER_URL = By(this.DEFAULT_WORKER_URL, import.meta.url), this.WORKER_URL.searchParams.append("v", this.weavy.version), this.pdfjsLib.GlobalWorkerOptions.workerSrc = this.WORKER_URL.toString()), this.CMAP_URL || (this.CMAP_URL = By(this.DEFAULT_CMAPS_URL, import.meta.url)));
  }
  update(t) {
    super.update(t), (t.has("weavy") || t.has("src") || t.has("pdfViewer")) && this.weavy && this.src && this.pdfViewer && this.open();
  }
  async updated() {
    var t, e, i, r, n, a;
    if (this.weavy && this.viewerContainerRef.value && !this.pdfViewer) {
      const { pdfjsLib: c, pdfjsViewer: l } = await this.whenPdfjs;
      this.viewerContainerRef.value && !this.pdfViewer && (this.pdfEventBus = new l.EventBus(), this.pdfLinkService = new l.PDFLinkService({
        eventBus: this.pdfEventBus
      }), this.l10n = new l.GenericL10n((t = this.weavy) == null ? void 0 : t.locale), this.pdfViewer = new l.PDFViewer({
        container: this.viewerContainerRef.value,
        eventBus: this.pdfEventBus,
        linkService: this.pdfLinkService,
        //findController: this.pdfFindController,
        annotationEditorMode: c.AnnotationEditorType.DISABLE,
        l10n: this.l10n,
        maxCanvasPixels: this.MAX_CANVAS_PIXELS,
        textLayerMode: this.TEXT_LAYER_MODE
      }), (e = this.pdfLinkService) == null || e.setViewer(this.pdfViewer), this.pdfHistory = new l.PDFHistory({
        eventBus: this.pdfEventBus,
        linkService: this.pdfLinkService
      }), (i = this.pdfLinkService) == null || i.setHistory(this.pdfHistory), (r = this.pdfEventBus) == null || r.on("scalechanging", () => {
        this.zoomLevelRef.value && this.pdfViewer ? this.zoomLevelRef.value.value = Math.round(this.pdfViewer.currentScale * 100).toFixed(0) + "%" : console.warn("Could not set zoom level");
      }), (n = this.pdfEventBus) == null || n.on("pagechanging", () => {
        this.pageNumberRef.value && this.pdfViewer ? this.pageNumberRef.value.value = this.pdfViewer.currentPageNumber.toFixed(0) : console.warn("Could not set page number");
      }), (a = this.pdfEventBus) == null || a.on("pagesinit", () => {
        this.isConnected && this.pdfViewer && this.pageNumberRef.value && this.totalPagesRef.value ? (this.pdfViewer.currentScaleValue = this.DEFAULT_SCALE_VALUE, this.pageNumberRef.value.value = "1", this.totalPagesRef.value.innerText = this.pdfViewer.pagesCount.toFixed(0), this.resizer.observe(this.pdfViewer.container)) : console.warn("Could not init pdf page");
      }));
    }
  }
  render() {
    return h`
      <div class="wy-content-pdf">
        <div class="wy-toolbars-bottom">
          <nav class="wy-toolbar wy-toolbar-center">
            <div class="wy-toolbar-buttons">
              <input
                type="text"
                class="wy-input wy-pdf-page-number"
                ${Q(this.pageNumberRef)}
                @keydown=${Yl}
                @keyup=${Cs}
                @change=${() => this.updatePage()}
                @click=${(t) => this.select(t)}
              />
              <span class="wy-toolbar-text">/</span>
              <span class="wy-toolbar-text" ${Q(this.totalPagesRef)}>1</span>
            </div>
            <div class="wy-toolbar-buttons">
              <wy-button kind="icon" class="btn-zoom-out" @click=${() => this.zoomOut()} title=${$("Zoom out")}>
                <wy-icon name="minus"></wy-icon>
              </wy-button>
              <input
                type="text"
                class="wy-input wy-pdf-zoom-level"
                ${Q(this.zoomLevelRef)}
                @keydown=${Yl}
                @keyup=${Cs}
                @change=${() => this.updateZoom()}
                @click=${(t) => this.select(t)}
                value="100%"
              />
              <wy-button kind="icon" class="btn-zoom-in" @click=${() => this.zoomIn()} title=${$("Zoom in")}>
                <wy-icon name="plus"></wy-icon>
              </wy-button>
            </div>
            <div class="wy-toolbar-buttons">
              <wy-button kind="icon" class="btn-fit-page" @click=${() => this.fitToWidth()} title=${$("Fit to width")}>
                <wy-icon name="fit-width"></wy-icon>
              </wy-button>
              <wy-button kind="icon" @click=${() => this.fitToPage()} title=${$("Fit to screen")}>
                <wy-icon name="fit-screen"></wy-icon>
              </wy-button>
            </div>
          </nav>
        </div>
        <div ${Q(this.viewerContainerRef)} class="wy-pdf-container">
          <div class="pdfViewer"></div>
        </div>
      </div>
    `;
  }
  connectedCallback() {
    super.connectedCallback(), this.pdfViewer && this.resizer.observe(this.pdfViewer.container);
  }
  disconnectedCallback() {
    var t;
    this.resizer.unobserve(this);
    try {
      this.close(), (t = this.pdfViewer) == null || t.cleanup();
    } catch {
    }
    this.pdfViewer = void 0, super.disconnectedCallback();
  }
}, o(Oa, "WyPdfViewer"), Oa);
mr.styles = [
  X,
  yt
];
Rd([
  ee({ context: le, subscribe: !0 }),
  H()
], mr.prototype, "weavy", 2);
Rd([
  y()
], mr.prototype, "src", 2);
Rd([
  H()
], mr.prototype, "pdfViewer", 2);
mr = Rd([
  q("wy-pdf-viewer"),
  rt()
], mr);
var j2 = Object.defineProperty, W2 = Object.getOwnPropertyDescriptor, fp = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? W2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && j2(t, e, r), r;
}, "__decorateClass$O"), Ra;
let jo = (Ra = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.current = !1;
  }
  render() {
    const t = this.file;
    if (!t) return C;
    const { icon: e } = Ei(t.name), i = Qe(t.name);
    let r = t.preview_url || t.download_url || "";
    t.preview_format === "image" && (i === ".gif" || i === ".svg") && (r = t.download_url || "");
    const a = r, c = t.external_url, l = t.is_trashed ? "none" : t.preview_format, u = t.name, p = t.width, w = t.height, b = t.media_type, m = t.provider;
    return l === "image" ? h`<wy-preview-image
        src=${a}
        width=${lt(p)}
        height=${lt(w)}
      ></wy-preview-image>` : l === "pdf" ? h`<wy-pdf-viewer src=${a}></wy-pdf-viewer>` : l === "video" || l === "audio" ? h`<wy-preview-media
        format=${l}
        src=${a}
        name=${u}
        mediaType=${b}
        ?play=${this.current}
      ></wy-preview-media>` : l === "text" ? h`<wy-preview-text src=${a}></wy-preview-text>` : l === "code" ? h`<wy-preview-text src=${a} ?html=${!/^(?:blob:|data:)/.test(a)} code></wy-preview-text>` : l === "html" ? h`<wy-preview-text src=${a} html></wy-preview-text>` : l === "embed" ? h`<wy-preview-embed
        src=${a}
        name=${u}
        icon=${e}
        provider=${lt(m)}
      ></wy-preview-embed>` : l === "none" ? c ? h`<wy-preview-icon src=${c} icon=${e} provider=${lt(m)}></wy-preview-icon>` : h`<wy-preview-icon src=${a} icon=${e}></wy-preview-icon>` : C;
  }
}, o(Ra, "WyPreviewItem"), Ra);
jo.styles = [
  X,
  yt
];
fp([
  y({ type: Object })
], jo.prototype, "file", 2);
fp([
  y({ type: Boolean })
], jo.prototype, "current", 2);
jo = fp([
  q("wy-preview-item")
], jo);
var Q2 = Object.defineProperty, K2 = Object.getOwnPropertyDescriptor, oc = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? K2(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Q2(t, e, r), r;
}, "__decorateClass$N"), La;
let Ms = (La = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.noWrapper = !1, this.small = !1, this.hasEventListener = {
      "edit-name": !1,
      subscribe: !1,
      trash: !1,
      restore: !1,
      "delete-forever": !1
    };
  }
  addEventListener(t, e, i) {
    if (this.hasEventListener) {
      const r = t;
      Object.prototype.hasOwnProperty.call(this.hasEventListener, r) && Object.assign(this.hasEventListener, {
        [r]: !0
      });
    }
    super.addEventListener(t, e, i);
  }
  triggerDownload() {
    this.file && vc(this.file.download_url, "_top", this.file.name, !0);
  }
  triggerExternal() {
    this.file && vc(this.file.external_url, "_blank", this.file.name);
  }
  triggerApplication() {
    this.file && vc(this.file.application_url, "_top", this.file.name);
  }
  dispatchEditName() {
    const t = new CustomEvent("edit-name", {
      detail: { file: this.file }
    });
    return this.dispatchEvent(t);
  }
  dispatchSubscribe(t) {
    const e = new CustomEvent("subscribe", {
      detail: {
        file: this.file,
        subscribe: t
      }
    });
    return this.dispatchEvent(e);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", {
      detail: { file: this.file }
    });
    return this.dispatchEvent(t);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", {
      detail: { file: this.file }
    });
    return this.dispatchEvent(t);
  }
  dispatchDeleteForever() {
    const t = new CustomEvent("delete-forever", {
      detail: { file: this.file }
    });
    return this.dispatchEvent(t);
  }
  render() {
    var n;
    if (!this.file)
      return C;
    const { icon: t } = Ei(this.file.name), e = this.file.id >= 1, i = this.file.provider, r = this.file.provider || "app";
    return h`
      <wy-dropdown directionX="left" ?noWrapper=${this.noWrapper} ?small=${this.small}>
        ${e && this.file.is_trashed ? h`
              ${this.hasEventListener.restore ? h`
                    <wy-dropdown-item @click=${() => this.dispatchRestore()}>
                      <wy-icon name="delete-restore"></wy-icon>
                      ${$("Restore")}
                    </wy-dropdown-item>
                  ` : C}
              ${this.hasEventListener.restore && this.hasEventListener["delete-forever"] ? h` <wy-dropdown-divider></wy-dropdown-divider> ` : C}
              ${this.hasEventListener["delete-forever"] ? h`
                    <wy-dropdown-item @click=${() => this.dispatchDeleteForever()}>
                      <wy-icon name="delete-forever"></wy-icon>
                      ${$("Delete")}
                    </wy-dropdown-item>
                  ` : C}
            ` : C}
        ${this.file.is_trashed ? C : h`
              ${this.file.external_url ? h`
                    <wy-dropdown-item @click=${() => this.triggerExternal()}>
                      <wy-icon name=${t}></wy-icon>
                      ${$(vt`Open in ${i}`)}
                    </wy-dropdown-item>
                  ` : h`
                    ${(n = this.componentFeatures) != null && n.allowsFeature(A.WebDAV) && this.file.application_url ? h`
                          <wy-dropdown-item @click=${() => this.triggerApplication()}>
                            <wy-icon
                              name=${this.file.provider ? fw(this.file.provider) : t}
                            ></wy-icon>
                            ${$(vt`Open in ${r}`)}
                          </wy-dropdown-item>
                        ` : C}
                    <wy-dropdown-item @click=${() => this.triggerDownload()}>
                      <wy-icon name="download"></wy-icon>
                      ${$("Download")}
                    </wy-dropdown-item>
                  `}
              ${e ? h`
                    ${this.hasEventListener["edit-name"] ? h`
                          <wy-dropdown-item @click=${() => this.dispatchEditName()}>
                            <wy-icon name="textbox"></wy-icon>
                            ${$("Rename")}
                          </wy-dropdown-item>
                        ` : C}
                    ${this.hasEventListener.subscribe ? this.file.is_subscribed ? h`
                            <wy-dropdown-item @click=${() => this.dispatchSubscribe(!1)}>
                              <wy-icon name="bell-off"></wy-icon>
                              ${$("Unsubscribe")}
                            </wy-dropdown-item>
                          ` : h`
                            <wy-dropdown-item @click=${() => this.dispatchSubscribe(!0)}>
                              <wy-icon name="bell"></wy-icon>
                              ${$("Subscribe")}
                            </wy-dropdown-item>
                          ` : C}
                    ${this.hasEventListener.trash ? h`
                          <wy-dropdown-divider></wy-dropdown-divider>
                          <wy-dropdown-item @click=${() => this.dispatchTrash()}>
                            <wy-icon name="delete"></wy-icon>
                            ${$("Trash")}
                          </wy-dropdown-item>
                        ` : C}
                  ` : C}
            `}
        <slot></slot>
      </wy-dropdown>
    `;
  }
}, o(La, "WyFileMenu"), La);
oc([
  ee({ context: gd, subscribe: !0 }),
  H()
], Ms.prototype, "componentFeatures", 2);
oc([
  y({ type: Object })
], Ms.prototype, "file", 2);
oc([
  y({ type: Boolean })
], Ms.prototype, "noWrapper", 2);
oc([
  y({ type: Boolean })
], Ms.prototype, "small", 2);
oc([
  y({ type: Object })
], Ms.prototype, "hasEventListener", 2);
Ms = oc([
  q("wy-file-menu"),
  rt()
], Ms);
function G2(s, t, e, i = {}) {
  return {
    ...i,
    initialPageParam: 0,
    queryKey: [t, e, "comments"],
    queryFn: /* @__PURE__ */ o(async (r) => {
      const n = r.pageParam, a = "/api/" + t + "/" + e + "/comments?order_by=id&skip=" + n, l = await (await s.fetch(a)).json();
      return l.data = l.data || [], l;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ o((r) => {
      if (r.end && r.end < r.count)
        return r.end;
    }, "getNextPageParam")
  };
}
o(G2, "getCommentsOptions");
function Z2(s, t) {
  return {
    mutationFn: /* @__PURE__ */ o(async (i) => await (await s.fetch("/api/comments/" + i.id, {
      method: "PATCH",
      body: JSON.stringify({
        text: i.text,
        blobs: i.blobs,
        attachments: i.attachments,
        meeting_id: i.meeting_id,
        options: i.poll_options.filter((n) => n.text.trim() !== "").map((n) => ({ id: n.id, text: n.text })),
        embed_id: i.embed_id || null
      })
    })).json(), "mutationFn"),
    mutationKey: t,
    onSuccess: /* @__PURE__ */ o((i, r) => {
      r.id && jt(s.queryClient, [r.type, r.parent_id, "comments"], r.id, (n) => {
        n.text = i.text, n.html = i.html, n.attachments = i.attachments, n.meeting = i.meeting, n.updated_at = i.updated_at, n.updated_by = i.updated_by, n.options = i.options, n.embed = i.embed;
      });
    }, "onSuccess")
  };
}
o(Z2, "getUpdateCommentMutationOptions");
function Y2(s) {
  const t = s.queryClient;
  return {
    mutationFn: /* @__PURE__ */ o(async (i) => await (await s.fetch("/api/" + i.type + "/" + i.parent_id + "/comments", {
      method: "POST",
      body: JSON.stringify({
        text: i.text,
        blobs: i.blobs,
        meeting_id: i.meeting_id,
        options: i.poll_options.filter((n) => n.text.trim() !== "").map((n) => ({ text: n.text })),
        embed_id: i.embed_id,
        context: i.context
      })
    })).json(), "mutationFn"),
    onMutate: /* @__PURE__ */ o(async (i) => {
      const r = [i.type, i.parent_id, "comments"];
      await t.cancelQueries({ queryKey: r });
      const n = lr(s.queryClient, r, !1);
      if (i.user) {
        const a = {
          id: n ? n.id - 1 : -1,
          app: i.type === "apps" ? { id: i.parent_id } : { id: -1 },
          is_trashed: !1,
          text: i.text,
          html: i.text,
          plain: i.text,
          created_by: i.user,
          created_at: (/* @__PURE__ */ new Date()).toUTCString(),
          attachments: { count: 0 },
          reactions: { count: 0 },
          is_subscribed: !1,
          is_starred: !1
        };
        i.type === "files" ? a.parent = { type: xe.File, id: i.parent_id } : i.type === "posts" && (a.parent = { type: xe.Post, id: i.parent_id }), $s(t, r, a, { descending: !1 });
      }
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((i, r) => {
      var c, l;
      const n = [r.type, ((c = i.parent) == null ? void 0 : c.id) ?? i.app.id, "comments"];
      if (!$d(s.queryClient, n, i.id)) {
        const u = lr(s.queryClient, n, !0);
        u ? jt(s.queryClient, n, u.id, (p) => {
          p.id = i.id, p.app = i.app, p.text = i.text, p.html = i.html, p.embed = i.embed, p.meeting = i.meeting, p.attachments = i.attachments, p.options = i.options, p.created_at = i.created_at, p.created_by = i.created_by, p.updated_at = i.updated_at, p.updated_by = i.updated_by;
        }) : $s(s.queryClient, n, i), ((l = i.parent) == null ? void 0 : l.type) === xe.Post && jt(t, ["posts", i.app.id], i.parent.id, (p) => {
          p.comments ? p.comments.count += 1 : p.comments = { count: 1 };
        });
      }
    }, "onSuccess")
  };
}
o(Y2, "getAddCommentMutationOptions");
function X2(s, t, e) {
  const i = s.queryClient, n = {
    mutationKey: [t, e, "comments"],
    mutationFn: /* @__PURE__ */ o(async ({ id: a }) => {
      if (!(await s.fetch("/api/comments/" + a + "/trash", { method: "POST" })).ok)
        throw new Error();
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((a) => {
      at(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.id,
        (c) => Object.assign(c, { is_trashed: !0 })
      );
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((a, c) => {
      at(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        c.id,
        (l) => Object.assign(l, a)
      ), jt(i, [c.type, c.appId], c.parentId, (l) => {
        l.comments.count -= 1;
      });
    }, "onSuccess")
  };
  return n;
}
o(X2, "getTrashCommentMutationOptions");
function J2(s, t, e) {
  return new kt(s.queryClient, X2(s, t, e));
}
o(J2, "getTrashCommentMutation");
function t5(s, t, e) {
  const i = s.queryClient, n = {
    mutationKey: [t, e, "comments"],
    mutationFn: /* @__PURE__ */ o(async ({ id: a }) => {
      const c = await s.fetch("/api/comments/" + a + "/restore", { method: "POST" });
      if (!c.ok) {
        const l = await c.json();
        throw new Error(l.detail || l.title, { cause: l });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((a) => {
      at(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        a.id,
        (c) => Object.assign(c, { is_trashed: !1 })
      );
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((a, c) => {
      at(
        i,
        { queryKey: n.mutationKey, exact: !1 },
        c.id,
        (l) => Object.assign(l, a)
      ), jt(i, [c.type, c.appId], c.parentId, (l) => {
        l.comments.count += 1;
      });
    }, "onSuccess")
  };
  return n;
}
o(t5, "getRestoreCommentMutationOptions");
function e5(s, t, e) {
  return new kt(s.queryClient, t5(s, t, e));
}
o(e5, "getRestoreCommentMutation");
var i5 = Object.defineProperty, s5 = Object.getOwnPropertyDescriptor, sm = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? s5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && i5(t, e, r), r;
}, "__decorateClass$M"), Ia;
let Rc = (Ia = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", { detail: { id: this.commentId } });
    return this.dispatchEvent(t);
  }
  render() {
    return h`
      <div class="wy-item">
        <div class="wy-item-body">${$("Comment was trashed.")}</div>
        <wy-button @click=${() => this.dispatchRestore()} color="variant">${$("Undo")}</wy-button>
      </div>
    `;
  }
}, o(Ia, "WyCommentTrashed"), Ia);
Rc.styles = X;
sm([
  y({ type: Number })
], Rc.prototype, "commentId", 2);
Rc = sm([
  q("wy-comment-trashed"),
  rt()
], Rc);
const r5 = 1e3 * 60 * 60, Th = r5 * 24;
function wl(s, t, e, i = 7) {
  e ?? (e = /* @__PURE__ */ new Date());
  const r = new Date(e.getFullYear(), e.getMonth(), e.getDate()), n = t.valueOf() - e.valueOf(), a = t.toDateString() === e.toDateString(), c = t.valueOf() > r.valueOf() - Th * i && t.valueOf() < r.valueOf() + Th * i;
  if (!a && c) {
    const l = Math.round(n / Th);
    return new Intl.RelativeTimeFormat(s, { numeric: "auto" }).format(l, "days");
  } else return a ? new Intl.DateTimeFormat(s, { timeStyle: "short" }).format(t) : new Intl.DateTimeFormat(s, { dateStyle: "short" }).format(t);
}
o(wl, "relativeTime");
var n5 = Object.defineProperty, a5 = Object.getOwnPropertyDescriptor, Ld = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? a5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && n5(t, e, r), r;
}, "__decorateClass$L"), Ta;
let vr = (Ta = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.totalVotes = 0, this.showSheet = !1, this.getVotesQuery = new Ne(this);
  }
  async updated(t) {
    t.has("weavy") && this.weavy && this.option && this.option.id && await this.getVotesQuery.trackQuery(Mg(this.weavy, this.option.id));
  }
  dispatchVote(t) {
    if (!t)
      return;
    const e = new CustomEvent("vote", { detail: { optionId: t } });
    return this.dispatchEvent(e);
  }
  openSheet(t) {
    var e;
    t.preventDefault(), t.stopPropagation(), (e = this.getVotesQuery.observer) == null || e.refetch(), this.showSheet = !this.showSheet;
  }
  render() {
    var r, n;
    if (!this.option || !this.option.id)
      return C;
    const { data: t, isLoading: e } = this.getVotesQuery.result ?? {}, i = this.totalVotes > 0 ? Math.round((((r = this.option.votes) == null ? void 0 : r.count) || 0) / this.totalVotes * 100) : 0;
    return h`
      <div
        class="wy-item wy-list-item wy-poll-option"
        tabindex="0"
        @click=${() => {
      var a;
      return this.dispatchVote((a = this.option) == null ? void 0 : a.id);
    }}
        @keydown=${ye}
        @keyup=${Fe}
      >
        <div class="wy-progress" style="width: ${i + "%"}"></div>
        ${this.option.has_voted ? h`<wy-icon name="check-circle"></wy-icon>` : h`<wy-icon name="circle-outline"></wy-icon>`}
        <div class="wy-item-body">${this.option.text}</div>
        ${i > 0 ? h`<span
              class="wy-facepile"
              tabindex="0"
              @click=${(a) => this.openSheet(a)}
              @keydown=${ye}
              @keyup=${Fe}
            >
              ${i + "%"}
            </span>` : C}
      </div>

      ${this.weavy ? h`
            <wy-sheet
              .show=${this.showSheet}
              @close=${() => this.showSheet = !1}
              @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
            >
              <span slot="appbar-text">${$(vt`Votes on ${this.option.text}`)}</span>
              <!-- <wy-spinner></wy-spinner> -->
              ${this.showSheet && t && !e ? h`
                    ${(n = t.votes) != null && n.data ? t.votes.data.map(
      (a) => h`
                        <div class="wy-item wy-list-item">
                          <wy-avatar .size=${32} .src=${a.avatar_url} .name=${a.name}></wy-avatar>
                          <div class="wy-item-body">${a.name}</div>
                        </div>
                      `
    ) : C}
                  ` : C}
            </wy-sheet>
          ` : C}
    `;
  }
}, o(Ta, "WyPollOption"), Ta);
vr.styles = X;
Ld([
  y({ type: Number, attribute: !1 })
], vr.prototype, "totalVotes", 2);
Ld([
  y({ attribute: !1 })
], vr.prototype, "option", 2);
Ld([
  H()
], vr.prototype, "showSheet", 2);
vr = Ld([
  q("wy-poll-option"),
  rt()
], vr);
var o5 = Object.defineProperty, c5 = Object.getOwnPropertyDescriptor, rm = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? c5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && o5(t, e, r), r;
}, "__decorateClass$K"), Fa;
let Lc = (Fa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.pollOptions = [];
  }
  dispatchVote(t) {
    const e = new CustomEvent("vote", { detail: { optionId: t } });
    return this.dispatchEvent(e);
  }
  render() {
    const t = this.pollOptions.reduce((e, i) => {
      var r;
      return e + (((r = i.votes) == null ? void 0 : r.count) || 0);
    }, 0);
    return h`
      <div class="wy-poll">
        ${this.pollOptions.map(
      (e) => h`<wy-poll-option
              @vote=${(i) => this.dispatchVote(i.detail.optionId)}
              .option=${e}
              .totalVotes=${t}></wy-poll-option>`
    )}
      </div>
    `;
  }
}, o(Fa, "WyPoll"), Fa);
Lc.styles = [
  X,
  dt`
      :host {
        display: grid;
      }
    `
];
rm([
  y({ type: Array, attribute: !1 })
], Lc.prototype, "pollOptions", 2);
Lc = rm([
  q("wy-poll")
], Lc);
var l5 = Object.defineProperty, d5 = Object.getOwnPropertyDescriptor, me = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? d5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && l5(t, e, r), r;
}, "__decorateClass$J"), Da;
let Jt = (Da = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.location = "apps", this.createdAt = "", this.modifiedAt = void 0, this.isTrashed = !1, this.text = "", this.html = "", this.annotations = [], this.attachments = [], this.pollOptions = [], this.reactions = [], this.previewAnnotationsRef = st(), this.previewAttachmentsRef = st(), this.highlightRef = st(), this.highlight = !1;
  }
  dispatchVote(t) {
    const e = new CustomEvent("vote", { detail: { optionId: t } });
    return this.dispatchEvent(e);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", { detail: { id: this.commentId } });
    return this.dispatchEvent(t);
  }
  dispatchEdit(t) {
    const e = new CustomEvent("edit", { detail: { edit: t } });
    return this.dispatchEvent(e);
  }
  willUpdate(t) {
    super.willUpdate(t), t.has("link") && (this.highlight = !!(this.link && kd(this.link, xe.Comment, { id: this.commentId }))), t.has("highlight") && (this.highlight ? this.part.add("wy-highlight") : this.part.remove("wy-highlight"));
  }
  render() {
    var n, a, c, l, u, p, w, b;
    const t = ((n = this.attachments) == null ? void 0 : n.filter((m) => m.kind === "image" && m.thumbnail_url)) || [], e = ((a = this.attachments) == null ? void 0 : a.filter((m) => m.kind !== "image" || !m.thumbnail_url)) || [], i = new Intl.DateTimeFormat((c = this.weavy) == null ? void 0 : c.locale, {
      dateStyle: "full",
      timeStyle: "short"
    }).format(new Date(this.createdAt)), r = wl((l = this.weavy) == null ? void 0 : l.locale, new Date(this.createdAt));
    return this.commentId < 0 ? h`<div class="wy-item wy-item-sm wy-comment-header">
            <wy-avatar
              .src="${this.createdBy.avatar_url}"
              .size=${32}
              .name=${this.createdBy.name}
              .isAgent=${this.createdBy.is_agent}
            ></wy-avatar>
            <div class="wy-item-body">
              <div class="wy-item-title"><span class="wy-placeholder">${this.createdBy.name}</span></div>
              <div class="wy-item-text">
                <time class="wy-placeholder">${r}</time>
              </div>
            </div>
          </div>
          <div class="wy-comment-body">
            <div class="wy-comment-content">
              ${this.html ? h`<div class="wy-content"><wy-skeleton .text=${this.text}></wy-skeleton></div>` : ""}
            </div>
          </div>` : h`<div class="wy-item wy-comment-header" ${Q(this.highlightRef)}>
            <wy-avatar
              .src=${this.createdBy.avatar_url}
              .size=${32}
              .name=${this.createdBy.name}
              .isAgent=${this.createdBy.is_agent}
            ></wy-avatar>
            <div class="wy-item-body">
              <div class="wy-item-title">${this.createdBy.name}</div>
              <div class="wy-item-text">
                <time datetime=${this.createdAt} title=${i}>${r}</time>
                ${this.modifiedAt ? h`<time datetime=${this.modifiedAt}> · ${$("edited")}</time>` : C}
              </div>
            </div>

            ${this.user && this.user.id === this.createdBy.id ? h`
                  <div class="wy-item-actions wy-item-top">
                    <wy-dropdown>
                      ${this.user.id === this.createdBy.id ? h`<wy-dropdown-item @click=${() => this.dispatchEdit(!0)}>
                            <wy-icon name="pencil"></wy-icon>
                            ${$("Edit")}
                          </wy-dropdown-item>` : C}
                      ${this.user.id === this.createdBy.id ? h`<wy-dropdown-item @click=${() => this.dispatchTrash()}>
                            <wy-icon name="trashcan"></wy-icon>
                            ${$("Trash")}
                          </wy-dropdown-item>` : C}
                    </wy-dropdown>
                  </div>
                ` : C}
          </div>
          <div class="wy-comment-body">
            <div class="wy-comment-content">
              <!-- annotations -->
              ${this.annotations && this.annotations.length ? h`<wy-annotations-list
                    class="wy-message-area"
                    .files=${this.annotations}
                    @file-open=${(m) => {
      var g;
      (g = this.previewAnnotationsRef.value) == null || g.open(m.detail.fileId);
    }}
                  ></wy-annotations-list>` : ""}

              <!-- image grid -->
              ${t && t.length ? h`<wy-image-grid
                    class="wy-comment-area"
                    .images=${t}
                    @file-open=${(m) => {
      var g;
      (g = this.previewAttachmentsRef.value) == null || g.open(m.detail.fileId);
    }}
                  ></wy-image-grid>` : ""}

              <!-- embeds -->
              ${this.embed && ((u = this.componentFeatures) != null && u.allowsFeature(A.Embeds)) ? h` <wy-embed class="wy-embed" .embed=${this.embed}></wy-embed> ` : C}
              ${this.html ? h`<div class="wy-content">${dr(this.html)}</div>` : ""}

              <!-- poll -->
              ${this.pollOptions && this.pollOptions.length > 0 ? h`
                    <wy-poll
                      .pollOptions=${this.pollOptions}
                      @vote=${(m) => this.dispatchVote(m.detail.optionId)}
                    ></wy-poll>
                  ` : C}

              <!-- files -->
              ${e && e.length ? h`<wy-attachments-list
                    .files=${e ?? []}
                    @file-open=${(m) => {
      var g;
      (g = this.previewAttachmentsRef.value) == null || g.open(m.detail.fileId);
    }}
                  ></wy-attachments-list>` : ""}

              <!-- meeting -->
              ${this.meeting ? h`<wy-meeting-card .meeting=${this.meeting}></wy-meeting-card>` : ""}
            </div>
          </div>

          ${(p = this.componentFeatures) != null && p.allowsFeature(A.Reactions) ? h` <wy-reactions
                lineBottom
                small
                .reactions=${this.reactions}
                parentType=${this.location}
                parentId=${this.parentId}
                entityId=${this.commentId}
                entityType="comments"
              ></wy-reactions>` : C}
          ${(w = this.annotations) != null && w.length ? h`<wy-preview
                ${Q(this.previewAnnotationsRef)}
                .files=${this.annotations}
                .isAttachment=${!0}
              ></wy-preview> ` : C}
          ${(b = this.attachments) != null && b.length ? h`<wy-preview
                ${Q(this.previewAttachmentsRef)}
                .files=${[...t, ...e]}
                .isAttachment=${!0}
              ></wy-preview> ` : C} `;
  }
  updated(t) {
    var e;
    t.has("highlight") && this.highlight && ((e = this.highlightRef.value) == null || e.scrollIntoView({ block: "nearest" }));
  }
}, o(Da, "WyCommentView"), Da);
Jt.styles = X;
me([
  y({ type: Number })
], Jt.prototype, "commentId", 2);
me([
  y({ type: Number })
], Jt.prototype, "parentId", 2);
me([
  y({ attribute: !1 })
], Jt.prototype, "location", 2);
me([
  y({ attribute: !1 })
], Jt.prototype, "createdBy", 2);
me([
  y()
], Jt.prototype, "createdAt", 2);
me([
  y()
], Jt.prototype, "modifiedAt", 2);
me([
  y({ type: Boolean })
], Jt.prototype, "isTrashed", 2);
me([
  y()
], Jt.prototype, "text", 2);
me([
  y()
], Jt.prototype, "html", 2);
me([
  y({ type: Array })
], Jt.prototype, "annotations", 2);
me([
  y({ type: Array })
], Jt.prototype, "attachments", 2);
me([
  y({ attribute: !1 })
], Jt.prototype, "embed", 2);
me([
  y({ type: Array })
], Jt.prototype, "pollOptions", 2);
me([
  y({ attribute: !1 })
], Jt.prototype, "meeting", 2);
me([
  y({ type: Array })
], Jt.prototype, "reactions", 2);
me([
  y({ type: Boolean })
], Jt.prototype, "highlight", 2);
Jt = me([
  q("wy-comment-view"),
  rt()
], Jt);
var Fh, Uy;
function h5() {
  if (Uy) return Fh;
  Uy = 1;
  var s = "Expected a function", t = NaN, e = "[object Symbol]", i = /^\s+|\s+$/g, r = /^[-+]0x[0-9a-f]+$/i, n = /^0b[01]+$/i, a = /^0o[0-7]+$/i, c = parseInt, l = typeof Pl == "object" && Pl && Pl.Object === Object && Pl, u = typeof self == "object" && self && self.Object === Object && self, p = l || u || Function("return this")(), w = Object.prototype, b = w.toString, m = Math.max, g = Math.min, x = /* @__PURE__ */ o(function() {
    return p.Date.now();
  }, "now");
  function z(F, B, D) {
    var U, j, J, wt, Y, nt, Nt = 0, Zt = !1, _t = !1, ft = !0;
    if (typeof F != "function")
      throw new TypeError(s);
    B = O(B) || 0, P(D) && (Zt = !!D.leading, _t = "maxWait" in D, J = _t ? m(O(D.maxWait) || 0, B) : J, ft = "trailing" in D ? !!D.trailing : ft);
    function Ot(bt) {
      var Pe = U, zt = j;
      return U = j = void 0, Nt = bt, wt = F.apply(zt, Pe), wt;
    }
    o(Ot, "invokeFunc");
    function tt(bt) {
      return Nt = bt, Y = setTimeout(Be, B), Zt ? Ot(bt) : wt;
    }
    o(tt, "leadingEdge");
    function xt(bt) {
      var Pe = bt - nt, zt = bt - Nt, Yt = B - Pe;
      return _t ? g(Yt, J - zt) : Yt;
    }
    o(xt, "remainingWait");
    function si(bt) {
      var Pe = bt - nt, zt = bt - Nt;
      return nt === void 0 || Pe >= B || Pe < 0 || _t && zt >= J;
    }
    o(si, "shouldInvoke");
    function Be() {
      var bt = x();
      if (si(bt))
        return Li(bt);
      Y = setTimeout(Be, xt(bt));
    }
    o(Be, "timerExpired");
    function Li(bt) {
      return Y = void 0, ft && U ? Ot(bt) : (U = j = void 0, wt);
    }
    o(Li, "trailingEdge");
    function Ii() {
      Y !== void 0 && clearTimeout(Y), Nt = 0, U = nt = j = Y = void 0;
    }
    o(Ii, "cancel");
    function dc() {
      return Y === void 0 ? wt : Li(x());
    }
    o(dc, "flush");
    function fi() {
      var bt = x(), Pe = si(bt);
      if (U = arguments, j = this, nt = bt, Pe) {
        if (Y === void 0)
          return tt(nt);
        if (_t)
          return Y = setTimeout(Be, B), Ot(nt);
      }
      return Y === void 0 && (Y = setTimeout(Be, B)), wt;
    }
    return o(fi, "debounced"), fi.cancel = Ii, fi.flush = dc, fi;
  }
  o(z, "debounce");
  function _(F, B, D) {
    var U = !0, j = !0;
    if (typeof F != "function")
      throw new TypeError(s);
    return P(D) && (U = "leading" in D ? !!D.leading : U, j = "trailing" in D ? !!D.trailing : j), z(F, B, {
      leading: U,
      maxWait: B,
      trailing: j
    });
  }
  o(_, "throttle");
  function P(F) {
    var B = typeof F;
    return !!F && (B == "object" || B == "function");
  }
  o(P, "isObject");
  function E(F) {
    return !!F && typeof F == "object";
  }
  o(E, "isObjectLike");
  function N(F) {
    return typeof F == "symbol" || E(F) && b.call(F) == e;
  }
  o(N, "isSymbol");
  function O(F) {
    if (typeof F == "number")
      return F;
    if (N(F))
      return t;
    if (P(F)) {
      var B = typeof F.valueOf == "function" ? F.valueOf() : F;
      F = P(B) ? B + "" : B;
    }
    if (typeof F != "string")
      return F === 0 ? F : +F;
    F = F.replace(i, "");
    var D = n.test(F);
    return D || a.test(F) ? c(F.slice(2), D ? 2 : 8) : r.test(F) ? t : +F;
  }
  return o(O, "toNumber"), Fh = _, Fh;
}
o(h5, "requireLodash_throttle");
var u5 = h5();
const Au = /* @__PURE__ */ Nv(u5);
function p5(s, t) {
  return new kt(s.queryClient, {
    mutationFn: /* @__PURE__ */ o(async () => await s.fetch(`/api/apps/${t}/typing`, {
      method: "PUT",
      body: JSON.stringify({})
    }), "mutationFn")
  });
}
o(p5, "typingMutation");
function qy(s, t) {
  return new kt(s.queryClient, {
    mutationFn: /* @__PURE__ */ o(async () => {
      const e = await s.fetch(`/x/${t}/meetings`, { method: "POST" });
      if (!e.ok)
        throw new Error("Failed to create meeting");
      return await e.json();
    }, "mutationFn")
  });
}
o(qy, "addMeetingMutation");
async function y5(s, t) {
  const e = await s.fetch("/api/blobs/external", { method: "POST", body: JSON.stringify(t) });
  if (!e.ok) {
    const r = await e.json();
    throw new Error(r.detail || r.title, { cause: r });
  }
  return await e.json();
}
o(y5, "externalBlob");
function w5(s, t, e, i) {
  const r = s.queryClient, n = ["apps", e, "blobs", i];
  return {
    mutationFn: /* @__PURE__ */ o(async (c) => await y5(s, c.externalBlob), "mutationFn"),
    mutationKey: n,
    onMutate: /* @__PURE__ */ o(async (c) => (await r.cancelQueries({ queryKey: n, exact: !0 }), { type: "attach", file: Ju(void 0, c.externalBlob.name, c.externalBlob.size, void 0, t), status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ o((c, l, u) => {
      Vt(r, n, l, (p) => {
        p.status.state = "ok", p.status.progress = void 0, p.status.text = void 0;
      });
    }, "onSuccess"),
    onError(c, l, u) {
      const p = c.cause;
      p && p.status === 409 ? Vt(r, n, l, (w) => {
        w.status.state = "conflict", w.status.progress = void 0, w.status.text = p.detail || p.title;
      }) : Vt(r, n, l, (w) => {
        w && (w.status.state = "error", w.status.progress = void 0, w.status.text = p.detail || p.title);
      });
    }
  };
}
o(w5, "getExternalBlobMutationOptions");
function nm(s, t, e, i) {
  return new kt(s.queryClient, w5(s, t, e, i));
}
o(nm, "getExternalBlobMutation");
const f5 = /(((https?|ftp):\/\/|(www|ftp)\.)[\w]+(.[\w]+)([\w\-.,@?^=%&amp;:/~+#]*[\w\-@?^=%&amp;/~+#]))/gim;
let Or = [], Ic = [], ad = [], Ll = [], qi = {};
const m5 = /* @__PURE__ */ o((s, t) => s.length === t.length && s.every((e, i) => e === t[i]), "arrayEquals");
function v5() {
  return !!Object.keys(qi).length;
}
o(v5, "isFetchingEmbeds");
async function g5(s, t) {
  new FormData().append("url", s);
  let i;
  try {
    const r = await t.fetch("/api/embeds", { method: "POST", body: JSON.stringify({ url: s }) });
    if (!r.ok)
      throw new Error();
    i = await r.json(), delete qi[s], Ic = [...Ic, s];
  } catch {
    ad = [...ad, s], delete qi[s];
  }
  return i;
}
o(g5, "fetchEmbed");
const b5 = /* @__PURE__ */ o(() => {
  Or = [], Ic = [], ad = [], Ll = [], qi = {};
}, "clearEmbeds"), Ny = /* @__PURE__ */ o((s) => {
  Ic = s;
}, "initEmbeds"), x5 = /* @__PURE__ */ o((s, t, e) => {
  var r;
  let i = ((r = s.match(f5)) == null ? void 0 : r.map((n) => n)) || null;
  if (i !== null && (i = i.map((n) => n.startsWith("//") ? "http:" + n : !n.startsWith("http://") && !n.startsWith("https://") ? "http://" + n : n)), !(i === null || i.length === 0)) {
    if (i.length !== Or.length || !m5(i, Or)) {
      Or = i, i.forEach((n) => {
        !Ic.includes(n) && !ad.includes(n) && !Ll.includes(n) && typeof qi[n] > "u" && (Ie(), qi[n] = window.setTimeout(async () => {
          const a = await g5(n, e);
          a && t(a);
        }, 500));
      }), Ll = Ll.filter((n) => Or.includes(n));
      for (const n in qi)
        Or.includes(n) || (Ie(), window.clearTimeout(qi[n]), delete qi[n]);
    }
  }
}, "getEmbeds");
var Ha;
const Zp = class Zp {
  constructor(t) {
    T(this, Ha, !1);
    t.addController(this), this.host = t, t.addEventListener("dragstart", () => this.isDragActive = !0), t.addEventListener("dragenter", () => this.isDragActive = !0), t.addEventListener("dragover", (e) => {
      e.preventDefault(), this.isDragActive = !0;
    }), t.addEventListener("dragleave", () => this.isDragActive = !1), t.addEventListener("dragend", () => this.isDragActive = !1), t.addEventListener("drop", (e) => this.handleDrop(e));
  }
  get isDragActive() {
    return f(this, Ha);
  }
  set isDragActive(t) {
    f(this, Ha) !== t && (S(this, Ha, t), this.host.requestUpdate());
  }
  handleDrop(t) {
    var i, r;
    t.preventDefault();
    const e = [];
    (i = t.dataTransfer) != null && i.items ? [...t.dataTransfer.items].forEach((n) => {
      if (n.kind === "file") {
        const a = n.getAsFile();
        a ? e.push(a) : console.error("Could not add file");
      }
    }) : (r = t.dataTransfer) != null && r.files && [...t.dataTransfer.files].forEach((n) => {
      e.push(n);
    }), e.length && this.dispatchUploadFiles(e), this.isDragActive = !1;
  }
  dispatchUploadFiles(t) {
    const e = new CustomEvent("drop-files", { detail: { files: t } });
    return this.host.dispatchEvent(e);
  }
  hostDisconnected() {
  }
};
Ha = new WeakMap(), o(Zp, "DropZoneController");
let od = Zp;
const Ye = Hu() ? window.navigator.userAgent : "", am = Ye.includes("iPad") || Ye.includes("Android") && !Ye.includes("Mobi") || !1, $5 = Ye.includes("Mobi") || am || !1, C5 = !$5 && !am, jy = Ye.includes("Windows") ? "Windows" : Ye.includes("Macintosh") ? "Mac" : Ye.includes("iPad") || Ye.includes("iPhone") || Ye.includes("iPod") ? "iOS" : Ye.includes("Android") ? "Android" : void 0;
jy === "Android" && Ye.includes("; wv") || jy === "iOS" && Ye.includes("Safari");
var k5 = Object.defineProperty, _5 = Object.getOwnPropertyDescriptor, cc = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? _5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && k5(t, e, r), r;
}, "__decorateClass$I"), Va;
let Zi = (Va = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.status = {
      state: "ok"
    }, this.hasHover = !0, this.isRenaming = !1;
  }
  dispatchEditName(t) {
    const e = new CustomEvent("edit-name", { detail: { file: t } });
    return this.dispatchEvent(e);
  }
  dispatchRename(t, e) {
    const i = new CustomEvent("rename", { detail: { file: t, name: e } });
    return this.dispatchEvent(i);
  }
  dispatchTrash(t) {
    const e = new CustomEvent("trash", { detail: { file: t } });
    return this.dispatchEvent(e);
  }
  dispatchRestore(t) {
    const e = new CustomEvent("restore", { detail: { file: t } });
    return this.dispatchEvent(e);
  }
  dispatchDeleteForever(t) {
    const e = new CustomEvent("delete-forever", { detail: { file: t } });
    return this.dispatchEvent(e);
  }
  dispatchSubscribe(t, e) {
    const i = new CustomEvent("subscribe", { detail: { file: t, subscribe: e } });
    return this.dispatchEvent(i);
  }
  render() {
    const t = this.file;
    if (!t) return C;
    const { icon: e } = Ei(t.name), i = pb(this.actionType), r = Qe(t.name), n = Ls(t.provider), a = /* @__PURE__ */ o((l) => {
      l.stopImmediatePropagation();
      const u = l.target;
      u.value && u.value !== t.name ? this.dispatchRename(t, u.value) : this.dispatchEditName({ id: NaN });
    }, "handleRename"), c = /* @__PURE__ */ o((l) => {
      const u = l.target;
      l.key === "Escape" ? (l.preventDefault(), u.value = t.name, u.blur()) : l.key === "Enter" && (l.preventDefault(), u.blur());
    }, "handleRenameKey");
    return h`
      <div
        class="wy-item wy-list-item ${Mt({
      "wy-item-trashed": t.is_trashed,
      "wy-item-hover": this.hasHover && !t.is_trashed && !this.isRenaming
    })}"
        title=${t.name}>
        ${this.status.state === "error" ? h`<wy-icon name="alert-octagon" color="error" title=${lt(this.status.text)}></wy-icon>` : this.status.state === "conflict" ? h`<wy-icon name="alert" color="yellow" title=${lt(this.status.text)}></wy-icon>` : this.status.state === "pending" ? h`<wy-spinner ?nospin=${!!this.status.progress} .progress=${this.status.progress}></wy-spinner>` : h`<wy-icon .name=${e} .overlayName=${n} .overlayPath=${i} .size=${24} .kind=${t.kind} ext=${r}></wy-icon>`}
        <div class="wy-item-body">
          ${this.isRenaming ? h`
                <input
                  type="text"
                  maxlength="256"
                  class="wy-input"
                  .defaultValue=${t.name}
                  @blur=${a}
                  @keyup=${(l) => {
      Cs(l), c(l);
    }}
                  @click=${(l) => l.preventDefault()}
                  @focus=${Xu}
                  ${Q(Vu)} />
              ` : h`
                <span title=${t.name + (this.status.text ? `: ${this.status.text}` : "")}
                  ><slot name="title"
                    >${this.title || t.name}${this.status.text ? h`: <em>${this.status.text}</em>` : C}</slot
                  ></span
                >
              `}
        </div>
        <div class="wy-item-actions">
          <slot name="actions">
            <wy-file-menu
              .file=${t}
              @edit-name=${(l) => this.dispatchEditName(l.detail.file)}
              @trash=${(l) => this.dispatchTrash(l.detail.file)}
              @restore=${(l) => this.dispatchRestore(l.detail.file)}
              @delete-forever=${(l) => this.dispatchDeleteForever(l.detail.file)}
              @subscribe=${(l) => this.dispatchSubscribe(l.detail.file, l.detail.subscribe)}>
            </wy-file-menu>
          </slot>
        </div>
      </div>
    `;
  }
}, o(Va, "WyFileItem"), Va);
Zi.styles = X;
cc([
  y({ type: Object })
], Zi.prototype, "file", 2);
cc([
  y({ type: Object })
], Zi.prototype, "status", 2);
cc([
  y({ type: Boolean })
], Zi.prototype, "hasHover", 2);
cc([
  y()
], Zi.prototype, "actionType", 2);
cc([
  H()
], Zi.prototype, "isRenaming", 2);
Zi = cc([
  q("wy-file-item")
], Zi);
const z5 = dt`:host{--_track-height: 4px;--_track-shape: 2px;--_active-indicator-height: 2px;--_active-indicator-color: var(--wy-primary, var(--wy-primary-40, #006399));--_warning-color: var(--wy-warning, var(--wy-warning-70, #afb140));--_error-color: var(--wy-error, var(--wy-error-40, #ba1824));--_track-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));display:contents;position:relative}[part~=wy-progress]{border-radius:var(--_track-shape);position:relative;min-width:80px;height:var(--_track-height);content-visibility:auto;contain:strict;flex:1;direction:ltr;top:0;right:0;bottom:0;left:0;border-radius:inherit;overflow:hidden;display:flex;align-items:center}[part~=wy-progress][part~=wy-progress-overlay],[part~=wy-inactive-track],[part~=wy-bar],[part~=wy-bar-inner]{position:absolute}[part~=wy-progress-reveal]{opacity:1;transition:width var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),height var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),margin var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) var(--wy-transition-reveal-delay, 1s),opacity var(--wy-transition, var(--wy-transition-duration, .2s) var(--wy-transition-curve, cubic-bezier(.4, 0, .2, 1))) calc(var(--wy-transition-duration, .2s) + var(--wy-transition-reveal-delay, 1s))}@starting-style{[part~=wy-progress-reveal]{width:0;height:0;opacity:0;margin:0}}[part~=wy-bar]{animation:none;width:100%;height:var(--_active-indicator-height);transform-origin:left center;transition:transform .25s cubic-bezier(.4,0,.6,1)}[part~=wy-secondary-bar]{display:none}[part~=wy-bar-inner]{top:0;right:0;bottom:0;left:0;animation:none;background:var(--_active-indicator-color)}[part~=wy-inactive-track]{background:var(--_track-color);top:0;right:0;bottom:0;left:0;transition:transform .25s cubic-bezier(.4,0,.6,1);transform-origin:left center}[part~=wy-indeterminate] [part~=wy-bar]{transition:none}[part~=wy-indeterminate] [part~=wy-primary-bar]{inset-inline-start:-145.167%}[part~=wy-indeterminate] [part~=wy-secondary-bar]{inset-inline-start:-54.8889%;display:block}[part~=wy-indeterminate] [part~=wy-primary-bar]{animation:linear infinite 2s;animation-name:primary-indeterminate-translate}[part~=wy-indeterminate] [part~=wy-primary-bar]>[part~=wy-bar-inner]{animation:linear infinite 2s primary-indeterminate-scale}[part~=wy-indeterminate] [part~=wy-secondary-bar]{animation:linear infinite 2s;animation-name:secondary-indeterminate-translate}[part~=wy-indeterminate] [part~=wy-secondary-bar]>[part~=wy-bar-inner]{animation:linear infinite 2s secondary-indeterminate-scale}@keyframes primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.334731,.12482,.785844,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.661479)}to{transform:scaleX(.08)}}@keyframes secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.205028,.057051,.57661,.453971);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.152313,.196432,.648374,1.00432);transform:scaleX(.457104)}44.15%{animation-timing-function:cubic-bezier(.257759,-.003163,.211762,1.38179);transform:scaleX(.72796)}to{transform:scaleX(.08)}}@keyframes primary-indeterminate-translate{0%{transform:translate(0)}20%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translate(0)}59.15%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translate(83.6714%)}to{transform:translate(200.611%)}}@keyframes secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:translate(0)}25%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:translate(37.6519%)}48.35%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:translate(84.3862%)}to{transform:translate(160.278%)}}[part~=wy-progress-warning] [part~=wy-primary-bar],[part~=wy-progress-warning] [part~=wy-secondary-bar],[part~=wy-progress-warning] [part~=wy-bar-inner],[part~=wy-progress-error] [part~=wy-primary-bar],[part~=wy-progress-error] [part~=wy-secondary-bar],[part~=wy-progress-error] [part~=wy-bar-inner]{animation:none!important}[part~=wy-progress-warning] [part~=wy-secondary-bar],[part~=wy-progress-error] [part~=wy-secondary-bar]{display:none!important}[part~=wy-progress-warning] [part~=wy-primary-bar],[part~=wy-progress-error] [part~=wy-primary-bar]{transform:scaleX(1)!important}[part~=wy-progress-warning] [part~=wy-bar-inner]{background:var(--_warning-color)}[part~=wy-progress-error] [part~=wy-bar-inner]{background:var(--_error-color)}`;
var M5 = Object.defineProperty, P5 = Object.getOwnPropertyDescriptor, es = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? P5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && M5(t, e, r), r;
}, "__decorateClass$H"), Ba;
let ti = (Ba = class extends it {
  constructor() {
    super(...arguments), this.shadowParts = new W(this), this.padded = !1, this.overlay = !1, this.reveal = !1, this.value = 0, this.max = 1, this.indeterminate = !1, this.warning = !1, this.error = !1;
  }
  render() {
    const t = {
      transform: `scaleX(${(this.indeterminate ? 1 : this.value / this.max) * 100}%)`
    }, e = {
      "wy-indeterminate": this.indeterminate,
      "wy-progress-overlay": this.overlay,
      "wy-progress-reveal": this.reveal,
      "wy-progress-warning": this.warning,
      "wy-progress-error": this.error
    };
    return h`
      <div
        part="wy-progress ${Xt(e)}"
        role="progressbar"
        aria-label="${C}"
        aria-valuemin="0"
        aria-valuemax=${this.max}
        aria-valuenow=${this.indeterminate ? C : this.value}
      >
        <div part="wy-inactive-track"></div>
        <div part="wy-bar wy-primary-bar" style=${kc(t)}>
          <div part="wy-bar-inner"></div>
        </div>
        <div part="wy-bar wy-secondary-bar">
          <div part="wy-bar-inner"></div>
        </div>
      </div>
    `;
  }
}, o(Ba, "WyProgressLinear"), Ba);
ti.styles = [ne, z5];
es([
  y({ type: Boolean })
], ti.prototype, "padded", 2);
es([
  y({ type: Boolean })
], ti.prototype, "overlay", 2);
es([
  y({ type: Boolean })
], ti.prototype, "reveal", 2);
es([
  y({ type: Number })
], ti.prototype, "value", 2);
es([
  y({ type: Number })
], ti.prototype, "max", 2);
es([
  y({ type: Boolean })
], ti.prototype, "indeterminate", 2);
es([
  y({ type: Boolean })
], ti.prototype, "warning", 2);
es([
  y({ type: Boolean })
], ti.prototype, "error", 2);
ti = es([
  q("wy-progress-linear")
], ti);
var S5 = Object.defineProperty, A5 = Object.getOwnPropertyDescriptor, At = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? A5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && S5(t, e, r), r;
}, "__decorateClass$G"), Ua;
let Ct = (Ua = class extends pt {
  constructor() {
    super(), this.exportParts = new W(this), this.storage = gw("localStorage"), this.disabled = !1, this._placeholder = "", this.text = "", this.metadata = {}, this.options = [], this.attachments = [], this.buttonText = "", this.typing = !0, this.draft = !1, this.editorType = "posts", this.editorClass = "wy-post-editor", this.editorLocation = "apps", this.editorError = !1, this.showPolls = !1, this.pollOptions = [], this.embeds = [], this.draftKey = "", this.uploadBlobMutation = new Le(
      this
    ), this.mutatingFiles = new cr(this), this.fileInputRef = st(), this.cloudFilesRef = st(), this.dropZone = new od(this), this.keyMap = [], this.editorRef = st(), this.editorInitialized = !1, this.throttledTyping = Au(
      async () => {
        this.weavy && this.app && !Wl.has(this.app.type) && await p5(this.weavy, this.app.id).mutate();
      },
      2e3,
      { leading: !0, trailing: !1 }
    ), this.throttledDrafting = Au(
      () => {
        this.saveDraft();
      },
      500,
      { leading: !0, trailing: !0 }
    ), this.openFileInput = () => {
      var t;
      (t = this.fileInputRef.value) == null || t.click();
    }, this.openCloudFiles = () => {
      var t;
      (t = this.cloudFilesRef.value) == null || t.open();
    }, this.createMeeting = async (t) => {
      if (this.weavy && t.source === this.authWindow && this.weavy.url.origin === t.origin && t.data && t.data.name && t.data.name.endsWith("-authorized")) {
        const e = t.data.name.slice(0, -11), r = await qy(this.weavy, e).mutate();
        r.auth_url || (this.meeting = r);
      }
    }, this.addEventListener("drop-files", (t) => this.handleDropFiles(t)), this.addEventListener("keydown", Yl), this.addEventListener("keyup", Cs);
  }
  get placeholder() {
    return this._placeholder;
  }
  set placeholder(t) {
    this._placeholder = t;
  }
  selectAllContent() {
    var t;
    (t = this.editor) == null || t.dispatch({
      selection: {
        anchor: 0,
        head: this.editor.state.doc.length
      }
    });
  }
  setCursorLast() {
    var t;
    (t = this.editor) == null || t.dispatch({
      selection: {
        anchor: this.editor.state.doc.length,
        head: this.editor.state.doc.length
      }
    });
  }
  focusInput() {
    var t;
    (t = this.editor) == null || t.focus();
  }
  willUpdate(t) {
    var e, i;
    if (super.willUpdate(t), (t.has("weavy") || t.has("app") || t.has("user") || t.has("parentId")) && this.weavy && this.user) {
      if (this.mutationAppId = this.mutationAppId ?? ((e = this.app) == null ? void 0 : e.id) ?? Date.now() * -1, this.draftKey = `draft-${this.editorType}-${this.parentId || this.mutationAppId}`, this.uploadBlobMutation.trackMutation(
        tp(
          this.weavy,
          this.user,
          this.mutationAppId,
          `${this.editorLocation}-${this.parentId || this.mutationAppId}`
        )
      ), this.mutatingFiles.trackMutationState(
        {
          filters: {
            mutationKey: [
              "apps",
              this.mutationAppId,
              "blobs",
              `${this.editorLocation}-${this.parentId || this.mutationAppId}`
            ],
            exact: !0
          }
        },
        this.weavy.queryClient
      ), this.externalBlobMutation = nm(
        this.weavy,
        this.user,
        this.mutationAppId,
        `${this.editorLocation}-${this.parentId || this.mutationAppId}`
      ), this.draft && this.storage) {
        const r = this.storage.getItem(this.draftKey);
        if (r) {
          const n = JSON.parse(r);
          this.text = n.text, this.embeds = n.embeds, this.meeting = n.meeting, ((i = n.pollOptions) == null ? void 0 : i.length) > 0 && (this.showPolls = !0, this.pollOptions = n.pollOptions), Ny(this.embeds.map((a) => a.original_url));
        } else
          this.clearEditor();
      }
      this.embed && (this.embeds = [this.embed], Ny(this.embeds.map((r) => r.original_url))), this.options && this.options.length > 0 && (this.pollOptions = this.options, this.showPolls = !0);
    }
    t.has("text") && this.editor && this.editor.state.doc.toString() !== this.text && this.editor.dispatch({ changes: { from: 0, to: this.editor.state.doc.length, insert: this.text } });
  }
  updated(t) {
    if ((t.has("weavy") || t.has("app") || t.has("user") || t.has("parentId")) && this.weavy && this.user && this.editorRef.value && this.weavy.whenUrl().then(() => {
      import(
        /* webpackIgnore: true */
        /* @vite-ignore */
        new URL("./es/editor.js", typeof WEAVY_IMPORT_URL == "string" && (!import.meta.url || !new URL(import.meta.url).href.startsWith(WEAVY_IMPORT_URL)) ? WEAVY_IMPORT_URL : import.meta.url).href
      ).then((e) => e.editor).then(
        ({
          weavyHighlighter: e,
          syntaxHighlighting: i,
          history: r,
          dropCursor: n,
          mentions: a,
          autocompletion: c,
          placeholder: l,
          keymap: u,
          weavyKeymap: p,
          defaultKeymap: w,
          historyKeymap: b,
          markdown: m,
          languages: g,
          EditorView: x,
          EditorState: z,
          weavyDesktopMessageKeymap: _,
          Compartment: P
        }) => {
          var N, O, F;
          this.editorInitialized = !0, this.editorRef.value && !this.editor && (this.editorRef.value.innerHTML = ""), this.editorEditable = new P(), this.editorPlaceholder = new P(), this.EditorView = x, this.placeholderExtension = l;
          const E = this.editorType === "messages" && C5 && _ ? [..._] : [];
          this.editorExtensions = [
            x.contentAttributes.of({
              spellcheck: "true",
              autocorrect: "on",
              autocapitalize: "on"
            }),
            r(),
            n(),
            a,
            c({
              override: (N = this.componentFeatures) != null && N.allowsFeature(A.Mentions) ? [(B) => this.autocomplete(B)] : [],
              //showMention
              closeOnBlur: !1,
              aboveCursor: this.editorType !== "posts",
              icons: !1,
              addToOptions: [
                {
                  render: /* @__PURE__ */ o(function(B, D) {
                    var wt, Y, nt, Nt;
                    const U = document.createElement("div");
                    U.classList.add("wy-item"), U.classList.add("wy-list-item"), U.classList.add("wy-item-hover"), (!((wt = B.item) != null && wt.access) || B.item.access === ns.None) && U.classList.add("wy-disabled");
                    const j = document.createElement("wy-avatar");
                    j.src = ((Y = B.item) == null ? void 0 : Y.avatar_url) || "", j.name = ((nt = B.item) == null ? void 0 : nt.name) || "";
                    const J = document.createElement("div");
                    return J.classList.add("wy-item-body"), J.innerText = ((Nt = B.item) == null ? void 0 : Nt.name) || "", U.appendChild(j), U.appendChild(J), U;
                  }, "render"),
                  position: 10
                }
              ]
            }),
            i(e, { fallback: !0 }),
            x.lineWrapping,
            u.of([...E, ...p, ...w, ...b]),
            m({ codeLanguages: g }),
            x.domEventHandlers({
              paste: /* @__PURE__ */ o((B, D) => {
                var J, wt;
                let U = [];
                const j = ((J = B.clipboardData) == null ? void 0 : J.items) || [];
                for (const Y of j)
                  if (Y.kind === "file") {
                    const nt = Y.getAsFile();
                    nt && (U = [...U, nt]);
                  }
                if ((wt = this.componentFeatures) != null && wt.allowsFeature(A.Attachments) && U.length > 0) {
                  for (let Y = 0; Y < U.length; Y++)
                    this.handleUploadFiles(U);
                  return !0;
                }
              }, "paste"),
              keyup: /* @__PURE__ */ o((B, D) => {
                var U, j;
                this.text = D.state.doc.toString(), (U = this.componentFeatures) != null && U.allowsFeature(A.Typing) && this.typing && D.state.doc.toString() !== "" && this.throttledTyping(), this.draft && this.throttledDrafting(), (j = this.componentFeatures) != null && j.allowsFeature(A.Embeds) && D.state.doc.toString() !== "" && this.handleEmbeds(D.state.doc.toString());
              }, "keyup")
            }),
            // Compartments
            this.editorEditable.of(x.editable.of(!this.disabled)),
            this.editorPlaceholder.of(this.placeholderExtension(this.placeholder)),
            x.updateListener.of((B) => {
              var U;
              this.setPlaceHolderText();
              const D = Array.from(((U = this.editor) == null ? void 0 : U.state).config.compartments.keys());
              this.editorEditable = D[0], this.editorPlaceholder = D[1];
            })
          ], this.editor || (this.editor = new x({
            state: z.create({
              doc: this.text,
              extensions: this.editorExtensions
            }),
            parent: this.editorRef.value
          }), (F = (O = this.editorRef.value) == null ? void 0 : O.querySelector(".cm-editor")) == null || F.addEventListener("Weavy-SoftSubmit", this.submit.bind(this)));
        }
      );
    }), t.has("disabled") && this.editor && this.editorEditable && this.EditorView && this.editor.dispatch({
      // Update readonly state
      effects: this.editorEditable.reconfigure(this.EditorView.editable.of(!this.disabled))
    }), t.has("placeholder") && this.editor && this.editorPlaceholder && this.placeholderExtension) {
      const e = this.placeholderExtension(this.placeholder);
      this.editor.dispatch({
        // Update placeholder state
        effects: this.editorPlaceholder.reconfigure(e)
      }), this.setPlaceHolderText();
    }
  }
  setPlaceHolderText() {
    const t = this.renderRoot.querySelector(".cm-placeholder");
    t && this.editor && (t.setAttribute("aria-label", `placeholder ${this.placeholder}`), t.innerText = this.placeholder);
  }
  setEditable() {
    const t = this.renderRoot.querySelector(".cm-content");
    t && this.editor && (t.contentEditable = String(!this.disabled));
  }
  connectedCallback() {
    super.connectedCallback(), window.addEventListener("message", this.createMeeting);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), window.removeEventListener("message", this.createMeeting);
  }
  handleRemoveMeeting() {
    this.meeting = void 0;
  }
  async autocomplete(t) {
    if (!this.weavy || !this.app)
      return null;
    let e = t.matchBefore(/(?!\]\(@)(^[^@]{0,1}|[^@]{2})@([^@]+)/);
    if (!t.explicit && !e) return null;
    e = t.matchBefore(/@[^@]+/);
    const i = e == null ? void 0 : e.text.substring(1), n = await (await this.weavy.fetch(`/api/apps/${this.app.id}/members?member=null&q=${i}`)).json();
    let a = [];
    return n.data && (a = n.data.filter((c) => typeof c.name < "u").map((c) => ({
      item: c,
      label: c.name,
      apply: /* @__PURE__ */ o((l, u, p, w) => {
        const b = "[" + c.name + "](@u" + c.id.toString() + ")";
        let m = l.state.update({ changes: { from: p - 1, to: p } });
        l.dispatch(m), m = l.state.update({
          changes: { from: p - 1, to: w - 1, insert: b }
        }), l.dispatch(m);
      }, "apply")
    }))), {
      from: e ? e.from + 1 : t.pos,
      options: a,
      filter: !1
    };
  }
  handleDropFiles(t) {
    const e = t.detail;
    e.files && this.handleUploadFiles(e.files);
  }
  async handleUploadFiles(t, e) {
    if (t) {
      for (let i = 0; i < t.length; i++) {
        const n = { file: t[i] };
        await this.uploadBlobMutation.mutate(n), this.saveDraft();
      }
      e && (e.value = "");
    }
  }
  handleExternalBlobs(t) {
    var e;
    if (t)
      for (let i = 0; i < t.length; i++) {
        const r = t[i];
        (e = this.externalBlobMutation) == null || e.mutate({ externalBlob: r });
      }
  }
  handleRemoveUpload(t) {
    !this.weavy || !this.mutationAppId || Xw(
      this.weavy.queryClient,
      ["apps", this.mutationAppId, "blobs", `${this.editorLocation}-${this.parentId || this.mutationAppId}`],
      (e) => {
        var i, r;
        return ((i = e.state.data) == null ? void 0 : i.id) === ((r = t.data) == null ? void 0 : r.id);
      }
    );
  }
  saveDraft() {
    var i;
    if (!this.draft || !this.storage) return;
    const t = this.mutatingFiles.result;
    let e = (i = this.editor) == null ? void 0 : i.state.doc.toString();
    if (e === void 0 && (e = this.text), (!t || !t.length) && !this.meeting && !this.embeds.length && (!this.pollOptions.length || this.pollOptions.filter((r) => r.text.trim() !== "").length === 0) && e === "")
      this.storage.removeItem(this.draftKey);
    else {
      const r = {
        meeting: this.meeting,
        text: e,
        pollOptions: this.pollOptions.filter((n) => n.text.trim() !== ""),
        embeds: this.embeds
      };
      this.storage.setItem(this.draftKey, JSON.stringify(r));
    }
  }
  handleRemoveAttachment(t) {
    this.attachments = this.attachments.filter((e) => e.id !== t.id);
  }
  submit() {
    var p, w, b, m;
    const t = this.mutatingFiles.result, e = t == null ? void 0 : t.some((g) => g.status === "pending"), i = ((p = this.editor) == null ? void 0 : p.state.doc.toString().trim()) ?? "", r = (w = this.meeting) == null ? void 0 : w.id, n = t == null ? void 0 : t.map((g) => {
      var x;
      return (x = g.data) == null ? void 0 : x.id;
    }).filter((g) => g), a = ((b = this.attachments) == null ? void 0 : b.map((g) => g.id)) || [], c = this.pollOptions.filter((g) => g.text.trim() !== "");
    if (v5() || e || !this.contextDataBlobs || !i && !r && (n == null ? void 0 : n.length) == 0 && c.length == 0 && a.length == 0 && this.embeds.length == 0)
      return;
    const l = this.contextDataBlobs.length ? this.contextDataBlobs : void 0, u = new CustomEvent("submit", {
      detail: { text: i, meetingId: r, blobs: n, attachments: a, pollOptions: c, embedId: (m = this.embeds[0]) == null ? void 0 : m.id, contextData: l },
      bubbles: !0,
      composed: !0
    });
    this.dispatchEvent(u), this.resetEditor();
  }
  resetEditor() {
    var t;
    this.clearEditor(), this.weavy && this.mutationAppId && N1(this.weavy.queryClient, [
      "apps",
      this.mutationAppId,
      "blobs",
      `${this.editorLocation}-${this.parentId || this.mutationAppId}`
    ]), (t = this.storage) == null || t.removeItem(this.draftKey);
  }
  clearEditor() {
    var t;
    (t = this.editor) == null || t.dispatch({ changes: { from: 0, to: this.editor.state.doc.length, insert: "" } }), this.text = "", this.meeting = void 0, this.pollOptions = [], this.showPolls = !1, this.embeds = [], this.metadata = {}, b5();
  }
  async handleMeetingClick(t) {
    if (!this.weavy || !this.user)
      return;
    const i = await qy(this.weavy, t).mutate();
    i.auth_url ? this.authWindow = window.open(i.auth_url, "oauthwin", "height=640,width=480") : this.meeting = i;
  }
  setEmbeds(t) {
    this.embeds = [t, ...this.embeds], this.saveDraft();
  }
  handleEmbeds(t) {
    this.weavy && x5(t, this.setEmbeds.bind(this), this.weavy);
  }
  removeEmbed(t) {
    this.embeds = this.embeds.filter((e) => e.id !== t.detail.id), this.saveDraft();
  }
  swapEmbed() {
    const t = this.embeds.shift();
    t && (this.embeds = [...this.embeds, t]), this.saveDraft();
  }
  openPolls() {
    if (this.showPolls)
      this.showPolls = !1;
    else {
      if (this.pollOptions.length === 0) {
        const t = { id: null, text: "" };
        this.pollOptions = [...this.pollOptions, t];
      }
      this.showPolls = !0;
    }
  }
  handlePollOptionChange(t, e) {
    const i = [...this.pollOptions];
    i[e].text = t.target.value, this.pollOptions = i, this.saveDraft();
  }
  handlePollOptionAdd(t, e) {
    if (e === this.pollOptions.length - 1 && this.pollOptions.length < 5) {
      const i = { id: null, text: "" };
      this.pollOptions = [...this.pollOptions, i], this.saveDraft();
    }
  }
  /**
   * Editor loading fallback dummy.
   * Hard copy of the rendered nodes when the editor is empty. Cleaned up to not be editable.
   */
  renderEditorDummy() {
    return this.editorInitialized ? C : h`
          <div class="cm-editor">
            <div class="cm-announced"></div>
            <div tabindex="-1" class="cm-scroller">
              <div class="cm-content cm-lineWrapping">
                <div class="cm-line"
                  ><img class="cm-widgetBuffer" aria-hidden="true" /><span class="cm-placeholder"
                    >${this.placeholder}</span
                  ><br
                /></div>
              </div>
            </div>
          </div>
        `;
  }
  renderTopSlot() {
    return C;
  }
  renderMiddleSlot() {
    var t, e, i, r, n, a;
    return h`
      <!-- Input -->
      <div class=${Mt({ "wy-post-editor-text": !0, "wy-is-invalid": this.editorError })} ${Q(this.editorRef)}>
        ${this.renderEditorDummy()}
      </div>

      <div class="wy-post-editor-inputs">
        <div class="wy-post-editor-buttons">
          ${(t = this.componentFeatures) != null && t.allowsFeature(A.Attachments) ? h`<wy-button
                  kind="icon"
                  @click=${this.openFileInput}
                  title=${$("From device")}
                  ?disabled=${this.disabled}
                >
                  <wy-icon name="attachment"></wy-icon>
                </wy-button>
                <input
                  type="file"
                  ${Q(this.fileInputRef)}
                  @click=${(c) => c.stopPropagation()}
                  @change=${(c) => this.handleUploadFiles(
      Array.from(c.target.files || []),
      c.target
    )}
                  multiple
                  hidden
                  tabindex="-1"
                  ?disabled=${this.disabled}
                />` : C}
          ${(e = this.componentFeatures) != null && e.allowsFeature(A.CloudFiles) ? h`<wy-button
                kind="icon"
                @click=${this.openCloudFiles}
                title=${$("From cloud")}
                ?disabled=${this.disabled}
              >
                <wy-icon name="cloud"></wy-icon>
              </wy-button>` : C}
          ${(i = this.componentFeatures) != null && i.allowsAnyFeature(A.Meetings, A.ZoomMeetings) ? h`
                <wy-button
                  kind="icon"
                  @click=${() => this.handleMeetingClick("zoom")}
                  title=${$("Zoom meeting")}
                  ?disabled=${this.disabled}
                >
                  <wy-icon svg="zoom-meetings"></wy-icon>
                </wy-button>
              ` : C}
          ${(r = this.componentFeatures) != null && r.allowsAnyFeature(A.Meetings, A.GoogleMeet) ? h`
                <wy-button
                  kind="icon"
                  @click=${() => this.handleMeetingClick("google")}
                  title=${$("Google Meet")}
                  ?disabled=${this.disabled}
                >
                  <wy-icon svg="google-meet"></wy-icon>
                </wy-button>
              ` : C}
          ${(n = this.componentFeatures) != null && n.allowsAnyFeature(A.Meetings, A.MicrosoftTeams) ? h`
                <wy-button
                  kind="icon"
                  @click=${() => this.handleMeetingClick("microsoft")}
                  title=${$("Microsoft Teams")}
                  ?disabled=${this.disabled}
                >
                  <wy-icon svg="microsoft-teams"></wy-icon>
                </wy-button>
              ` : C}
          ${(a = this.componentFeatures) != null && a.allowsFeature(A.Polls) ? h`<wy-button
                kind="icon"
                @click=${() => this.openPolls()}
                title=${$("Poll")}
                ?disabled=${this.disabled}
              >
                <wy-icon name="poll"></wy-icon>
              </wy-button>` : C}
        </div>

        <!-- Button -->
        <wy-button @click="${() => this.submit()}" color="primary" title=${this.buttonText} ?disabled=${this.disabled}>
          ${this.buttonText}
        </wy-button>
      </div>
    `;
  }
  renderBottomSlot() {
    return [this.renderLists()];
  }
  renderLists() {
    var e, i, r, n, a, c, l, u;
    const t = this.mutatingFiles.result;
    return this.disabled ? C : h`
      <!-- polls -->
      ${(e = this.componentFeatures) != null && e.allowsFeature(A.Polls) && this.showPolls && this.pollOptions.length > 0 ? h`
            <div class="wy-poll-form">
              ${this.pollOptions.map((p, w) => h`<input
                  value=${p.text}
                  @change=${(b) => this.handlePollOptionChange(b, w)}
                  @keyup=${Cs}
                  class="wy-input"
                  type="text"
                  placeholder=${$("+ add an option")}
                  @focus=${(b) => this.handlePollOptionAdd(b, w)}
                />`)}
            </div>
          ` : C}

      <!-- meetings -->
      ${((i = this.meeting) == null ? void 0 : i.provider) === "zoom" && ((r = this.componentFeatures) != null && r.allowsAnyFeature(A.Meetings, A.ZoomMeetings)) || ((n = this.meeting) == null ? void 0 : n.provider) === "google" && ((a = this.componentFeatures) != null && a.allowsAnyFeature(A.Meetings, A.GoogleMeet)) || ((c = this.meeting) == null ? void 0 : c.provider) === "microsoft" && ((l = this.componentFeatures) != null && l.allowsAnyFeature(A.Meetings, A.MicrosoftTeams)) ? h`
            <div class="wy-item wy-list-item">
              <wy-icon svg="${zu(this.meeting.provider)}"></wy-icon>
              <div class="wy-item-body">${Mu(this.meeting.provider)}</div>
              <wy-button kind="icon" @click=${() => this.handleRemoveMeeting()}>
                <wy-icon name="close-circle"></wy-icon>
              </wy-button>
            </div>
          ` : C}

      <!-- blobs -->
      ${t && t.length ? Te(
      t,
      (p) => "mutation" + p.submittedAt,
      (p) => {
        var w;
        if ((w = p.context) != null && w.file) {
          const b = p.context.file, m = {
            ...p.context.status
          };
          return h`
                  <wy-file-item
                    .file=${p.context.file}
                    .status=${m}
                    title="${Bu(p.context.type)}: ${b.name + (m.text ? `: ${m.text}` : "")}"
                  >
                    <span slot="title"
                      ><strong></strong> ${b.name}
                      ${m.text ? h`: <em>${m.text}</em>` : C}</span
                    >
                    <wy-button
                      slot="actions"
                      kind="icon"
                      @click=${() => this.handleRemoveUpload(p)}
                      title=${$("Discard", { desc: "Button action to discard" })}
                    >
                      <wy-icon name="close"></wy-icon>
                    </wy-button>
                  </wy-file-item>
                `;
        }
        return C;
      }
    ) : C}

      <!-- attachments -->
      ${this.attachments && this.attachments.map(
      (p) => h`<wy-file-item .file=${p} title="${p.name}">
          <span slot="title">${p.name}</span>
          <wy-button
            slot="actions"
            kind="icon"
            @click=${() => this.handleRemoveAttachment(p)}
            title=${$("Remove", { desc: "Button action to remove" })}
          >
            <wy-icon name="close"></wy-icon>
          </wy-button>
        </wy-file-item>`
    )}

      <!-- embeds -->
      ${(u = this.componentFeatures) != null && u.allowsFeature(A.Embeds) && this.embeds.length > 0 ? h`<div class="wy-embed-preview">
            ${this.embeds.map(
      (p) => h`
                <wy-embed
                  class="wy-embed"
                  .embed=${p}
                  @embed-remove=${(w) => this.removeEmbed(w)}
                  @embed-swap=${() => this.swapEmbed()}
                  .enableSwap=${this.embeds.length > 1}
                ></wy-embed>
              `
    )}
          </div> ` : C}
    `;
  }
  renderCloudFiles() {
    return this.disabled ? C : h`
      <wy-cloud-files
        ${Q(this.cloudFilesRef)}
        @external-blobs=${(t) => this.handleExternalBlobs(t.detail.externalBlobs)}
      ></wy-cloud-files>
    `;
  }
  render() {
    const t = this.dropZone.isDragActive;
    return h`
      <div
        class=${Mt({
      "wy-editor": !0,
      [this.editorClass]: !0,
      "wy-dragging": t
    })}
        data-drag-title=${$("Drop files here to upload.")}
      >
        ${this.renderTopSlot()} ${this.renderMiddleSlot()} ${this.renderBottomSlot()}
      </div>
      ${this.renderCloudFiles()}
    `;
  }
}, o(Ua, "WyEditor"), Ua);
Ct.styles = X;
At([
  y({ type: Boolean })
], Ct.prototype, "disabled", 2);
At([
  y({ attribute: !1 })
], Ct.prototype, "parentId", 2);
At([
  y()
], Ct.prototype, "placeholder", 1);
At([
  y()
], Ct.prototype, "text", 2);
At([
  y({ type: Object })
], Ct.prototype, "metadata", 2);
At([
  y({ attribute: !1 })
], Ct.prototype, "embed", 2);
At([
  y({ attribute: !1 })
], Ct.prototype, "options", 2);
At([
  y({ attribute: !1 })
], Ct.prototype, "attachments", 2);
At([
  y()
], Ct.prototype, "buttonText", 2);
At([
  y({ type: Boolean })
], Ct.prototype, "typing", 2);
At([
  y({ type: Boolean })
], Ct.prototype, "draft", 2);
At([
  y()
], Ct.prototype, "editorType", 2);
At([
  y()
], Ct.prototype, "editorClass", 2);
At([
  y()
], Ct.prototype, "editorLocation", 2);
At([
  H()
], Ct.prototype, "meeting", 2);
At([
  H()
], Ct.prototype, "editorError", 2);
At([
  H()
], Ct.prototype, "showPolls", 2);
At([
  H()
], Ct.prototype, "pollOptions", 2);
At([
  H()
], Ct.prototype, "embeds", 2);
At([
  H()
], Ct.prototype, "draftKey", 2);
At([
  H()
], Ct.prototype, "mutationAppId", 2);
At([
  H()
], Ct.prototype, "keyMap", 2);
At([
  H()
], Ct.prototype, "editorExtensions", 2);
At([
  H()
], Ct.prototype, "editor", 2);
Ct = At([
  q("wy-editor"),
  rt()
], Ct);
var E5 = Object.defineProperty, O5 = Object.getOwnPropertyDescriptor, is = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? O5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && E5(t, e, r), r;
}, "__decorateClass$F"), qa;
let ei = (qa = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.location = "apps", this.text = "", this.attachments = [], this.pollOptions = [], this.updateCommentMutation = new Le(this);
  }
  dispatchEdit(t) {
    const e = new CustomEvent("edit", { detail: { edit: t } });
    return this.dispatchEvent(e);
  }
  handleSubmit(t) {
    this.updateCommentMutation.mutate({
      id: this.commentId,
      type: this.location,
      parent_id: this.parentId,
      text: t.detail.text,
      meeting_id: t.detail.meetingId,
      blobs: t.detail.blobs,
      attachments: t.detail.attachments,
      poll_options: t.detail.pollOptions,
      embed_id: t.detail.embedId
    }), this.dispatchEdit(!1);
  }
  async willUpdate(t) {
    super.willUpdate(t), (t.has("parentId") || t.has("weavy")) && this.parentId && this.weavy && await this.updateCommentMutation.trackMutation(
      Z2(this.weavy, [this.location, this.parentId, "comments"])
    );
  }
  render() {
    return h`
      <nav class="wy-item">
        <div class="wy-item-body">
          <div class="wy-item-title">${$("Edit comment")}</div>
        </div>

        <wy-button @click=${() => this.dispatchEdit(!1)} kind="icon">
          <wy-icon name="close"></wy-icon>
        </wy-button>
      </nav>
      <wy-editor
        editorLocation=${this.location}
        .text=${this.text}
        .embed=${this.embed}
        .options=${this.pollOptions}
        .attachments=${this.attachments ?? []}
        .parentId=${this.commentId}
        .typing=${!1}
        .draft=${!1}
        placeholder=${$("Edit comment...")}
        buttonText=${$("Update", { desc: "Button action to update" })}
        @submit=${(t) => this.handleSubmit(t)}></wy-editor>
    `;
  }
}, o(qa, "WyCommentEdit"), qa);
ei.styles = X;
is([
  ee({ context: le, subscribe: !0 }),
  H()
], ei.prototype, "weavy", 2);
is([
  y({ type: Number })
], ei.prototype, "parentId", 2);
is([
  y({ attribute: !1 })
], ei.prototype, "location", 2);
is([
  y({ type: Number })
], ei.prototype, "commentId", 2);
is([
  y()
], ei.prototype, "text", 2);
is([
  y({ type: Array })
], ei.prototype, "attachments", 2);
is([
  y({ type: Array })
], ei.prototype, "pollOptions", 2);
is([
  y({ attribute: !1 })
], ei.prototype, "embed", 2);
ei = is([
  q("wy-comment-edit"),
  rt()
], ei);
var R5 = Object.defineProperty, L5 = Object.getOwnPropertyDescriptor, ae = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? L5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && R5(t, e, r), r;
}, "__decorateClass$E"), Na;
let Ut = (Na = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.location = "apps", this.createdAt = "", this.modifiedAt = void 0, this.isTrashed = !1, this.html = "", this.text = "", this.annotations = [], this.attachments = [], this.pollOptions = [], this.reactions = [], this.commentCount = 0, this.seenBy = [], this.editing = !1;
  }
  dispatchVote(t) {
    const e = new CustomEvent("vote", { detail: { optionId: t, parentId: this.commentId, parentType: "comments" } });
    return this.dispatchEvent(e);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", { detail: { id: this.commentId } });
    return this.dispatchEvent(t);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", { detail: { id: this.commentId } });
    return this.dispatchEvent(t);
  }
  render() {
    return h`
      ${this.isTrashed ? h`<wy-comment-trashed
            class="wy-comment"
            commentId=${this.commentId}
            @restore=${() => {
      this.dispatchRestore();
    }}></wy-comment-trashed> ` : C}
      ${!this.isTrashed && this.editing ? h`<wy-comment-edit
            class="wy-comment"
            .commentId=${this.commentId}
            .parentId=${this.parentId}
            .location=${this.location}
            .text=${this.text}
            .pollOptions=${this.pollOptions}
            .attachments=${this.attachments}
            .embed=${this.embed}
            @edit=${(t) => {
      this.editing = t.detail.edit;
    }}></wy-comment-edit> ` : C}
      ${!this.isTrashed && !this.editing ? h`<wy-comment-view
            class="wy-comment"
            id="comment-view-${this.commentId}"
            .commentId=${this.commentId}
            .parentId=${this.parentId}
            .location=${this.location}
            .createdBy=${this.createdBy}
            .createdAt=${this.createdAt}
            .modifiedAt=${this.modifiedAt}
            .isTrashed=${this.isTrashed}
            .text=${this.text}
            .html=${this.html}
            .annotations=${this.annotations}          
            .attachments=${this.attachments}
            .embed=${this.embed}
            .meeting=${this.meeting}
            .pollOptions=${this.pollOptions}
            .reactions=${this.reactions}
            @edit=${(t) => {
      this.editing = t.detail.edit;
    }}
            @trash=${() => {
      this.dispatchTrash();
    }}
            @vote=${(t) => {
      this.dispatchVote(t.detail.optionId);
    }}></wy-comment-view> ` : C}
    `;
  }
}, o(Na, "WyComment"), Na);
Ut.styles = [X, yt];
ae([
  y({ type: Number })
], Ut.prototype, "commentId", 2);
ae([
  y({ type: Number })
], Ut.prototype, "parentId", 2);
ae([
  y({ attribute: !1 })
], Ut.prototype, "location", 2);
ae([
  y({ attribute: !1 })
], Ut.prototype, "createdBy", 2);
ae([
  y()
], Ut.prototype, "createdAt", 2);
ae([
  y()
], Ut.prototype, "modifiedAt", 2);
ae([
  y({ type: Boolean })
], Ut.prototype, "isTrashed", 2);
ae([
  y()
], Ut.prototype, "html", 2);
ae([
  y()
], Ut.prototype, "text", 2);
ae([
  y({ attribute: !1 })
], Ut.prototype, "annotations", 2);
ae([
  y({ attribute: !1 })
], Ut.prototype, "attachments", 2);
ae([
  y({ type: Array })
], Ut.prototype, "pollOptions", 2);
ae([
  y({ attribute: !1 })
], Ut.prototype, "meeting", 2);
ae([
  y({ attribute: !1 })
], Ut.prototype, "embed", 2);
ae([
  y({ type: Array })
], Ut.prototype, "reactions", 2);
ae([
  y({ attribute: !1 })
], Ut.prototype, "commentCount", 2);
ae([
  y({ type: Array })
], Ut.prototype, "seenBy", 2);
ae([
  H()
], Ut.prototype, "editing", 2);
Ut = ae([
  q("wy-comment")
], Ut);
var I5 = Object.getOwnPropertyDescriptor, T5 = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? I5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = a(r) || r);
  return r;
}, "__decorateClass$D"), ja;
let Eu = (ja = class extends Ct {
  constructor() {
    super(), this.editorType = "comments", this.editorClass = "wy-comment-editor";
  }
  willUpdate(t) {
    super.willUpdate(t), t.has("editorLocation") && this.editorLocation === "files" && (this.editorClass = "wy-comment-editor wy-comment-editor-bottom");
  }
  renderTopSlot() {
    return C;
  }
  renderMiddleSlot() {
    var t, e, i, r, n, a, c;
    return h`<div class="wy-comment-editor-inputs">
      <!-- Add -->
      ${(t = this.componentFeatures) != null && t.allowsAnyFeature(
      A.Attachments,
      A.CloudFiles,
      A.Meetings,
      A.ZoomMeetings,
      A.GoogleMeet,
      A.MicrosoftTeams,
      A.Polls
    ) ? h`<wy-dropdown icon="plus" directionY="up" ?disabled=${this.disabled}>
            ${(e = this.componentFeatures) != null && e.allowsFeature(A.Attachments) ? h`<wy-dropdown-item @click=${this.openFileInput} title=${$("From device")}>
                    <wy-icon name="attachment"></wy-icon>
                    <span>${$("From device")}</span>
                  </wy-dropdown-item>
                  <input
                    type="file"
                    ${Q(this.fileInputRef)}
                    @click=${(l) => l.stopPropagation()}
                    @change=${(l) => this.handleUploadFiles(
      Array.from(l.target.files || []),
      l.target
    )}
                    multiple
                    hidden
                    tabindex="-1"
                  />` : C}
            ${(i = this.componentFeatures) != null && i.allowsFeature(A.CloudFiles) ? h`<wy-dropdown-item @click=${this.openCloudFiles} title=${$("From cloud")}>
                  <wy-icon name="cloud"></wy-icon>
                  <span>${$("From cloud")}</span>
                </wy-dropdown-item>` : C}
            ${(r = this.componentFeatures) != null && r.allowsAnyFeature(A.Meetings, A.ZoomMeetings) ? h`
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("zoom")} title=${$("Zoom meeting")}>
                    <wy-icon svg="zoom-meetings"></wy-icon>
                    <span>${$("Zoom meeting")}</span>
                  </wy-dropdown-item>
                ` : C}
            ${(n = this.componentFeatures) != null && n.allowsAnyFeature(A.Meetings, A.GoogleMeet) ? h`
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("google")} title=${$("Google Meet")}>
                    <wy-icon svg="google-meet"></wy-icon>
                    <span>${$("Google Meet")}</span>
                  </wy-dropdown-item>
                ` : C}
            ${(a = this.componentFeatures) != null && a.allowsAnyFeature(A.Meetings, A.MicrosoftTeams) ? h`
                  <wy-dropdown-item
                    @click=${() => this.handleMeetingClick("microsoft")}
                    title=${$("Microsoft Teams")}
                  >
                    <wy-icon svg="microsoft-teams"></wy-icon>
                    <span>${$("Microsoft Teams")}</span>
                  </wy-dropdown-item>
                ` : C}
            ${(c = this.componentFeatures) != null && c.allowsFeature(A.Polls) ? h`<wy-dropdown-item @click=${() => this.openPolls()} title=${$("Poll")}>
                  <wy-icon name="poll"></wy-icon>
                  <span>${$("Poll")}</span>
                </wy-dropdown-item>` : C}
          </wy-dropdown>` : C}

      <!-- Input -->
      <div
        class=${Mt({ "wy-comment-editor-text": !0, "wy-is-invalid": this.editorError })}
        ${Q(this.editorRef)}
      >
        ${this.renderEditorDummy()}
      </div>

      <!-- Button -->
      <wy-button kind="icon" @click="${() => this.submit()}" title=${this.buttonText} ?disabled=${this.disabled}>
        <wy-icon name="send"></wy-icon>
      </wy-button>
    </div>`;
  }
  renderBottomSlot() {
    return [
      this.renderLists()
    ];
  }
}, o(ja, "WyCommentEditor"), ja);
Eu = T5([
  q("wy-comment-editor"),
  rt()
], Eu);
var F5 = Object.defineProperty, D5 = Object.getOwnPropertyDescriptor, om = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$b"), Id = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? D5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && F5(t, e, r), r;
}, "__decorateClass$C"), cm = /* @__PURE__ */ o((s, t, e) => t.has(s) || om("Cannot " + e), "__accessCheck$b"), Al = /* @__PURE__ */ o((s, t, e) => (cm(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$b"), Dh = /* @__PURE__ */ o((s, t, e) => t.has(s) ? om("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$b"), Hh = /* @__PURE__ */ o((s, t, e, i) => (cm(s, t, "write to private field"), t.set(s, e), e), "__privateSet$a"), Il, Ou, Rr, Wa;
let gr = (Wa = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.location = "apps", Dh(this, Il), Dh(this, Ou, new Promise((t) => {
      Hh(this, Il, t);
    })), this.commentsQuery = new Wi(this), this.addCommentMutation = new Le(this), this.infiniteScroll = new Qi(this), this.pagerRef = st(), Dh(this, Rr), this.handleRealtimeCommentCreated = () => {
      var t;
      (t = this.weavy) == null || t.queryClient.invalidateQueries({ queryKey: [this.location, this.parentId, "comments"] });
    }, this.handleRealtimeReactionAdded = (t) => {
      !this.weavy || t.entity.type !== xe.Comment || jt(
        this.weavy.queryClient,
        [this.location, this.parentId, "comments"],
        t.entity.id,
        (e) => {
          Mc(e, t.reaction, t.actor);
        }
      );
    }, this.handleRealtimeReactionDeleted = (t) => {
      !this.weavy || t.entity.type !== xe.Comment || jt(
        this.weavy.queryClient,
        [this.location, this.parentId, "comments"],
        t.entity.id,
        (e) => {
          Mc(e, void 0, t.actor);
        }
      );
    };
  }
  async whenParentId() {
    return await Al(this, Ou);
  }
  async willUpdate(t) {
    var r;
    var e, i;
    if (super.willUpdate(t), t.has("parentId") && this.parentId && ((e = Al(this, Il)) == null || e.call(this, this.parentId)), (t.has("parentId") || t.has("weavy") || t.has("componentFeatures")) && this.parentId && this.weavy && (await this.commentsQuery.trackInfiniteQuery(G2(this.weavy, this.location, this.parentId)), await this.addCommentMutation.trackMutation(Y2(this.weavy)), this.removeCommentMutation = J2(this.weavy, this.location, this.parentId), this.restoreCommentMutation = e5(this.weavy, this.location, this.parentId)), (t.has("weavy") || t.has("app") || t.has("componentFeatures")) && this.weavy && this.app) {
      this.pollMutation = ip(this.weavy, this.app.id, [this.location, this.parentId, "comments"]), (i = Al(this, Rr)) == null || i.call(this);
      const n = `a${this.app.id}`;
      this.weavy.subscribe(n, "comment_created", this.handleRealtimeCommentCreated), (r = this.componentFeatures) != null && r.allowsFeature(A.Reactions) && (this.weavy.subscribe(n, "reaction_added", this.handleRealtimeReactionAdded), this.weavy.subscribe(n, "reaction_removed", this.handleRealtimeReactionDeleted)), Hh(this, Rr, () => {
        var a, c, l;
        (a = this.weavy) == null || a.unsubscribe(n, "comment_created", this.handleRealtimeCommentCreated), (c = this.weavy) == null || c.unsubscribe(n, "reaction_added", this.handleRealtimeReactionAdded), (l = this.weavy) == null || l.unsubscribe(n, "reaction_removed", this.handleRealtimeReactionDeleted), Hh(this, Rr, void 0);
      });
    }
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.commentsQuery.result, this.pagerRef.value);
  }
  async handleSubmit(t) {
    this.app && this.parentId && this.user && await this.addCommentMutation.mutate({
      app_id: this.app.id,
      parent_id: this.parentId,
      type: this.location,
      text: t.detail.text,
      meeting_id: t.detail.meetingId,
      blobs: t.detail.blobs,
      poll_options: t.detail.pollOptions,
      embed_id: t.detail.embedId,
      context: t.detail.contextData,
      user: this.user
    });
  }
  renderComments(t) {
    return t ? Te(
      t,
      (e) => e.id,
      (e) => {
        var i, r, n, a;
        return this.parentId ? h`<wy-comment
              id="comment-${e.id}"
              .commentId=${e.id}
              .parentId=${this.parentId}
              .location=${this.location}
              .createdBy=${e.created_by}
              .createdAt=${e.created_at}
              .modifiedAt=${e.updated_at}
              .isTrashed=${e.is_trashed}
              .html=${e.html}
              .text=${e.text}
              .annotations=${(i = e.annotations) == null ? void 0 : i.data}
              .attachments=${(r = e.attachments) == null ? void 0 : r.data}
              .embed=${e.embed}
              .meeting=${e.meeting}
              .pollOptions=${(n = e.options) == null ? void 0 : n.data}
              .reactions=${(a = e.reactions) == null ? void 0 : a.data}
              @trash=${async (c) => {
          var p;
          const l = await this.whenApp(), u = await this.whenParentId();
          (p = this.removeCommentMutation) == null || p.mutate({
            id: c.detail.id,
            appId: l.id,
            parentId: u,
            type: this.location
          });
        }}
              @restore=${async (c) => {
          var p;
          const l = await this.whenApp(), u = await this.whenParentId();
          (p = this.restoreCommentMutation) == null || p.mutate({
            id: c.detail.id,
            appId: l.id,
            parentId: u,
            type: this.location
          });
        }}
              @vote=${(c) => {
          var l;
          c.detail.parentId && c.detail.parentType && ((l = this.pollMutation) == null || l.mutate({
            optionId: c.detail.optionId,
            parentType: c.detail.parentType,
            parentId: c.detail.parentId
          }));
        }}
            ></wy-comment>` : C;
      }
    ) : C;
  }
  render() {
    var a;
    const { data: t, hasNextPage: e, isPending: i } = this.commentsQuery.result ?? {}, r = ts(t), n = {
      "wy-comments": !0,
      "wy-comments-padded": this.location === "files"
    };
    return h`
      ${r && r.length ? h`
            <div class=${Mt(n)}>
              ${this.renderComments(r)}
              ${e ? h`<div ${Q(this.pagerRef)} part="wy-pager wy-pager-bottom"></div>` : C}
            </div>
          ` : i ? h`<wy-empty noNetwork><wy-spinner padded reveal></wy-spinner></wy-empty>` : C}

      <wy-comment-editor
        editorLocation=${this.location}
        .parentId=${this.parentId}
        .typing=${!1}
        .draft=${!0}
        ?disabled=${!Fo(or.Create, (a = this.app) == null ? void 0 : a.permissions)}
        placeholder=${this.placeholder ?? $("Create a comment...")}
        buttonText=${$("Comment", { desc: "Button action to comment" })}
        @submit=${(c) => this.handleSubmit(c)}
      ></wy-comment-editor>
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Al(this, Rr)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(Wa, "WyCommentList"), Wa);
Il = /* @__PURE__ */ new WeakMap();
Ou = /* @__PURE__ */ new WeakMap();
Rr = /* @__PURE__ */ new WeakMap();
gr.styles = [X, Ds];
Id([
  y({ type: Number })
], gr.prototype, "parentId", 2);
Id([
  y({ attribute: !1 })
], gr.prototype, "location", 2);
Id([
  y()
], gr.prototype, "placeholder", 2);
gr = Id([
  q("wy-comment-list"),
  rt()
], gr);
function mp(s, t) {
  return ["apps", s.id, "file", t.id, "versions"];
}
o(mp, "getFileVersionsKey");
function H5(s, t, e) {
  const i = s.queryClient, r = ["apps", t.id, "files"], n = mp(t, e), a = {
    mutationKey: r,
    mutationFn: /* @__PURE__ */ o(async ({ versionFile: c }) => {
      if (c.id >= 1 && c.rev) {
        if (!(await s.fetch(`/api/files/${c.id}/versions/${c.rev}/restore`, {
          method: "POST"
        })).ok)
          throw new Error();
      } else
        throw new Error(`Could not restore ${c.name} to version ${c.rev}.`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((c) => (at(
      i,
      { queryKey: a.mutationKey, exact: !1 },
      c.versionFile.id,
      (l) => Object.assign(l, c.versionFile, { status: "pending" })
    ), { type: "version", file: e, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ o((c, l) => {
      at(
        i,
        { queryKey: a.mutationKey, exact: !1 },
        l.versionFile.id,
        (u) => Object.assign(u, c, { status: "ok" })
      ), Vt(i, a.mutationKey, l, (u) => {
        u.status.state = "ok";
      });
    }, "onSuccess"),
    onError: /* @__PURE__ */ o((c, l, u) => {
      u != null && u.file && at(
        i,
        { queryKey: a.mutationKey, exact: !1 },
        l.versionFile.id,
        (p) => Object.assign(p, u.file, { status: "error" })
      ), Vt(i, a.mutationKey, l, (p) => {
        p.status.state = "error", p.status.text = c.message;
      });
    }, "onError"),
    onSettled: /* @__PURE__ */ o(async () => {
      await i.invalidateQueries({ queryKey: n });
    }, "onSettled")
  };
  return a;
}
o(H5, "getFileVersionRestoreMutationOptions");
function V5(s, t, e) {
  return new kt(s.queryClient, H5(s, t, e));
}
o(V5, "getFileVersionRestoreMutation");
function B5(s, t, e) {
  const i = s.queryClient, r = mp(t, e);
  return {
    mutationKey: r,
    mutationFn: /* @__PURE__ */ o(async ({ versionFile: a }) => {
      if (a.id >= 1 && a.rev) {
        const c = await s.fetch(`/api/files/${a.id}/versions/${a.rev}`, {
          method: "DELETE"
        });
        if (!c.ok) {
          const l = await c.json();
          throw new Error(l.detail || l.title, { cause: l });
        }
      } else {
        const c = {
          status: 400,
          title: `Could not remove ${a.name} version ${a.rev}.`
        };
        throw new Error(c.detail || c.title, { cause: c });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((a) => {
      jt(
        i,
        r,
        /* @__PURE__ */ o((l) => l.id === a.versionFile.id && l.rev === a.versionFile.rev, "versionPredicate"),
        (l) => Object.assign(l, { status: "pending" })
      );
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((a, c) => {
      xd(i, r, /* @__PURE__ */ o((u) => u.id === c.versionFile.id && u.rev === c.versionFile.rev, "versionPredicate"));
    }, "onSuccess"),
    onError: /* @__PURE__ */ o((a, c) => {
      jt(
        i,
        r,
        /* @__PURE__ */ o((u) => u.id === c.versionFile.id && u.rev === c.versionFile.rev, "versionPredicate"),
        (u) => Object.assign(u, { status: void 0 })
      );
    }, "onError")
  };
}
o(B5, "getFileVersionDeleteMutationOptions");
function U5(s, t, e) {
  return new kt(s.queryClient, B5(s, t, e));
}
o(U5, "getFileVersionDeleteMutation");
var q5 = Object.defineProperty, N5 = Object.getOwnPropertyDescriptor, vp = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? N5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && q5(t, e, r), r;
}, "__decorateClass$B"), Qa;
let Wo = (Qa = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.fileVersionsQuery = new Ne(this);
  }
  selectVersion(t) {
    this.activeVersion = t, this.dispatchFileVersionSelect(t);
  }
  dispatchFileVersionSelect(t) {
    const e = new CustomEvent("file-version-select", { detail: { versionFile: t } });
    return this.dispatchEvent(e);
  }
  handleRevert(t) {
    var e;
    (e = this.fileVersionRestoreMutation) == null || e.mutate({ versionFile: t }), this.selectVersion(t);
  }
  handleRemove(t) {
    var e;
    (e = this.fileVersionDeleteMutation) == null || e.mutate({ versionFile: t }), this.activeVersion === t && (this.activeVersion = this.file);
  }
  triggerDownload(t) {
    vc(t.download_url, "_top", t.name, !0);
  }
  async willUpdate(t) {
    super.willUpdate(t), (t.has("weavy") || t.has("file") || t.has("app")) && this.weavy && this.file && this.app && (await this.fileVersionsQuery.trackQuery(
      tc(
        this.weavy,
        mp(this.app, this.file),
        `/api/files/${this.file.id}/versions`
      )
    ), this.fileVersionRestoreMutation = V5(this.weavy, this.app, this.file), this.fileVersionDeleteMutation = U5(this.weavy, this.app, this.file));
  }
  render() {
    const { data: t, isPending: e } = this.fileVersionsQuery.result ?? { isPending: !0 };
    return e ? h`<wy-spinner overlay></wy-spinner>` : t != null && t.data ? h`
          <div class="wy-list wy-versions">
            ${Te(
      t.data,
      (i) => i.id,
      (i, r) => {
        var b, m, g, x;
        const n = Ei(i.name || "").icon, a = t.data ? t.data.length - r : NaN, c = Qe(i.name), l = new Date(i.updated_at || i.created_at), u = !!this.file.external_url, p = new Intl.DateTimeFormat((b = this.weavy) == null ? void 0 : b.locale, {
          dateStyle: "full",
          timeStyle: "short"
        }).format(l), w = wl((m = this.weavy) == null ? void 0 : m.locale, new Date(l));
        return u ? h`
                      <wy-empty noNetwork>
                        <span slot="title">${$("Versions are not available for external cloud files.")}</span>
                      </wy-empty>
                    ` : h`
                      <div
                        class="wy-item wy-list-item-lg wy-item-hover ${Mt({
          "wy-active": i.rev == ((g = this.activeVersion) == null ? void 0 : g.rev)
        })}"
                        tabindex="0"
                        @click=${() => this.selectVersion(i)}
                        @keydown=${ye}
                        @keyup=${Fe}
                      >
                        <wy-icon name=${n} size="48" kind=${i.kind} ext=${c}></wy-icon>
                        <div class="wy-item-body">
                          <div class="wy-item-title">${a}. ${i.name}</div>
                          <div class="wy-item-text">
                            <time datetime=${i.updated_at || i.created_at} title=${p}
                              >${w}</time
                            >
                            · ${(x = i.updated_by) == null ? void 0 : x.name}</div
                          >
                        </div>

                        <wy-dropdown directionX="left">
                          <wy-dropdown-item @click=${() => this.triggerDownload(i)}>
                            <wy-icon name="download"></wy-icon>
                            ${$("Download")}
                          </wy-dropdown-item>                          

                          ${r !== 0 ? h`
                                <wy-dropdown-divider></wy-dropdown-divider>
                                <wy-dropdown-item @click=${() => this.handleRevert(i)}>
                                  <wy-icon name="restore"></wy-icon>
                                  ${"Revert"}
                                </wy-dropdown-item>
                                <wy-dropdown-item @click=${() => this.handleRemove(i)}>
                                  <wy-icon name="delete"></wy-icon>
                                  ${$("Remove", { desc: "Button action to remove" })}
                                </wy-dropdown-item>
                              ` : C}
                        </wy-dropdown>
                      </div>
                    `;
      }
    )}
          </div>
        ` : C;
  }
}, o(Qa, "WyFileVersions"), Qa);
Wo.styles = X;
vp([
  y({ attribute: !1 })
], Wo.prototype, "file", 2);
vp([
  y({ attribute: !1 })
], Wo.prototype, "activeVersion", 2);
Wo = vp([
  q("wy-file-versions"),
  rt()
], Wo);
var j5 = Object.defineProperty, W5 = Object.getOwnPropertyDescriptor, ve = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? W5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && j5(t, e, r), r;
}, "__decorateClass$A"), Ka;
let te = (Ka = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.currentId = NaN, this.isAttachment = !1, this.filled = !1, this.showOverlay = !1, this.commentsOpen = !1, this.versionsOpen = !1, this.sidePanelMaximized = !1, this.persistState = new Ec(this), this.previewFileRef = st(), this.swipeScrollRef = st(), this.prevRef = st(), this.nextRef = st(), this.swipeScroller = new Pu(this), this.disableSwipeScroll = !1, this.handleKeys = (t) => {
      this.showOverlay && (t.key === "ArrowLeft" ? (t.stopPropagation(), this.setPrev()) : t.key === "ArrowRight" && (t.stopPropagation(), this.setNext()));
    };
  }
  async dispatchOpen() {
    const t = await this.whenApp(), e = await this.whenComponentFeatures(), i = this.currentId, r = this.commentsOpen ? "comments" : this.versionsOpen ? "versions" : void 0, n = this.currentFile ? [this.currentFile] : [], a = this.isAttachment, c = this.contextDataBlobs, l = new CustomEvent("wy-preview-open", {
      detail: { fileId: i, tab: r, files: n, app: t, features: e.allowedFeatures().join(" "), isAttachment: a, contextDataBlobs: c },
      cancelable: !0,
      bubbles: !1,
      composed: !0
    });
    this.dispatchEvent(l) || (this.showOverlay = !1, this.commentsOpen = !1, this.versionsOpen = !1);
  }
  dispatchClose() {
    const t = new CustomEvent("wy-preview-close", {
      cancelable: !1,
      bubbles: !1,
      composed: !0
    });
    this.dispatchEvent(t);
  }
  async open(t, e) {
    await this.whenApp(), await this.updateComplete, t && (this.currentId = t), e && this.toggleSidebarTab(e, !0), this.showOverlay = !0;
  }
  close() {
    this.showOverlay = !1;
  }
  toggleSidebarTab(t, e) {
    t === "comments" ? (this.versionsOpen = !1, this.commentsOpen = e !== void 0 ? e : !this.commentsOpen) : t === "versions" ? (this.commentsOpen = !1, this.versionsOpen = e !== void 0 ? e : !this.versionsOpen) : (this.commentsOpen = !1, this.versionsOpen = !1);
  }
  handleVersionFile(t) {
    this.versionFile = t.detail.versionFile;
  }
  scrollToPrev() {
    var t;
    this.prevRef.value && (this.unblockSwipeScroll(), this.prevRef.value.scrollIntoView({ behavior: (t = this.weavy) == null ? void 0 : t.scrollBehavior }));
  }
  scrollToNext() {
    var t;
    this.nextRef.value && (this.unblockSwipeScroll(), this.nextRef.value.scrollIntoView({ behavior: (t = this.weavy) == null ? void 0 : t.scrollBehavior }));
  }
  blockSwipeScroll(t = 20) {
    window.clearTimeout(this.disableSwipeScrollTimeout), this.disableSwipeScroll = !0, this.disableSwipeScrollTimeout = window.setTimeout(() => this.disableSwipeScroll = !1, t);
  }
  unblockSwipeScroll() {
    window.clearTimeout(this.disableSwipeScrollTimeout), this.disableSwipeScroll = !1;
  }
  setPrev() {
    this.previousFile && (this.currentId = this.previousFile.id, this.blockSwipeScroll());
  }
  setNext() {
    this.nextFile && (this.currentId = this.nextFile.id, this.blockSwipeScroll());
  }
  async willUpdate(t) {
    if (super.willUpdate(t), (t.has("app") || t.has("user")) && this.app && this.user && !this.isAttachment && (this.persistState.observe(
      [
        { name: "commentsOpen", override: !0 },
        { name: "versionsOpen", override: !0 }
      ],
      `a${this.app.id}-preview`,
      `u${this.user.id}`
    ), this.commentsOpen && this.versionsOpen && (this.versionsOpen = !1)), t.has("queryResult") && this.queryResult) {
      const { data: e } = this.queryResult ?? {};
      this.files = e == null ? void 0 : e.filter((i) => i && !i.is_trashed);
    }
    if (t.has("infiniteQueryResult") && this.infiniteQueryResult) {
      const { data: e } = this.infiniteQueryResult ?? {};
      this.files = ts(e).filter((i) => i && !i.is_trashed);
    }
    t.has("currentFile") && this.currentFile && this.currentFile.id !== this.currentId && (this.currentId = this.currentFile.id), (t.has("files") || t.has("currentId") || t.has("showOverlay")) && this.files && this.showOverlay && (this.currentFile = void 0, this.previousFile = void 0, this.nextFile = void 0, this.versionFile = void 0, this.currentFile = this.files.find((e, i) => this.files && e.id === this.currentId ? (i >= 1 && (this.previousFile = this.files[i - 1]), i < this.files.length - 1 && (this.nextFile = this.files[i + 1]), this.infiniteQueryResult && i >= this.files.length - 2 && this.infiniteQueryResult.hasNextPage && !this.infiniteQueryResult.isFetchingNextPage && this.infiniteQueryResult.fetchNextPage(), this.infiniteQueryResult && i <= 1 && this.infiniteQueryResult.hasPreviousPage && !this.infiniteQueryResult.isFetchingPreviousPage && this.infiniteQueryResult.fetchPreviousPage(), !0) : !1)), t.has("currentFile") && this.currentFile && !this.files && (this.files = [this.currentFile]), t.has("showOverlay") && (this.showOverlay ? await this.dispatchOpen() : t.get("showOverlay") && this.dispatchClose());
  }
  renderHeader(t) {
    var i, r, n, a;
    const e = {
      "wy-appbar-text-trashed": !!(t != null && t.is_trashed)
    };
    return h` <header class="wy-appbars">
      <nav class="wy-appbar">
        <wy-button kind="icon" @click=${() => this.close()}><wy-icon name="close"></wy-icon></wy-button>
        <div class="wy-appbar-text ${Mt(e)}">
          ${t ? h` <span>${t.name}</span> ` : C}
        </div>
        <div class="wy-appbar-buttons wy-appbar-buttons-last">
          ${t ? h`
                ${(i = this.componentFeatures) != null && i.allowsFeature(A.Comments) && t.id >= 1 && !this.isAttachment ? h`
                      <wy-button
                        kind="icon"
                        ?active=${this.commentsOpen}
                        @click=${() => this.toggleSidebarTab("comments")}
                        title=${$("Comments")}
                      >
                        <wy-icon-stack>
                          ${(r = t.comments) != null && r.count && ((n = t.comments) == null ? void 0 : n.count) > 0 ? h`<wy-icon name="comment" state ?active=${!this.commentsOpen}></wy-icon>
                                <wy-icon name="comment" layer state ?active=${this.commentsOpen}></wy-icon>` : h`<wy-icon name="comment-outline" state ?active=${!this.commentsOpen}></wy-icon>
                                <wy-icon name="comment" layer state ?active=${this.commentsOpen}></wy-icon>`}
                        </wy-icon-stack>
                      </wy-button>
                    ` : C}
                <wy-file-menu .file=${t}>
                  ${(a = this.componentFeatures) != null && a.allowsFeature(A.Versions) && t.id >= 1 && !this.isAttachment ? h`
                        <wy-dropdown-item
                          ?active=${this.versionsOpen}
                          @click=${() => this.toggleSidebarTab("versions")}
                        >
                          <wy-icon name="backup-restore"></wy-icon>
                          ${$("Versions")}
                        </wy-dropdown-item>
                      ` : C}
                </wy-file-menu>
              ` : C}
        </div>
      </nav>
    </header>`;
  }
  render() {
    let t = this.files === void 0;
    this.queryResult ? t = this.queryResult.isPending : this.infiniteQueryResult && (t = this.infiniteQueryResult.isPending);
    const e = this.versionFile || this.currentFile, i = [this.previousFile, e, this.nextFile].filter((n) => n);
    this.commentsOpen && this.versionsOpen && (this.versionsOpen = !1);
    const r = {
      "wy-preview-swiper-disabled": this.disableSwipeScroll
    };
    return this.weavy ? h`
      <wy-overlay
        class="wy-dark"
        maximized
        ?filled=${this.filled}
        .show=${this.showOverlay}
        @keyup=${this.handleKeys}
        @close=${() => {
      this.showOverlay = !1;
    }}
        @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
      >
        ${this.showOverlay ? h`<div class="wy-preview-layout">
              ${this.renderHeader(this.currentFile)}

              <div class="wy-main">
                ${this.isAttachment ? C : h` <aside
                        id="tab-comments"
                        class="wy-sidebar ${Mt({
      "wy-active": this.commentsOpen,
      "wy-maximized": this.sidePanelMaximized
    })}"
                        ?hidden=${!this.commentsOpen}
                      >
                        <nav class="wy-item">
                          <div class="wy-item-body">
                            <div class="wy-item-title">${$("Comments")}</div>
                          </div>
                          <wy-button kind="icon" @click=${() => this.toggleSidebarTab("comments", !1)}>
                            <wy-icon name="close"></wy-icon>
                          </wy-button>
                          <button
                            @click=${() => this.sidePanelMaximized = !this.sidePanelMaximized}
                            class="wy-sidebar-handle"
                            title=${this.sidePanelMaximized ? $("Restore side panel") : $("Maximize side panel")}
                          ></button>
                        </nav>
                        <div class="wy-pane wy-scroll-y">
                          ${this.commentsOpen && this.currentFile && this.currentFile.id >= 1 && this.app && this.user ? h`
                                <wy-comment-list
                                  .parentId=${this.currentFile.id}
                                  .location=${"files"}
                                ></wy-comment-list>
                              ` : C}
                        </div>
                      </aside>
                      <aside
                        id="tab-versions"
                        class="wy-sidebar ${Mt({
      "wy-active": this.versionsOpen,
      "wy-maximized": this.sidePanelMaximized
    })}"
                        ?hidden=${!this.versionsOpen}
                      >
                        <nav class="wy-item">
                          <div class="wy-item-body">
                            <div class="wy-item-title">${$("Versions")}</div>
                          </div>
                          <wy-button kind="icon" @click=${() => this.toggleSidebarTab("versions", !1)}>
                            <wy-icon name="close"></wy-icon>
                          </wy-button>
                          <button
                            @click=${() => this.sidePanelMaximized = !this.sidePanelMaximized}
                            class="wy-sidebar-handle"
                            title=${this.sidePanelMaximized ? $("Restore side panel") : $("Maximize side panel")}
                          ></button>
                        </nav>
                        <div class="wy-pane wy-scroll-y">
                          <div class="wy-pane-body">
                            ${this.versionsOpen && this.currentFile && this.app ? h`
                                  <wy-file-versions
                                    .file=${this.currentFile}
                                    .activeVersion=${this.versionFile || this.currentFile}
                                    @file-version-select=${(n) => this.handleVersionFile(n)}
                                  ></wy-file-versions>
                                ` : C}
                          </div>
                        </div>
                      </aside>`}

                <div class="wy-preview">
                  <div ${Q(this.swipeScrollRef)} class="wy-preview-swiper ${Mt(r)}">
                    ${Te(
      i,
      (n) => "preview-area-" + (n == null ? void 0 : n.id),
      (n) => {
        const c = n === e ? /* @__PURE__ */ o((l) => {
          l == null || l.scrollIntoView(), requestAnimationFrame(() => l == null ? void 0 : l.scrollIntoView());
        }, "currentPreviewFileCallback") : n === this.nextFile ? this.nextRef : n === this.previousFile ? this.prevRef : void 0;
        return n ? h`
                              <div
                                id="preview-${n.id}"
                                ${Q(c)}
                                class="wy-preview-area wy-scroll-y wy-scroll-x"
                              >
                                ${t ? h` <wy-spinner overlay></wy-spinner> ` : h` <wy-preview-item .file=${n} ?current=${n === e}></wy-preview-item> `}
                              </div>
                            ` : C;
      }
    )}
                  </div>
                  ${this.currentFile ? h`
                        ${this.previousFile ? h`
                              <nav class="wy-nav-prev">
                                <wy-button kind="icon" @click=${() => this.scrollToPrev()}>
                                  <wy-icon name="previous"></wy-icon>
                                </wy-button>
                              </nav>
                            ` : C}
                        ${this.nextFile ? h`
                              <nav class="wy-nav-next">
                                <wy-button kind="icon" @click=${() => this.scrollToNext()}>
                                  <wy-icon name="next"></wy-icon>
                                </wy-button>
                              </nav>
                            ` : C}
                      ` : C}
                </div>
              </div>
            </div> ` : C}
      </wy-overlay>
    ` : C;
  }
  updated() {
    requestAnimationFrame(
      () => requestAnimationFrame(() => {
        var t, e;
        this.swipeScrollRef.value ? ((t = this.swipeScroller).whenPrev ?? (t.whenPrev = () => this.setPrev()), (e = this.swipeScroller).whenNext ?? (e.whenNext = () => this.setNext()), this.swipeScroller.createObserver(this.swipeScrollRef.value), this.swipeScroller.observe(this.prevRef.value, this.nextRef.value)) : this.swipeScroller.clearObserver();
      })
    );
  }
}, o(Ka, "WyPreview"), Ka);
te.styles = [X];
ve([
  y({ attribute: !1 })
], te.prototype, "files", 2);
ve([
  y({ attribute: !1 })
], te.prototype, "queryResult", 2);
ve([
  y({ attribute: !1 })
], te.prototype, "infiniteQueryResult", 2);
ve([
  y({ type: Object })
], te.prototype, "user", 2);
ve([
  y({ type: Number })
], te.prototype, "currentId", 2);
ve([
  y({ type: Boolean })
], te.prototype, "isAttachment", 2);
ve([
  y({ type: Boolean })
], te.prototype, "filled", 2);
ve([
  H()
], te.prototype, "currentFile", 2);
ve([
  H()
], te.prototype, "previousFile", 2);
ve([
  H()
], te.prototype, "nextFile", 2);
ve([
  H()
], te.prototype, "showOverlay", 2);
ve([
  H()
], te.prototype, "commentsOpen", 2);
ve([
  H()
], te.prototype, "versionsOpen", 2);
ve([
  H()
], te.prototype, "versionFile", 2);
ve([
  H()
], te.prototype, "sidePanelMaximized", 2);
ve([
  H()
], te.prototype, "disableSwipeScroll", 2);
te = ve([
  q("wy-preview"),
  rt()
], te);
var Q5 = Object.defineProperty, K5 = Object.getOwnPropertyDescriptor, re = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? K5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Q5(t, e, r), r;
}, "__decorateClass$z"), Ga;
let It = (Ga = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.me = !1, this.isAgent = !1, this.isPrivateChat = !1, this.name = "", this.comment = "", this.avatar = "", this.createdAt = "", this.html = "", this.text = "", this.annotations = [], this.attachments = [], this.pollOptions = [], this.reactions = [], this.seenBy = [], this.highlight = !1, this.previewAnnotationsRef = st(), this.previewAttachmentsRef = st(), this.highlightRef = st();
  }
  dispatchVote(t) {
    const e = new CustomEvent("vote", {
      detail: { optionId: t, parentId: this.messageId }
    });
    return this.dispatchEvent(e);
  }
  willUpdate(t) {
    super.willUpdate(t), t.has("link") && (this.highlight = !!(this.link && kd(this.link, xe.Message, { id: this.messageId })));
  }
  render() {
    var n, a, c, l, u, p, w;
    const t = ((n = this.attachments) == null ? void 0 : n.filter((b) => b.kind === "image" && b.thumbnail_url)) || [], e = ((a = this.attachments) == null ? void 0 : a.filter((b) => b.kind !== "image" || !b.thumbnail_url)) || [], i = this.createdAt ? new Intl.DateTimeFormat((c = this.weavy) == null ? void 0 : c.locale, { dateStyle: "full", timeStyle: "short" }).format(
      new Date(this.createdAt)
    ) : "", r = this.createdAt ? new Intl.DateTimeFormat((l = this.weavy) == null ? void 0 : l.locale, { timeStyle: "short" }).format(new Date(this.createdAt)) : "";
    return h`
      <div
        class=${Mt({ "wy-message": !0, "wy-message-me": this.me, "wy-message-agent": this.isAgent })}
        part=${Xt({ "wy-highlight": this.highlight })}
        ${Q(this.highlightRef)}
      >
        ${this.me ? "" : h`
              <div class="wy-message-author">
                <wy-avatar
                  .src=${this.avatar}
                  .size=${32}
                  .name=${this.name}
                  .description=${this.comment}
                  .isAgent=${this.isAgent}
                ></wy-avatar>
              </div>
            `}

        <div class="wy-message-content">
          <div class="wy-message-meta">
            ${!this.isPrivateChat && !this.me ? h` <span>${this.name} · </span> ` : ""}
            <time datetime=${this.createdAt} title=${i}>${r}</time>
          </div>

          <div class="wy-message-bubble">
            ${this.messageId < 0 ? h`<wy-skeleton .text=${this.text}></wy-skeleton>` : h`
                  <!-- image grid -->
                  ${t && t.length ? h`<wy-image-grid
                        class="wy-message-area"
                        .images=${t}
                        @file-open=${(b) => {
      var m;
      (m = this.previewAttachmentsRef.value) == null || m.open(b.detail.fileId);
    }}
                      ></wy-image-grid>` : ""}

                  <!-- embeds -->
                  ${(u = this.componentFeatures) != null && u.allowsFeature(A.Embeds) && this.embed ? h` <wy-embed class="wy-embed" .embed=${this.embed}></wy-embed> ` : C}

                  <!-- text -->
                  ${this.html ? h`<div class="wy-content">${dr(this.html)}</div>` : ""}

                  <!-- annotations -->
                  ${this.annotations && this.annotations.length ? h`<wy-annotations-list
                        class="wy-message-area"
                        .files=${this.annotations}
                        @file-open=${(b) => {
      var m;
      (m = this.previewAnnotationsRef.value) == null || m.open(b.detail.fileId);
    }}
                      ></wy-annotations-list>` : ""}

                  <!-- poll -->
                  ${this.pollOptions && this.pollOptions.length ? h`
                        <wy-poll
                          .pollOptions=${this.pollOptions}
                          @vote=${(b) => this.dispatchVote(b.detail.optionId)}
                        ></wy-poll>
                      ` : C}

                  <!-- meeting -->
                  ${this.meeting ? h`<wy-meeting-card .meeting=${this.meeting}></wy-meeting-card>` : ""}

                  <!-- files -->
                  ${e && e.length ? h`<wy-attachments-list
                        class="wy-message-area"
                        .files=${e}
                        @file-open=${(b) => {
      var m;
      (m = this.previewAttachmentsRef.value) == null || m.open(b.detail.fileId);
    }}
                      ></wy-attachments-list>` : ""}

                  <!-- reactions -->
                  ${(p = this.componentFeatures) != null && p.allowsFeature(A.Reactions) && this.conversation ? h`
                        ${Rl(
      `reactions-${this.conversation.id}-${this.messageId}`,
      h`
                            <wy-reactions
                              lineBelow
                              ?lineReverse=${!this.me}
                              small
                              directionX=${this.me ? "right" : "left"}
                              .reactions=${this.reactions}
                              parentId=${this.conversation.id}
                              parentType="apps"
                              entityId=${this.messageId}
                              entityType="messages"
                            ></wy-reactions>
                          `
    )}
                      ` : C}
                `}
          </div>
        </div>
      </div>
      ${(w = this.componentFeatures) != null && w.allowsFeature(A.Receipts) ? h`<div class="wy-readby-status">
            ${this.seenBy && this.seenBy.length ? h`
                  ${this.seenBy.map((b) => {
      var g;
      const m = b.marked_at ? new Intl.DateTimeFormat((g = this.weavy) == null ? void 0 : g.locale, {
        dateStyle: "full",
        timeStyle: "short"
      }).format(new Date(b.marked_at)) : "";
      return h`<wy-avatar
                      title=${$(vt`Seen by ${b.name} at ${m}`)}
                      .name=${b.name}
                      .src=${b.avatar_url}
                      size=${18}
                    ></wy-avatar>`;
    })}
                ` : C}
          </div>` : C}
      ${this.annotations ? Rl(
      `annotation-preview-message-${this.messageId}`,
      h`
              <wy-preview
                ${Q(this.previewAnnotationsRef)}
                .files=${this.annotations}
                .isAttachment=${!0}
              ></wy-preview>
            `
    ) : C}
      ${this.attachments ? Rl(
      `preview-message-${this.messageId}`,
      h`
              <wy-preview
                ${Q(this.previewAttachmentsRef)}
                .files=${[...t, ...e]}
                .isAttachment=${!0}
              ></wy-preview>
            `
    ) : C}
    `;
  }
  updated(t) {
    var e;
    t.has("highlight") && this.highlight && ((e = this.highlightRef.value) == null || e.scrollIntoView({ block: "nearest" }));
  }
}, o(Ga, "WyMessage"), Ga);
It.styles = X;
re([
  y({ attribute: !1 })
], It.prototype, "conversation", 2);
re([
  y({ type: Number })
], It.prototype, "messageId", 2);
re([
  y({ type: Boolean })
], It.prototype, "me", 2);
re([
  y({ type: Boolean })
], It.prototype, "isAgent", 2);
re([
  y({ type: Boolean })
], It.prototype, "isPrivateChat", 2);
re([
  y()
], It.prototype, "name", 2);
re([
  y()
], It.prototype, "comment", 2);
re([
  y()
], It.prototype, "avatar", 2);
re([
  y()
], It.prototype, "createdAt", 2);
re([
  y()
], It.prototype, "html", 2);
re([
  y()
], It.prototype, "text", 2);
re([
  y({ type: Array })
], It.prototype, "annotations", 2);
re([
  y({ type: Array })
], It.prototype, "attachments", 2);
re([
  y({ attribute: !1 })
], It.prototype, "meeting", 2);
re([
  y({ type: Array })
], It.prototype, "pollOptions", 2);
re([
  y({ attribute: !1 })
], It.prototype, "embed", 2);
re([
  y({ type: Array })
], It.prototype, "reactions", 2);
re([
  y({ type: Array })
], It.prototype, "seenBy", 2);
re([
  y({ type: Boolean })
], It.prototype, "highlight", 2);
It = re([
  q("wy-message"),
  rt()
], It);
var G5 = Object.defineProperty, Z5 = Object.getOwnPropertyDescriptor, ss = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Z5(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && G5(t, e, r), r;
}, "__decorateClass$y"), Za;
let ii = (Za = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.dataUpdatedAt = NaN, this.unreadMarkerShow = !0, this.seenByShow = !1;
  }
  dispatchVote(t, e) {
    const i = new CustomEvent("vote", { detail: { optionId: t, parentId: e, parentType: "messages" } });
    return this.dispatchEvent(i);
  }
  render() {
    const t = ts(this.infiniteMessages);
    let e;
    return h`
      <div class="wy-messages">
        <slot name="start"></slot>
        <!-- this.user ?? -->
        ${t && this.conversation && this.user ? Te(
      t,
      (i) => i.id,
      (i, r) => {
        var u, p, w, b, m, g, x, z, _, P;
        const n = new Date(i.created_at);
        let a = h``;
        if ((e == null ? void 0 : e.toDateString()) !== n.toDateString()) {
          const E = new Intl.DateTimeFormat((u = this.weavy) == null ? void 0 : u.locale, {
            dateStyle: "short"
          }).format(n);
          e = n, a = h`<div class="wy-date-separator"><time>${E}</time></div>`;
        }
        let c = h``;
        this.unreadMarkerId && this.unreadMarkerId === i.id && (c = h`<div
                    id="unread-marker"
                    class="wy-toast wy-toast-action wy-fade ${this.unreadMarkerShow ? "wy-show" : ""}"
                    tabindex=${this.unreadMarkerShow ? 0 : -1}
                    @click=${() => {
          var N;
          let E = `#message-${this.unreadMarkerId}`;
          this.unreadMarkerPosition === "below" && (E += "~ wy-message"), (N = this.renderRoot.querySelector(E)) == null || N.scrollIntoView({
            block: "start",
            inline: "nearest",
            behavior: "smooth"
          });
        }}
                    @keydown=${ye}
                    @keyup=${Fe}
                  >
                    ${$("New messages")}
                  </div>`);
        const l = ((w = (p = this.members) == null ? void 0 : p.data) == null ? void 0 : w.find((E) => E.id === i.created_by.id)) || i.created_by;
        return h`${[
          h`${a}`,
          h`${this.unreadMarkerPosition === "above" ? c : C}`,
          Rl(
            `message-${i.id}`,
            h`<wy-message
                      id="message-${i.id}"
                      .conversation=${this.conversation}
                      .messageId=${i.id}
                      .me=${l.id === ((b = this.user) == null ? void 0 : b.id)}
                      .isAgent=${l.is_agent || !1}
                      .isPrivateChat=${((m = this.conversation) == null ? void 0 : m.type) === ct.PrivateChat || ((g = this.conversation) == null ? void 0 : g.type) === ct.AgentChat}
                      .name=${l.name}
                      .comment=${l.comment}
                      .avatar=${l.avatar_url}
                      .createdAt=${i.created_at}
                      .text=${i.plain}
                      .html=${i.html}
                      .annotations=${(x = i.annotations) == null ? void 0 : x.data}
                      .attachments=${(z = i.attachments) == null ? void 0 : z.data}
                      .meeting=${i.meeting}
                      .pollOptions=${(_ = i.options) == null ? void 0 : _.data}
                      .embed=${i.embed}
                      .reactions=${(P = i.reactions) == null ? void 0 : P.data}
                      .seenBy=${this.seenByShow && this.members && this.members.data && this.members.data.length > 0 ? this.members.data.filter((E) => {
              var N;
              return E.marked_id === i.id && E.id !== ((N = this.user) == null ? void 0 : N.id);
            }) : []}
                      @vote=${(E) => {
              E.detail.parentId && this.dispatchVote(E.detail.optionId, E.detail.parentId);
            }}
                    ></wy-message>`
          ),
          h`${this.unreadMarkerPosition === "below" ? c : C}`
        ]}`;
      }
    ) : C}
        <slot name="end"></slot>
      </div>
    `;
  }
}, o(Za, "WyMessages"), Za);
ii.styles = [
  X,
  yt,
  dt`
      wy-message {
        scroll-margin-block: 6rem;
      }
    `
];
ss([
  y({ attribute: !1 })
], ii.prototype, "conversation", 2);
ss([
  y({ attribute: !1 })
], ii.prototype, "infiniteMessages", 2);
ss([
  y({ type: Number })
], ii.prototype, "dataUpdatedAt", 2);
ss([
  y({ attribute: !1 })
], ii.prototype, "members", 2);
ss([
  y({ attribute: !1 })
], ii.prototype, "unreadMarkerId", 2);
ss([
  y({ attribute: !1 })
], ii.prototype, "unreadMarkerPosition", 2);
ss([
  y({ attribute: !1 })
], ii.prototype, "unreadMarkerShow", 2);
ss([
  y({ attribute: !1 })
], ii.prototype, "seenByShow", 2);
ii = ss([
  q("wy-messages"),
  rt()
], ii);
const Yp = class Yp {
  constructor(t) {
    this.registrationRequested = !1, this.typingTimeout = null, this.discardTime = 5 * 1e3, this.typingMembers = [], this.names = [], this.ellipsis = "", this.handleRealtimeTyping = (e) => {
      e.entity.id === this.appId && e.actor.id !== this.userId && (this.setTypers(e.actor), this.updateTyping());
    }, this.handleRealtimeStopTyping = (e) => {
      this.typingMembers.forEach((i, r) => {
        i.id === e.actor.id && this.typingMembers.splice(r, 1);
      }), this.updateTyping();
    }, t.addController(this), this.host = t, this.setContexts();
  }
  get weavy() {
    var t;
    return (t = this.weavyContext) == null ? void 0 : t.value;
  }
  get componentFeatures() {
    var t;
    return (t = this.componentFeaturesContext) == null ? void 0 : t.value;
  }
  get appId() {
    return this._appId;
  }
  set appId(t) {
    t !== this._appId && (this.typingMembers = [], this.unregisterRealtime(), this._appId = t, this.registerRealtime());
  }
  get userId() {
    return this._userId;
  }
  set userId(t) {
    t !== this._userId && (this.typingMembers = [], this.unregisterRealtime(), this._userId = t, this.registerRealtime());
  }
  async setContexts() {
    this.whenWeavyContext = new Promise((t) => this.resolveWeavyContext = t), this.whenComponentFeaturesContext = new Promise((t) => this.resolveComponentFeaturesContext = t), await Xo(this.host), this.weavyContext = new ji(this.host, { context: le, subscribe: !0 }), this.componentFeaturesContext = new ji(this.host, { context: gd, subscribe: !0 });
  }
  hostUpdate() {
    var t, e, i, r, n, a;
    (t = this.weavyContext) != null && t.value && ((i = this.resolveWeavyContext) == null || i.call(this, (e = this.weavyContext) == null ? void 0 : e.value)), (r = this.componentFeaturesContext) != null && r.value && ((a = this.resolveComponentFeaturesContext) == null || a.call(this, (n = this.componentFeaturesContext) == null ? void 0 : n.value));
  }
  async registerRealtime() {
    var t, e, i;
    !this.registrationRequested && this.appId && this._userId && (this.registrationRequested = !0, await Promise.all([this.whenWeavyContext, this.whenComponentFeaturesContext]), (t = this.componentFeatures) != null && t.allowsFeature(A.Typing) && ((e = this.weavy) == null || e.subscribe(`a${this.appId}`, "typing", this.handleRealtimeTyping), (i = this.weavy) == null || i.subscribe(`a${this.appId}`, "message_created", this.handleRealtimeStopTyping)), this.registrationRequested = !1);
  }
  async unregisterRealtime() {
    var t, e;
    !this.registrationRequested && this.appId && this.userId && (await this.whenWeavyContext, (t = this.weavy) == null || t.unsubscribe(`a${this.appId}`, "typing", this.handleRealtimeTyping), (e = this.weavy) == null || e.unsubscribe(`a${this.appId}`, "message_created", this.handleRealtimeStopTyping));
  }
  /**
   * @fires typing
   */
  updateTyping() {
    this.typingTimeout && (clearTimeout(this.typingTimeout), this.typingTimeout = null);
    const t = Date.now();
    if (this.typingMembers.forEach((i, r) => {
      t - i.time > this.discardTime && this.typingMembers.splice(r, 1);
    }), this.typingMembers.length) {
      const i = Date.now(), r = Math.round(
        (i - Math.max.apply(
          null,
          this.typingMembers.map((n) => n.time)
        )) / 1e3
      ) % 3 + 1;
      this.ellipsis = ".".repeat(r), this.names = this.typingMembers.map((n) => n.name).sort(), this.typingTimeout = window.setTimeout(() => this.updateTyping(), 1e3);
    } else
      this.names = [];
    this.host.requestUpdate();
    const e = new CustomEvent("typing", {
      bubbles: !0,
      composed: !1,
      detail: { count: this.typingMembers.length }
    });
    this.host.dispatchEvent(e);
  }
  setTypers(t) {
    this.typingMembers.forEach((i, r) => {
      i.id === t.id && this.typingMembers.splice(r, 1);
    });
    const e = { ...t, time: Date.now() };
    this.typingMembers.push(e);
  }
};
o(Yp, "TypingController");
let cd = Yp;
const Y5 = dt`@keyframes wy-highlight{0%{--wy-component-background-color: var(--wy-highlight, var(--wy-primary-95, #e8f2ff));--wy-component-color: var(--wy-on-highlight, var(--wy-primary-10, #001d32))}}.wy-messages{padding:var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));flex:1 1 100%}.wy-message-placeholder{opacity:.5}.wy-date-separator{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));pointer-events:none;margin:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));text-align:center;position:sticky;top:var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));z-index:10}.wy-date-separator time{background:var(--wy-surface-3, var(--wy-surface-3-light, #e3e7ee));color:var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:inline-block}.wy-message{display:flex;flex-direction:row;align-items:flex-start;margin-bottom:calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + .5 * var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));scroll-margin-block:6rem;--wy-component-background-color: var(--wy-surface-variant, var(--wy-neutral-variant-90, #dee3eb));--wy-component-color: var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-message[part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}.wy-message-area{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}.wy-message-meta{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));margin:0 0 calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));color:var(--wy-on-surface-variant, var(--wy-neutral-variant-30, #42474e))}.wy-message-bubble{background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));display:flex;flex-direction:column;padding:var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));max-width:min(32 * var(--wy-size, 1rem),100% - 2 * var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))))}.wy-message-bubble>div{flex:1 1 100%}.wy-message-author{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)));margin:calc(1lh + .5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-size, 1rem)) 0 0}.wy-message-content{display:flex;flex-direction:column;width:100%;align-items:flex-start;flex-wrap:wrap;min-width:0;position:relative}.wy-message-content-row{display:flex;flex-direction:row;align-items:center;max-width:100%}.wy-message-agent{--wy-component-background-color: var(--wy-tertiary-container, var(--wy-tertiary-90, #bbf294));--wy-component-color: var(--wy-on-tertiary-container, var(--wy-tertiary-10, #0a2100))}.wy-message-me{margin-right:0;margin-left:calc(2.5 * var(--wy-size, 1rem));align-items:flex-end;--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32))}.wy-message-me .wy-message-meta{margin:0 calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))) 0}.wy-message-me .wy-message-content{align-items:flex-end}.wy-message-me .wy-message-content-row{flex-direction:row-reverse}.wy-message-emoji .wy-message-bubble{background:none;padding:0 0 var(--wy-message-padding, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))))}.wy-message-emoji .wy-content .wy-emoji{width:calc(3 * var(--wy-size, 1rem));height:calc(3 * var(--wy-size, 1rem));margin:0}.wy-message-emoji.wy-message-me .wy-content{text-align:end}.wy-readby-status{display:flex;gap:var(--wy-gap-sm, calc(.5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem)))));height:calc(1.125 * var(--wy-size, 1rem));justify-content:flex-end;margin-top:calc(-.125 * var(--wy-size, 1rem))}.wy-message-readmore{justify-self:center;text-align:center}`, X5 = dt`@keyframes wy-bouncing{to{transform:translate3d(0,calc(-.25 * var(--wy-size, 1rem)),0)}}@keyframes wy-bouncing-fade{to{opacity:.2}}[part~=wy-bouncer]{width:calc(1.5 * var(--wy-size, 1rem));height:calc(.75 * var(--wy-size, 1rem))}[part~=wy-bouncer-dot]{position:relative;animation:wy-bouncing .6s infinite alternate,wy-bouncing-fade .6s infinite alternate;fill:currentColor}[part~=wy-bouncer-dot-start]{animation-delay:0s,.6s}[part~=wy-bouncer-dot-middle]{animation-delay:.3s,.3s}[part~=wy-bouncer-dot-end]{animation-delay:.6s,0s}`;
var J5 = Object.defineProperty, t4 = Object.getOwnPropertyDescriptor, Ri = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? t4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && J5(t, e, r), r;
}, "__decorateClass$x"), Ya;
let je = (Ya = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.typing = new cd(this), this.isPrivateChat = !1, this.typingMembers = [], this.names = [];
  }
  willUpdate(t) {
    super.willUpdate(t), t.has("conversationId") && (this.typing.appId = this.conversationId), t.has("userId") && (this.typing.userId = this.userId);
    const { typingMembers: e, names: i } = this.typing;
    this.typingMembers = e, this.names = i, e.length ? this.typingTime || (this.typingTime = /* @__PURE__ */ new Date()) : this.typingTime = void 0;
  }
  render() {
    var a, c, l, u, p, w, b, m;
    const t = this.typingMembers.map(
      (g) => [...this.members ?? [], ...this.agents ?? []].find((x) => x.id === g.id)
    ).filter((g) => g), e = new Intl.ListFormat((a = this.weavy) == null ? void 0 : a.locale, { style: "long", type: "conjunction" }).format(
      this.names
    ), i = this.typingTime ? new Intl.DateTimeFormat((c = this.weavy) == null ? void 0 : c.locale, { dateStyle: "full", timeStyle: "short" }).format(this.typingTime) : "", r = this.typingTime ? new Intl.DateTimeFormat((l = this.weavy) == null ? void 0 : l.locale, { timeStyle: "short" }).format(this.typingTime) : "", n = h`
      <svg part="wy-bouncer" viewBox="0 0 32 16" xmlns="http://www.w3.org/2000/svg">
        <circle part="wy-bouncer-dot wy-bouncer-dot-start" cx="4" cy="10" r="4" />
        <circle part="wy-bouncer-dot wy-bouncer-dot-middle" cx="16" cy="10" r="4" />
        <circle part="wy-bouncer-dot wy-bouncer-dot-end" cx="28" cy="10" r="4" />
      </svg>
    `;
    return t.length ? h`
          <div class=${Mt({ "wy-message": !0, "wy-message-agent": !!((u = t[0]) != null && u.is_agent) })}>
            <div class="wy-message-author">
              ${t.length > 1 ? h`
                    <wy-avatar-group
                      .size=${32}
                      .members=${t}
                      title=${e}
                    ></wy-avatar-group>
                  ` : h`
                    <wy-avatar
                      .size=${32}
                      .src=${(p = t[0]) == null ? void 0 : p.avatar_url}
                      .description=${(w = t[0]) == null ? void 0 : w.comment}
                      .name=${e}
                      .isAgent=${(b = t[0]) == null ? void 0 : b.is_agent}
                    ></wy-avatar>
                  `}
            </div>

            <div class="wy-message-content">
              <div class="wy-message-meta">
                ${this.isPrivateChat ? h`
                      <time datetime=${lt((m = this.typingTime) == null ? void 0 : m.toISOString())} title=${i}>${r}</time>
                    ` : e}
              </div>
              <div class="wy-message-bubble"> ${n} </div>
            </div>
          </div>
        ` : C;
  }
}, o(Ya, "WyMessageTyping"), Ya);
je.styles = [ne, X5, Y5];
Ri([
  ee({ context: le, subscribe: !0 }),
  H()
], je.prototype, "weavy", 2);
Ri([
  y({ attribute: !0, type: Number })
], je.prototype, "conversationId", 2);
Ri([
  y({ attribute: !0, type: Number })
], je.prototype, "userId", 2);
Ri([
  y({ type: Boolean })
], je.prototype, "isPrivateChat", 2);
Ri([
  y({ attribute: !1 })
], je.prototype, "members", 2);
Ri([
  y({ attribute: !1 })
], je.prototype, "agents", 2);
Ri([
  H()
], je.prototype, "typingMembers", 2);
Ri([
  H()
], je.prototype, "names", 2);
Ri([
  H()
], je.prototype, "typingTime", 2);
je = Ri([
  q("wy-message-typing")
], je);
var e4 = Object.defineProperty, i4 = Object.getOwnPropertyDescriptor, lm = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$a"), wi = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? i4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && e4(t, e, r), r;
}, "__decorateClass$w"), dm = /* @__PURE__ */ o((s, t, e) => t.has(s) || lm("Cannot " + e), "__accessCheck$a"), Wy = /* @__PURE__ */ o((s, t, e) => (dm(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$a"), s4 = /* @__PURE__ */ o((s, t, e) => t.has(s) ? lm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$a"), Qy = /* @__PURE__ */ o((s, t, e, i) => (dm(s, t, "write to private field"), t.set(s, e), e), "__privateSet$9"), Lr, Xa;
let He = (Xa = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.header = !1, this.lastReadMessagePosition = "below", this.showNewMessages = !1, this.isCreatingConversation = !1, this.showReadReceipts = !1, this.releaseFocusEvent = () => new CustomEvent("release-focus", { bubbles: !0, composed: !0 }), this.messagesQuery = new Wi(this), this.membersQuery = new Ne(this), this.agentsQuery = new Ne(this), this.addMessageMutation = new Le(this), this.infiniteScroll = new fu(this), this.pagerRef = st(), this.bottomRef = st(), this.editorRef = st(), this.shouldBeAtBottom = !0, this.isTyping = !1, this.handleRealtimeMessage = async (t) => {
      var n;
      if (!this.weavy || !this.conversation || !(this.conversationId && this.conversationId > 0) || !this.user)
        return;
      await ((n = this.messagesQuery.observer) == null ? void 0 : n.getCurrentQuery().promise);
      const e = t.message.app.uid ?? t.message.app.id, i = ["messages", t.message.app.id];
      let r = $d(this.weavy.queryClient, i, t.message.id);
      r || (t.message.created_by.id === this.user.id && (r = lr(this.weavy.queryClient, i, !0), r && jt(this.weavy.queryClient, i, r.id, (a) => {
        a.id = t.message.id, a.app = t.message.app, a.text = t.message.text, a.html = t.message.html, a.embed = t.message.embed, a.meeting = t.message.meeting, a.attachments = t.message.attachments, a.options = t.message.options, a.created_at = t.message.created_at, a.created_by = t.message.created_by, a.updated_at = t.message.updated_at, a.updated_by = t.message.updated_by;
      })), r || $s(this.weavy.queryClient, i, t.message)), this.weavy.queryClient.setQueryData(
        ["apps", e],
        (a) => a && { ...a, last_message: t.message }
      ), t.actor.id !== this.user.id && (this.isAtBottom ? (this.markAsRead(t.message.id), requestAnimationFrame(() => {
        this.scrollToBottom();
      })) : (this.weavy.queryClient.setQueryData(
        ["apps", e],
        (a) => a && { ...a, is_unread: !0 }
      ), this.lastReadMessagePosition = "above", this.lastReadMessageId = t.message.id, this.showNewMessages = !0), at(
        this.weavy.queryClient,
        { queryKey: ["members", t.message.app.id], exact: !1 },
        t.actor.id,
        (a) => {
          a.marked_id = t.message.id, a.marked_at = t.message.created_at;
        }
      ));
    }, this.handleRealtimeReactionAdded = (t) => {
      !this.weavy || !this.user || !this.conversation || at(
        this.weavy.queryClient,
        { queryKey: ["messages"], exact: !1 },
        t.entity.id,
        (e) => {
          e.reactions || (e.reactions = { count: 0 }), e.reactions.data = [
            ...(e.reactions.data || []).filter((i) => {
              var r;
              return ((r = i.created_by) == null ? void 0 : r.id) !== t.actor.id;
            }),
            { content: t.reaction, created_by: t.actor }
          ];
        }
      );
    }, this.handleRealtimeReactionDeleted = (t) => {
      !this.weavy || !this.conversation || !this.user || at(
        this.weavy.queryClient,
        { queryKey: ["messages"], exact: !1 },
        t.entity.id,
        (e) => {
          e.reactions && e.reactions.data && (e.reactions.data = e.reactions.data.filter((i) => {
            var r;
            return ((r = i.created_by) == null ? void 0 : r.id) !== t.actor.id;
          }));
        }
      );
    }, this.handleRealtimeMarked = (t) => {
      !this.weavy || !this.conversation || at(
        this.weavy.queryClient,
        { queryKey: ["members", this.conversation.id] },
        t.actor.id,
        (e) => {
          e.marked_id = t.marked_id, e.marked_at = t.marked_at;
        }
      );
    }, this.markAsReadHandler = () => {
      !document.hidden && this.isAtBottom && this.markAsRead();
    }, s4(this, Lr);
  }
  isPrivateChat(t) {
    var e;
    return ((e = t ?? this.conversation) == null ? void 0 : e.type) === ct.PrivateChat;
  }
  isChatRoom(t) {
    var e;
    return ((e = t ?? this.conversation) == null ? void 0 : e.type) === ct.ChatRoom;
  }
  get isAtBottom() {
    return this.bottomRef.value ? yg(this.bottomRef.value) : !0;
  }
  async scrollToBottom(t = !1) {
    this.bottomRef.value && await Bh(this.bottomRef.value), pg(this.bottomRef.value) && this.conversationId && this.conversationId > 0 && (requestAnimationFrame(() => {
      var e;
      vy((e = this.weavy) == null ? void 0 : e.queryClient, ["messages", this.conversationId], void 0, 1);
    }), await wg(this.bottomRef.value, t));
  }
  handleTyping(t) {
    this.isTyping = !!t.detail.count, this.isTyping && this.isAtBottom && requestAnimationFrame(() => {
      this.scrollToBottom(!0);
    });
  }
  async handleSubmit(t) {
    if (!this.user)
      throw new Error("Error submitting message. Missing user.");
    const e = {
      text: t.detail.text,
      meeting_id: t.detail.meetingId,
      poll_options: t.detail.pollOptions,
      embed_id: t.detail.embedId,
      blobs: t.detail.blobs,
      user: this.user,
      context: t.detail.contextData
    };
    if (this.agentInstructions && (e.metadata = {
      instructions: this.agentInstructions
    }), !this.conversation && this.weavy && this.createConversation && (this.isCreatingConversation = !0, await this.createConversation(e), await this.updateComplete), !this.conversation)
      throw new Error("Error submitting message. Missing conversation.");
    const i = await this.addMessageMutation.mutate({
      ...e,
      app_id: this.conversation.id
    });
    return this.showNewMessages = !1, requestAnimationFrame(() => {
      this.scrollToBottom();
    }), this.isCreatingConversation = !1, i;
  }
  async setEditorText(t) {
    this.editorRef.value && (this.editorRef.value.text = t, await this.editorRef.value.updateComplete, await new Promise((e) => requestAnimationFrame(e)));
  }
  async setEditorMetadata(t = {}) {
    await this.updateComplete, this.editorRef.value && (this.editorRef.value.metadata = t);
  }
  async selectAllInEditor() {
    var t;
    this.editorRef.value && (await this.updateComplete, await this.editorRef.value.updateComplete, (t = this.editorRef.value) == null || t.selectAllContent());
  }
  async setCursorLastInEditor() {
    var t;
    this.editorRef.value && (await this.updateComplete, await this.editorRef.value.updateComplete, (t = this.editorRef.value) == null || t.setCursorLast());
  }
  focusEditor() {
    var t;
    this.editorRef.value && ((t = this.editorRef.value) == null || t.focusInput());
  }
  async setEmptyConversationTitle(t) {
    var e;
    !this.conversation || this.conversation.name || (t = vw(t), await ((e = this.updateConversationMutation) == null ? void 0 : e.mutate({ appId: this.conversation.id, name: t })));
  }
  async markAsRead(t) {
    var e, i;
    await Nm(), await Promise.race([Bh(this), yw(this, !1)]), this.isConnected && this.conversation && this.conversation.last_message && await ((i = this.markConversationMutation) == null ? void 0 : i.mutate({
      appId: this.conversation.id,
      messageId: t ?? this.conversation.last_message.id,
      userId: (e = this.user) == null ? void 0 : e.id
    }));
  }
  async willUpdate(t) {
    var i, r, n, a, c, l, u, p, w, b, m, g;
    var e;
    if (super.willUpdate(t), t.has("weavy") && this.weavy && (this.updateConversationMutation = uf(this.weavy), this.markConversationMutation = df(this.weavy)), (t.has("weavy") || t.has("conversationId") || t.has("componentFeatures")) && this.weavy) {
      (e = Wy(this, Lr)) == null || e.call(this);
      const x = t.get("conversationId");
      if (x && x > 0 && requestAnimationFrame(() => {
        var z;
        vy((z = this.weavy) == null ? void 0 : z.queryClient, ["messages", x], void 0, 1);
      }), this.conversationId && this.conversationId > 0) {
        await this.messagesQuery.trackInfiniteQuery(dg(this.weavy, this.conversationId)), await this.addMessageMutation.trackMutation(
          hg(this.weavy, ["messages", this.conversationId])
        ), await this.membersQuery.trackQuery(gu(this.weavy, this.conversationId, {})), await this.agentsQuery.trackQuery(gu(this.weavy, this.conversationId, {}, !0)), this.pollMutation = ip(this.weavy, this.conversationId, ["messages", this.conversationId]), this.lastReadMessageId = void 0, this.showNewMessages = !1;
        const z = `a${this.conversationId}`;
        this.weavy.subscribe(z, "message_created", this.handleRealtimeMessage), (i = this.componentFeatures) != null && i.allowsFeature(A.Reactions) && (this.weavy.subscribe(z, "reaction_added", this.handleRealtimeReactionAdded), this.weavy.subscribe(z, "reaction_removed", this.handleRealtimeReactionDeleted)), (r = this.componentFeatures) != null && r.allowsFeature(A.Receipts) && this.weavy.subscribe(z, "app_marked", this.handleRealtimeMarked).then((_) => {
          this.showReadReceipts = _;
        }), Qy(this, Lr, () => {
          var _, P, E, N;
          (_ = this.weavy) == null || _.unsubscribe(z, "message_created", this.handleRealtimeMessage), (P = this.weavy) == null || P.unsubscribe(z, "reaction_added", this.handleRealtimeReactionAdded), (E = this.weavy) == null || E.unsubscribe(z, "reaction_removed", this.handleRealtimeReactionDeleted), (N = this.weavy) == null || N.unsubscribe(z, "app_marked", this.handleRealtimeMarked), this.showReadReceipts = !1, Qy(this, Lr, void 0);
        });
      } else
        this.messagesQuery.untrackInfiniteQuery(), this.addMessageMutation.untrackMutation(), this.membersQuery.untrackQuery(), this.agentsQuery.untrackQuery();
    }
    if (t.has("showNewMessages") && this.showNewMessages && (this.shouldBeAtBottom = this.isAtBottom), t.has("conversationId") && t.get("conversationId") !== this.conversationId ? this.shouldBeAtBottom = !!this.conversationId : this.shouldBeAtBottom = this.isAtBottom, t.has("conversation")) {
      const x = t.get("conversation");
      if ((x == null ? void 0 : x.id) !== ((n = this.conversation) == null ? void 0 : n.id) || (x == null ? void 0 : x.is_unread) !== ((a = this.conversation) == null ? void 0 : a.is_unread))
        if ((c = this.conversation) != null && c.is_unread) {
          const z = (p = (u = (l = this.membersQuery.result.data) == null ? void 0 : l.data) == null ? void 0 : u.find(
            (_) => {
              var P;
              return _.id === ((P = this.user) == null ? void 0 : P.id);
            }
          )) == null ? void 0 : p.marked_id;
          z && z < this.conversation.last_message.id && (this.lastReadMessagePosition = "below", this.lastReadMessageId = z, this.showNewMessages = !0), ((x == null ? void 0 : x.id) !== ((w = this.conversation) == null ? void 0 : w.id) || (x == null ? void 0 : x.last_message.id) !== ((b = this.conversation) == null ? void 0 : b.last_message.id) && (this.shouldBeAtBottom || this.isAtBottom)) && this.markAsRead();
        } else (x == null ? void 0 : x.id) !== ((m = this.conversation) == null ? void 0 : m.id) && (this.showNewMessages = !1);
    }
    if (this.conversation && !((g = this.conversation) != null && g.name) && !gy(this.messagesQuery.result.data)) {
      const z = ts(this.messagesQuery.result.data).find((_) => _.plain);
      z && this.setEmptyConversationTitle(mw(z.plain));
    }
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.messagesQuery.result, this.pagerRef.value);
  }
  renderConversationHeader() {
    var n, a, c;
    if (!this.header)
      return h` <!-- Top of the conversation --> `;
    const { isPending: t, hasNextPage: e } = this.messagesQuery.result ?? {};
    if (!this.conversation || t || e)
      return C;
    const { data: i } = this.membersQuery.result ?? {}, r = this.user && this.isPrivateChat() ? ((c = (((a = (n = this.conversation) == null ? void 0 : n.members) == null ? void 0 : a.data) || []).filter((l) => {
      var u;
      return l.id !== ((u = this.user) == null ? void 0 : u.id);
    })) == null ? void 0 : c[0]) ?? this.user : null;
    return h`
      <wy-avatar-header description=${lt(r == null ? void 0 : r.comment)}>
        ${this.conversation.avatar_url ? h`<wy-avatar .size=${96} src=${this.conversation.avatar_url}></wy-avatar>` : this.isChatRoom() ? h` <wy-avatar-group
              .members=${i == null ? void 0 : i.data}
              title=${this.conversation.name}
              .size=${96}
            ></wy-avatar-group>` : r != null && r.avatar_url ? h`
              <wy-avatar
                src=${lt(r == null ? void 0 : r.avatar_url)}
                name=${this.conversation.name}
                description=${lt(r == null ? void 0 : r.comment)}
                ?isAgent=${r == null ? void 0 : r.is_agent}
                size=${96}
              ></wy-avatar>
            ` : C}
      </wy-avatar-header>
    `;
  }
  render() {
    var c, l, u;
    const { isPending: t } = ((c = this.weavy) == null ? void 0 : c.network) ?? { isPending: !0 }, { data: e, isPending: i, hasNextPage: r } = this.messagesQuery.result ?? { isPending: t }, { data: n } = this.membersQuery.result ?? {}, { data: a } = this.agentsQuery.result ?? {};
    return h`
      ${this.renderConversationHeader()}
      ${this.conversation && e && !gy(e) ? h`
            <wy-messages
              .conversation=${this.conversation}
              .infiniteMessages=${e}
              .members=${n}
              .unreadMarkerId=${this.lastReadMessageId}
              .unreadMarkerPosition=${this.lastReadMessagePosition}
              .unreadMarkerShow=${this.showNewMessages}
              .seenByShow=${this.showReadReceipts}
              @vote=${(p) => {
      var w;
      p.detail.parentType && p.detail.parentId && ((w = this.pollMutation) == null || w.mutate({
        optionId: p.detail.optionId,
        parentType: p.detail.parentType,
        parentId: p.detail.parentId
      }));
    }}
            >
              ${r ? h`<div slot="start" ${Q(this.pagerRef)} part="wy-pager wy-pager-top"></div>` : C}
              <wy-message-typing
                slot="end"
                .conversationId=${this.conversation.id}
                .userId=${(l = this.user) == null ? void 0 : l.id}
                .isPrivateChat=${this.isPrivateChat()}
                .members=${n == null ? void 0 : n.data}
                .agents=${a == null ? void 0 : a.data}
                @typing=${(p) => this.handleTyping(p)}
              ></wy-message-typing>
            </wy-messages>
          ` : h`
            <div class="wy-messages">
              <wy-empty class="wy-pane">
                ${i && this.conversationId || this.isCreatingConversation ? h`<wy-spinner overlay></wy-spinner>` : h` <slot name="empty">${this.conversationId ? $("Start the conversation!") : C}</slot> `}
              </wy-empty>
            </div>
          `}
      <div ${Q(this.bottomRef)}></div>
      <div part="wy-footerbar wy-footerbar-sticky">
        <slot name="footerbar"></slot>
        <wy-message-editor
          ${Q(this.editorRef)}
          .draft=${!0}
          placeholder=${this.placeholder ?? $("Type a message...")}
          ?disabled=${this.conversation && !Fo(or.Create, (u = this.conversation) == null ? void 0 : u.permissions)}
          @submit=${(p) => this.handleSubmit(p)}
        ></wy-message-editor>
      </div>
    `;
  }
  updated() {
    this.shouldBeAtBottom && requestAnimationFrame(() => {
      this.scrollToBottom();
    }), this.bottomObserver || (this.bottomObserver = new IntersectionObserver((t) => {
      t.forEach((e) => {
        var i;
        e.isIntersecting && !this.isTyping && (i = this.conversation) != null && i.is_unread && this.markAsRead();
      });
    })), this.bottomRef && this.bottomRef.value && this.bottomObserver.observe(this.bottomRef.value);
  }
  // hook up observer
  connectedCallback() {
    super.connectedCallback(), document.addEventListener("visibilitychange", this.markAsReadHandler), this.conversationId && this.requestUpdate("conversationId");
  }
  disconnectedCallback() {
    var t;
    (t = Wy(this, Lr)) == null || t.call(this), this.bottomObserver && this.bottomObserver.disconnect(), document.removeEventListener("visibilitychange", this.markAsReadHandler), this.conversation = void 0, this.shouldBeAtBottom = this.isAtBottom, super.disconnectedCallback();
  }
}, o(Xa, "WyConversation"), Xa);
Lr = /* @__PURE__ */ new WeakMap();
He.styles = [
  X,
  Ds,
  pf,
  dt`
      :host {
        position: relative;
        display: flex;
        flex-direction: column;
        flex: 1 1 auto;
      }
    `
];
wi([
  Rs({ context: Gu }),
  y({ attribute: !1 })
], He.prototype, "conversation", 2);
wi([
  y({ type: Number })
], He.prototype, "conversationId", 2);
wi([
  y({ type: Boolean })
], He.prototype, "header", 2);
wi([
  y()
], He.prototype, "agentInstructions", 2);
wi([
  y()
], He.prototype, "placeholder", 2);
wi([
  H()
], He.prototype, "lastReadMessagePosition", 2);
wi([
  H()
], He.prototype, "lastReadMessageId", 2);
wi([
  H()
], He.prototype, "showNewMessages", 2);
wi([
  H()
], He.prototype, "isCreatingConversation", 2);
wi([
  H()
], He.prototype, "showReadReceipts", 2);
He = wi([
  q("wy-conversation"),
  rt()
], He);
var ue = /* @__PURE__ */ ((s) => (s.All = "", s.Activity = "activity", s.Mention = "mention", s.Reaction = "reaction", s))(ue || {});
function r4(s, t = ue.All, e, i = {}) {
  return {
    ...i,
    initialPageParam: 0,
    queryKey: ["notifications", "list", e, t],
    queryFn: /* @__PURE__ */ o(async (r) => {
      var u;
      const n = new URLSearchParams({
        skip: ((u = r.pageParam) == null ? void 0 : u.toString()) || "0",
        type: t
      }), a = `/api/${e ? `apps/${e.toString()}/` : ""}notifications?${n.toString()}`, l = await (await s.fetch(a)).json();
      return l.data = l.data || [], l;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ o((r) => {
      if (r.end && r.end < r.count)
        return r.end;
    }, "getNextPageParam")
  };
}
o(r4, "getNotificationsOptions");
function n4(s, t = ue.All, e) {
  var n;
  const i = (n = s.queryClient.getQueryData(["notifications", "list", e, t])) == null ? void 0 : n.pages.flatMap((a) => a.data);
  let r;
  return i == null || i.forEach((a) => {
    r = r && a && r.id > a.id ? r : a;
  }), r;
}
o(n4, "getLastNotification");
function a4(s, t) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ notificationId: i }) => {
      const r = new URL(`/api/${t ? `apps/${t.toString()}/` : ""}notifications/mark`, s.url);
      i && r.searchParams.append("id", i.toString()), await s.fetch(r, { method: "PUT" });
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((i) => {
      const r = [];
      return at(
        s.queryClient,
        { queryKey: t ? ["notifications", "list", t] : ["notifications", "list"], exact: !1 },
        void 0,
        (n) => {
          r.push({ id: n.id, is_unread: n.is_unread }), n.is_unread = !1;
        }
      ), t && r.length && at(
        s.queryClient,
        { queryKey: ["notifications", "list"], exact: !1 },
        (n) => !!r.find((a) => a.id === n.id && n.is_unread),
        (n) => {
          n.is_unread = !1;
        }
      ), t || Ql(
        s.queryClient,
        { queryKey: ["notifications", "badge"], exact: !1 },
        () => 0
      ), Ql(
        s.queryClient,
        {
          queryKey: t ? ["apps", "notifications", "badge", t] : ["apps", "notifications", "badge"],
          exact: !1
        },
        () => 0
      ), { changedNotifications: r };
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o(async () => {
      t && await s.queryClient.invalidateQueries({ queryKey: ["notifications", "badge"], exact: !1 });
    }, "onSuccess"),
    onSettled: /* @__PURE__ */ o(async () => {
      await s.queryClient.invalidateQueries({ queryKey: ["notifications", "list"], exact: !1 }), await s.queryClient.invalidateQueries({ queryKey: ["notifications", "badge"], exact: !1 }), await s.queryClient.invalidateQueries({ queryKey: ["apps", "notifications", "badge"], exact: !1 });
    }, "onSettled"),
    onError: /* @__PURE__ */ o((i, r, n) => {
      console.error(i.message);
    }, "onError")
  };
}
o(a4, "getMarkNotificationsMutationOptions");
function o4(s, t) {
  return new kt(s.queryClient, a4(s, t));
}
o(o4, "getMarkNotificationsMutation");
function c4(s) {
  return {
    mutationFn: /* @__PURE__ */ o(async ({ markAsRead: e, notificationId: i }) => {
      const r = `/api/notifications/${i}/mark`;
      await s.fetch(r, { method: e ? "PUT" : "DELETE" });
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((e) => {
      const i = /* @__PURE__ */ new Map();
      at(
        s.queryClient,
        { queryKey: ["notifications", "list"], exact: !1 },
        e.notificationId,
        (r) => {
          !!r.is_unread === e.markAsRead && i.set(r.id, r), r.is_unread = !e.markAsRead;
        }
      ), i.size && (Ql(
        s.queryClient,
        { queryKey: ["notifications", "badge"], exact: !1 },
        (r) => Math.max(0, r + (e.markAsRead ? -1 : 1))
      ), i.forEach((r) => {
        r.link.app && Ql(
          s.queryClient,
          {
            queryKey: ["apps", "notifications", "badge"],
            predicate: /* @__PURE__ */ o((n) => {
              var a, c;
              return n.queryKey[3] === ((a = r.link.app) == null ? void 0 : a.id) || n.queryKey[3] === ((c = r.link.app) == null ? void 0 : c.uid);
            }, "predicate"),
            exact: !1
          },
          (n) => Math.max(0, n + (e.markAsRead ? -1 : 1))
        );
      }));
    }, "onMutate"),
    onError: /* @__PURE__ */ o(async (e, i) => {
      at(
        s.queryClient,
        { queryKey: ["notifications", "list"], exact: !1 },
        i.notificationId,
        (r) => {
          r.is_unread = i.markAsRead;
        }
      ), await s.queryClient.invalidateQueries({ queryKey: ["notifications", "badge"], exact: !1 }), await s.queryClient.invalidateQueries({ queryKey: ["apps", "notifications", "badge"], exact: !1 });
    }, "onError")
  };
}
o(c4, "getMarkNotificationMutationOptions");
function hm(s) {
  return new kt(s.queryClient, c4(s));
}
o(hm, "getMarkNotificationMutation");
function l4(s, t = ue.All, e, i = {}) {
  const r = new URLSearchParams({
    type: t,
    count_only: "true",
    unread: "true"
  }), n = `/api/${e ? `apps/${e.toString()}/` : ""}notifications?${r.toString()}`;
  return tc(s, e ? ["apps", "notifications", "badge", e, t] : ["notifications", "badge", t], n, i);
}
o(l4, "getBadgeOptions");
var d4 = Object.defineProperty, h4 = Object.getOwnPropertyDescriptor, um = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$9"), pm = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? h4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && d4(t, e, r), r;
}, "__decorateClass$v"), ym = /* @__PURE__ */ o((s, t, e) => t.has(s) || um("Cannot " + e), "__accessCheck$9"), Ky = /* @__PURE__ */ o((s, t, e) => (ym(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$9"), u4 = /* @__PURE__ */ o((s, t, e) => t.has(s) ? um("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$9"), Gy = /* @__PURE__ */ o((s, t, e, i) => (ym(s, t, "write to private field"), t.set(s, e), e), "__privateSet$8"), Ir, Ja;
let Tc = (Ja = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.typeFilter = ue.All, this.badgeQuery = new Ne(this), this.handleRefresh = () => {
      this.badgeQuery.result.refetch();
    }, u4(this, Ir);
  }
  async willUpdate(t) {
    var i;
    var e;
    super.willUpdate(t), (t.has("weavy") || t.has("typeFilter") || t.has("app")) && this.weavy && await this.badgeQuery.trackQuery(l4(this.weavy, this.typeFilter, (i = this.app) == null ? void 0 : i.id), !0), t.has("weavy") && this.weavy && ((e = Ky(this, Ir)) == null || e.call(this), this.weavy.subscribe(null, "notification_created", this.handleRefresh), this.weavy.subscribe(null, "notification_updated", this.handleRefresh), this.weavy.subscribe(null, "notifications_marked", this.handleRefresh), Gy(this, Ir, () => {
      var r, n, a;
      (r = this.weavy) == null || r.unsubscribe(null, "notification_created", this.handleRefresh), (n = this.weavy) == null || n.unsubscribe(null, "notification_updated", this.handleRefresh), (a = this.weavy) == null || a.unsubscribe(null, "notifications_marked", this.handleRefresh), Gy(this, Ir, void 0);
    }));
  }
  render() {
    var r;
    const { data: t, isPending: e } = this.badgeQuery.result ?? {}, i = t != null && t.count ? t.count >= 100 ? "99+" : t.count : "";
    return h`
      ${this.user && !e && (t != null && t.count) ? h`
          <span class="wy-badge ${((r = this.settings) == null ? void 0 : r.notificationsBadge) === "count" ? "wy-button-badge" : "wy-button-dot"}" title=${t == null ? void 0 : t.count}>${i}</span> 
        ` : C}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = Ky(this, Ir)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(Ja, "WyNotificationBadge"), Ja);
Ir = /* @__PURE__ */ new WeakMap();
Tc.styles = [
  X,
  yt
];
pm([
  y()
], Tc.prototype, "typeFilter", 2);
Tc = pm([
  q("wy-notification-badge"),
  rt()
], Tc);
var p4 = Object.defineProperty, y4 = Object.getOwnPropertyDescriptor, wm = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? y4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && p4(t, e, r), r;
}, "__decorateClass$u"), to;
let ld = (to = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.showNotifications = !1, this.notificationsRef = st(), this.appSubscribeMutation = new Le(this);
  }
  handleSubscribe(t) {
    var e;
    (e = this.app) != null && e.id && this.appSubscribeMutation.mutate({ subscribe: t });
  }
  async willUpdate(t) {
    super.willUpdate(t), (t.has("weavy") || t.has("app")) && this.weavy && this.app && await this.appSubscribeMutation.trackMutation(Fw(this.weavy, this.app));
  }
  render() {
    var t, e, i, r;
    return ((t = this.settings) == null ? void 0 : t.notifications) === "none" || !this.app ? C : h`
      <wy-button
        kind="icon"
        ?active=${this.showNotifications}
        @click=${() => this.showNotifications = !this.showNotifications}
      >
        <wy-icon name="bell"></wy-icon>
        ${((e = this.settings) == null ? void 0 : e.notificationsBadge) !== "none" ? h` <wy-notification-badge></wy-notification-badge> ` : C}
      </wy-button>

      <wy-sheet
        noPadding
        .show=${this.showNotifications}
        @close=${() => this.showNotifications = !1}
        @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
      >
        <wy-dropdown slot="appbar-buttons" ?disabled=${!this.app}>
          ${(i = this.app) != null && i.is_subscribed ? h`<wy-dropdown-item @click=${() => this.handleSubscribe(!1)}>
                <wy-icon name="bell-off"></wy-icon>
                ${$("Unsubscribe")}
              </wy-dropdown-item>` : h`<wy-dropdown-item @click=${() => this.handleSubscribe(!0)}>
                <wy-icon name="bell"></wy-icon>
                ${$("Subscribe")}
              </wy-dropdown-item>`}
        </wy-dropdown>
        <span slot="appbar-text">${$("Notifications")}</span>
        ${this.showNotifications ? h`
              <wy-notification-list ${Q(this.notificationsRef)}>
                ${(r = this.app) != null && r.is_subscribed ? C : h`
                      <wy-empty slot="empty">
                          <div>${$("You are not subscribed to updates yet.")}</div>
                          <wy-button color="primary" @click=${() => this.handleSubscribe(!0)}>${$("Subscribe")}</wy-button>
                      </wy-empty>
                    `}
              </wy-notification-list>
            ` : C}
      </wy-sheet>
    `;
  }
}, o(to, "WyNotificationButtonList"), to);
wm([
  H()
], ld.prototype, "showNotifications", 2);
ld = wm([
  q("wy-notification-button-list"),
  rt()
], ld);
var w4 = Object.defineProperty, f4 = Object.getOwnPropertyDescriptor, fm = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$8"), gp = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? f4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && w4(t, e, r), r;
}, "__decorateClass$t"), m4 = /* @__PURE__ */ o((s, t, e) => t.has(s) || fm("Cannot " + e), "__accessCheck$8"), dd = /* @__PURE__ */ o((s, t, e) => (m4(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$8"), mm = /* @__PURE__ */ o((s, t, e) => t.has(s) ? fm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$8"), Tl, Fl, eo;
let hd = (eo = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.itemType = "file", mm(this, Tl, new cr(this));
  }
  dispatchFileOpen(t, e) {
    t.preventDefault();
    const i = new CustomEvent("file-open", { detail: { fileId: e.id } });
    return this.dispatchEvent(i);
  }
  async willUpdate(t) {
    var e;
    super.willUpdate(t), (t.has("weavy") || t.has("contextId") || t.has("componentFeatures")) && this.weavy && this.contextId && ((e = this.componentFeatures) != null && e.allowsFeature(A.ContextData)) && await dd(this, Tl).trackMutationState(
      {
        filters: {
          mutationKey: ["apps", this.contextId, "data"],
          exact: !0
        }
      },
      this.weavy.queryClient
    );
  }
  render() {
    var i;
    const { result: t } = dd(this, Tl), e = t == null ? void 0 : t.filter((r) => {
      var n;
      return (n = r.variables) == null ? void 0 : n.file;
    });
    return (i = this.componentFeatures) != null && i.allowsFeature(A.ContextData) && e ? Te(
      e,
      (r) => "mutation" + r.submittedAt,
      (r) => {
        var n;
        if ((n = r.context) != null && n.file) {
          const a = r.context.file, c = {
            ...r.context.status
          }, l = a.size && a.size > 0 ? ic(a.size) : null, u = Qe(a.name), { icon: p } = Ei(a.name), w = hl(a.name), b = Ls(a.provider);
          return this.itemType === "file" ? h`
                    <wy-file-item
                      @click=${(m) => {
            !m.defaultPrevented && !a.is_trashed && this.dispatchFileOpen(m, a);
          }}
                      .hasHover=${!1}
                      .file=${r.context.file}
                      .status=${c}
                      title="${Bu(r.context.type)}: ${a.name + (c.text ? `: ${c.text}` : "")}"
                    >
                      <span slot="title"
                        ><strong></strong> ${a.name}
                        ${c.text ? h`: <em>${c.text}</em>` : C}</span
                      >
                      <span slot="actions"></span>
                    </wy-file-item>
                  ` : h`
                    <a
                      @click=${(m) => {
            !m.defaultPrevented && !a.is_trashed && this.dispatchFileOpen(m, a);
          }}
                      class="wy-item wy-list-item"
                      href="${lt(a.download_url)}"
                      title=${a.name}
                    >
                      <wy-icon name=${p} .overlayName=${b} size="48" kind=${w} ext=${u}></wy-icon>
                      <div class="wy-item-body ">
                        <div class="wy-item-title">${a.name}</div>
                        ${l ? h`<div class="wy-item-text" title="${l}">${l}</div>` : ""}
                      </div>
                    </a>
                  `;
        }
        return C;
      }
    ) : C;
  }
}, o(eo, "WyContextDataItems"), eo);
Tl = /* @__PURE__ */ new WeakMap();
hd.styles = [X, yt];
gp([
  y()
], hd.prototype, "itemType", 2);
hd = gp([
  q("wy-context-data-items")
], hd);
var io;
let Ru = (io = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), mm(this, Fl, new cr(this));
  }
  dispatchFileOpen(t, e) {
    t.preventDefault();
    const i = new CustomEvent("file-open", { detail: { fileId: e.id } });
    return this.dispatchEvent(i);
  }
  async willUpdate(t) {
    var e;
    super.willUpdate(t), (t.has("weavy") || t.has("contextId") || t.has("componentFeatures")) && this.weavy && this.contextId && ((e = this.componentFeatures) != null && e.allowsFeature(A.ContextData)) && await dd(this, Fl).trackMutationState(
      {
        filters: {
          mutationKey: ["apps", this.contextId, "data"],
          exact: !0
        }
      },
      this.weavy.queryClient
    );
  }
  render() {
    var a;
    const { result: t, isMutating: e } = dd(this, Fl), i = t == null ? void 0 : t.filter((c) => {
      var l;
      return (l = c.variables) == null ? void 0 : l.file;
    }), r = Jw(i), n = tf(i);
    return (a = this.componentFeatures) != null && a.allowsFeature(A.ContextData) && t && t.length ? h`
          ${e || r.percent !== null && r.percent < 100 ? h`
                <wy-progress-linear
                  ?indeterminate=${!r.percent}
                  overlay
                  reveal
                  ?warning=${n === "error"}
                  value=${r.percent ?? 0}
                  max=${100}
                ></wy-progress-linear>
              ` : C}
        ` : C;
  }
}, o(io, "WyContextDataProgress"), io);
Fl = /* @__PURE__ */ new WeakMap();
Ru.styles = [X, yt];
Ru = gp([
  q("wy-context-data-progress")
], Ru);
var v4 = Object.defineProperty, g4 = Object.getOwnPropertyDescriptor, vm = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? g4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && v4(t, e, r), r;
}, "__decorateClass$s");
const b4 = "wy-chat";
var so;
let Fc = (so = class extends gt {
  constructor() {
    super(...arguments), this.componentType = ct.Chat, this.componentFeatures = new Ue({
      // All available features as enabled/disabled by default
      [A.Attachments]: !0,
      [A.ContextData]: !0,
      [A.CloudFiles]: !0,
      [A.Embeds]: !0,
      [A.GoogleMeet]: !0,
      [A.Meetings]: !0,
      [A.Mentions]: !0,
      [A.MicrosoftTeams]: !0,
      [A.Polls]: !0,
      [A.Previews]: !0,
      [A.Reactions]: !0,
      [A.Receipts]: !1,
      [A.Typing]: !1,
      [A.ZoomMeetings]: !0
    }), this.theme = new li(this, Fc.styles);
  }
  render() {
    var t;
    return h`
      <wy-context-data-progress></wy-context-data-progress>
      <wy-buttons position="floating" reverse>
        <wy-notification-button-list></wy-notification-button-list>
      </wy-buttons>

      <wy-conversation .conversation=${this.app} .conversationId=${(t = this.app) == null ? void 0 : t.id} .placeholder=${this.placeholder}>
        <wy-context-data-progress slot="footerbar"></wy-context-data-progress>
      </wy-conversation>
    `;
  }
}, o(so, "WyChat"), so);
Fc.styles = [X, Ts, Cr, We, Ji];
vm([
  y()
], Fc.prototype, "placeholder", 2);
Fc = vm([
  q(b4),
  rt()
], Fc);
var x4 = Object.defineProperty, $4 = Object.getOwnPropertyDescriptor, gm = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? $4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && x4(t, e, r), r;
}, "__decorateClass$r");
const C4 = "wy-comments";
var ro;
let Dc = (ro = class extends gt {
  constructor() {
    super(...arguments), this.componentType = ct.Comments, this.componentFeatures = new Ue({
      // All available features as enabled/disabled by default
      [A.Attachments]: !0,
      [A.CloudFiles]: !0,
      [A.ContextData]: !0,
      [A.Embeds]: !0,
      [A.GoogleMeet]: !1,
      [A.Meetings]: !1,
      [A.Mentions]: !0,
      [A.MicrosoftTeams]: !1,
      [A.Polls]: !0,
      [A.Previews]: !0,
      [A.Reactions]: !0,
      [A.Typing]: !1,
      // Has no effect currently
      [A.ZoomMeetings]: !1
    }), this.theme = new li(this, Dc.styles);
  }
  render() {
    var t;
    return h`
      <wy-buttons position="floating" reverse>
        <wy-notification-button-list></wy-notification-button-list>
      </wy-buttons>
      <wy-comment-list parentId=${(t = this.app) == null ? void 0 : t.id} .location=${"apps"} .placeholder=${this.placeholder}></wy-comment-list>
      <wy-context-data-progress></wy-context-data-progress>
    `;
  }
}, o(ro, "WyComments"), ro);
Dc.styles = [X, Ts, Cr, We, Ji];
gm([
  y()
], Dc.prototype, "placeholder", 2);
Dc = gm([
  q(C4),
  rt()
], Dc);
function k4(s) {
  var i;
  if (!this.weavy || !this.app)
    return;
  const t = {
    message: s.message,
    direction: s.message.created_by.id === ((i = this.user) == null ? void 0 : i.id) ? "outbound" : "inbound"
  };
  s.message.created_by.is_agent && (t.agent = s.message.created_by.uid);
  const e = new CustomEvent("wy-message", {
    bubbles: !1,
    cancelable: !1,
    composed: !0,
    detail: t
  });
  this.dispatchEvent(e);
}
o(k4, "handleRealtimeMessage");
const _4 = dt`.wy-list{border-radius:var(--wy-border-radius-sm, calc(var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))) - .25 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))));display:flex;flex-direction:column;gap:var(--wy-border);min-width:0}.wy-list .wy-item:not(.wy-item-hover){--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-list .wy-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.wy-list .wy-item:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.wy-list-bordered{border:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));gap:0}.wy-list-bordered .wy-item{border-top:var(--wy-border, 1px) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));border-left:none;border-right:none}.wy-list-bordered .wy-item:first-child{border-top:none}.wy-list-bordered .wy-item:last-child{border-bottom:none}.wy-list-bordered .wy-item+.wy-list-bordered .wy-item{border-top-width:0}`;
var z4 = Object.defineProperty, M4 = Object.getOwnPropertyDescriptor, bp = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? M4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && z4(t, e, r), r;
}, "__decorateClass$q");
const P4 = "wy-copilot";
var no;
let Qo = (no = class extends gt {
  constructor() {
    super(...arguments), this.componentType = ct.AgentChat, this.componentFeatures = new Ue({
      // All available features as enabled/disabled by default
      [A.Attachments]: !1,
      [A.ContextData]: !0,
      [A.Embeds]: !0,
      [A.Mentions]: !1,
      [A.Previews]: !0,
      [A.Reactions]: !1,
      [A.Typing]: !0
    }), this.theme = new li(this, Qo.styles), this.conversationRef = st(), this.handleRealtimeMessage = k4.bind(this);
  }
  /**
   * Sets the editor input to a suggested text. This replaces the text content of the editor. This can be used to create any custom suggestions.
   *
   * @param {string} text - The text suggestion to place in the editor.
   */
  async setSuggestion(t) {
    var e;
    await ((e = this.conversationRef.value) == null ? void 0 : e.setEditorText(t));
  }
  async willUpdate(t) {
    var e;
    if (await super.willUpdate(t), t.has("weavy") && this.weavy && (this.addConversationMutation = Tw(this.weavy)), (t.has("app") || t.has("weavy")) && this.weavy && ((e = this.unsubscribeToRealtime) == null || e.call(this), this.app)) {
      const i = `a${this.app.id}`;
      this.weavy.subscribe(i, "message_created", this.handleRealtimeMessage), this.unsubscribeToRealtime = () => {
        var r;
        (r = this.weavy) == null || r.unsubscribe(i, "message_created", this.handleRealtimeMessage), this.unsubscribeToRealtime = void 0;
      };
    }
    t.has("agent") && t.get("agent") && this.agent && this.reset();
  }
  render() {
    var t;
    return this.agent ? h`
          <wy-buttons position="floating" reverse>
            ${this.app && this.uid ? h` <wy-notification-button-list></wy-notification-button-list> ` : C}
            <slot name="actions"></slot>
          </wy-buttons>
          <wy-conversation
            ${Q(this.conversationRef)}
            .conversation=${this.app}
            .conversationId=${(t = this.app) == null ? void 0 : t.id}
            .placeholder=${this.placeholder ?? $("Ask anything...")}
            .agentInstructions=${this.instructions}
            .createConversation=${this.agent && this.addConversationMutation ? async (e) => {
      if (!this.agent || !this.addConversationMutation)
        throw new Error("Agent or addConversationMutation not defined");
      const i = {
        uid: `wy-copilot-${fc()}`,
        name: vw(mw(this.name ?? e.text)),
        members: [this.agent],
        type: oi.AgentChat
      }, r = await this.addConversationMutation.mutate(i);
      return this.app = r, await this.updateComplete, r;
    } : void 0}
          >
            <slot
              slot="empty"
              name="empty"
              @click=${async (e) => {
      var i, r;
      e.target.matches(".suggestion") && (e.stopPropagation(), await this.setSuggestion(e.target.innerText), await ((i = this.conversationRef.value) == null ? void 0 : i.setCursorLastInEditor()), (r = this.conversationRef.value) == null || r.focusEditor());
    }}
              @keydown=${ye}
              @keyup=${Fe}
            >
              <slot name="header">
                <wy-icon-display>
                  <slot name="icon">
                    <wy-icon name="stars"></wy-icon>
                  </slot>
                </wy-icon-display>
              </slot>
              <slot name="suggestions">
                <div class="wy-list">
                  <slot name="suggestion-list">
                    <!--wy-button class="suggestion">Summarize this page</wy-button-->
                  </slot>
                </div>
              </slot>
              <slot name="footer"></slot>
            </slot>
            <wy-context-data-progress slot="footerbar"></wy-context-data-progress>
          </wy-conversation>

        ` : h`
          <wy-empty>
            <wy-icon-display>
              <slot name="icon">
                <wy-icon name="stars"></wy-icon>
              </slot>
            </wy-icon-display>
          </wy-empty>
        `;
  }
}, o(no, "WyCopilot"), no);
Qo.styles = [Ts, Cr, We, Ji, _4];
bp([
  y()
], Qo.prototype, "instructions", 2);
bp([
  y()
], Qo.prototype, "placeholder", 2);
Qo = bp([
  q(P4),
  rt()
], Qo);
function S4(s, t, e = {}, i = {}) {
  if (!s)
    throw new Error("useFileList must be used within a WeavyContext");
  return {
    ...i,
    queryKey: ["apps", t, "files", e],
    initialPageParam: 0,
    queryFn: /* @__PURE__ */ o(async (n) => {
      const a = n.pageParam, c = !!(e != null && e.trashed), l = e.order ? e.order.by + (e.order.descending ? "+desc" : "") : "";
      let u = "/api/apps/" + t + "/files?skip=" + a + "&order_by=" + l;
      return c && (u += "&trashed=null"), await (await s.fetch(u)).json();
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ o((n) => n.end && n.end < n.count ? n.end : null, "getNextPageParam")
  };
}
o(S4, "getInfiniteFileListOptions");
function A4(s, t) {
  const e = s.queryClient, r = {
    mutationKey: ["apps", t.id, "files"],
    mutationFn: /* @__PURE__ */ o(async ({ file: n, name: a }) => {
      if (n.id >= 1) {
        const c = await s.fetch("/api/files/" + n.id, {
          method: "PATCH",
          body: JSON.stringify({
            name: a
          })
        });
        if (!c.ok) {
          const l = await c.json();
          throw new Error(l.detail || l.title, { cause: l });
        }
        return await c.json();
      } else
        throw new Error(`Could not rename ${n.name}`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => (at(
      e,
      { queryKey: r.mutationKey, exact: !1 },
      n.file.id,
      (a) => Object.assign(a, { name: n.name })
    ), { type: "rename", file: n.file, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, n)
      ), Vt(e, r.mutationKey, a, (c) => {
        c.status.state = "ok";
      });
    }, "onSuccess"),
    onError: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, { name: a.file.name })
      ), Vt(e, r.mutationKey, a, (c) => {
        c.status.state = "error", c.status.text = n.message;
      });
    }, "onError")
  };
  return r;
}
o(A4, "getRenameFileMutationOptions");
function E4(s, t) {
  return new kt(s.queryClient, A4(s, t));
}
o(E4, "getRenameFileMutation");
function O4(s, t) {
  const e = s.queryClient, r = {
    mutationKey: ["apps", t.id, "files"],
    mutationFn: /* @__PURE__ */ o(async ({ file: n }) => {
      if (n.id >= 1) {
        if (!(await s.fetch("/api/files/" + n.id + "/trash", { method: "POST" })).ok)
          throw new Error();
      } else
        throw new Error(`Could not trash ${n.name}.`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => (at(
      e,
      { queryKey: r.mutationKey, exact: !1 },
      n.file.id,
      (a) => Object.assign(a, { is_trashed: !0 })
    ), { type: "trash", file: n.file, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, n)
      ), Vt(e, r.mutationKey, a, (c) => {
        c.status.state = "ok";
      });
    }, "onSuccess"),
    onError(n, a) {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, { is_trashed: !1 })
      ), Vt(e, r.mutationKey, a, (c) => {
        c.status.state = "error", c.status.text = n.message;
      });
    }
  };
  return r;
}
o(O4, "getTrashFileMutationOptions");
function R4(s, t) {
  return new kt(s.queryClient, O4(s, t));
}
o(R4, "getTrashFileMutation");
function L4(s, t) {
  const e = s.queryClient, r = {
    mutationKey: ["apps", t.id, "files"],
    mutationFn: /* @__PURE__ */ o(async ({ file: n }) => {
      if (n.id >= 1) {
        const a = await s.fetch("/api/files/" + n.id + "/restore", { method: "POST" });
        if (!a.ok) {
          const c = await a.json();
          throw new Error(c.detail || c.title, { cause: c });
        }
      } else {
        const a = { status: 400, title: `Could not restore ${n.name}.` };
        throw new Error(a.detail || a.title, { cause: a });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => (at(
      e,
      { queryKey: r.mutationKey, exact: !1 },
      n.file.id,
      (a) => Object.assign(a, { status: "pending" })
    ), { type: "restore", file: n.file, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, { is_trashed: !1, status: "ok" })
      ), Vt(e, r.mutationKey, a, (c) => {
        c.status.state = "ok";
      });
    }, "onSuccess"),
    onError(n, a) {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, { is_trashed: !0 })
      ), Vt(e, r.mutationKey, a, (c) => {
        c.status.state = "error", c.status.text = n.message;
      });
    }
  };
  return r;
}
o(L4, "getRestoreFileMutationOptions");
function I4(s, t) {
  return new kt(s.queryClient, L4(s, t));
}
o(I4, "getRestoreFileMutation");
function T4(s, t) {
  const e = s.queryClient, r = {
    mutationKey: ["apps", t.id, "files"],
    mutationFn: /* @__PURE__ */ o(async ({ file: n }) => {
      if (n.id >= 1 && n.is_trashed) {
        const a = await s.fetch("/api/files/" + n.id, { method: "DELETE" });
        if (!a.ok) {
          const c = await a.json();
          throw new Error(c.detail || c.title, { cause: c });
        }
      } else {
        const a = { status: 400, title: `Could not delete ${n.name} forever.` };
        throw new Error(a.detail || a.title, { cause: a });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => (at(
      e,
      { queryKey: r.mutationKey, exact: !1 },
      n.file.id,
      (a) => Object.assign(a, { status: "pending" })
    ), { type: "delete-forever", file: n.file, status: { state: "pending" } }), "onMutate"),
    onSuccess: /* @__PURE__ */ o((n, a) => {
      lg(e, { queryKey: r.mutationKey, exact: !1 }, a.file.id), Vt(e, r.mutationKey, a, (c) => {
        c.status.state = "ok";
      });
    }, "onSuccess"),
    onError(n, a) {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, { status: void 0 })
      ), Vt(e, r.mutationKey, a, (c) => {
        c.status.state = "error", c.status.text = n.message;
      });
    }
  };
  return r;
}
o(T4, "getDeleteForeverFileMutationOptions");
function F4(s, t) {
  return new kt(s.queryClient, T4(s, t));
}
o(F4, "getDeleteForeverFileMutation");
function D4(s, t) {
  const e = s.queryClient, i = ["apps", t.id, "files"];
  return {
    mutationKey: i,
    mutationFn: /* @__PURE__ */ o(async ({ file: n, subscribe: a }) => {
      if (n.id >= 1) {
        const c = await s.fetch(`/api/files/${n.id}/${a ? "subscribe" : "unsubscribe"}`, {
          method: "POST"
        });
        if (!c.ok) {
          const l = await c.json();
          throw new Error(l.detail || l.title, { cause: l });
        }
      } else
        throw new Error(`Could not ${a ? "subscribe" : "unsubscribe"} to ${n.name}.`);
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => (at(
      e,
      { queryKey: i, exact: !1 },
      n.file.id,
      (a) => Object.assign(a, { is_subscribed: n.subscribe, status: "pending" })
    ), {
      type: n.subscribe ? "subscribe" : "unsubscribe",
      file: n.file,
      status: { state: "pending" }
    }), "onMutate"),
    onSuccess: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: i, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, { status: "ok" })
      ), Vt(e, i, a, (c) => {
        c.status.state = "ok";
      });
    }, "onSuccess"),
    onError: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: i, exact: !1 },
        a.file.id,
        (c) => Object.assign(c, { is_subscribed: a.file.is_subscribed, status: "error" })
      ), Vt(e, i, a, (c) => {
        c.status.state = "error", c.status.text = n.message;
      });
    }, "onError")
  };
}
o(D4, "getSubscribeFileMutationOptions");
function H4(s, t) {
  return new kt(s.queryClient, D4(s, t));
}
o(H4, "getSubscribeFileMutation");
const V4 = /* @__PURE__ */ o((s) => {
  var t, e, i, r, Lu, bm, Iu, Tr, Tu, p;
  return p = class extends s {
    /**
     * @constructor
     * @hideconstructor
     */
    constructor(...m) {
      super(...m);
      T(this, r);
      T(this, t, []);
      T(this, e);
      T(this, i, /* @__PURE__ */ new Set());
    }
    get eventParent() {
      return f(this, e);
    }
    set eventParent(m) {
      m != null && m.eventChildren && m.eventChildren.add(this), S(this, e, m);
    }
    get eventChildren() {
      return f(this, i);
    }
    /**
     * Registers one or several event listeners. All event listeners are managed and automatically unregistered on destroy.
     *
     * When listening to weavy events, you may also listen to `before:` and `after:` events by simply adding the prefix to a weavy event.
     * Event handlers listening to weavy events may return modified data that is returned to the trigger. The data is passed on to the next event in the trigger event chain. If an event handler calls `event.stopPropagation()` or `return false`, the event chain will be stopped and the value is returned.
     *
     * @example <caption>Instance event</caption>
     * myInstance.on("before:options", function(options) { ... })
     * myInstance.on("options", function(options) { ... })
     * myInstance.on("after:options", function(options) { ... })
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#on
     * @param {string} events - One or several event names separated by spaces. You may provide any namespaces in the names or use the general namespace parameter instead.
     * @param {string|Object} [selector] - Only applicable if the context supports selectors, for instance jQuery.on().
     * @param {function} handler - The listener. The first argument is always the event, followed by any data arguments provided by the trigger.
     */
    on(...m) {
      const g = et(this, r, Tu).call(this, m);
      if (m[3]) {
        const z = /* @__PURE__ */ o((..._) => {
          try {
            g.handler.apply(this, _);
          } catch {
            try {
              g.handler();
            } catch (P) {
              console.warn("Could not invoke one handler:", P);
            }
          }
          et(this, r, Iu).call(this, g.events, g.selector, null, g.handler);
        }, "attachedHandler");
        et(this, r, Lu).call(this, g.events, g.selector, z, g.handler);
      } else
        et(this, r, Lu).call(this, g.events, g.selector, g.handler, g.handler);
    }
    /**
     * Registers one or several event listeners that are executed once. All event listeners are managed and automatically unregistered on destroy.
     *
     * Similar to {@link WeavyEvents#on}.
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#one
     * @param {string} events - One or several event names separated by spaces. You may provide any namespaces in the names or use the general namespace parameter instead.
     * @param {string|Object} [selector] - Only applicable if the context supports selectors, for instance jQuery.on().
     * @param {Function} handler - The listener. The first argument is always the event, followed by any data arguments provided by the trigger.
     */
    one(m, g, x) {
      this.on(m, g, x, !0);
    }
    /**
     * Unregisters event listeners. The arguments must match the arguments provided on registration using .on() or .one().
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#off
     * @param {string} events - One or several event names separated by spaces. You may provide any namespaces in the names or use the general namespace parameter instead.
     * @param {string} [selector] - Only applicable if the context supports selectors, for instance jQuery.on().
     * @param {function} handler - The listener. The first argument is always the event, followed by any data arguments provided by the trigger.
     * @returns {boolean} Was the handler removed?
     */
    off(...m) {
      const g = et(this, r, Tu).call(this, m), x = et(this, r, bm).call(this, g.events, g.selector, g.handler);
      return et(this, r, Iu).call(this, g.events, g.selector, x, g.handler);
    }
    /**
     * Clears all registered eventhandlers
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#clear
     */
    clearEventHandlers() {
      f(this, t).length = 0;
    }
    /**
     * Trigger a custom event. Events are per default triggered on the weavy instance using the weavy namespace.
     *
     * The trigger has an event chain that adds `before:` and `after:` events automatically for all events except when any custom `prefix:` is specified. This way you may customize the eventchain by specifying `before:`, `on:` and `after:` in your event name to fire them one at the time. The `on:` prefix will then be removed from the name when the event is fired.
     *
     * Eventhandlers listening to the event may return modified data that is returned by the trigger event. The data is passed on to the next event in the trigger event chain. If an event handler calls `event.stopPropagation()` or `return false`, the event chain will be stopped and the value is returned.
     *
     * @example
     * // Normal triggering
     * weavyEvents.triggerEvent("myevent");
     *
     * // Will trigger the following events on the root instance
     * // 1. before:myevent.event.weavy
     * // 2. myevent.event.weavy
     * // 3. after:myevent.event.weavy
     *
     * @example
     * // Custom triggering, one at the time
     * weavyEvents.triggerEvent("before:myevent");
     * weavyEvents.triggerEvent("on:myevent");
     * weavyEvents.triggerEvent("after:myevent");
     *
     * @example
     * // Advanced triggering with data handling
     *
     * function doSomething() {
     *     // Will trigger the events sequentially and check the response data in between
     *
     *     var myTriggerData = { counter: 123, label: "my label" };
     *
     *     // Custom triggering, one at the time
     *
     *     // 1. Trigger before: and save the response data back to myTriggerData
     *     myTriggerData = weavyEvents.triggerEvent("before:myevent", myTriggerData);
     *
     *     if (myTriggerData === false) {
     *         console.warn("before:myevent was cancelled by event.stopPropagation() or return false");
     *         return;
     *     }
     *
     *     // ...
     *
     *     // 2. Continue with on: and save the response data back to myTriggerData
     *     myTriggerData = weavyEvents.triggerEvent("on:myevent", myTriggerData);
     *
     *     if (myTriggerData === false) {
     *         console.warn("on:myevent was cancelled by event.stopPropagation() or return false");
     *         return;
     *     }
     *
     *     // ...
     *
     *     // 3. At last trigger after: and save the response data back to myTriggerData
     *     myTriggerData = weavyEvents.triggerEvent("after:myevent", myTriggerData);
     *
     *     if (myTriggerData === false) {
     *         console.warn("after:myevent was cancelled by event.stopPropagation() or return false");
     *         return;
     *     }
     *
     *     console.log("myevent was fully executed", myTriggerData);
     *     return myTriggerData;
     * }
     *
     * @category eventhandling
     * @function
     * @name WeavyEvents#triggerEvent
     * @param {string} name - The name of the event.
     * @param {(Array/Object/JSON)} [data] - Data may be an array or plain object with data or a JSON encoded string.
     * @param {any} ...additionalData - Any raw extra data
     * @returns {data} The data passed to the event trigger including any modifications by event handlers. Returns false if the event is cancelled.
     */
    triggerEvent(m, g, ...x) {
      const z = /^(before|on|after):/.test(m), _ = z ? m.split(":")[0] : "";
      m = m.replace(/^(before|on|after):/, "");
      const P = "before:" + m, E = m, N = "after:" + m;
      if (g && typeof g == "string")
        try {
          g = JSON.parse(g);
        } catch {
          console.warn("Could not parse event data", m, g);
        }
      let O;
      if (z) {
        if (_ === "before" || _ === "after") {
          if (f(this, e) && (O = f(this, e).triggerEvent(
            _ === "before" ? P : N,
            g,
            ...x
          ), g = O || O === !1 ? O : g, g === !1) || (O = et(this, r, Tr).call(this, _ === "before" ? P : N, g, ...x), g = O || O === !1 ? O : g, g === !1))
            return g;
        } else if (_ === "on" && (O = et(this, r, Tr).call(this, E, g, ...x), g = O || O === !1 ? O : g, g === !1 || f(this, e) && (O = f(this, e).triggerEvent("on:" + E, g, ...x), g = O || O === !1 ? O : g, g === !1)))
          return g;
      } else {
        if (f(this, e) && (O = f(this, e).triggerEvent(P, g, ...x), g = O || O === !1 ? O : g, g === !1) || (O = et(this, r, Tr).call(this, P, g, ...x), g = O || O === !1 ? O : g, g === !1) || (O = et(this, r, Tr).call(this, E, g, ...x), g = O || O === !1 ? O : g, g === !1) || f(this, e) && (O = f(this, e).triggerEvent("on:" + E, g, ...x), g = O || O === !1 ? O : g, g === !1) || f(this, e) && (O = f(this, e).triggerEvent(N, g, ...x), g = O || O === !1 ? O : g, g === !1))
          return g;
        O = et(this, r, Tr).call(this, N, g, ...x), g = O || O === !1 ? O : g;
      }
      return g;
    }
  }, t = new WeakMap(), e = new WeakMap(), i = new WeakMap(), r = new WeakSet(), /**
   * Saves a single event handler.
   *
   * @internal
   * @function
   * @param {string} event - One or more events. Multiple events are currently not registered individually.
   * @param {string|Object} [selector] - Optional refinement selector
   * @param {function} handler - The handler function. may be wrapped for once-handlers
   * @param {function} originalHandler - The original non-wrapped event handler.
   */
  Lu = /* @__PURE__ */ o(function(m, g, x, z) {
    f(this, t).push({
      events: m,
      selector: g,
      handler: x,
      originalHandler: z
    });
  }, "#registerEventHandler"), /**
   * Returns the event handler or wrapped event handler. The arguments must match the registered event handler.
   *
   * @internal
   * @function
   * @param {string} events - The events registered
   * @param {string|Object} [selector] - The optional selector for the handler.
   * @param {function} handler - The registered handler
   * @param {function} [originalHandler] - The original registered handler
   */
  bm = /* @__PURE__ */ o(function(m, g, x, z) {
    const _ = {
      events: m,
      selector: g,
      handler: x,
      originalHandler: z || x
    }, P = f(this, t).filter((E) => yc(_, E, !0)).pop();
    return P && P.handler;
  }, "#getEventHandler"), /**
   * Unregister an event handler. Arguments must match the registered event handler.
   *
   * @internal
   * @function
   * @param {string} event - The events registered
   * @param {function} handler - The registered handler
   * @param {string|Object} [selector] - The optional selector for the handler.
   * @returns {boolean} - True if any handler was removed
   */
  Iu = /* @__PURE__ */ o(function(m, g, x, z) {
    const _ = {
      events: m,
      selector: g,
      handler: x,
      originalHandler: z
    };
    let P = !1;
    return f(this, t).forEach((E, N) => {
      yc(_, E, !0) && (P = !0, f(this, t).splice(N, 1));
    }), P;
  }, "#unregisterEventHandler"), /**
   * Triggers any local event handlers registered. Each handler may modify the data and return it or return false to cancel the event chain. .stopPropagation() and .preventDefault() may also be used.
   *
   * @example
   * weavyEvents.on("myevent", function(e, data) { ... })
   *
   * triggerHandler(this, "myevent", { key: 1 })
   *
   * @internal
   * @function
   * @param {any} eventName - The name of the event. Event names without prefix will also trigger handlers with the "on:" prefix.
   * @param {any} data - Any data to pass to the handler
   * @param {any} ...additionalData - Any extra data
   */
  Tr = /* @__PURE__ */ o(function(m, g, ...x) {
    let z = !1;
    return f(this, t).forEach((_) => {
      _.events.split(" ").forEach((P) => {
        if (P = P.indexOf("on:") === 0 ? P.split("on:")[1] : P, m === P && (!_.selector || yc(_.selector, g, !0))) {
          const E = _.handler(g, ...x);
          E ? g = E : E === !1 && (z = !0);
        }
      });
    }), z ? !1 : g;
  }, "#triggerHandler"), /**
   * Extracts and normalizes all parts of the events arguments.
   *
   * @internal
   * @function
   * @param {Array.<Object>} eventArguments - The function argument list: `[context], events, [selector], handler`
   * @returns {Object}
   * @property {string} events - Event names with added namespace for local events.
   * @property {string|Object} selector - The optional selector.
   * @property {function} handler - The handler function
   * @
   */
  Tu = /* @__PURE__ */ o(function(m) {
    const g = typeof m[1] == "function" ? m[1] : m[2], x = typeof m[1] == "function" ? null : m[1];
    return { events: m[0], selector: x, handler: g };
  }, "#getEventArguments"), o(p, "WeavyEvents"), p;
}, "MixinWeavyEvents"), B4 = V4(class {
});
function Zy(s) {
  var e;
  let t = "";
  try {
    t = ((e = /^((?:https?:\/\/[^/]+)|(?:file:\/\/))\/?/.exec(s)) == null ? void 0 : e[1]) || "";
  } catch {
    console.error(
      "Unable to resolve location origin. Make sure you are using http, https or file protocol and have a valid location URL."
    );
  }
  return t;
}
o(Zy, "extractOrigin");
const Xp = class Xp extends B4 {
  constructor(t = {}) {
    super(), this.contentWindows = /* @__PURE__ */ new Set(), this.contentWindowsMapByWeavyId = /* @__PURE__ */ new Map(), this.contentWindowOrigins = /* @__PURE__ */ new WeakMap(), this.contentWindowNames = /* @__PURE__ */ new WeakMap(), this.contentWindowWeavyIds = /* @__PURE__ */ new WeakMap(), this.contentWindowDomain = /* @__PURE__ */ new WeakMap(), this.origin = Hu() ? Zy(window.location.href) : "", this.timeout = 2e3, t != null && t.timeout && (this.timeout = t.timeout), window.addEventListener("message", (e) => {
      var i, r;
      if (e.data.name && e.data.weavyId !== void 0) {
        if (e.data.weavyMessageId && e.data.name !== "message-receipt" && e.data.name !== "unready")
          try {
            (i = e.source) == null || i.postMessage(
              { name: "message-receipt", weavyId: e.data.weavyId, weavyMessageId: e.data.weavyMessageId },
              { targetOrigin: e.origin }
            );
          } catch {
            console.error("could not post back message-receipt to source");
          }
        switch (e.data.name) {
          case "register-child": {
            if ((!e.source || !this.contentWindowWeavyIds.has(e.source)) && console.warn("register-child: contentWindow not pre-registered", e.source), e.source && this.contentWindowOrigins.get(e.source) !== e.origin) {
              console.error(
                "register-child: " + this.contentWindowNames.get(e.source) + " has invalid origin",
                e.origin
              );
              return;
            }
            try {
              const n = e.source ? this.contentWindowWeavyIds.get(e.source) : void 0, a = e.source ? this.contentWindowNames.get(e.source) : void 0;
              a && e.source && e.source.postMessage(
                {
                  name: "register-window",
                  windowName: a,
                  weavyId: n || !0
                },
                { targetOrigin: e.origin }
              );
            } catch (n) {
              console.error("could not register frame window", n);
            }
            break;
          }
          case "ready": {
            e.source && this.contentWindowsMapByWeavyId.has(e.data.weavyId) && this.contentWindowNames.has(e.source) && ((r = this.contentWindowsMapByWeavyId.get(e.data.weavyId)) != null && r.get(this.contentWindowNames.get(e.source))) && (this.contentWindowDomain.set(e.source, e.origin), this.distributeMessage(e));
            break;
          }
          case "unready": {
            this.contentWindowsMapByWeavyId.has(e.data.weavyId) && this.distributeMessage(e, !0);
            break;
          }
          default: {
            (e.source === window || this.contentWindowsMapByWeavyId.size) && this.distributeMessage(e);
            break;
          }
        }
      }
    });
  }
  /**
   * The weavy console logging.
   */
  get console() {
    return console;
  }
  distributeMessage(t, e = !1) {
    const i = t.source === window && t.origin === this.origin;
    if (e || (e = t.source && this.contentWindowOrigins.has(t.source) && t.origin === this.contentWindowOrigins.get(t.source) || !1), i || e) {
      e && !t.data.windowName && t.source && (t.data.windowName = this.contentWindowNames.get(t.source));
      const r = t.data.name;
      r && this.triggerEvent(r, t.data, t), this.triggerEvent("message", t.data, t);
    }
  }
  /**
   * Sends the id of a frame to the frame content scripts, so that the frame gets aware of which id it has.
   * The frame needs to have a unique name attribute.
   *
   * @category panels
   * @param {string} weavyId - The id of the group or entity which the contentWindow belongs to.
   * @param {Window} contentWindow - The frame window to send the data to.
   */
  registerContentWindow(t, e, i, r) {
    var n;
    try {
      if (!e) {
        console.error("registerContentWindow() No valid contentWindow to register, must be a window and have a name.");
        return;
      }
    } catch {
      console.error("registerContentWindow() cannot access contentWindowName");
    }
    t.self && (t = t.self), this.console.log("registerContentWindow", t), (!i || i === "true") && (i = !0), this.contentWindowsMapByWeavyId.has(i) || this.contentWindowsMapByWeavyId.set(i, /* @__PURE__ */ new Map()), (n = this.contentWindowsMapByWeavyId.get(i)) == null || n.set(e, t), this.contentWindows.add(t), this.contentWindowNames.set(t, e), this.contentWindowWeavyIds.set(t, i), this.contentWindowOrigins.set(t, r);
  }
  unregisterAll(t) {
    var e;
    this.contentWindowsMapByWeavyId.has(t) && ((e = this.contentWindowsMapByWeavyId.get(t)) == null || e.forEach((i, r) => {
      this.unregisterContentWindow(r, t);
    }), this.contentWindowsMapByWeavyId.get(t), this.contentWindowsMapByWeavyId.delete(t));
  }
  unregisterContentWindow(t, e) {
    var i, r, n, a;
    if (this.contentWindowsMapByWeavyId.has(e)) {
      if ((i = this.contentWindowsMapByWeavyId.get(e)) != null && i.has(t)) {
        const c = (r = this.contentWindowsMapByWeavyId.get(e)) == null ? void 0 : r.get(t);
        if (c)
          try {
            this.contentWindows.delete(c), this.contentWindowNames.delete(c), this.contentWindowWeavyIds.delete(c), this.contentWindowOrigins.delete(c);
          } catch {
          }
      }
      if ((n = this.contentWindowsMapByWeavyId.get(e)) == null || n.delete(t), ((a = this.contentWindowsMapByWeavyId.get(e)) == null ? void 0 : a.size) === 0)
        try {
          this.contentWindowsMapByWeavyId.delete(e);
        } catch {
        }
    }
  }
  async whenPostMessage(t, e, i) {
    Ie(), i === null && (i = void 0);
    const r = t === window.self, n = r ? Zy(window.location.href) : this.contentWindowOrigins.get(t);
    if (r || t && n === this.contentWindowDomain.get(t)) {
      e.weavyMessageId || (e.weavyMessageId = bc() + bc());
      let c;
      await Promise.race([
        new Promise((l, u) => {
          c = window.setTimeout(() => {
            u(new Error("postMessage() receipt timed out: " + e.weavyMessageId + ", " + e.name));
          }, this.timeout || 2e3);
        }),
        new Promise((l) => {
          this.on("message-receipt", { weavyId: e.weavyId, weavyMessageId: e.weavyMessageId }, () => {
            clearTimeout(c), l(void 0);
          }), t.postMessage(e, { targetOrigin: n, transfer: i });
        })
      ]);
    } else
      throw new Error("postMessage() Invalid window origin: " + n + ", " + e.name);
  }
  postToChildren(t, e) {
    if (typeof t != "object" || !t.name) {
      console.error("postToChildren() Invalid message format", t);
      return;
    }
    e === null && (e = void 0), t.distributeName = t.name, t.name = "distribute", t.weavyId = t.weavyId || !0, this.contentWindows.forEach((i) => {
      const r = this.contentWindowOrigins.get(i);
      if (r === this.contentWindowDomain.get(i))
        try {
          i.postMessage(t, { targetOrigin: r, transfer: e });
        } catch {
          console.warn(
            "postToChildren() could not distribute message to " + this.contentWindowNames.get(i)
          );
        }
    });
  }
  async postToFrame(t, e, i, r) {
    var a;
    if (typeof i != "object" || !i.name) {
      console.error("postToFrame() Invalid message format", i);
      return;
    }
    const n = (a = this.contentWindowsMapByWeavyId.get(e)) == null ? void 0 : a.get(t);
    if (!n)
      throw new Error(`postToFrame() Window not registered: ${e}, ${t}`);
    return i.weavyId = e, await this.whenPostMessage(n, i, r);
  }
  async postToSelf(t, e) {
    if (typeof t != "object" || !t.name) {
      console.error("postToSelf() Invalid message format", t);
      return;
    }
    return t.weavyId = t.weavyId || !0, await this.whenPostMessage(window.self, t, e);
  }
  postToSource(t, e, i) {
    if (t.source && t.data.weavyId !== void 0) {
      const r = t.source === window.self && t.origin === this.origin, n = this.contentWindowOrigins.has(t.source) && t.origin === this.contentWindowOrigins.get(t.source);
      if (i === null && (i = void 0), r || n) {
        e.weavyId = t.data.weavyId;
        try {
          t.source.postMessage(e, { targetOrigin: t.origin, transfer: i });
        } catch (a) {
          console.error("postToSource() Could not post message back to source", a);
        }
      }
    }
  }
};
o(Xp, "WeavyPostalParent");
let Fu = Xp;
var U4 = Object.defineProperty, q4 = Object.getOwnPropertyDescriptor, Td = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? q4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && U4(t, e, r), r;
}, "__decorateClass$p"), ao;
let br = (ao = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.iframeVisible = !1, this.showOverlay = !1, this.isRegistered = !1, this.iframeElementRef = st(), this.overlayRef = st();
  }
  open() {
    this.showOverlay = !0;
  }
  close() {
    this.showOverlay = !1, this.iframeVisible = !1;
  }
  get origin() {
    let t = "";
    try {
      window.location.ancestorOrigins && 0 < window.location.ancestorOrigins.length ? t = window.location.ancestorOrigins[window.location.ancestorOrigins.length - 1] : window.top && (t = window.top.document.location.origin);
    } catch {
    }
    if (!t)
      try {
        t = window.self.document.location.origin;
      } catch {
        console.error("Filebrowser: Could not read current origin.");
      }
    return t;
  }
  dispatchExternalBlobs(t) {
    const e = new CustomEvent("external-blobs", { detail: { externalBlobs: t } });
    return this.dispatchEvent(e);
  }
  connectedCallback() {
    super.connectedCallback(), this.handleFiles = (t, e) => {
      var i, r;
      e.source === ((r = (i = this.iframeElementRef.value) == null ? void 0 : i.contentWindow) == null ? void 0 : r.self) && (this.dispatchExternalBlobs(t.blobs), this.close());
    }, this.handleClose = (t, e) => {
      var i, r;
      e.source === ((r = (i = this.iframeElementRef.value) == null ? void 0 : i.contentWindow) == null ? void 0 : r.self) && this.close();
    }, this.handleGoogleSelected = (t, e) => {
      var i, r;
      e.source === ((r = (i = this.iframeElementRef.value) == null ? void 0 : i.contentWindow) == null ? void 0 : r.self) && this.overlayRef.value && (this.overlayRef.value.maximized = !0);
    }, this.weavyPostal || (this.weavyPostal = new Fu()), this.weavyPostal.on("add-external-blobs", this.handleFiles), this.weavyPostal.on("request:file-browser-close", this.handleClose), this.weavyPostal.on("google-selected", this.handleGoogleSelected);
  }
  disconnectedCallback() {
    var t, e, i;
    super.disconnectedCallback(), (t = this.weavyPostal) == null || t.off("add-external-blobs", this.handleFiles), (e = this.weavyPostal) == null || e.off("request:file-browser-close", this.handleClose), (i = this.weavyPostal) == null || i.off("google-selected", this.handleGoogleSelected);
  }
  updated() {
    var t, e;
    this.weavy && (this.showOverlay && !this.src && (this.src = new URL(
      "?origin=" + this.origin + "&v=X&t=" + Date.now().toString() + "&weavyId=wy-filebrowser",
      this.weavy.cloudFilePickerUrl
    )), this.weavyPostal && !this.isRegistered && this.showOverlay && this.src ? (t = this.iframeElementRef.value) != null && t.contentWindow && (this.weavyPostal.registerContentWindow(
      (e = this.iframeElementRef.value) == null ? void 0 : e.contentWindow.self,
      "weavy-filebrowser",
      "wy-filebrowser",
      this.src.origin
    ), this.isRegistered = !0) : this.weavyPostal && this.isRegistered && !this.showOverlay && this.src && (this.weavyPostal.unregisterContentWindow("weavy-filebrowser", "wy-filebrowser"), this.isRegistered = !1, this.src = void 0));
  }
  render() {
    var t;
    return this.weavy ? h`
      <wy-overlay
        .show=${this.showOverlay}
        ${Q(this.overlayRef)}
        @close=${() => this.close()}
        @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
      >
        ${this.showOverlay ? h`
              <wy-spinner overlay ?hidden=${this.iframeVisible}></wy-spinner>
              <iframe
                ${Q(this.iframeElementRef)}
                @load=${() => this.iframeVisible = !0}
                src=${lt((t = this.src) == null ? void 0 : t.toString())}
                style="flex: 1 1 100%; border: 0;"
                id="weavy-filebrowser"
                name="weavy-filebrowser"
                title=${$("Cloud File Browser")}
              ></iframe>
            ` : C}
      </wy-overlay>
    ` : C;
  }
}, o(ao, "WyCloudFiles"), ao);
br.styles = X;
Td([
  H()
], br.prototype, "src", 2);
Td([
  H()
], br.prototype, "iframeVisible", 2);
Td([
  H()
], br.prototype, "showOverlay", 2);
br = Td([
  q("wy-cloud-files"),
  rt()
], br);
var N4 = Object.defineProperty, j4 = Object.getOwnPropertyDescriptor, fl = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? j4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && N4(t, e, r), r;
}, "__decorateClass$o"), oo;
let Ps = (oo = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.order = { by: "name", descending: !1 }, this.view = "list", this.showTrashed = !1, this.showUploadSheet = !1, this.mutatingFiles = new cr(
      this
    ), this.fileInputRef = st(), this.cloudFilesRef = st(), this.openFileInput = () => {
      var t;
      (t = this.fileInputRef.value) == null || t.click();
    }, this.openCloudFiles = () => {
      var t;
      (t = this.cloudFilesRef.value) == null || t.open();
    };
  }
  // remove file attachment
  async handleRemoveMutation(t) {
    var n;
    const e = await this.whenWeavy(), i = await this.whenApp(), r = t.status === "error" && !((n = t.variables) != null && n.blob) ? ["apps", i.id, "blobs", void 0] : ["apps", i.id, "files"];
    Xw(
      e.queryClient,
      r,
      (a) => a.state.submittedAt === t.submittedAt
    );
  }
  handleOverwriteUpload(t) {
    var i;
    const e = (i = t.variables) == null ? void 0 : i.blob;
    e && this.dispatchCreateFiles([e], !0);
  }
  dispatchUploadFiles(t) {
    const e = new CustomEvent("upload-files", {
      detail: { files: t }
    });
    return this.dispatchEvent(e);
  }
  dispatchExternalBlobs(t) {
    const e = new CustomEvent("external-blobs", {
      detail: { externalBlobs: t }
    });
    return this.dispatchEvent(e);
  }
  dispatchCreateFiles(t, e = !1) {
    const i = new CustomEvent("create-files", {
      detail: { blobs: t, replace: e }
    });
    return this.dispatchEvent(i);
  }
  dispatchOrder(t) {
    const e = new CustomEvent("order", { detail: { order: t } });
    return this.dispatchEvent(e);
  }
  dispatchView(t) {
    const e = new CustomEvent("view", { detail: { view: t } });
    return this.dispatchEvent(e);
  }
  dispatchShowTrashed(t) {
    const e = new CustomEvent("show-trashed", {
      detail: { showTrashed: t }
    });
    return this.dispatchEvent(e);
  }
  dispatchSubscribe(t) {
    const e = new CustomEvent("subscribe", { detail: { subscribe: t } });
    return this.dispatchEvent(e);
  }
  async willUpdate(t) {
    super.willUpdate(t), (t.has("weavy") || t.has("app")) && this.weavy && this.app && await this.mutatingFiles.trackMutationState(
      { filters: { mutationKey: ["apps", this.app.id], exact: !1 } },
      this.weavy.queryClient
    );
  }
  renderFileMutation(t) {
    var e, i, r;
    if ((e = t.context) != null && e.file) {
      const n = t.context.file, a = {
        ...t.context.status
      };
      return t.context.status.state === "conflict" && (a.text = $("Replace existing file?")), h`
        <wy-file-item
          .file=${(i = t.context) == null ? void 0 : i.file}
          .status=${a}
          .actionType=${t.context.type}
          title="${Bu(t.context.type)}: ${n.name}"
        >
          <span slot="title">${n.name}</span>
          ${a.text ? h`: <span slot="actions" title=${a.text}><em>${a.text}</em></span>` : C}
          ${a.state === "conflict" && ((r = t.variables) != null && r.blob) ? h`
                <wy-button
                  slot="actions"
                  kind="icon"
                  @click=${() => this.handleOverwriteUpload(
        t
      )}
                  title=${$("Replace")}
                >
                  <wy-icon name="check"></wy-icon>
                </wy-button>
              ` : C}
          <wy-button
            slot="actions"
            kind="icon"
            @click=${() => this.handleRemoveMutation(t)}
            title=${$("Discard", { desc: "Button action to discard" })}
          >
            <wy-icon name="close"></wy-icon>
          </wy-button>
        </wy-file-item>
      `;
    }
    return C;
  }
  render() {
    var a, c, l, u;
    const t = this.mutatingFiles.result, e = j1(t), i = t != null && t.length ? t.filter((p) => {
      var w;
      return ((w = p.context) == null ? void 0 : w.file) && !e.includes(p);
    }) : [], r = Jw(t), n = tf(t);
    return h`
      <nav class="wy-toolbar">
        <div class="wy-toolbar-buttons">
          ${Fo(or.Create, (a = this.app) == null ? void 0 : a.permissions) ? h`
                <wy-dropdown title=${$("Add files")}>
                  <span slot="button">${$("Add files")}</span>
                  <wy-icon slot="button" name="plus" last></wy-icon>
                  <wy-dropdown-item @click=${this.openFileInput} title=${$("From device")}>
                    <wy-icon name="attachment"></wy-icon>
                    <span>${$("From device")}</span>
                  </wy-dropdown-item>
                  <input
                    type="file"
                    data-testid="uploadFile"
                    ${Q(this.fileInputRef)}
                    @click=${(p) => p.stopPropagation()}
                    @change=${(p) => {
      this.dispatchUploadFiles(p.target.files) && (p.target.value = "");
    }}
                    multiple
                    hidden
                    tabindex="-1"
                  />
                  ${(c = this.componentFeatures) != null && c.allowsFeature(A.CloudFiles) ? h`
                        <wy-dropdown-item @click=${this.openCloudFiles} title=${$("From cloud")}>
                          <wy-icon name="cloud"></wy-icon>
                          <span>${$("From cloud")}</span>
                        </wy-dropdown-item>
                      ` : C}
                </wy-dropdown>
              ` : C}
        </div>
        <div class="wy-toolbar-buttons wy-toolbar-buttons-last">
          ${t != null && t.length ? h`
                <wy-button
                  kind="icon"
                  @click=${() => {
      this.showUploadSheet = !this.showUploadSheet;
    }}
                  title=${n === "conflict" ? $("File conflict") : n === "error" ? $("Upload error") : n === "pending" ? $("Pending") : $("All uploads finished")}
                >
                  ${n === "conflict" ? h`<wy-icon name="alert" color="yellow" title=${$("File conflict")}></wy-icon>` : n === "error" ? h`<wy-icon name="alert-octagon" color="error" title=${$("Upload error")}></wy-icon>` : n === "pending" ? h`<wy-spinner
                        ?nospin=${r !== void 0 && r.percent !== null}
                        progress=${lt(r.percent !== null ? r.percent : void 0)}
                        title=${$("Pending")}
                      ></wy-spinner>` : h`<wy-icon name="check" title=${$("All uploads finished")}></wy-icon>`}
                </wy-button>
              ` : C}
          ${this.app ? h` <wy-notification-button-list></wy-notification-button-list> ` : C}

          <wy-dropdown icon="sort" title="Sort items by" directionX="left">
            <wy-dropdown-option
              ?selected=${this.order.by === "name"}
              @click=${() => this.dispatchOrder({ ...this.order, by: "name" })}
            >
              ${$("Name")}
            </wy-dropdown-option>
            <wy-dropdown-option
              ?selected=${this.order.by === "updated_at"}
              @click=${() => this.dispatchOrder({ ...this.order, by: "updated_at" })}
            >
              ${$("Modified")}
            </wy-dropdown-option>
            <wy-dropdown-option
              ?selected=${this.order.by === "size"}
              @click=${() => this.dispatchOrder({ ...this.order, by: "size" })}
            >
              ${$("Size")}
            </wy-dropdown-option>
            <wy-dropdown-divider></wy-dropdown-divider>
            <wy-dropdown-option
              ?selected=${!this.order.descending}
              @click=${() => this.dispatchOrder({ ...this.order, descending: !1 })}
            >
              ${$("Ascending")}
            </wy-dropdown-option>
            <wy-dropdown-option
              ?selected=${this.order.descending}
              @click=${() => this.dispatchOrder({ ...this.order, descending: !0 })}
            >
              ${$("Descending")}
            </wy-dropdown-option>
          </wy-dropdown>

          <wy-dropdown
            icon=${this.view === "grid" ? "view-module-outline" : "view-list-outline"}
            title="View options"
            directionX="left"
          >
            <wy-dropdown-option ?selected=${this.view === "list"} @click=${() => this.dispatchView("list")}>
              ${$("List view")}
            </wy-dropdown-option>
            <wy-dropdown-option ?selected=${this.view === "grid"} @click=${() => this.dispatchView("grid")}>
              ${$("Grid view")}
            </wy-dropdown-option>
            <wy-dropdown-divider></wy-dropdown-divider>
            <wy-dropdown-option ?selected=${!this.showTrashed} @click=${() => this.dispatchShowTrashed(!1)}>
              ${$("Hide trashed")}
            </wy-dropdown-option>
            <wy-dropdown-option ?selected=${this.showTrashed} @click=${() => this.dispatchShowTrashed(!0)}>
              ${$("Show trashed")}
            </wy-dropdown-option>
          </wy-dropdown>

          <wy-dropdown directionX="left" ?disabled=${!this.app}>
            ${(l = this.app) != null && l.is_subscribed ? h`<wy-dropdown-item @click=${() => this.dispatchSubscribe(!1)}>
                  <wy-icon name="bell-off"></wy-icon>
                  ${$("Unsubscribe")}
                </wy-dropdown-item>` : h`<wy-dropdown-item @click=${() => this.dispatchSubscribe(!0)}>
                  <wy-icon name="bell"></wy-icon>
                  ${$("Subscribe")}
                </wy-dropdown-item>`}
            ${(u = this.app) != null && u.archive_url ? h`<wy-dropdown-item
                  @click=${() => {
      var p, w, b, m;
      return vc((p = this.app) == null ? void 0 : p.archive_url, "_top", `${(w = this.app) != null && w.uid ? this.app.uid : `${(b = this.app) == null ? void 0 : b.type}-${(m = this.app) == null ? void 0 : m.id}`}.zip`, !0);
    }}
                >
                  <wy-icon name="download"></wy-icon>
                  ${$("Download files")}
                </wy-dropdown-item>` : C}
          </wy-dropdown>
        </div>
      </nav>

      <wy-context-data-progress></wy-context-data-progress>

      ${this.weavy ? h`
            <wy-sheet
              .show=${this.showUploadSheet}
              @close=${() => this.showUploadSheet = !1}
              @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
            >
              <wy-button
                kind="icon"
                slot="appbar-buttons"
                @click=${() => {
      t == null || t.forEach((p) => this.handleRemoveMutation(p));
    }}
                title=${$("Remove all", { desc: "Button action to remove all" })}
              >
                <wy-icon name="trashcan"></wy-icon>
              </wy-button>
              <span slot="appbar-text">${$("File actions")}</span>
              ${e.length ? h`
                    ${Te(
      e,
      (p) => "mutation" + p.submittedAt,
      (p) => this.renderFileMutation(p)
    )}
                    ${i.length ? h`<hr />` : C}
                  ` : C}
              ${i.length ? h`
                    ${Te(
      i,
      (p) => "mutation" + p.submittedAt,
      (p) => this.renderFileMutation(p)
    )}
                  ` : C}
            </wy-sheet>
          ` : C}

      <wy-cloud-files
        ${Q(this.cloudFilesRef)}
        @external-blobs=${(p) => this.dispatchExternalBlobs(p.detail.externalBlobs)}
      ></wy-cloud-files>
    `;
  }
}, o(oo, "WyFilesAppbar"), oo);
Ps.styles = [X];
fl([
  y({ type: Object })
], Ps.prototype, "order", 2);
fl([
  y()
], Ps.prototype, "view", 2);
fl([
  y({ type: Boolean })
], Ps.prototype, "showTrashed", 2);
fl([
  H()
], Ps.prototype, "showUploadSheet", 2);
Ps = fl([
  q("wy-files-appbar"),
  rt()
], Ps);
const W4 = dt`[part~=wy-grid]{display:grid;grid-auto-flow:dense;grid-template-columns:repeat(auto-fill,minmax(calc(10 * var(--wy-size, 1rem)),1fr));grid-gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}`, Q4 = dt`@keyframes wy-highlight{0%{--wy-component-background-color: var(--wy-highlight, var(--wy-primary-95, #e8f2ff));--wy-component-color: var(--wy-on-highlight, var(--wy-primary-10, #001d32))}}[part~=wy-card]{--wy-component-background-color: var(--wy-surface-1, var(--wy-surface-1-light, #f1f2f7));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));--wy-component-border-radius: var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem)));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-component-border-radius);position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-clip:border-box}[part~=wy-card][part~=wy-highlight]{animation:wy-highlight 3s 1.5s ease-in-out both}[part~=wy-card-primary]{--wy-component-background-color: var(--wy-primary-container, var(--wy-primary-90, #cde5ff));--wy-component-color: var(--wy-on-primary-container, var(--wy-primary-10, #001d32))}[part~=wy-card-hover]{cursor:pointer;-webkit-user-select:none;user-select:none}[part~=wy-card-hover]:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background:var(--wy-component-color);opacity:0%}[part~=wy-card-hover]:hover:before{opacity:var(--wy-opacity-state-hover, 8%)}[part~=wy-card-hover]:focus:before{opacity:var(--wy-opacity-state-focus, 12%)}[part~=wy-card-hover]:active:before,[part~=wy-card-hover][part~=wy-active]:before{opacity:var(--wy-opacity-state-active, 12%)}[part~=wy-card-actions]{position:absolute;top:calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + .5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));right:calc(var(--wy-padding, calc(.5 * var(--wy-size, 1rem))) + .5 * var(--wy-gap, calc(.5 * var(--wy-size, 1rem))));align-items:center;display:flex}[part~=wy-card-content]{flex:1 0 auto;padding-block-end:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));padding-inline-start:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)));padding-inline-end:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}[part~=wy-card-content][part~=wy-card-top]{padding-block-start:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}[part~=wy-card-top]{border-radius:var(--wy-component-border-radius);object-fit:cover;object-position:top center;flex:1 1 100%;max-height:calc(10 * var(--wy-size, 1rem))}[part~=wy-card-icon]{--wy-component-icon-width: calc(6 * var(--wy-size, 1rem));--wy-component-icon-height: calc(6 * var(--wy-size, 1rem));display:flex;align-items:center;justify-content:center;flex-direction:column;text-align:center;padding:calc(1 * var(--wy-size, 1rem)) calc(2 * var(--wy-size, 1rem));margin:auto}[part~=wy-card-image]{width:auto;height:auto}[part~=wy-card-image][part~=wy-loading]{transition:opacity .15s ease-out;opacity:0}[part~=wy-card-image][part~=wy-loading][part~=wy-loaded]{opacity:1;transition:opacity .15s ease-out}[part~=wy-card-top-image]{object-position:50% 38%}[part~=wy-trashed]{opacity:var(--wy-opacity-disabled, 38%);text-decoration:line-through}`;
function K4(s, t, e, i, r) {
  return s && s.length ? h`
        <table class="wy-table wy-table-hover wy-table-files">
          <thead>${G4.call(this, t)}</thead>
          <tbody>
            ${Te(
    s,
    (n) => n.id,
    (n) => Z4.call(this, this.weavy, { file: n }, e, i, r)
  )}
          </tbody>
        </table>
        <slot name="end"></slot>
      ` : C;
}
o(K4, "renderFileTable");
function G4(s) {
  const t = [
    { by: void 0, title: "" },
    // File icon
    { by: "name", title: $("Name") },
    { by: void 0, title: "" },
    // Comments icon
    { by: "updated_at", title: $("Modified") },
    { by: void 0, title: $("Kind") },
    { by: "size", title: $("Size") },
    { by: void 0, title: "" }
    // Menu
  ];
  return h`
    <tr>
      ${t.map((e) => {
    if (e.title) {
      const i = e.by === (s == null ? void 0 : s.by), r = /* @__PURE__ */ o((n) => {
        n.preventDefault(), e.by && this.dispatchOrder({ by: e.by, descending: i && !(s != null && s.descending) });
      }, "onHeaderClick");
      return h` <th>
            ${e.by ? h`<div
                  class="wy-table-sort-link"
                  tabindex="0"
                  @click=${r}
                  @keydown=${ye}
                  @keyup=${Fe}
                  >${e.title}
                  ${i && h`<wy-icon name=${s != null && s.descending ? "menu-down" : "menu-up"}></wy-icon>` || C}</div
                >` : e.title}
          </th>`;
    } else
      return h`<th class="wy-table-cell-icon"></th>`;
  })}
    </tr>
  `;
}
o(G4, "renderFileTableHeaders");
function Z4(s, { file: t }, e, i, r) {
  var z;
  const n = t.size && t.size > 0 ? ic(t.size) : C, a = t.updated_at || t.created_at, c = new Intl.DateTimeFormat(s == null ? void 0 : s.locale, { dateStyle: "full", timeStyle: "short" }).format(
    new Date(a)
  ), l = new Intl.DateTimeFormat(s == null ? void 0 : s.locale, { dateStyle: "short" }).format(new Date(a)), u = !!(e && e === t.id), { icon: p } = Ei(t.name), w = Qe(t.name), b = Ls(t.provider), m = /* @__PURE__ */ o((_) => {
    _.stopImmediatePropagation();
    const P = _.target;
    P.value && P.value !== t.name ? this.dispatchRename(t, P.value) : this.dispatchEditName({ id: NaN });
  }, "handleRename"), g = /* @__PURE__ */ o((_) => {
    const P = _.target;
    _.key === "Escape" ? (_.preventDefault(), P.value = t.name, P.blur()) : _.key === "Enter" && (_.preventDefault(), P.blur());
  }, "handleRenameKey"), x = !!(i && i === t.id);
  return h`
    <tr
      class=${Mt({ "wy-table-row-trashed": t.is_trashed })}
      part=${Xt({ "wy-highlight": x })}
      @click=${(_) => {
    !_.defaultPrevented && !t.is_trashed && this.dispatchFileOpen(t.id);
  }}
      ${x && r ? Q(r) : C}
    >
      <td class="wy-table-cell-icon"
        ><wy-icon name=${p} .overlayName=${b} size="24" kind=${t.kind} ext=${w}></wy-icon
      ></td>
      <td class="wy-table-cell-text">
        ${u ? h`
              <input
                type="text"
                maxlength="256"
                class="wy-input"
                .defaultValue=${t.name}
                @blur=${m}
                @keyup=${(_) => {
    Cs(_), g(_);
  }}
                @click=${(_) => _.preventDefault()}
                @focus=${Xu}
                ${Q(Vu)}
              />
            ` : h`${t.name}`}
      </td>
      <td class="wy-table-cell-icon"
        >${(z = t.comments) != null && z.count ? h`<wy-button
              kind="icon"
              @click=${(_) => {
    !_.defaultPrevented && !t.is_trashed && (_.target.blur(), this.dispatchFileOpen(t.id, "comments"), _.stopPropagation());
  }}
              title=${$(vt`${t.comments.count} comments`)}
            >
              <span class="wy-badge">${t.comments.count}</span>
            </wy-button>` : C}</td
      >
      <td><time datetime="${a}" title=${c}>${l}</time></td>
      <td>${t.kind}</td>
      <td>${n}</td>
      <td class="wy-table-cell-icon">
        <wy-file-menu
          .file=${t}
          @edit-name=${(_) => this.dispatchEditName(_.detail.file)}
          @trash=${(_) => this.dispatchTrash(_.detail.file)}
          @restore=${(_) => this.dispatchRestore(_.detail.file)}
          @delete-forever=${(_) => this.dispatchDeleteForever(_.detail.file)}
          @subscribe=${(_) => this.dispatchSubscribe(_.detail.file, _.detail.subscribe)}
        >
        </wy-file-menu>
      </td>
    </tr>
  `;
}
o(Z4, "renderFileTableRow");
function Y4(s, t, e, i) {
  var x, z;
  const r = s.size && s.size > 0 ? ic(s.size) : C, n = s.updated_at || s.created_at, a = new Intl.DateTimeFormat((x = this.weavy) == null ? void 0 : x.locale, { dateStyle: "full", timeStyle: "short" }).format(
    new Date(n)
  ), c = !!(t && t === s.id), { icon: l } = Ei(s.name), u = Qe(s.name), p = Ls(s.provider), w = /* @__PURE__ */ o((_) => {
    _.stopImmediatePropagation();
    const P = _.target;
    P.value && P.value !== s.name ? this.dispatchRename(s, P.value) : this.dispatchEditName({ id: NaN });
  }, "handleRename"), b = /* @__PURE__ */ o((_) => {
    const P = _.target;
    _.key === "Escape" ? (_.preventDefault(), P.value = s.name, P.blur()) : _.key === "Enter" && (_.preventDefault(), P.blur());
  }, "handleRenameKey"), m = {
    "wy-trashed": s.is_trashed
  }, g = !!(e && e === s.id);
  return h`
    <div
      part=${Xt({
    "wy-card": !0,
    "wy-card-trashed": s.is_trashed,
    "wy-card-hover": !s.is_trashed && !c,
    "wy-highlight": g
  })}
      title="${s.name} • ${r} • ${a}"
      tabindex="0"
      @click=${(_) => {
    !_.defaultPrevented && !s.is_trashed && this.dispatchFileOpen(s.id);
  }}
      @keydown=${ye}
      @keyup=${Fe}
      ${g && i ? Q(i) : C}
    >
      <div part="wy-card-actions">
        <wy-file-menu
          small
          .file=${s}
          @edit-name=${(_) => this.dispatchEditName(_.detail.file)}
          @trash=${(_) => this.dispatchTrash(_.detail.file)}
          @restore=${(_) => this.dispatchRestore(_.detail.file)}
          @delete-forever=${(_) => this.dispatchDeleteForever(_.detail.file)}
          @subscribe=${(_) => this.dispatchSubscribe(_.detail.file, _.detail.subscribe)}
        ></wy-file-menu>
      </div>
      ${!s.is_trashed && s.thumbnail_url ? h`
            <img
              part="wy-card-top wy-card-content wy-card-image ${Xt({
    "wy-card-top-image": s.kind === "image",
    ...m
  })}"
              width=${lt(s.width)}
              height=${lt(s.height)}
              src=${s.thumbnail_url}
              alt=${s.name}
              ${Q(Xl)}
              @load=${Jl}
              loading="lazy"
              decoding="async"
            />
          ` : h`
            <div part="wy-card-top wy-card-content wy-card-icon ${Xt(m)}">
              <wy-icon name=${l} .overlayName=${p} size="96" kind=${s.kind} ext=${u}></wy-icon>
            </div>
          `}
      <div part="wy-card-content wy-filename ${Xt(m)}">
        ${c ? h`
              <input
                type="text"
                maxlength="256"
                class="wy-input"
                .defaultValue=${s.name}
                @blur=${w}
                @keyup=${(_) => {
    Cs(_), b(_);
  }}
                @click=${(_) => _.preventDefault()}
                @focus=${Xu}
                ${Q(Vu)}
              />
            ` : h`<div class="wy-truncated-text-and-icon"
              ><div>${s.name}</div> ${(z = s.comments) != null && z.count ? h`<wy-button
                    small
                    kind="icon"
                    @click=${(_) => {
    !_.defaultPrevented && !s.is_trashed && (_.target.blur(), this.dispatchFileOpen(s.id, "comments"), _.stopPropagation());
  }}
                    title=${$(vt`${s.comments.count} comments`)}
                  >
                    <span class="wy-badge">${s.comments.count}</span>
                  </wy-button>` : C}</div
            >`}
      </div>
    </div>
  `;
}
o(Y4, "renderFileCard");
var X4 = Object.defineProperty, J4 = Object.getOwnPropertyDescriptor, Hs = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? J4(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && X4(t, e, r), r;
}, "__decorateClass$n"), co;
let ui = (co = class extends pt {
  constructor() {
    super(), this.exportParts = new W(this), this.order = { by: "name", descending: !1 }, this.view = "list", this.isRenamingId = NaN, this.highlightId = NaN, this.highlightComment = !1, this.highlightRef = st(), this.addEventListener("edit-name", (t) => {
      this.isRenamingId = t.detail.file.id;
    }), this.addEventListener("rename", () => {
      this.isRenamingId = NaN;
    });
  }
  dispatchFileOpen(t, e) {
    const i = new CustomEvent("file-open", { detail: { fileId: t, tab: e } });
    return this.dispatchEvent(i);
  }
  dispatchOrder(t) {
    const e = new CustomEvent("order", { detail: { order: t } });
    return this.dispatchEvent(e);
  }
  dispatchEditName(t) {
    const e = new CustomEvent("edit-name", { detail: { file: t } });
    return this.dispatchEvent(e);
  }
  dispatchRename(t, e) {
    const i = new CustomEvent("rename", { detail: { file: t, name: e } });
    return this.dispatchEvent(i);
  }
  dispatchTrash(t) {
    const e = new CustomEvent("trash", { detail: { file: t } });
    return this.dispatchEvent(e);
  }
  dispatchRestore(t) {
    const e = new CustomEvent("restore", { detail: { file: t } });
    return this.dispatchEvent(e);
  }
  dispatchDeleteForever(t) {
    const e = new CustomEvent("delete-forever", { detail: { file: t } });
    return this.dispatchEvent(e);
  }
  dispatchSubscribe(t, e) {
    const i = new CustomEvent("subscribe", { detail: { file: t, subscribe: e } });
    return this.dispatchEvent(i);
  }
  willUpdate(t) {
    var e;
    super.willUpdate(t), t.has("link") && (this.highlightId = this.link && ((e = _f(this.link, xe.File)) == null ? void 0 : e.id), this.highlightComment = this.link && this.highlightId ? zf(this.link, xe.File, { id: this.highlightId }, xe.Comment) : !1), t.has("highlightComment") && this.highlightComment && this.highlightId && this.dispatchFileOpen(this.highlightId, "comments");
  }
  render() {
    return this.files && this.files.length ? this.view === "grid" ? h`
          <div part="wy-grid">
            ${Te(
      this.files,
      (t) => t.id,
      (t) => Y4.call(this, t, this.isRenamingId, this.highlightId, this.highlightRef)
    )}
          </div>
          <slot name="end"></slot>
        ` : K4.call(this, this.files, this.order, this.isRenamingId, this.highlightId, this.highlightRef) : C;
  }
  updated(t) {
    var e;
    t.has("highlightId") && this.highlightId && ((e = this.highlightRef.value) == null || e.scrollIntoView({ block: "nearest" }));
  }
}, o(co, "WyFilesList"), co);
ui.styles = [X, Cr, W4, Q4];
Hs([
  y({ attribute: !1 })
], ui.prototype, "files", 2);
Hs([
  y({ type: Number })
], ui.prototype, "dataUpdatedAt", 2);
Hs([
  y({ attribute: !1 })
], ui.prototype, "order", 2);
Hs([
  y()
], ui.prototype, "view", 2);
Hs([
  H()
], ui.prototype, "isRenamingId", 2);
Hs([
  H()
], ui.prototype, "highlightId", 2);
Hs([
  H()
], ui.prototype, "highlightComment", 2);
ui = Hs([
  q("wy-files-list"),
  rt()
], ui);
var tx = Object.defineProperty, ex = Object.getOwnPropertyDescriptor, xm = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$7"), Fd = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? ex(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && tx(t, e, r), r;
}, "__decorateClass$m"), $m = /* @__PURE__ */ o((s, t, e) => t.has(s) || xm("Cannot " + e), "__accessCheck$7"), Yy = /* @__PURE__ */ o((s, t, e) => ($m(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$7"), ix = /* @__PURE__ */ o((s, t, e) => t.has(s) ? xm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$7"), Xy = /* @__PURE__ */ o((s, t, e, i) => ($m(s, t, "write to private field"), t.set(s, e), e), "__privateSet$7"), Fr;
const sx = "wy-files";
var lo;
let xr = (lo = class extends gt {
  constructor() {
    super(), this.componentType = ct.Files, this.componentFeatures = new Ue({
      // All available features as enabled/disabled by default
      [A.Attachments]: !0,
      [A.CloudFiles]: !0,
      [A.Comments]: !0,
      [A.ContextData]: !0,
      [A.Embeds]: !0,
      [A.GoogleMeet]: !1,
      [A.Meetings]: !1,
      [A.Mentions]: !0,
      [A.MicrosoftTeams]: !1,
      [A.Polls]: !0,
      [A.Previews]: !0,
      [A.Reactions]: !0,
      [A.Typing]: !1,
      // Has no effect currently
      [A.Versions]: !0,
      [A.WebDAV]: !0,
      [A.ZoomMeetings]: !1
    }), this.theme = new li(this, xr.styles), this.view = "list", this.order = { by: "name", descending: !1 }, this.showTrashed = !1, this.filesQuery = new Wi(this), this.persistState = new Ec(this), this.infiniteScroll = new Qi(this), this.pagerRef = st(), this.previewRef = st(), this.dropZone = new od(this), this.appSubscribeMutation = new Le(this), this.uploadBlobMutation = new Le(this), this.createFileMutation = new Le(this), this.handleRealtimeFileCreated = (t) => {
      !this.weavy || !this.app || (t.file.created_by = t.actor, this.weavy.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) }));
    }, this.handleRealtimeFileUpdated = (t) => {
      !this.weavy || !this.app || this.weavy.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, this.handleRealtimeFileTrashed = (t) => {
      !this.weavy || !this.app || this.weavy.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, this.handleRealtimeFileRestored = (t) => {
      !this.weavy || !this.app || this.weavy.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, this.handleRealtimeFileDeleted = (t) => {
      !this.weavy || !this.app || this.weavy.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, this.handleRealtimeCommentCreated = () => {
      !this.weavy || !this.app || this.weavy.queryClient.invalidateQueries({ queryKey: this.getFilesQueryKey(this.app) });
    }, ix(this, Fr), this.addEventListener("drop-files", (t) => this.handleBlobUpload(t));
  }
  // upload files
  handleBlobUpload(t) {
    const e = t.detail;
    if (e.files)
      for (let i = 0; i < e.files.length; i++) {
        const n = { file: e.files[i] };
        this.uploadBlobMutation.mutate(n).then((a) => this.handleCreateFile(a));
      }
  }
  // upload files
  handleExternalBlobs(t) {
    var e;
    if (t.detail.externalBlobs)
      for (let i = 0; i < t.detail.externalBlobs.length; i++) {
        const r = t.detail.externalBlobs[i];
        (e = this.externalBlobMutation) == null || e.mutate({ externalBlob: r }).then((n) => this.handleCreateFile(n));
      }
  }
  // add uploaded files
  async handleCreateFile(t, e) {
    return await this.createFileMutation.mutate({ blob: t, replace: e });
  }
  handleSubscribe(t) {
    var e;
    (e = this.app) != null && e.id && this.appSubscribeMutation.mutate({ subscribe: t });
  }
  getFilesQueryKey(t) {
    return ["apps", t.id, "files"];
  }
  async willUpdate(t) {
    var e;
    if (await super.willUpdate(t), (t.has("uid") || t.has("weavy") || t.has("user")) && this.uid && this.weavy && this.user && this.persistState.observe(
      [
        { name: "view", override: !0 },
        { name: "order", override: !0 },
        { name: "showTrashed", override: !0 }
      ],
      this.uid.toString(),
      `u${this.user.id}`
    ), (t.has("weavy") || t.has("app") || t.has("order") || t.has("showTrashed")) && this.weavy && this.app && await this.filesQuery.trackInfiniteQuery(
      S4(this.weavy, this.app.id, {
        order: this.order,
        trashed: this.showTrashed
      })
    ), (t.has("weavy") || t.has("app") || t.has("user")) && this.weavy && this.app && this.user) {
      await this.appSubscribeMutation.trackMutation(Fw(this.weavy, this.app)), await this.uploadBlobMutation.trackMutation(tp(this.weavy, this.user, this.app.id)), await this.createFileMutation.trackMutation(Q1(this.weavy, this.user, this.app)), this.externalBlobMutation = nm(this.weavy, this.user, this.app.id), this.renameFileMutation = E4(this.weavy, this.app), this.subscribeFileMutation = H4(this.weavy, this.app), this.trashFileMutation = R4(this.weavy, this.app), this.restoreFileMutation = I4(this.weavy, this.app), this.deleteForeverFileMutation = F4(this.weavy, this.app), (e = Yy(this, Fr)) == null || e.call(this);
      const i = `a${this.app.id}`;
      this.weavy.subscribe(i, "file_created", this.handleRealtimeFileCreated), this.weavy.subscribe(i, "file_updated", this.handleRealtimeFileUpdated), this.weavy.subscribe(i, "file_trashed", this.handleRealtimeFileTrashed), this.weavy.subscribe(i, "file_restored", this.handleRealtimeFileRestored), this.weavy.subscribe(i, "file_deleted", this.handleRealtimeFileDeleted), this.weavy.subscribe(i, "comment_created", this.handleRealtimeCommentCreated), Xy(this, Fr, () => {
        var r, n, a, c, l, u;
        (r = this.weavy) == null || r.unsubscribe(i, "file_created", this.handleRealtimeFileCreated), (n = this.weavy) == null || n.unsubscribe(i, "file_updated", this.handleRealtimeFileUpdated), (a = this.weavy) == null || a.unsubscribe(i, "file_trashed", this.handleRealtimeFileTrashed), (c = this.weavy) == null || c.unsubscribe(i, "file_restored", this.handleRealtimeFileRestored), (l = this.weavy) == null || l.unsubscribe(i, "file_deleted", this.handleRealtimeFileDeleted), (u = this.weavy) == null || u.unsubscribe(i, "comment_created", this.handleRealtimeCommentCreated), Xy(this, Fr, void 0);
      });
    }
  }
  updated() {
    this.infiniteScroll.observe(this.filesQuery.result, this.pagerRef.value);
  }
  render() {
    const { data: t, dataUpdatedAt: e, hasNextPage: i, isPending: r } = this.filesQuery.result, n = this.dropZone.isDragActive, a = ts(t);
    return [
      h`
        <wy-files-appbar
          .order=${this.order}
          .showTrashed=${this.showTrashed}
          .view=${this.view}
          @upload-files=${(c) => this.handleBlobUpload(c)}
          @external-blobs=${(c) => this.handleExternalBlobs(c)}
          @create-files=${(c) => c.detail.blobs.forEach((l) => this.handleCreateFile(l, c.detail.replace))}
          @order=${(c) => {
        this.order = c.detail.order;
      }}
          @show-trashed=${(c) => {
        this.showTrashed = c.detail.showTrashed;
      }}
          @view=${(c) => {
        this.view = c.detail.view;
      }}
          @subscribe=${(c) => this.handleSubscribe(c.detail.subscribe)}
        >
        </wy-files-appbar>
      `,
      this.app ? h`
            <div
              class="wy-files ${Mt({ "wy-dragging": n })}"
              data-drag-title=${$("Drop files here to upload.")}
            >
              ${a.length ? h`
                    <wy-files-list
                      .view=${this.view}
                      .files=${a}
                      .dataUpdatedAt=${e}
                      .order=${this.order}
                      @file-open=${(c) => {
        var l;
        (l = this.previewRef.value) == null || l.open(c.detail.fileId, c.detail.tab);
      }}
                      @order=${(c) => {
        this.order = c.detail.order;
      }}
                      @rename=${(c) => {
        var l;
        (l = this.renameFileMutation) == null || l.mutate({ file: c.detail.file, name: c.detail.name });
      }}
                      @subscribe=${(c) => {
        var l;
        (l = this.subscribeFileMutation) == null || l.mutate({
          file: c.detail.file,
          subscribe: c.detail.subscribe
        });
      }}
                      @trash=${(c) => {
        var l;
        (l = this.trashFileMutation) == null || l.mutate({ file: c.detail.file });
      }}
                      @restore=${(c) => {
        var l;
        (l = this.restoreFileMutation) == null || l.mutate({ file: c.detail.file });
      }}
                      @delete-forever=${(c) => {
        var l;
        (l = this.deleteForeverFileMutation) == null || l.mutate({ file: c.detail.file });
      }}
                    >
                      ${i ? h`<div slot="end" ${Q(this.pagerRef)} part="wy-pager wy-pager-bottom"></div>` : C}
                    </wy-files-list>
                  ` : h`
                    <wy-empty>
                      ${r ? h`<wy-spinner padded reveal></wy-spinner>` : h` <wy-icon-display>
                            <wy-icon name="file-upload"></wy-icon>
                            <span slot="text">${$("Add some files to get started!")}</span>
                          </wy-icon-display>`}
                    </wy-empty>
                  `}
            </div>
            ${t ? h` <wy-preview ${Q(this.previewRef)} .infiniteQueryResult=${this.filesQuery.result}></wy-preview> ` : C}
          ` : h`<wy-empty><wy-spinner padded reveal></wy-spinner></wy-empty>`
    ];
  }
  disconnectedCallback() {
    var t;
    (t = Yy(this, Fr)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(lo, "WyFiles"), lo);
Fr = /* @__PURE__ */ new WeakMap();
xr.styles = [We, X, Ts, Ji, Ds];
Fd([
  y()
], xr.prototype, "view", 2);
Fd([
  y({ type: Object })
], xr.prototype, "order", 2);
Fd([
  y({ type: Boolean })
], xr.prototype, "showTrashed", 2);
xr = Fd([
  q(sx),
  rt()
], xr);
const rx = dt`.wy-messenger-layout{display:flex;flex:1;align-items:stretch;position:relative;container-type:inline-size;align-self:stretch;min-height:0;min-width:0}wy-conversation-list{flex:0 1 50%;min-width:0;max-width:24rem;border-right:1px solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c1c7ce))}.wy-messenger-conversation{display:flex;flex-direction:column;overflow-anchor:none;height:100%;width:100%;flex:0 1 100%;min-width:max(50%,16rem)}.wy-close-conversation{display:none}@container (max-width: 768px){wy-conversation-list{flex:0 1 100%;min-width:0;max-width:none;border-right:none}wy-conversation-list[conversationid]{display:none}.wy-messenger-conversation[data-conversation-id=\"\"]{display:none}.wy-close-conversation{display:contents}wy-empty{display:none}}`, nx = dt`.wy-title{font-family:var(--wy-headings-font-family, var(--wy-font-family, unset));font-size:var(--wy-headings-font-size, 1.25em);font-style:var(--wy-headings-font-style, unset);font-weight:var(--wy-headings-font-weight, var(--wy-font-weight-bold, 600));line-height:var(--wy-headings-line-height, var(--wy-line-height, 1.2));margin-block:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-input{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border:var(--wy-input-border-width, var(--wy-border, 1px)) solid var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce));display:block;width:100%;min-height:calc(var(--wy-input-font-size, var(--wy-font-size, 1em)) * 1.5 * var(--wy-size, 1rem) + var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) * 2 + var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) * 2);padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));font-family:var(--wy-input-font-family, var(--wy-font-family, inherit)),inherit;font-size:var(--wy-input-font-size, var(--wy-font-size, 1em));font-weight:var(--wy-input-font-weight, var(--wy-font-weight, unset));line-height:var(--wy-input-line-height, var(--wy-line-height, calc(1.5 * var(--wy-size, 1rem))));background-clip:padding-box;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:var(--wy-input-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))))}.wy-input:focus{--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));color:var(--wy-component-color);border-color:var(--wy-primary, var(--wy-primary-40, #006399));outline:0}.wy-input::placeholder{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));opacity:1}.wy-input:disabled{opacity:38%}.wy-input::file-selector-button,.wy-input::-webkit-file-upload-button{color:var(--wy-component-color);background-color:var(--wy-component-background-color);padding:var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));margin:calc(-1 * var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))) calc(-1 * var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))));margin-inline-end:var(--wy-input-padding-x, var(--wy-padding-lg, calc(1.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem))))));pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:var(--wy-input-border-width, var(--wy-border, 1px));border-radius:0}.wy-input:hover:not(:disabled):not([readonly])::file-selector-button,.wy-input:hover:not(:disabled):not([readonly]) ::-webkit-file-upload-button{background-color:var(--wy-component-background-color)}.wy-input[type=file]{overflow:hidden}.wy-input[type=file]:not(:disabled):not([readonly]){cursor:pointer}.wy-input::-webkit-date-and-time-value{height:calc(var(--wy-input-line-height, var(--wy-line-height, calc(1.5 * var(--wy-size, 1rem)))) * 1em)}.wy-input[type=search]::-webkit-search-cancel-button{-webkit-appearance:none}.wy-input-filled{--wy-component-background-color: var(--wy-surface-2, var(--wy-surface-2-light, #eaedf3));--wy-component-color: var(--wy-on-surface, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color);border-radius:var(--wy-input-filled-border-radius, var(--wy-border-radius-pill, var(--wy-border-radius, calc(2.5 * var(--wy-size, 1rem)))));border-color:var(--wy-component-background-color)}.wy-input-filled:focus{border-color:var(--wy-outline-variant, var(--wy-neutral-variant-80, #c2c7ce))}.wy-label{display:inline-block;margin-bottom:calc(.5 * var(--wy-size, 1rem))}.wy-description{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));margin-top:calc(.25 * var(--wy-size, 1rem))}.wy-is-invalid,.wy-is-invalid:focus{border-color:var(--wy-error, var(--wy-error-40, #ba1824))}.wy-invalid-feedback{margin-top:calc(.25 * var(--wy-size, 1rem));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)));color:var(--wy-error, var(--wy-error-40, #ba1824))}.wy-input-group{position:relative;display:flex;gap:var(--wy-gap, calc(.5 * var(--wy-size, 1rem)));align-items:center;flex:1 0 auto}.wy-input-group-button-icon{--wy-component-background-color: transparent}.wy-input-group-input-with-overlay{padding-right:calc(var(--wy-input-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))) + var(--wy-button-size, calc(var(--wy-button-line-height, 1.5) * var(--wy-size, 1rem) + 2 * var(--wy-button-padding-y, var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))))}.wy-input-group-button-icon-overlay{position:absolute;display:inline-flex;top:0;right:0;z-index:4;border-radius:var(--wy-input-border-radius, var(--wy-border-radius, calc(.5 * var(--wy-size, 1rem))));--wy-component-background-color: transparent}.wy-input-group-input:placeholder-shown~.wy-input-group-button-icon[type=reset]{display:none}.wy-input-group-input:not(:placeholder-shown)~.wy-input-group-button-icon[type=reset]+.wy-input-group-button-icon{display:none}`;
var ax = Object.defineProperty, ox = Object.getOwnPropertyDescriptor, Dd = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? ox(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && ax(t, e, r), r;
}, "__decorateClass$l"), ho;
let Ko = (ho = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.inputRef = st(), this.compact = !1, this.query = "", this.throttledSearch = Au(
      () => {
        var t;
        this.query = ((t = this.inputRef.value) == null ? void 0 : t.value) || "";
      },
      250,
      { leading: !1, trailing: !0 }
    );
  }
  focusInput() {
    var t;
    (t = this.inputRef.value) == null || t.focus();
  }
  clear() {
    this.query = "";
  }
  willUpdate(t) {
    if (t.has("query")) {
      const e = new CustomEvent("search", {
        bubbles: !0,
        composed: !1,
        detail: { query: this.query }
      });
      this.dispatchEvent(e);
    }
  }
  render() {
    const t = {
      "wy-input": !0,
      "wy-input-group-input": !0,
      "wy-input-filled": !0,
      "wy-input-group-input-with-overlay": this.compact
    }, e = {
      "wy-input-group-button-icon": !0,
      "wy-input-group-button-icon-overlay": this.compact
    };
    return h`
      <div class="wy-input-group">
        <input
          class=${Mt(t)}
          name="text"
          .value=${this.query || ""}
          ${Q(this.inputRef)}
          @input=${() => this.throttledSearch()}
          @keydown=${zb}
          @keyup=${Cs}
          placeholder=${this.placeholder || $("Search...")}
          size="4"
        />
        <wy-button type="reset" @click=${() => this.clear()} kind="icon" class=${Mt(e)}>
          <wy-icon name="close-circle"></wy-icon>
        </wy-button>
        <wy-button kind="icon" class=${Mt(e)}>
          <wy-icon name="magnify"></wy-icon>
        </wy-button>
      </div>
    `;
  }
}, o(ho, "WySearch"), ho);
Ko.styles = [nx, yt];
Dd([
  y()
], Ko.prototype, "placeholder", 2);
Dd([
  y({ type: Boolean })
], Ko.prototype, "compact", 2);
Dd([
  H()
], Ko.prototype, "query", 2);
Ko = Dd([
  q("wy-search"),
  rt()
], Ko);
var cx = Object.defineProperty, lx = Object.getOwnPropertyDescriptor, Vs = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? lx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && cx(t, e, r), r;
}, "__decorateClass$k"), uo;
let pi = (uo = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.agentFilter = void 0, this.selected = [], this.select = [], this.text = "", this.peopleQuery = new Wi(this), this.searchRef = st(), this.infiniteScroll = new Qi(this), this.pagerRef = st();
  }
  dispatchSubmit() {
    this.selected = [...this.selected, ...this.select];
    const t = new CustomEvent("submit", { detail: { members: this.selected } });
    return this.dispatchEvent(t);
  }
  isChecked(t) {
    return this.select.find((e) => e.id === t) != null;
  }
  handleSelected(t, e) {
    e ? this.select = [...this.select, t] : (this.select = this.select.filter((i) => i.id !== t.id), this.selected = this.selected.filter((i) => i.id !== t.id));
  }
  getSelected() {
    return this.selected.length > 0 ? h`
        ${this.selected.map((t) => h`
            <div
              class="wy-item wy-list-item wy-item-hover"
              @click=${() => this.handleSelected(t, !1)}
              @keydown=${ye}
              @keyup=${ye}
            >
              <wy-avatar
                id=${t.id}
                .src=${t.avatar_url}
                .name=${t.name}
                .description=${t.comment}
                .presence=${t.presence}
                .isAgent=${t.is_agent}
                size=${32}
              ></wy-avatar>
              <div class="wy-item-body"> ${t.name} </div>
              <wy-icon name="checkbox-marked"></wy-icon>
            </div>
          `)}
      ` : C;
  }
  getSearchResult() {
    const { data: t, hasNextPage: e, isPending: i } = this.peopleQuery.result ?? { data: [], isPending: !0 }, r = ts(t), n = !!r.length, a = [];
    return i ? a.push(h`<wy-spinner overlay></wy-spinner>`) : n || a.push(h`<div class="wy-pane-group">
        <div class="wy-table-no-result">
          ${this.text ? $("Your search did not match any people.") : $("No more users found.")}
        </div>
      </div>`), n && a.push(
      h` ${r.filter((c) => this.selected.find((l) => l.id === c.id) === void 0).map((c) => h`<div
              class="wy-item wy-list-item wy-item-hover"
              @click=${() => this.handleSelected(c, !this.isChecked(c.id))}
              @keydown=${ye}
              @keyup=${ye}
            >
              <wy-avatar
                id=${c.id}
                .src=${c.avatar_url}
                .name=${c.name}
                .description=${c.comment}
                .presence=${c.presence}
                .isAgent=${c.is_agent}
                size=${32}
              ></wy-avatar>
              <div class="wy-item-body"> ${c.name} </div>
              <wy-icon name="${this.isChecked(c.id) ? "checkbox-marked" : "checkbox-blank"}"></wy-icon>
            </div>`) ?? C}`
    ), e && a.push(h`<div ${Q(this.pagerRef)} part="wy-pager wy-pager-bottom"></div>`), a;
  }
  render() {
    return h`<div class="wy-pane wy-scroll-y">
      <div class="wy-pane-body">
        <div class="wy-pane-group">
          <wy-search ${Q(this.searchRef)} @search=${(t) => this.text = t.detail.query}></wy-search>
        </div>
        <div>
          <wy-buttons tabs>
            <wy-button
              ?active=${this.agentFilter === void 0}
              @click=${() => this.agentFilter = void 0}
              kind="tab"
              small
              >${$("All")}</wy-button
            >
            <wy-button ?active=${this.agentFilter === !1} @click=${() => this.agentFilter = !1} kind="tab" small
              >${$("People")}</wy-button
            >
            <wy-button ?active=${this.agentFilter === !0} @click=${() => this.agentFilter = !0} kind="tab" small
              >${$("Agents")}</wy-button
            >
          </wy-buttons>
        </div>
        <div class="wy-pane-body">
          ${this.getSelected()} ${this.getSearchResult()}
        </div>
      </div>
      <div part="wy-footerbar wy-footerbar-sticky">
        <div class="wy-pane-group">
          <wy-buttons reverse>
            <wy-button
              color="primary"
              @click=${() => this.dispatchSubmit()}
              ?disabled=${this.selected.length === 0 && this.select.length === 0 ? !0 : void 0}
              >${this.buttonTitle ?? $("Create")}</wy-button
            >
          </wy-buttons>
        </div>
      </div>
    </div>`;
  }
  async willUpdate(t) {
    super.willUpdate(t), t.has("weavy") && this.weavy && await this.peopleQuery.trackInfiniteQuery(
      jg(
        this.weavy,
        () => this.text,
        this.appId,
        () => this.agentFilter
      )
    );
  }
  async updated(t) {
    var e, i, r;
    this.infiniteScroll.observe(this.peopleQuery.result, this.pagerRef.value), (t.has("text") || t.has("agentFilter")) && (this.select.length > 0 && (this.selected = [...this.selected, ...this.select], this.select = []), await ((i = (e = this.peopleQuery.result) == null ? void 0 : e.refetch) == null ? void 0 : i.call(e)), (r = this.searchRef.value) == null || r.focusInput());
  }
}, o(uo, "WyUsersSearch"), uo);
pi.styles = [
  X,
  pf,
  Ds,
  yt
];
Vs([
  ee({ context: le, subscribe: !0 }),
  H()
], pi.prototype, "weavy", 2);
Vs([
  y({ attribute: !1 })
], pi.prototype, "appId", 2);
Vs([
  y({ attribute: !1 })
], pi.prototype, "buttonTitle", 2);
Vs([
  H()
], pi.prototype, "agentFilter", 2);
Vs([
  H()
], pi.prototype, "selected", 2);
Vs([
  H()
], pi.prototype, "select", 2);
Vs([
  H()
], pi.prototype, "text", 2);
pi = Vs([
  q("wy-users-search"),
  rt()
], pi);
var dx = Object.defineProperty, hx = Object.getOwnPropertyDescriptor, xp = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? hx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && dx(t, e, r), r;
}, "__decorateClass$j"), po;
let Go = (po = class extends pt {
  constructor() {
    super(...arguments), this.uploadBlobMutation = new Le(this), this.fileInputRef = st(), this.openFileInput = () => {
      var t;
      (t = this.fileInputRef.value) == null || t.click();
    };
  }
  async handleBlobChange(t, e) {
    if (t && this.weavy) {
      const r = { file: t[0] };
      await this.uploadBlobMutation.trackMutation(G1(this.weavy));
      const n = await this.uploadBlobMutation.mutate(r);
      e && (e.value = "");
      const a = new CustomEvent("blob-uploaded", { detail: { blob: n } });
      this.dispatchEvent(a);
    }
  }
  render() {
    return h` <slot
        name="placeholder"
        @click=${this.openFileInput}
        @keydown=${ye}
        @keyup=${Fe}
      ></slot>
      <input
        accept=${lt(this.accept)}
        type="file"
        ${Q(this.fileInputRef)}
        @click=${(t) => t.stopPropagation()}
        @change=${(t) => this.handleBlobChange(t.target.files, t.target)}
        hidden
      />
      <slot name="label">
        ${this.label ? h`<wy-button @click=${this.openFileInput}>${this.label}</wy-button>` : C}
      </slot>`;
  }
}, o(po, "WyBlobUpload"), po);
Go.styles = [
  dt`
      :host {
        text-align: center;
      }
      slot[name="placeholder"] {
        cursor: pointer;
      }
    `
];
xp([
  y({ attribute: !1 })
], Go.prototype, "label", 2);
xp([
  y({ attribute: !1 })
], Go.prototype, "accept", 2);
Go = xp([
  q("wy-blob-upload"),
  rt()
], Go);
var ux = Object.defineProperty, px = Object.getOwnPropertyDescriptor, Cm = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$6"), Mr = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? px(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && ux(t, e, r), r;
}, "__decorateClass$i"), km = /* @__PURE__ */ o((s, t, e) => t.has(s) || Cm("Cannot " + e), "__accessCheck$6"), Jy = /* @__PURE__ */ o((s, t, e) => (km(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$6"), yx = /* @__PURE__ */ o((s, t, e) => t.has(s) ? Cm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$6"), tw = /* @__PURE__ */ o((s, t, e, i) => (km(s, t, "write to private field"), t.set(s, e), e), "__privateSet$6"), Dr, yo;
let Ai = (yo = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.showDetails = !1, this.showAddMembers = !1, this.conversationTitle = "", this.conversationTitleInput = "", this.releaseFocusEvent = () => new CustomEvent("release-focus", { bubbles: !0, composed: !0 }), this.membersQuery = new Ne(this), this.handleRealtimeAppUpdated = (t) => {
      !this.conversationId || t.app.id !== this.conversationId || (this.conversationTitle = this.conversationTitleInput = t.app.name);
    }, this.handlePresenceChange = (t) => {
      if (!this.weavy)
        return;
      Array.isArray(t) || (t = [parseInt(t)]);
      const e = /* @__PURE__ */ o((i) => {
        const r = i.members.data ?? [];
        return r.forEach((n) => {
          n.presence = t.indexOf(n.id) != -1 ? "active" : "away";
        }), i.members.data = r, i;
      }, "updateMembersInApps");
      this.weavy.queryClient.setQueryData(["apps", this.conversationId], e);
    }, yx(this, Dr);
  }
  isAgentChat(t) {
    var e;
    return ((e = t ?? this.conversation) == null ? void 0 : e.type) === ct.AgentChat;
  }
  isChatRoom(t) {
    var e;
    return ((e = t ?? this.conversation) == null ? void 0 : e.type) === ct.ChatRoom;
  }
  isPrivateChat(t) {
    var e;
    return ((e = t ?? this.conversation) == null ? void 0 : e.type) === ct.PrivateChat;
  }
  async addMembers(t) {
    var e;
    this.showAddMembers = !1, this.showDetails = !0, !(!this.weavy || !this.conversationId) && (await ((e = this.addMembersMutation) == null ? void 0 : e.mutate({ appId: this.conversationId, members: t.map((i) => i.id) })), await this.membersQuery.result.refetch(), await this.weavy.queryClient.invalidateQueries({ queryKey: ["apps"] }));
  }
  async handleSaveConversationName() {
    var e;
    if (!this.weavy || !this.conversationId)
      return;
    const t = this.conversationTitleInput.trim() === "" ? null : this.conversationTitleInput.trim();
    await ((e = this.updateConversationMutation) == null ? void 0 : e.mutate({ appId: this.conversationId, name: t }));
  }
  async handleAvatarUploaded(t) {
    var e;
    !this.weavy || !this.conversationId || await ((e = this.updateConversationMutation) == null ? void 0 : e.mutate({
      appId: this.conversationId,
      blobId: t.id,
      thumbnailUrl: t.thumbnail_url
    }));
  }
  async clearAvatar() {
    var t;
    !this.weavy || !this.conversationId || await ((t = this.updateConversationMutation) == null ? void 0 : t.mutate({ appId: this.conversationId, blobId: null, thumbnailUrl: null }));
  }
  async updateMember(t, e) {
    var i;
    !this.weavy || !this.conversationId || (await ((i = this.updateMemberMutation) == null ? void 0 : i.mutate({
      appId: this.conversationId,
      userId: t,
      access: e
    })), await this.membersQuery.result.refetch());
  }
  async leaveConversation(t) {
    var e;
    if (!(!this.weavy || !this.conversationId || !this.user)) {
      if (t && await ((e = this.leaveConversationMutation) == null ? void 0 : e.mutate({
        appId: this.conversationId,
        members: [t]
      })), !t || t === this.user.id) {
        this.showDetails = !1, this.conversation = void 0, this.conversationId = void 0;
        const i = new CustomEvent("selected", { detail: { id: void 0 } });
        this.dispatchEvent(i);
      } else
        await this.membersQuery.result.refetch();
      await this.weavy.queryClient.invalidateQueries({ queryKey: ["apps"] });
    }
  }
  async willUpdate(t) {
    var e;
    if (super.willUpdate(t), t.has("weavy") && this.weavy && (this.leaveConversationMutation = hf(this.weavy), this.addMembersMutation = Bg(this.weavy), this.updateConversationMutation = uf(this.weavy), this.updateMemberMutation = Vg(this.weavy)), t.has("conversationId") && (this.showDetails = !1), (t.has("weavy") || t.has("conversationId")) && this.weavy)
      if ((e = Jy(this, Dr)) == null || e.call(this), this.conversationId) {
        await this.membersQuery.trackQuery(
          gu(this.weavy, this.conversationId, {
            initialData: /* @__PURE__ */ o(() => {
              var r, n;
              if (this.conversationId)
                return (n = (r = this.weavy) == null ? void 0 : r.queryClient.getQueryData(["apps", this.conversationId])) == null ? void 0 : n.members;
            }, "initialData")
          })
        );
        const i = `a${this.conversationId}`;
        this.weavy.subscribe(i, "app_updated", this.handleRealtimeAppUpdated), this.weavy.subscribe(null, "online", this.handlePresenceChange), tw(this, Dr, () => {
          var r, n;
          (r = this.weavy) == null || r.unsubscribe(i, "app_updated", this.handleRealtimeAppUpdated), (n = this.weavy) == null || n.unsubscribe(null, "online", this.handlePresenceChange), tw(this, Dr, void 0);
        });
      } else
        this.membersQuery.untrackQuery();
    t.has("conversation") && this.conversation && (this.conversationTitleInput = this.conversationTitle = this.conversation.name);
  }
  render() {
    var r, n, a, c;
    const { data: t } = this.membersQuery.result ?? {}, e = ((t == null ? void 0 : t.data) || []).filter((l) => l.access === ns.Admin).length, i = this.user && this.isPrivateChat() ? ((a = (((n = (r = this.conversation) == null ? void 0 : r.members) == null ? void 0 : n.data) || []).filter((l) => {
      var u;
      return l.id !== ((u = this.user) == null ? void 0 : u.id);
    })) == null ? void 0 : a[0]) ?? this.user : null;
    return this.conversationId ? h`
      <header class="wy-appbars">
        <nav class="wy-appbar">
          <slot class="wy-appbar-buttons wy-appbar-buttons-first" name="action"></slot>
          ${this.conversation && this.user ? h`
                <div class="wy-appbar-section">
                  ${this.conversation.type === ct.PrivateChat ? h`<wy-presence
                        placement="text"
                        .status=${i == null ? void 0 : i.presence}
                        id=${lt(i == null ? void 0 : i.id)}
                      ></wy-presence>` : C}
                  <span class="wy-appbar-text">${this.conversationTitle}</span>
                </div>
              ` : h`<span></span>`}
          ${this.isChatRoom() ? h`<wy-button kind="icon" @click=${() => this.showDetails = !0} title="${$("Details")}">
                <wy-icon name="information"></wy-icon>
              </wy-button>` : C}
        </nav>
      </header>

      <!-- details modal -->
      ${this.weavy ? h`
            <wy-overlay
              .show=${this.showDetails}
              @close=${() => {
      this.showDetails = !1;
    }}
              @release-focus=${() => this.dispatchEvent(this.releaseFocusEvent())}
            >
              <header class="wy-appbars">
                <nav class="wy-appbar">
                  <wy-button
                    kind="icon"
                    @click=${() => {
      this.showDetails = !1;
    }}
                  >
                    <wy-icon name="close"></wy-icon>
                  </wy-button>
                  <div class="wy-appbar-text">${this.conversationTitle}</div>
                </nav>
              </header>
              <div class="wy-scroll-y">
                ${this.showDetails && this.conversation && this.user ? h`
                      <wy-avatar-header>
                        ${this.isChatRoom() ? h`
                              <wy-blob-upload
                                @blob-uploaded=${(l) => this.handleAvatarUploaded(l.detail.blob)}
                                .accept=${"image/*"}
                                .label=${$("Select picture")}
                              >
                                <div slot="placeholder">
                                  ${this.conversation.avatar_url ? h`<wy-avatar .size=${96} src=${this.conversation.avatar_url}></wy-avatar>` : h`<wy-avatar-group
                                        .members=${t == null ? void 0 : t.data}
                                        title=${this.conversation.name}
                                        .size=${96}
                                      ></wy-avatar-group>`}
                                </div>
                                ${this.conversation.avatar_url ? h`<div slot="label"
                                      ><wy-button @click=${() => this.clearAvatar()}
                                        >${$("Remove picture")}</wy-button
                                      ></div
                                    >` : C}
                              </wy-blob-upload>
                            ` : h`
                              <wy-avatar
                                src=${lt(i == null ? void 0 : i.avatar_url)}
                                name=${lt(i == null ? void 0 : i.name)}
                                presence=${(i == null ? void 0 : i.presence) || "away"}
                                ?isAgent=${i == null ? void 0 : i.is_agent}
                                id=${lt(i == null ? void 0 : i.id)}
                                size=${96}
                              ></wy-avatar>
                            `}
                      </wy-avatar-header>
                      ${this.isChatRoom() ? h`
                            <div class="wy-pane-group">
                              <label class="wy-label" for="roomName">${$("Room name")}</label>

                              <input
                                id="roomName"
                                class="wy-input"
                                .value=${this.conversationTitleInput}
                                @input=${(l) => {
      this.conversationTitleInput = l.target.value;
    }}
                                @keyup=${_b}
                                @blur=${() => this.handleSaveConversationName()}
                              />

                              <div class="wy-description">
                                ${$("Changing the name of a group chat changes it for everyone.")}
                              </div>
                              <br />
                              <label class="wy-label">${$("Members")}</label>
                              ${t ? h`
                                    <div class="wy-list">
                                      ${((c = t.data) == null ? void 0 : c.map(
      (l) => {
        var u, p;
        return h`
                                          <div class="wy-item wy-list-item">
                                            <wy-avatar
                                              .src=${l.avatar_url}
                                              .name=${l.name}
                                              .description=${l.comment}
                                              .isAgent=${l.is_agent}
                                              size=${32}
                                            ></wy-avatar>
                                            <div class="wy-item-body">
                                              ${l.name}
                                              ${l.access === ns.Admin ? h` <wy-icon
                                                    size="20"
                                                    inline
                                                    name="shield-star"
                                                    title=${$("Admin")}
                                                  ></wy-icon>` : C}
                                            </div>
                                            ${this.user && this.user.id === l.id && !Fo(or.Admin, (u = this.conversation) == null ? void 0 : u.permissions) ? h` <wy-button
                                                  @click=${() => this.leaveConversation(l.id)}
                                                  title=${$("Leave conversation")}
                                                  kind="icon"
                                                >
                                                  <wy-icon name="close"></wy-icon>
                                                </wy-button>` : Fo(or.Admin, (p = this.conversation) == null ? void 0 : p.permissions) ? h`<wy-dropdown>
                                                  <wy-dropdown-item @click=${() => this.leaveConversation(l.id)}>
                                                    <wy-icon name="account-minus"></wy-icon>
                                                    ${this.user && this.user.id === l.id ? $("Leave conversation") : $("Remove member")}
                                                  </wy-dropdown-item>
                                                  ${e > 1 && l.access === ns.Admin ? h`<wy-dropdown-item
                                                        @click=${() => this.updateMember(l.id, ns.Write)}
                                                      >
                                                        <wy-icon name="shield-star-outline"></wy-icon>
                                                        ${$("Remove as admin")}
                                                      </wy-dropdown-item>` : l.access !== ns.Admin ? h`<wy-dropdown-item
                                                        @click=${() => this.updateMember(l.id, ns.Admin)}
                                                      >
                                                        <wy-icon name="shield-star"></wy-icon>
                                                        ${$("Make admin")}
                                                      </wy-dropdown-item>` : C}
                                                </wy-dropdown>` : C}
                                          </div>
                                        `;
      }
    )) ?? C}
                                    </div>
                                  ` : C}
                              <wy-button
                                kind="filled"
                                color="primary"
                                @click=${() => {
      this.showDetails = !1, this.showAddMembers = !0;
    }}
                                title=${$("Add members")}
                              >
                                ${$("Add members")}
                              </wy-button>
                            </div>
                          ` : C}
                    ` : C}
              </div>
            </wy-overlay>
          ` : C}

      <!-- add members modal -->
      ${this.weavy ? h`
            <wy-overlay
              .show=${this.showAddMembers}
              @close=${() => {
      this.showAddMembers = !1;
    }}
              @release-focus=${() => this.dispatchEvent(this.releaseFocusEvent())}
            >
              <header class="wy-appbars">
                <nav class="wy-appbar">
                  <wy-button
                    kind="icon"
                    @click=${() => {
      this.showAddMembers = !1;
    }}
                  >
                    <wy-icon name="close"></wy-icon>
                  </wy-button>
                  <div class="wy-appbar-text">${$("Add members")}</div>
                </nav>
              </header>
              ${this.showAddMembers ? h`
                    <wy-users-search
                      .buttonTitle=${$("Add members")}
                      .appId=${this.conversationId}
                      @submit=${(l) => this.addMembers(l.detail.members)}
                    ></wy-users-search>
                  ` : C}
            </wy-overlay>
          ` : C}
    ` : C;
  }
  disconnectedCallback() {
    var t;
    (t = Jy(this, Dr)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(yo, "WyConversationAppbar"), yo);
Dr = /* @__PURE__ */ new WeakMap();
Ai.styles = [
  X,
  yt
];
Mr([
  y({ attribute: !1 })
], Ai.prototype, "conversationId", 2);
Mr([
  y({ attribute: !1 })
], Ai.prototype, "conversation", 2);
Mr([
  y({ type: Boolean })
], Ai.prototype, "showDetails", 2);
Mr([
  y({ type: Boolean })
], Ai.prototype, "showAddMembers", 2);
Mr([
  y({ type: String })
], Ai.prototype, "conversationTitle", 2);
Mr([
  H()
], Ai.prototype, "conversationTitleInput", 2);
Ai = Mr([
  q("wy-conversation-appbar"),
  rt()
], Ai);
var wx = Object.defineProperty, fx = Object.getOwnPropertyDescriptor, _m = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$5"), ml = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? fx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && wx(t, e, r), r;
}, "__decorateClass$h"), zm = /* @__PURE__ */ o((s, t, e) => t.has(s) || _m("Cannot " + e), "__accessCheck$5"), ew = /* @__PURE__ */ o((s, t, e) => (zm(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$5"), mx = /* @__PURE__ */ o((s, t, e) => t.has(s) ? _m("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$5"), iw = /* @__PURE__ */ o((s, t, e, i) => (zm(s, t, "write to private field"), t.set(s, e), e), "__privateSet$5"), Hr, wo;
let Ss = (wo = class extends it {
  constructor() {
    super(...arguments), this.private = !0, this.rooms = !0, this.badgeQuery = new Ne(this), this.handleBadgeRefresh = async () => {
      this.badgeQuery.result.isRefetching || await this.badgeQuery.result.refetch();
    }, this.handleRealtimeMessage = (t) => {
      this.handleBadgeRefresh();
    }, this.handleRealtimeSeenBy = (t) => {
      this.handleBadgeRefresh();
    }, mx(this, Hr);
  }
  async willUpdate(t) {
    var e;
    if (super.willUpdate(t), t.has("weavy") && this.weavy) {
      const i = [];
      this.rooms && i.push(ct.ChatRoom), this.private && i.push(ct.PrivateChat), this.agent && i.push(ct.AgentChat), await this.badgeQuery.trackQuery(Vv(this.weavy, i, this.agent), !0), (e = ew(this, Hr)) == null || e.call(this), this.weavy.subscribe(null, "message_created", this.handleRealtimeMessage), this.weavy.subscribe(null, "app_marked", this.handleBadgeRefresh), iw(this, Hr, () => {
        var r, n;
        (r = this.weavy) == null || r.unsubscribe(null, "message_created", this.handleRealtimeMessage), (n = this.weavy) == null || n.unsubscribe(null, "app_marked", this.handleBadgeRefresh), iw(this, Hr, void 0);
      });
    }
  }
  render() {
    const { data: t, isPending: e } = this.badgeQuery.result ?? {}, i = t ? t.count : 0;
    return h`
      ${!e && i > 0 ? h` <span class="wy-badge wy-badge-danger wy-badge-reveal">${i}</span> ` : C}
    `;
  }
  connectedCallback() {
    super.connectedCallback(), this.weavy && this.requestUpdate("weavy");
  }
  disconnectedCallback() {
    var t;
    (t = ew(this, Hr)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(wo, "WyMessengerBadge"), wo);
Hr = /* @__PURE__ */ new WeakMap();
Ss.styles = X;
ml([
  ee({ context: le, subscribe: !0 }),
  H()
], Ss.prototype, "weavy", 2);
ml([
  y({ attribute: !1, type: Boolean })
], Ss.prototype, "private", 2);
ml([
  y({ attribute: !1, type: Boolean })
], Ss.prototype, "rooms", 2);
ml([
  y()
], Ss.prototype, "agent", 2);
Ss = ml([
  q("wy-messenger-badge")
], Ss);
var vx = Object.defineProperty, gx = Object.getOwnPropertyDescriptor, vl = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? gx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && vx(t, e, r), r;
}, "__decorateClass$g");
const _3 = new Map(
  Object.entries({
    [oi.ChatRoom]: ct.ChatRoom,
    [oi.PrivateChat]: ct.PrivateChat,
    [ct.ChatRoom]: oi.ChatRoom,
    [ct.PrivateChat]: oi.PrivateChat
  })
), z3 = new Map(
  Object.entries({
    [oi.AgentChat]: ct.AgentChat,
    [ct.AgentChat]: oi.AgentChat
  })
), bx = "wy-messenger", sw = {
  // All available features as enabled/disabled by default
  [A.Attachments]: !0,
  [A.CloudFiles]: !0,
  [A.ContextData]: !0,
  [A.Embeds]: !0,
  [A.GoogleMeet]: !0,
  [A.Meetings]: !0,
  [A.Mentions]: !0,
  [A.MicrosoftTeams]: !0,
  [A.Polls]: !0,
  [A.Previews]: !0,
  [A.Reactions]: !0,
  [A.Receipts]: !0,
  [A.Typing]: !0,
  [A.ZoomMeetings]: !0
}, xx = {
  // All available features as enabled/disabled by default
  [A.Attachments]: !0,
  [A.ContextData]: !0,
  [A.Embeds]: !0,
  [A.Previews]: !0,
  [A.Reactions]: !1,
  [A.Receipts]: !0,
  [A.Typing]: !0
};
var fo;
let As = (fo = class extends gt {
  constructor() {
    super(...arguments), this.componentFeatures = new Ue(sw), this.theme = new li(this, As.styles), this.appTypes = [ct.ChatRoom, ct.PrivateChat], this.conversationId = null, this.conversationQuery = new Ne(this), this.persistState = new Ec(this), this.conversationNewRef = st(), this.conversationListRef = st(), this.releaseFocusEvent = () => new CustomEvent("release-focus", { bubbles: !0, composed: !0 });
  }
  get agent() {
    return super.agent;
  }
  set agent(t) {
    super.agent = t, this._agentUid ? (this.appTypes = [ct.AgentChat], this.componentFeatures = new Ue(
      xx,
      this.componentFeatures.allowedFeatures()
    )) : (this.appTypes = [ct.ChatRoom, ct.PrivateChat], this.componentFeatures = new Ue(
      sw,
      this.componentFeatures.allowedFeatures()
    )), this.conversationId = null;
  }
  /**
   * Checks if a conversation belongs to Messenger.
   *
   * @deprecated
   * @param conversation {AppRef | AppType | number} - The conversation or id to check if it belongs to Messenger.
   * @returns Promise<Boolean>
   */
  async conversationBelongsToMessenger(t) {
    return console.warn("conversationBelongsToMessenger() is deprecated. Compare app to to .appTypes instead."), this.weavy ? !!await Ng(this.weavy, t, this.appTypes, this.agent) : !1;
  }
  /**
   * Creates a new conversation. 
   * 
   * - When no members are specified, the user selector is shown.
   * - When in agent mode, a conversation is created instantly.
   * 
   * @param members {(number|string)[] | undefined} - Optional array of member id or member uid to bypass user selection dialog.
   */
  async createConversation(t) {
    var e;
    await ((e = this.conversationNewRef.value) == null ? void 0 : e.create(t));
  }
  /**
   * Set the active conversation.
   *
   * @deprecated
   * @param id {number} - The id of the conversation to select.
   */
  selectConversation(t) {
    return console.warn("selectConversation() is deprecated. Set .conversationId instead."), this.conversationId = t, !0;
  }
  /**
   * Deselects any active conversation.
   * @deprecated
   */
  clearConversation() {
    console.warn("clearConversation() is deprecated. Set .conversationId to null instead."), this.conversationId = null;
  }
  async willUpdate(t) {
    var e, i;
    await super.willUpdate(t), (t.has("weavy") || t.has("agent") || t.has("user")) && this.weavy && this.user && this.persistState.observe(
      [{ name: "conversationId", override: !1 }],
      this.agent || "messenger",
      `u${(e = this.user) == null ? void 0 : e.id}`
    ), t.has("link") && ((i = this.link) != null && i.app) && (this.conversationId = this.link.app.id), (t.has("conversationId") || t.has("weavy")) && this.weavy && (this.conversationId ? this.conversationQuery.trackQuery(qg(this.weavy, this.conversationId, this.appTypes)) : this.conversationQuery.untrackQuery());
  }
  render() {
    var r, n, a;
    const { isPending: t } = ((r = this.weavy) == null ? void 0 : r.network) ?? { isPending: !0 }, { data: e } = this.conversationQuery.result ?? {}, i = ((a = (n = this.conversationListRef.value) == null ? void 0 : n.conversationsQuery.result.data) == null ? void 0 : a.pages[0].count) || 0;
    return h`
      <div class="wy-messenger-layout">
        <wy-conversation-list
          ${Q(this.conversationListRef)}
          .conversationTypes=${this.appTypes}
          .agent=${this.agent}
          conversationId=${lt(this.conversationId !== null ? this.conversationId : void 0)}
          @selected=${(c) => this.conversationId = c.detail.id}
        >
          <wy-conversation-new
            slot="actions"
            .agent=${this.agent}
            @selected=${(c) => this.conversationId = c.detail.id}
            ${Q(this.conversationNewRef)}
            >
            <slot name="conversation-new"></slot>
          </wy-conversation-new>
          <slot name="actions" slot="actions"></slot>
        </wy-conversation-list>

        <div
          class="wy-messenger-conversation wy-scroll-y"
          data-conversation-id=${this.conversationId !== null ? this.conversationId : ""}
        >
          <wy-conversation-appbar
            .conversationId=${this.conversationId || void 0}
            .conversation=${e}
            @release-focus=${() => this.dispatchEvent(this.releaseFocusEvent())}
            @selected=${(c) => this.conversationId = c.detail.id}
            ?hidden=${!this.conversationId}
          >
            <span slot="action" class="wy-close-conversation">
              <wy-button kind="icon" @click=${() => this.conversationId = null}>
                <wy-icon name="back"></wy-icon>
              </wy-button>
              <wy-messenger-badge slot="badge" .agent=${this.agent}></wy-messenger-badge>
            </span>
          </wy-conversation-appbar>

          ${this.conversationId ? h`<wy-conversation
                .conversationId=${this.conversationId}
                .conversation=${e}
                .placeholder=${this.placeholder ?? (this.agent ? $("Ask anything...") : void 0)}
                .header=${!this.agent}
              ></wy-conversation>` : i ? h`<wy-empty noNetwork>${$("Select a conversation")}</wy-empty>` : C}
        </div>

        <wy-context-data-progress></wy-context-data-progress>
      </div>
    `;
  }
}, o(fo, "WyMessenger"), fo);
As.styles = [We, X, rx, Ts, Ji];
vl([
  H()
], As.prototype, "appTypes", 2);
vl([
  y({ type: String })
], As.prototype, "agent", 1);
vl([
  y()
], As.prototype, "placeholder", 2);
vl([
  y({ type: Number })
], As.prototype, "conversationId", 2);
As = vl([
  q(bx),
  rt()
], As);
const $x = dt`.wy-meta{color:var(--wy-outline, var(--wy-neutral-variant-50, #72777e));font-size:var(--wy-font-size-sm, calc(.875 * var(--wy-font-size, 1em)))}.wy-meta-sm{font-size:var(--wy-font-size-xs, calc(.75 * var(--wy-font-size, 1em)))}`, Cx = dt`.wy-notification.wy-read{opacity:var(--wy-opacity-muted, 60%);--wy-component-color: var(--wy-outline, var(--wy-neutral-variant-50, #72777e))}`;
var kx = Object.defineProperty, _x = Object.getOwnPropertyDescriptor, gl = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? _x(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && kx(t, e, r), r;
}, "__decorateClass$f"), mo;
let Es = (mo = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.selected = !1, this.standalone = !1;
  }
  dispatchSelect(t) {
    const e = new CustomEvent("select", {
      detail: { notificationId: this.notificationId }
    });
    return this.dispatchEvent(e);
  }
  dispatchMark(t, e) {
    if (t.stopPropagation(), e === !!this.notification.is_unread) {
      const i = new CustomEvent("mark", {
        detail: { notificationId: this.notificationId, markAsRead: e }
      });
      return this.dispatchEvent(i);
    }
    return !0;
  }
  dispatchHide() {
    if (this.standalone) {
      const t = new CustomEvent("hide", {
        bubbles: !0
      });
      return this.dispatchEvent(t);
    }
    return !0;
  }
  dispatchClose() {
    if (this.standalone) {
      const t = new CustomEvent("close", {
        bubbles: !0
      });
      return this.dispatchEvent(t);
    }
    return !0;
  }
  async handleClick(t) {
    this.dispatchSelect(t), this.dispatchMark(t, !0), this.dispatchHide(), await Mf(this, this.weavy, this.notification), this.dispatchClose();
  }
  render() {
    var u, p;
    const t = this.notification.created_at ? new Intl.DateTimeFormat((u = this.weavy) == null ? void 0 : u.locale, { dateStyle: "full", timeStyle: "short" }).format(
      new Date(this.notification.created_at)
    ) : "", e = this.notification.created_at ? wl((p = this.weavy) == null ? void 0 : p.locale, new Date(this.notification.created_at)) : "", i = this.notification.actor, { title: r, titleHtml: n, detail: a } = Sf(this.notification), c = this.standalone ? C : h`
          <div class="wy-item-actions wy-item-right">
            <wy-button
              kind="icon-inline"
              @click=${(w) => this.dispatchMark(w, !!this.notification.is_unread) && this.dispatchClose()}
              title=${this.notification.is_unread ? $("Mark as read") : $("Mark as unread")}
            >
              <wy-icon
                name=${this.notification.is_unread ? "read" : "unread"}
                color=${this.notification.is_unread ? "" : "secondary"}
              ></wy-icon>
            </wy-button>
          </div>
        `, l = this.standalone ? C : h`
          <time class="wy-meta" datetime=${this.notification.created_at.toString()} title=${t}>
            ${e}
          </time>
        `;
    return h`
      <div
        class=${Mt({
      "wy-item wy-list-item-lg wy-item-hover wy-notification": !0,
      "wy-unread": !this.standalone && !!this.notification.is_unread,
      "wy-read": !this.standalone && !this.notification.is_unread,
      "wy-active": !this.standalone && this.selected
    })}
        tabindex="0"
        @click=${(w) => this.handleClick(w)}
        @keydown=${ye}
        @keyup=${Fe}
      >
        <div class="wy-item-inner">
          <wy-avatar
            class="wy-item-top"
            src=${lt(i == null ? void 0 : i.avatar_url)}
            name=${lt(i == null ? void 0 : i.name)}
            description=${lt(i == null ? void 0 : i.comment)}
            presence=${(i == null ? void 0 : i.presence) || "away"}
            ?isAgent=${i == null ? void 0 : i.is_agent}
            id=${lt(i == null ? void 0 : i.id)}
            size=${48}
          ></wy-avatar>

          <div class="wy-item-rows wy-item-rows-compact">
            <div class="wy-item-row">
              <div class="wy-item-title-lg" title=${r + (a ? `: "${a}"` : "")}>
                ${n}${a ? h`: <q class="wy-item-quote">${a}</q> ` : C}
              </div>
            </div>
            <div class="wy-item-row"> ${l} ${c} </div>
          </div>

          ${this.standalone ? h`
                <wy-button
                  kind="icon"
                  @click=${(w) => this.dispatchMark(w, !!this.notification.is_unread) && this.dispatchClose()}
                >
                  <wy-icon name="close"></wy-icon>
                </wy-button>
              ` : C}
        </div>
      </div>
    `;
  }
}, o(mo, "WyNotificationListItem"), mo);
Es.styles = [ne, Xf, $x, Cx];
gl([
  y({ type: Number })
], Es.prototype, "notificationId", 2);
gl([
  y({ type: Boolean, reflect: !0 })
], Es.prototype, "selected", 2);
gl([
  y({ type: Boolean })
], Es.prototype, "standalone", 2);
gl([
  y({ attribute: !1 })
], Es.prototype, "notification", 2);
Es = gl([
  q("wy-notification-list-item"),
  rt()
], Es);
var zx = Object.defineProperty, Mx = Object.getOwnPropertyDescriptor, Mm = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$4"), $p = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Mx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && zx(t, e, r), r;
}, "__decorateClass$e"), Pm = /* @__PURE__ */ o((s, t, e) => t.has(s) || Mm("Cannot " + e), "__accessCheck$4"), rw = /* @__PURE__ */ o((s, t, e) => (Pm(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$4"), Px = /* @__PURE__ */ o((s, t, e) => t.has(s) ? Mm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$4"), nw = /* @__PURE__ */ o((s, t, e, i) => (Pm(s, t, "write to private field"), t.set(s, e), e), "__privateSet$4"), Vr, vo;
let Zo = (vo = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.typeFilter = ue.All, this.notificationsQuery = new Wi(this), this.infiniteScroll = new Qi(this), this.pagerRef = st(), this.handleRefresh = (t) => {
      this.notificationsQuery.result.refetch();
    }, this.handlePresenceChange = (t) => {
      this.weavy && (Array.isArray(t) || (t = [parseInt(t)]), jt(this.weavy.queryClient, ["notifications", "list"], void 0, (e) => {
        const i = e.actor;
        i.presence = t.indexOf(i.id) != -1 ? "active" : "away", e.actor = i;
      }));
    }, Px(this, Vr);
  }
  async markAllAsRead() {
    var i, r, n;
    const t = await this.whenWeavy(), e = (r = n4(t, ue.All, (i = this.app) == null ? void 0 : i.id)) == null ? void 0 : r.id;
    await ((n = this.markNotificationsMutation) == null ? void 0 : n.mutate({ notificationId: e }));
  }
  async handleMark(t, e) {
    var i;
    await ((i = this.markNotificationMutation) == null ? void 0 : i.mutate({ markAsRead: t, notificationId: e }));
  }
  handleSelect(t) {
    this.notificationId = t.id;
  }
  async willUpdate(t) {
    var i, r;
    var e;
    super.willUpdate(t), (t.has("weavy") || t.has("typeFilter") || t.has("app")) && this.weavy && await this.notificationsQuery.trackInfiniteQuery(r4(this.weavy, this.typeFilter, (i = this.app) == null ? void 0 : i.id)), (t.has("weavy") || t.has("app")) && this.weavy && (this.markNotificationsMutation = o4(this.weavy, (r = this.app) == null ? void 0 : r.id)), t.has("weavy") && this.weavy && (this.markNotificationMutation = hm(this.weavy), (e = rw(this, Vr)) == null || e.call(this), this.weavy.subscribe(null, "online", this.handlePresenceChange), this.weavy.subscribe(null, "notification_created", this.handleRefresh), this.weavy.subscribe(null, "notification_updated", this.handleRefresh), this.weavy.subscribe(null, "notifications_marked", this.handleRefresh), nw(this, Vr, () => {
      var n, a, c, l;
      (n = this.weavy) == null || n.unsubscribe(null, "online", this.handlePresenceChange), (a = this.weavy) == null || a.unsubscribe(null, "notification_created", this.handleRefresh), (c = this.weavy) == null || c.unsubscribe(null, "notification_updated", this.handleRefresh), (l = this.weavy) == null || l.unsubscribe(null, "notifications_marked", this.handleRefresh), nw(this, Vr, void 0);
    }));
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.notificationsQuery.result, this.pagerRef.value);
  }
  renderNotifications(t, e) {
    if (e) {
      const i = ts(e);
      return Te(
        i,
        (r) => r == null ? void 0 : r.id,
        (r) => [
          h`<wy-notification-list-item
              notificationId=${r.id}
              .notification=${r}
              .selected=${this.notificationId == r.id}
              @select=${(n) => this.handleSelect(r)}
              @mark=${(n) => this.handleMark(n.detail.markAsRead, n.detail.notificationId)}
            ></wy-notification-list-item>`
        ]
      );
    }
    return C;
  }
  render() {
    var r;
    const { data: t, hasNextPage: e, isPending: i } = this.notificationsQuery.result ?? {};
    return h`
      ${this.user ? h`
            <div class="wy-pane-toolbar">
              <wy-buttons tabs>
                <wy-button
                  ?active=${this.typeFilter === ue.All}
                  @click=${() => this.typeFilter = ue.All}
                  kind="tab"
                  small
                >
                  ${$("All")}
                </wy-button>
                <wy-button
                  ?active=${this.typeFilter === ue.Activity}
                  @click=${() => this.typeFilter = ue.Activity}
                  kind="tab"
                  small
                >
                  ${$("Activities")}
                </wy-button>
                <wy-button
                  ?active=${this.typeFilter === ue.Mention}
                  @click=${() => this.typeFilter = ue.Mention}
                  kind="tab"
                  small
                >
                  ${$("Mentions")}
                </wy-button>
                <wy-button
                  ?active=${this.typeFilter === ue.Reaction}
                  @click=${() => this.typeFilter = ue.Reaction}
                  kind="tab"
                  small
                >
                  ${$("Reactions")}
                </wy-button>
              </wy-buttons>
              <wy-button
                slot="buttons"
                kind="icon"
                @click=${() => this.markAllAsRead()}
                title=${$("Mark all as read")}
              >
                <wy-icon name="check-all"></wy-icon>
              </wy-button>
              <slot name="buttons"></slot>
            </div>

            <div class="wy-notifications">
              ${!i && this.user && t ? (r = t.pages[0]) != null && r.count ? this.renderNotifications(this.user, t) : h`
                      <div class="wy-pane-body">
                        <div class="wy-pane-group">
                          <slot name="empty">
                            <wy-empty>${$("No updates yet.")}</wy-empty>
                          </slot>
                        </div>
                      </div>
                    ` : h`<wy-empty><wy-spinner padded></wy-spinner></wy-empty>`}
              ${e ? h`<div ${Q(this.pagerRef)} part="wy-pager wy-pager-bottom"></div>` : C}
            </div>
          ` : h`<wy-empty class="wy-pane"><wy-spinner overlay></wy-spinner></wy-empty>`}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = rw(this, Vr)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(vo, "WyNotificationList"), vo);
Vr = /* @__PURE__ */ new WeakMap();
Zo.styles = [
  X,
  Ds,
  dt`
      :host {
        position: relative;
      }
    `
];
$p([
  y({ type: Number })
], Zo.prototype, "notificationId", 2);
$p([
  y()
], Zo.prototype, "typeFilter", 2);
Zo = $p([
  q("wy-notification-list"),
  rt()
], Zo);
var Sx = Object.getOwnPropertyDescriptor, Ax = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Sx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = a(r) || r);
  return r;
}, "__decorateClass$d");
const Ex = "wy-notifications";
var go;
let ud = (go = class extends gt {
  constructor() {
    super(...arguments), this.componentType = Je.Unknown, this.theme = new li(this, ud.styles), this.notificationsRef = st();
  }
  /**
   * Mark all events as read.
   */
  async markAllAsRead() {
    var t;
    await ((t = this.notificationsRef.value) == null ? void 0 : t.markAllAsRead());
  }
  render() {
    return h`
      ${this.user ? h` <wy-notification-list ${Q(this.notificationsRef)}></wy-notification-list> ` : h`
            <wy-empty>
              <wy-spinner padded reveal></wy-spinner>
            </wy-empty>
          `}
    `;
  }
}, o(go, "WyNotifications"), go);
ud.styles = [We, X, Ts, Cr, Ji];
ud = Ax([
  q(Ex),
  rt()
], ud);
var Ox = Object.defineProperty, Rx = Object.getOwnPropertyDescriptor, bl = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Rx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Ox(t, e, r), r;
}, "__decorateClass$c"), bo;
let Hc = (bo = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.show = !1, this.viewportRef = st();
  }
  close() {
    var t;
    this.show = !1;
    try {
      (t = this.viewportRef.value) == null || t.hidePopover();
    } catch {
    }
  }
  handleClose(t) {
    (t.type === "toggle" && t.newState === "closed" || t.type === "click") && (this.show = !1, this.dispatchEvent(new CustomEvent("hide")), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 })));
  }
  render() {
    return h`
      <div class="wy-toasts" tabindex="0" ${Q(this.viewportRef)} ?hidden=${!this.show} popover="auto">
        <slot></slot>
      </div>
    `;
  }
  willUpdate(t) {
    var e, i, r;
    if (super.willUpdate(t), t.has("show"))
      try {
        this.show ? (e = this.viewportRef.value) == null || e.showPopover() : (i = this.viewportRef.value) == null || i.hidePopover();
      } catch {
      }
    t.has("show") && this.show && ((r = this.viewportRef.value) == null || r.focus());
  }
  firstUpdated(t) {
    var e, i;
    (e = this.viewportRef.value) == null || e.addEventListener(this.viewportRef.value.popover ? "toggle" : "click", (r) => {
      this.handleClose(r);
    }), this.show && ((i = this.viewportRef.value) == null || i.showPopover());
  }
  disconnectedCallback() {
    super.disconnectedCallback();
  }
}, o(bo, "WyToasts"), bo);
Hc.styles = [
  X,
  yt
];
bl([
  y({ type: Boolean })
], Hc.prototype, "show", 2);
Hc = bl([
  q("wy-toasts")
], Hc);
var xo;
let Yi = (xo = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.toastRef = st(), this.show = !1, this.duration = Yi.defaultDuration;
  }
  hide() {
    this.show = !1;
  }
  async close(t = !1) {
    this.show = !1, await new Promise((e) => requestAnimationFrame(e)), this.toastRef.value && await Bh(this.toastRef.value, !1), this.dispatchEvent(new CustomEvent("closed", { detail: { silent: t } })), this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }));
  }
  willUpdate(t) {
    super.willUpdate(t), t.has("show") && (this.timeout && (window.clearTimeout(this.timeout), this.timeout = void 0), this.show && this.duration > 0 && this.duration < 1 / 0 && (this.timeout = window.setTimeout(() => this.close(!0), this.duration)));
  }
  render() {
    return h`
      <div
        ${Q(this.toastRef)}
        class="wy-toast wy-fade ${this.show ? "wy-show" : ""}"
        @hide=${(t) => {
      t.stopPropagation(), this.hide();
    }}
        @close=${() => this.close()}
        @keyup=${cp}
      >
        <slot></slot>
      </div>
    `;
  }
  firstUpdated() {
    requestAnimationFrame(() => {
      this.show = !0;
    });
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this.timeout && (window.clearTimeout(this.timeout), this.timeout = void 0);
  }
}, o(xo, "WyToast"), xo);
Yi.styles = [
  X,
  yt
];
Yi.defaultDuration = 5e4;
bl([
  H()
], Yi.prototype, "show", 2);
bl([
  y({ type: Number })
], Yi.prototype, "duration", 2);
Yi = bl([
  q("wy-toast")
], Yi);
var Lx = Object.defineProperty, Ix = Object.getOwnPropertyDescriptor, Sm = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$3"), lc = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Ix(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Lx(t, e, r), r;
}, "__decorateClass$b"), Am = /* @__PURE__ */ o((s, t, e) => t.has(s) || Sm("Cannot " + e), "__accessCheck$3"), aw = /* @__PURE__ */ o((s, t, e) => (Am(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$3"), Tx = /* @__PURE__ */ o((s, t, e) => t.has(s) ? Sm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$3"), ow = /* @__PURE__ */ o((s, t, e, i) => (Am(s, t, "write to private field"), t.set(s, e), e), "__privateSet$3"), Br;
const Fx = "wy-notification-toasts";
var $o;
let Xi = ($o = class extends gt {
  constructor() {
    super(...arguments), this.componentType = Je.Unknown, this.theme = new li(this, Xi.styles), this.typeFilter = ue.All, this.appearance = "internal", this.requestUserPermission = !1, this.duration = Yi.defaultDuration, this._notifications = [], this._nativeNotifications = [], this.handleEvent = async (t) => {
      var e;
      if (this.typeFilter === ue.All || this.typeFilter === t.notification.type)
        if (t.action === "notification_deleted")
          this.removeNotification(t.notification.id), this.closeNativeNotification(t.notification.id);
        else {
          const { title: i, detail: r } = Sf(t.notification), n = {
            ...t.notification,
            title: i,
            detail: r,
            lang: (e = this.weavy) == null ? void 0 : e.locale
          };
          n.link.agent = Pf(n);
          const a = new CustomEvent("wy-notification", {
            bubbles: !0,
            composed: !0,
            cancelable: !0,
            detail: n
          });
          (!this.requestUserPermission && this.appearance !== "native" || await this.hasUserPermission() ? this.dispatchEvent(a) : !1) && (t.action === "notification_created" && t.notification.is_unread ? await this.addOrUpdateNotification(t.notification) : await this.updateNotification(t.notification), await this.addOrUpdateNativeNotification(n));
        }
    }, Tx(this, Br);
  }
  async addOrUpdateNotification(t) {
    if (!this.requestUserPermission || await this.hasUserPermission()) {
      const e = [...this._notifications], i = e.findIndex((r) => r.id === t.id);
      i !== -1 ? (e.splice(i, 1, t), this._notifications = e) : (e.push(t), this._notifications = e);
    }
  }
  async updateNotification(t) {
    if (!this.requestUserPermission || await this.hasUserPermission()) {
      const e = [...this._notifications], i = e.findIndex((r) => r.id === t.id);
      i !== -1 && (e.splice(i, 1, t), this._notifications = e);
    }
  }
  removeNotification(t) {
    const e = [...this._notifications], i = e.findIndex((r) => r.id === t);
    i !== -1 && (e.splice(i, 1), this._notifications = e);
  }
  async addOrUpdateNativeNotification(t) {
    if (this.appearance === "native" && await this.hasUserPermission()) {
      const e = this.removeNativeNotification(t.id), i = t.actor, r = new Notification(t.title, {
        tag: `wy-${t.id}`,
        lang: t.lang,
        body: t.detail,
        icon: i.avatar_url,
        // @ts-expect-error Property `renotify` not available in ts types yet
        renotify: e && t.is_unread
      });
      r.onclick = async () => {
        await this.handleMark(!0, t.id), await Mf(this, this.weavy, t);
      }, r.onclose = () => {
        this.removeNativeNotification(t.id);
      }, this._nativeNotifications = [...this._nativeNotifications, r];
    }
  }
  removeNativeNotification(t) {
    const e = [...this._nativeNotifications], i = e.findIndex(
      (r) => r.tag === `wy-${t}`
    );
    return i ? (e.splice(i, 1), this._nativeNotifications = e, !0) : !1;
  }
  closeNativeNotification(t) {
    const e = this._nativeNotifications.findIndex(
      (i) => i.tag === `wy-${t}`
    );
    return e ? (this._nativeNotifications[e].close(), !0) : !1;
  }
  async hasUserPermission() {
    if (!("Notification" in window))
      console.error("This browser does not support desktop notifications");
    else if (!window.isSecureContext)
      console.error(
        `Desktop notifications can only be used in secure contexts. 
        See https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts`
      );
    else {
      if (Notification.permission === "granted")
        return !0;
      if (Notification.permission !== "denied")
        return await Notification.requestPermission() === "granted";
    }
    return !1;
  }
  clearNotifications() {
    this._notifications = [];
  }
  async handleMark(t, e) {
    var i;
    await ((i = this.markNotificationMutation) == null ? void 0 : i.mutate({ markAsRead: t, notificationId: e }));
  }
  async willUpdate(t) {
    var e;
    await super.willUpdate(t), t.has("weavy") && this.weavy && (this.markNotificationMutation = hm(this.weavy), (e = aw(this, Br)) == null || e.call(this), this.weavy.subscribe(null, "notification_created", this.handleEvent), this.weavy.subscribe(null, "notification_updated", this.handleEvent), ow(this, Br, () => {
      var i, r;
      (i = this.weavy) == null || i.unsubscribe(null, "notification_created", this.handleEvent), (r = this.weavy) == null || r.unsubscribe(null, "notification_updated", this.handleEvent), ow(this, Br, void 0);
    })), (t.has("requestUserPermission") && this.requestUserPermission || t.has("appearance") && this.appearance === "native") && this.hasUserPermission();
  }
  render() {
    return h`
      ${this.user && this.appearance === "internal" ? h`
            <wy-toasts ?show=${!!this._notifications.length} @hide=${() => this.clearNotifications()}>
              ${Te(
      this._notifications,
      (t) => t.id,
      (t) => h`
                    <wy-toast
                      duration=${this.duration}
                      @closed=${(e) => {
        e.detail.silent || this.handleMark(!0, t.id), this.removeNotification(t.id);
      }}
                    >
                      <wy-notification-list-item standalone .notification=${t}></wy-notification-list-item>
                    </wy-toast>
                  `
    )}
            </wy-toasts>
          ` : C}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = aw(this, Br)) == null || t.call(this), super.disconnectedCallback();
  }
}, o($o, "WyNotificationToasts"), $o);
Br = /* @__PURE__ */ new WeakMap();
Xi.styles = [We, yt, Ji];
lc([
  y()
], Xi.prototype, "typeFilter", 2);
lc([
  y()
], Xi.prototype, "appearance", 2);
lc([
  y({ type: Boolean })
], Xi.prototype, "requestUserPermission", 2);
lc([
  y({ type: Number })
], Xi.prototype, "duration", 2);
lc([
  H()
], Xi.prototype, "_notifications", 2);
Xi = lc([
  q(Fx),
  rt()
], Xi);
function Dx(s, t) {
  const e = s.queryClient, r = {
    mutationKey: ["posts", t.id],
    mutationFn: /* @__PURE__ */ o(async ({ id: n }) => {
      if (!(await s.fetch("/api/posts/" + n + "/trash", { method: "POST" })).ok)
        throw new Error();
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        n.id,
        (a) => Object.assign(a, { is_trashed: !0 })
      );
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.id,
        (c) => Object.assign(c, n)
      );
    }, "onSuccess")
  };
  return r;
}
o(Dx, "getTrashPostMutationOptions");
function Hx(s, t) {
  return new kt(s.queryClient, Dx(s, t));
}
o(Hx, "getTrashPostMutation");
function Vx(s, t) {
  const e = s.queryClient, r = {
    mutationKey: ["posts", t.id],
    mutationFn: /* @__PURE__ */ o(async ({ id: n }) => {
      const a = await s.fetch("/api/posts/" + n + "/restore", { method: "POST" });
      if (!a.ok) {
        const c = await a.json();
        throw new Error(c.detail || c.title, { cause: c });
      }
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        n.id,
        (a) => Object.assign(a, { is_trashed: !1 })
      );
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: r.mutationKey, exact: !1 },
        a.id,
        (c) => Object.assign(c, { is_trashed: !1 })
      );
    }, "onSuccess")
  };
  return r;
}
o(Vx, "getRestorePostMutationOptions");
function Bx(s, t) {
  return new kt(s.queryClient, Vx(s, t));
}
o(Bx, "getRestorePostMutation");
function Ux(s, t) {
  const e = s.queryClient, i = ["posts", t.id];
  return {
    mutationKey: i,
    mutationFn: /* @__PURE__ */ o(async ({ id: n, subscribe: a }) => {
      const c = await s.fetch(
        `/api/posts/${n}/${a ? "subscribe" : "unsubscribe"}`,
        { method: "POST" }
      );
      if (!c.ok) {
        const l = await c.json();
        throw new Error(l.detail || l.title, { cause: l });
      }
      return await c.json();
    }, "mutationFn"),
    onMutate: /* @__PURE__ */ o((n) => {
      at(
        e,
        { queryKey: i, exact: !1 },
        n.id,
        (a) => Object.assign(a, { is_subscribed: n.subscribe })
      );
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((n, a) => {
      at(
        e,
        { queryKey: i, exact: !1 },
        a.id,
        (c) => Object.assign(c, n)
      );
    }, "onSuccess")
  };
}
o(Ux, "getSubscribePostMutationOptions");
function qx(s, t) {
  return new kt(s.queryClient, Ux(s, t));
}
o(qx, "getSubscribePostMutation");
function Nx(s, t) {
  return {
    initialPageParam: 0,
    queryKey: ["posts", t],
    queryFn: /* @__PURE__ */ o(async (e) => {
      const i = e.pageParam, r = "/api/apps/" + t + "/posts?order_by=id+desc&skip=" + i, a = await (await s.fetch(r)).json();
      return a.data = a.data || [], a;
    }, "queryFn"),
    getNextPageParam: /* @__PURE__ */ o((e) => {
      if (e.end && e.end < e.count)
        return e.end;
    }, "getNextPageParam")
  };
}
o(Nx, "getPostsOptions");
function jx(s, t) {
  return {
    mutationFn: /* @__PURE__ */ o(async (i) => await (await s.fetch("/api/posts/" + i.id, {
      method: "PATCH",
      body: JSON.stringify({
        text: i.text,
        blobs: i.blobs,
        attachments: i.attachments,
        meeting_id: i.meeting_id,
        options: i.poll_options.filter((n) => n.text.trim() !== "").map((n) => ({ id: n.id, text: n.text })),
        embed_id: i.embed_id || null
      })
    })).json(), "mutationFn"),
    mutationKey: t,
    onMutate: /* @__PURE__ */ o((i) => {
      jt(s.queryClient, ["posts", i.app_id], i.id, (r) => {
        r.text = i.text, r.html = i.text;
      });
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((i, r) => {
      r.id && jt(s.queryClient, ["posts", r.app_id], r.id, (n) => {
        n.text = i.text, n.html = i.html, n.attachments = i.attachments, n.embed = i.embed, n.meeting = i.meeting, n.updated_at = i.updated_at, n.updated_by = i.updated_by, n.options = i.options;
      });
    }, "onSuccess")
  };
}
o(jx, "getUpdatePostMutationOptions");
function Wx(s, t) {
  const e = s.queryClient;
  return {
    mutationFn: /* @__PURE__ */ o(async (r) => await (await s.fetch("/api/apps/" + r.app_id + "/posts", {
      method: "POST",
      body: JSON.stringify({
        text: r.text,
        blobs: r.blobs,
        meeting_id: r.meeting_id,
        options: r.poll_options.filter((a) => a.text.trim() !== "").map((a) => ({ text: a.text })),
        embed_id: r.embed_id,
        context: r.context
      })
    })).json(), "mutationFn"),
    mutationKey: t,
    onMutate: /* @__PURE__ */ o(async (r) => {
      const n = ["posts", r.app_id];
      await e.cancelQueries({ queryKey: n });
      const a = lr(s.queryClient, n, !1);
      if (r.user) {
        const c = {
          id: a ? a.id - 1 : -1,
          app: { id: r.app_id },
          is_subscribed: !0,
          is_trashed: !1,
          text: r.text,
          html: r.text,
          plain: r.text,
          created_by: r.user,
          created_at: (/* @__PURE__ */ new Date()).toUTCString(),
          attachments: { count: 0 },
          reactions: { count: 0 },
          is_starred: !1,
          comments: { count: 0 }
        };
        $s(e, ["posts", r.app_id], c, { descending: !0 });
      }
    }, "onMutate"),
    onSuccess: /* @__PURE__ */ o((r) => {
      const n = ["posts", r.app.id];
      if (!$d(s.queryClient, n, r.id)) {
        const c = lr(s.queryClient, n, !0);
        c ? jt(s.queryClient, n, c.id, (l) => {
          l.id = r.id, l.app = r.app, l.text = r.text, l.html = r.html, l.embed = r.embed, l.meeting = r.meeting, l.attachments = r.attachments, l.options = r.options, l.created_at = r.created_at, l.created_by = r.created_by, l.updated_at = r.updated_at, l.updated_by = r.updated_by;
        }) : $s(s.queryClient, n, r);
      }
    }, "onSuccess")
  };
}
o(Wx, "getAddPostMutationOptions");
var Qx = Object.defineProperty, Kx = Object.getOwnPropertyDescriptor, Em = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Kx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Qx(t, e, r), r;
}, "__decorateClass$a"), Co;
let Vc = (Co = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", { detail: {} });
    return this.dispatchEvent(t);
  }
  render() {
    return h`
      <div class="wy-item">
        <div class="wy-item-body">${$("Post was trashed.")}</div>
        <wy-button @click=${() => this.dispatchRestore()} color="variant">${$("Undo")}</wy-button>
      </div>
    `;
  }
}, o(Co, "WyPostTrashed"), Co);
Vc.styles = X;
Em([
  y({ type: Number })
], Vc.prototype, "postId", 2);
Vc = Em([
  q("wy-post-trashed"),
  rt()
], Vc);
var Gx = Object.defineProperty, Zx = Object.getOwnPropertyDescriptor, Gt = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Zx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Gx(t, e, r), r;
}, "__decorateClass$9"), ko;
let Et = (ko = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.createdAt = "", this.modifiedAt = void 0, this.isSubscribed = !1, this.isTrashed = !1, this.html = "", this.text = "", this.annotations = [], this.attachments = [], this.pollOptions = [], this.reactions = [], this.commentCount = 0, this.seenBy = [], this.showComments = !1, this.loadComments = !1, this.highlight = !1, this.isCommentLinked = !1, this.previewAnnotationsRef = st(), this.previewAttachmentsRef = st(), this.highlightRef = st();
  }
  dispatchVote(t) {
    const e = new CustomEvent("vote", { detail: { optionId: t } });
    return this.dispatchEvent(e);
  }
  dispatchSubscribe(t) {
    const e = new CustomEvent("subscribe", {
      detail: { id: this.postId, subscribe: t }
    });
    return this.dispatchEvent(e);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", { detail: { id: this.postId } });
    return this.dispatchEvent(t);
  }
  dispatchEdit(t) {
    const e = new CustomEvent("edit", { detail: { edit: t } });
    return this.dispatchEvent(e);
  }
  handleCommentsClick(t) {
    t.preventDefault(), this.showComments = !this.showComments, this.loadComments = !0;
  }
  willUpdate(t) {
    super.willUpdate(t), t.has("link") && (this.highlight = !!(this.link && kd(this.link, xe.Post, { id: this.postId })), this.isCommentLinked = !!(this.link && zf(this.link, xe.Post, { id: this.postId }, xe.Comment))), t.has("isCommentLinked") && this.isCommentLinked && (this.loadComments = !0, this.showComments = !0);
  }
  render() {
    var a, c, l, u, p, w, b, m, g;
    const t = (a = this.attachments) == null ? void 0 : a.filter((x) => x.kind === "image" && x.thumbnail_url), e = (c = this.attachments) == null ? void 0 : c.filter((x) => x.kind !== "image" || !x.thumbnail_url), i = new Intl.DateTimeFormat((l = this.weavy) == null ? void 0 : l.locale, {
      dateStyle: "full",
      timeStyle: "short"
    }).format(new Date(this.createdAt)), r = wl((u = this.weavy) == null ? void 0 : u.locale, new Date(this.createdAt)), n = this.modifiedAt && this.weavy ? new Intl.DateTimeFormat(this.weavy.locale, { dateStyle: "full", timeStyle: "short" }).format(
      new Date(this.modifiedAt)
    ) : "";
    return this.postId < 0 ? h`<div class="wy-post">
          <div class="wy-item">
            <wy-avatar
              .src="${this.createdBy.avatar_url}"
              .isAgent=${this.createdBy.is_agent}
              .size=${48}
              .name=${this.createdBy.name}
            ></wy-avatar>
            <div class="wy-item-rows">
              <div class="wy-item-row">
                <div class="wy-item-title"><span class="wy-placeholder">${this.createdBy.name}</span></div>
              </div>
              <div class="wy-item-row">
                <div class="wy-item-text">
                  <time class="wy-placeholder">${r}</time>
                </div>
              </div>
            </div>
          </div>
          <div class="wy-post-body">
            <div class="wy-content"><wy-skeleton .text=${this.text}></wy-skeleton></div>
          </div>
        </div>` : h`
          <div class="wy-post" part=${Xt({ "wy-highlight": this.highlight && !this.isCommentLinked })} ${Q(
      this.highlightRef
    )}>
            <div class="wy-item">
              <wy-avatar .src="${this.createdBy.avatar_url}" .isAgent=${this.createdBy.is_agent} .size=${48} .name=${this.createdBy.name}></wy-avatar>
              <div class="wy-item-rows">
                <div class="wy-item-row">
                  <div class="wy-item-title">${this.createdBy.name}</div>
                </div>
                <div class="wy-item-row">
                  <div class="wy-item-text">
                    <time datetime=${this.createdAt} title=${i}>${r}</time>
                    ${this.modifiedAt ? h`<time datetime="${this.modifiedAt}" title=${n}> · ${$("edited")}</time>` : C}
                  </div>
                  </div>
                </div>

                <div class="wy-item-actions wy-item-top">
                  <wy-dropdown>
                    ${this.isSubscribed ? h`<wy-dropdown-item @click=${() => this.dispatchSubscribe(!1)}>
                            <wy-icon name="bell-off"></wy-icon>
                            ${$("Unsubscribe")}
                          </wy-dropdown-item>` : h`<wy-dropdown-item @click=${() => this.dispatchSubscribe(!0)}>
                            <wy-icon name="bell"></wy-icon>
                            ${$("Subscribe")}
                          </wy-dropdown-item>`}
                    ${this.user && this.user.id === this.createdBy.id ? h`<wy-dropdown-item @click=${() => this.dispatchEdit(!0)}>
                            <wy-icon name="pencil"></wy-icon>
                            ${$("Edit")}
                          </wy-dropdown-item>` : C}
                    ${this.user && this.user.id === this.createdBy.id ? h`<wy-dropdown-item @click=${() => this.dispatchTrash()}>
                            <wy-icon name="trashcan"></wy-icon>
                            ${$("Trash")}
                          </wy-dropdown-item>` : C}
                  </wy-dropdown>
                </div>
              </div>
              <!-- image grid -->
              ${t && t.length ? h`<wy-image-grid
                      class="wy-post-area-full-width"
                      .images=${t}
                      @file-open=${(x) => {
      var z;
      (z = this.previewAttachmentsRef.value) == null || z.open(x.detail.fileId);
    }}
                    ></wy-image-grid>` : ""}

              <!-- embeds -->
              ${(p = this.componentFeatures) != null && p.allowsFeature(A.Embeds) && this.embed ? h` <wy-embed class="wy-embed" .embed=${this.embed}></wy-embed> ` : C}

              <div class="wy-post-body">
                ${this.html ? h`<div class="wy-content">${dr(this.html)}</div>` : ""}

                <!-- annotations -->
                  ${this.annotations && this.annotations.length ? h`<wy-annotations-list
                          class="wy-message-area"
                          .files=${this.annotations}
                          @file-open=${(x) => {
      var z;
      (z = this.previewAnnotationsRef.value) == null || z.open(x.detail.fileId);
    }}
                        ></wy-annotations-list>` : ""}

                <!-- poll -->
                ${this.pollOptions && this.pollOptions.length > 0 ? h`
                        <wy-poll
                          .pollOptions=${this.pollOptions}
                          @vote=${(x) => this.dispatchVote(x.detail.optionId)}
                        ></wy-poll>
                      ` : C}

                <!-- files -->
                ${e && e.length ? h`<wy-attachments-list
                        .files=${e ?? []}
                        @file-open=${(x) => {
      var z;
      (z = this.previewAttachmentsRef.value) == null || z.open(x.detail.fileId);
    }}
                      ></wy-attachments-list>` : ""}

                <!-- meeting -->
                ${this.meeting ? h`<wy-meeting-card .meeting=${this.meeting}></wy-meeting-card>` : ""}
              </div>

              <div class="wy-post-footer">
                <div>
                  <!-- comment count -->
                  ${(w = this.componentFeatures) != null && w.allowsFeature(A.Comments) ? h` <wy-button
                          small
                          kind="inline"
                          ?active=${this.showComments}
                          class="wy-meta"
                          color="inherit"
                          @click=${(x) => this.handleCommentsClick(x)}
                        >
                          ${this.commentCount !== 1 ? $(vt`${this.commentCount} comments`) : $("1 comment")}
                        </wy-button>` : C}
                </div>
                ${(b = this.componentFeatures) != null && b.allowsFeature(A.Reactions) && this.app ? h`
                        <wy-reactions
                          line
                          small
                          .reactions=${this.reactions}
                          parentId=${this.app.id}
                          parentType="apps"
                          entityId=${this.postId}
                          entityType="posts"
                        ></wy-reactions>
                      ` : C}
              </div>

              <!-- comments -->
              ${this.loadComments ? h`
                      <div class="wy-post-comments" ?hidden=${!this.showComments}>
                        <wy-comment-list .parentId=${this.postId} .location=${"posts"}></wy-comment-list>
                      </div>
                    ` : C}
            </div>
          
            ${(m = this.annotations) != null && m.length ? h`<wy-preview
                    ${Q(this.previewAnnotationsRef)}
                    .files=${this.annotations}
                    .isAttachment=${!0}
                  ></wy-preview> ` : C}
            ${(g = this.attachments) != null && g.length ? h`<wy-preview
                    ${Q(this.previewAttachmentsRef)}
                    .files=${[...t, ...e]}
                    .isAttachment=${!0}
                  ></wy-preview> ` : C}
           
          </div>
        `;
  }
  updated(t) {
    var e;
    t.has("highlight") && this.highlight && ((e = this.highlightRef.value) == null || e.scrollIntoView({ block: "nearest" }));
  }
}, o(ko, "WyPostView"), ko);
Et.styles = [X, yt];
Gt([
  y({ type: Number })
], Et.prototype, "postId", 2);
Gt([
  y({ attribute: !1 })
], Et.prototype, "createdBy", 2);
Gt([
  y()
], Et.prototype, "createdAt", 2);
Gt([
  y()
], Et.prototype, "modifiedAt", 2);
Gt([
  y({ type: Boolean })
], Et.prototype, "isSubscribed", 2);
Gt([
  y({ type: Boolean })
], Et.prototype, "isTrashed", 2);
Gt([
  y()
], Et.prototype, "html", 2);
Gt([
  y()
], Et.prototype, "text", 2);
Gt([
  y({ type: Array })
], Et.prototype, "annotations", 2);
Gt([
  y({ type: Array })
], Et.prototype, "attachments", 2);
Gt([
  y({ type: Array })
], Et.prototype, "pollOptions", 2);
Gt([
  y({ attribute: !1 })
], Et.prototype, "meeting", 2);
Gt([
  y({ attribute: !1 })
], Et.prototype, "embed", 2);
Gt([
  y({ type: Array })
], Et.prototype, "reactions", 2);
Gt([
  y({ attribute: !1 })
], Et.prototype, "commentCount", 2);
Gt([
  y({ type: Array })
], Et.prototype, "seenBy", 2);
Gt([
  H()
], Et.prototype, "showComments", 2);
Gt([
  H()
], Et.prototype, "loadComments", 2);
Gt([
  y({ type: Boolean })
], Et.prototype, "highlight", 2);
Gt([
  H()
], Et.prototype, "isCommentLinked", 2);
Et = Gt([
  q("wy-post-view"),
  rt()
], Et);
var Yx = Object.defineProperty, Xx = Object.getOwnPropertyDescriptor, Me = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Xx(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Yx(t, e, r), r;
}, "__decorateClass$8"), _o;
let ce = (_o = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.temp = !1, this.createdAt = "", this.modifiedAt = void 0, this.isSubscribed = !1, this.isTrashed = !1, this.text = "", this.attachments = [], this.pollOptions = [], this.reactions = [], this.seenBy = [], this.updatePostMutation = new Le(this);
  }
  dispatchEdit(t) {
    const e = new CustomEvent("edit", { detail: { edit: t } });
    return this.dispatchEvent(e);
  }
  async handleSubmit(t) {
    const e = await this.whenApp();
    this.updatePostMutation.mutate({
      id: this.postId,
      app_id: e.id,
      text: t.detail.text,
      meeting_id: t.detail.meetingId,
      blobs: t.detail.blobs,
      attachments: t.detail.attachments,
      poll_options: t.detail.pollOptions,
      embed_id: t.detail.embedId
    }), this.dispatchEdit(!1);
  }
  async willUpdate(t) {
    super.willUpdate(t), (t.has("weavy") || t.has("app")) && this.weavy && this.app && await this.updatePostMutation.trackMutation(jx(this.weavy, ["posts", this.app.id]));
  }
  render() {
    return h`
      <nav class="wy-item">
        <div class="wy-item-body">
          <div class="wy-item-title">${$("Edit post")}</div>
        </div>

        <wy-button kind="icon" @click=${() => this.dispatchEdit(!1)}>
          <wy-icon name="close"></wy-icon>
        </wy-button>
      </nav>
      <wy-editor
        editorLocation="apps"
        .text=${this.text}
        .embed=${this.embed}
        .options=${this.pollOptions}
        .attachments=${this.attachments ?? []}
        .parentId=${this.postId}
        .typing=${!1}
        .draft=${!1}
        placeholder=${$("Edit post...")}
        buttonText=${$("Update", { desc: "Button action to update" })}
        @submit=${(t) => this.handleSubmit(t)}></wy-editor>
    `;
  }
}, o(_o, "WyPostEdit"), _o);
ce.styles = X;
Me([
  y({ type: Number })
], ce.prototype, "postId", 2);
Me([
  y({ type: Boolean })
], ce.prototype, "temp", 2);
Me([
  y({ attribute: !1 })
], ce.prototype, "createdBy", 2);
Me([
  y()
], ce.prototype, "createdAt", 2);
Me([
  y()
], ce.prototype, "modifiedAt", 2);
Me([
  y({ type: Boolean })
], ce.prototype, "isSubscribed", 2);
Me([
  y({ type: Boolean })
], ce.prototype, "isTrashed", 2);
Me([
  y()
], ce.prototype, "text", 2);
Me([
  y({ type: Array })
], ce.prototype, "attachments", 2);
Me([
  y({ type: Array })
], ce.prototype, "pollOptions", 2);
Me([
  y({ attribute: !1 })
], ce.prototype, "meeting", 2);
Me([
  y({ attribute: !1 })
], ce.prototype, "embed", 2);
Me([
  y({ type: Array })
], ce.prototype, "reactions", 2);
Me([
  y({ type: Array })
], ce.prototype, "seenBy", 2);
ce = Me([
  q("wy-post-edit"),
  rt()
], ce);
var Jx = Object.defineProperty, t3 = Object.getOwnPropertyDescriptor, oe = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? t3(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && Jx(t, e, r), r;
}, "__decorateClass$7"), zo;
let qt = (zo = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.createdAt = "", this.modifiedAt = void 0, this.isSubscribed = !1, this.isTrashed = !1, this.html = "", this.text = "", this.plain = "", this.annotations = [], this.attachments = [], this.pollOptions = [], this.reactions = [], this.commentCount = 0, this.seenBy = [], this.editing = !1;
  }
  dispatchVote(t) {
    const e = new CustomEvent("vote", { detail: { optionId: t, parentId: this.postId, parentType: "posts" } });
    return this.dispatchEvent(e);
  }
  dispatchSubscribe(t) {
    const e = new CustomEvent("subscribe", { detail: { id: this.postId, subscribe: t } });
    return this.dispatchEvent(e);
  }
  dispatchTrash() {
    const t = new CustomEvent("trash", { detail: { id: this.postId } });
    return this.dispatchEvent(t);
  }
  dispatchRestore() {
    const t = new CustomEvent("restore", { detail: { id: this.postId } });
    return this.dispatchEvent(t);
  }
  render() {
    return h`
      ${this.isTrashed ? h`<wy-post-trashed
            class="wy-post"
            postId=${this.postId}
            @restore=${() => {
      this.dispatchRestore();
    }}></wy-post-trashed> ` : C}
      ${!this.isTrashed && this.editing ? h`<wy-post-edit
            class="wy-post"
            .postId=${this.postId}
            .text=${this.text}
            .embed=${this.embed}
            .pollOptions=${this.pollOptions}
            .attachments=${this.attachments}
            @edit=${(t) => {
      this.editing = t.detail.edit;
    }}></wy-post-edit> ` : C}
      ${!this.isTrashed && !this.editing ? h`<wy-post-view
            id="${this.id}"
            .postId=${this.postId}
            .createdBy=${this.createdBy}
            .createdAt=${this.createdAt}
            .modifiedAt=${this.modifiedAt}
            .isSubscribed=${this.isSubscribed}
            .isTrashed=${this.isTrashed}
            .html=${this.html}
            .text=${this.plain}
            .annotations=${this.annotations ?? []}
            .attachments=${this.attachments ?? []}
            .meeting=${this.meeting}
            .pollOptions=${this.pollOptions}
            .embed=${this.embed}
            .reactions=${this.reactions}
            .commentCount=${this.commentCount}
            @edit=${(t) => {
      this.editing = t.detail.edit;
    }}
            @subscribe=${(t) => {
      this.dispatchSubscribe(t.detail.subscribe);
    }}
            @trash=${() => {
      this.dispatchTrash();
    }}
            @vote=${(t) => {
      this.dispatchVote(t.detail.optionId);
    }}></wy-post-view> ` : C}
    `;
  }
}, o(zo, "WyPost"), zo);
qt.styles = X;
oe([
  y({ type: Number })
], qt.prototype, "postId", 2);
oe([
  y({ attribute: !1 })
], qt.prototype, "createdBy", 2);
oe([
  y()
], qt.prototype, "createdAt", 2);
oe([
  y()
], qt.prototype, "modifiedAt", 2);
oe([
  y({ type: Boolean })
], qt.prototype, "isSubscribed", 2);
oe([
  y({ type: Boolean })
], qt.prototype, "isTrashed", 2);
oe([
  y()
], qt.prototype, "html", 2);
oe([
  y()
], qt.prototype, "text", 2);
oe([
  y()
], qt.prototype, "plain", 2);
oe([
  y({ attribute: !1 })
], qt.prototype, "annotations", 2);
oe([
  y({ attribute: !1 })
], qt.prototype, "attachments", 2);
oe([
  y({ type: Array })
], qt.prototype, "pollOptions", 2);
oe([
  y({ attribute: !1 })
], qt.prototype, "meeting", 2);
oe([
  y({ attribute: !1 })
], qt.prototype, "embed", 2);
oe([
  y({ type: Array })
], qt.prototype, "reactions", 2);
oe([
  y({ attribute: !1 })
], qt.prototype, "commentCount", 2);
oe([
  y({ type: Array })
], qt.prototype, "seenBy", 2);
oe([
  H()
], qt.prototype, "editing", 2);
qt = oe([
  q("wy-post")
], qt);
var e3 = Object.defineProperty, i3 = Object.getOwnPropertyDescriptor, Om = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$2"), Rm = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? i3(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && e3(t, e, r), r;
}, "__decorateClass$6"), Lm = /* @__PURE__ */ o((s, t, e) => t.has(s) || Om("Cannot " + e), "__accessCheck$2"), cw = /* @__PURE__ */ o((s, t, e) => (Lm(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$2"), s3 = /* @__PURE__ */ o((s, t, e) => t.has(s) ? Om("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$2"), lw = /* @__PURE__ */ o((s, t, e, i) => (Lm(s, t, "write to private field"), t.set(s, e), e), "__privateSet$2"), Ur, Mo;
let pd = (Mo = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.postsQuery = new Wi(this), this.infiniteScroll = new Qi(this), this.pagerRef = st(), this.addPostMutation = new Le(this), this.handleRealtimePostCreated = async (t) => {
      var n;
      const e = await this.whenWeavy(), i = await this.whenApp(), r = await this.whenUser();
      t.post.app.id !== i.id || ((n = t.post.created_by) == null ? void 0 : n.id) === r.id || (t.post.created_by = t.actor, $s(e.queryClient, ["posts", i.id], t.post, {
        descending: !0
      }));
    }, this.handleRealtimeCommentCreated = async (t) => {
      const e = await this.whenWeavy(), i = await this.whenApp(), r = await this.whenUser();
      t.actor.id === r.id || !t.comment.parent || (jt(e.queryClient, ["posts", i.id], t.comment.parent.id, (n) => {
        n.comments ? n.comments.count += 1 : n.comments = { count: 1 };
      }), await e.queryClient.invalidateQueries({ queryKey: ["posts", t.comment.app.id, "comments"] }));
    }, this.handleRealtimeReactionAdded = async (t) => {
      const e = await this.whenWeavy(), i = await this.whenApp();
      t.entity.type === xe.Post && jt(e.queryClient, ["posts", i.id], t.entity.id, (r) => {
        Mc(r, t.reaction, t.actor);
      });
    }, this.handleRealtimeReactionDeleted = async (t) => {
      const e = await this.whenWeavy(), i = await this.whenApp();
      t.entity.type === xe.Post && jt(e.queryClient, ["posts", i.id], t.entity.id, (r) => {
        Mc(r, void 0, t.actor);
      });
    }, s3(this, Ur);
  }
  async handleSubmit(t) {
    const e = await this.whenApp(), i = await this.whenUser();
    this.addPostMutation.mutate({
      app_id: e.id,
      text: t.detail.text,
      meeting_id: t.detail.meetingId,
      blobs: t.detail.blobs,
      poll_options: t.detail.pollOptions,
      embed_id: t.detail.embedId,
      user: i,
      context: t.detail.contextData
    });
  }
  async willUpdate(t) {
    var i, r, n, a, c;
    var e;
    if (super.willUpdate(t), (t.has("weavy") || t.has("app")) && this.weavy && this.app && ((i = this.app) == null ? void 0 : i.id) !== ((r = t.get("app")) == null ? void 0 : r.id) && await this.postsQuery.trackInfiniteQuery(Nx(this.weavy, this.app.id)), (t.has("weavy") || t.has("app") || t.has("componentFeatures")) && this.weavy && this.app && ((n = this.app) == null ? void 0 : n.id) !== ((a = t.get("app")) == null ? void 0 : a.id)) {
      await this.addPostMutation.trackMutation(Wx(this.weavy, ["posts", this.app.id])), this.subscribePostMutation = qx(this.weavy, this.app), this.removePostMutation = Hx(this.weavy, this.app), this.restorePostMutation = Bx(this.weavy, this.app), this.pollMutation = ip(this.weavy, this.app.id, ["posts", this.app.id]), (e = cw(this, Ur)) == null || e.call(this);
      const l = `a${this.app.id}`;
      this.weavy.subscribe(l, "post_created", this.handleRealtimePostCreated), this.weavy.subscribe(l, "comment_created", this.handleRealtimeCommentCreated), (c = this.componentFeatures) != null && c.allowsFeature(A.Reactions) && (this.weavy.subscribe(l, "reaction_added", this.handleRealtimeReactionAdded), this.weavy.subscribe(l, "reaction_removed", this.handleRealtimeReactionDeleted)), lw(this, Ur, () => {
        var u, p, w, b;
        (u = this.weavy) == null || u.unsubscribe(l, "post_created", this.handleRealtimePostCreated), (p = this.weavy) == null || p.unsubscribe(l, "comment_created", this.handleRealtimeCommentCreated), (w = this.weavy) == null || w.unsubscribe(l, "reaction_added", this.handleRealtimeReactionAdded), (b = this.weavy) == null || b.unsubscribe(l, "reaction_removed", this.handleRealtimeReactionDeleted), lw(this, Ur, void 0);
      });
    }
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.postsQuery.result, this.pagerRef.value);
  }
  render() {
    var n;
    const { data: t, isPending: e, hasNextPage: i } = this.postsQuery.result ?? {}, r = ts(t);
    return h`
      <div class="wy-posts">
        <div class="wy-post">
          <wy-editor
            editorLocation="apps"
            ?disabled=${!Fo(or.Create, (n = this.app) == null ? void 0 : n.permissions)}
            .typing=${!1}
            .draft=${!0}
            placeholder=${this.placeholder ?? $("Create a post...")}
            buttonText=${$("Post")}
            @submit=${(a) => this.handleSubmit(a)}
          ></wy-editor>
        </div>

        <!-- this.user ?? -->
        ${e ? h`<wy-empty><wy-spinner padded reveal></wy-spinner></wy-empty> ` : h`
              ${r ? Te(
      r,
      (a) => a.id,
      (a) => {
        var c, l, u, p, w;
        return h`<wy-post
                        id="post-${a.id}"
                        .postId=${a.id}
                        .createdBy=${a.created_by}
                        .createdAt=${a.created_at}
                        .modifiedAt=${a.updated_at}
                        .isSubscribed=${a.is_subscribed}
                        .isTrashed=${a.is_trashed}
                        .html=${a.html}
                        .text=${a.text}
                        .plain=${a.plain}
                        .annotations=${(c = a.annotations) == null ? void 0 : c.data}
                        .attachments=${(l = a.attachments) == null ? void 0 : l.data}
                        .meeting=${a.meeting}
                        .pollOptions=${(u = a.options) == null ? void 0 : u.data}
                        .embed=${a.embed}
                        .reactions=${(p = a.reactions) == null ? void 0 : p.data}
                        .commentCount=${((w = a.comments) == null ? void 0 : w.count) || 0}
                        @subscribe=${(b) => {
          var m;
          (m = this.subscribePostMutation) == null || m.mutate({
            id: b.detail.id,
            subscribe: b.detail.subscribe
          });
        }}
                        @trash=${(b) => {
          var m;
          (m = this.removePostMutation) == null || m.mutate({ id: b.detail.id });
        }}
                        @restore=${(b) => {
          var m;
          (m = this.restorePostMutation) == null || m.mutate({ id: b.detail.id });
        }}
                        @vote=${(b) => {
          var m;
          b.detail.parentType && b.detail.parentId && ((m = this.pollMutation) == null || m.mutate({
            optionId: b.detail.optionId,
            parentType: b.detail.parentType,
            parentId: b.detail.parentId
          }));
        }}
                      ></wy-post>`;
      }
    ) : h`<wy-empty></wy-empty>`}
              ${i ? h`<div ${Q(this.pagerRef)} part="wy-pager wy-pager-bottom"></div>` : C}
            `}
      </div>
    `;
  }
  disconnectedCallback() {
    var t;
    (t = cw(this, Ur)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(Mo, "WyPostList"), Mo);
Ur = /* @__PURE__ */ new WeakMap();
pd.styles = [X, Ds];
Rm([
  y()
], pd.prototype, "placeholder", 2);
pd = Rm([
  q("wy-post-list"),
  rt()
], pd);
var r3 = Object.defineProperty, n3 = Object.getOwnPropertyDescriptor, Im = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? n3(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && r3(t, e, r), r;
}, "__decorateClass$5");
const a3 = "wy-posts";
var Po;
let Bc = (Po = class extends gt {
  constructor() {
    super(...arguments), this.componentType = ct.Posts, this.componentFeatures = new Ue({
      // All available features as enabled/disabled by default
      [A.Attachments]: !0,
      [A.CloudFiles]: !0,
      [A.Comments]: !0,
      [A.ContextData]: !0,
      [A.Embeds]: !0,
      [A.GoogleMeet]: !1,
      [A.Meetings]: !1,
      [A.Mentions]: !0,
      [A.MicrosoftTeams]: !1,
      [A.Polls]: !0,
      [A.Previews]: !0,
      [A.Reactions]: !0,
      [A.Typing]: !1,
      // Has no effect currently
      [A.ZoomMeetings]: !1
    }), this.theme = new li(this, Bc.styles);
  }
  render() {
    return h`
      <wy-buttons position="floating" reverse>
        <wy-notification-button-list></wy-notification-button-list>
      </wy-buttons>

      <wy-post-list .placeholder=${this.placeholder}></wy-post-list>

      <wy-context-data-progress></wy-context-data-progress>
    `;
  }
}, o(Po, "WyPosts"), Po);
Bc.styles = [
  We,
  X,
  Ts,
  Cr,
  Ji,
  Ds
];
Im([
  y()
], Bc.prototype, "placeholder", 2);
Bc = Im([
  q(a3),
  rt()
], Bc);
var o3 = Object.defineProperty, c3 = Object.getOwnPropertyDescriptor, Hd = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? c3(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && o3(t, e, r), r;
}, "__decorateClass$4"), So;
let Yo = (So = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.typing = new cd(this);
  }
  willUpdate(t) {
    super.willUpdate(t), t.has("appId") && (this.typing.appId = this.appId), t.has("userId") && (this.typing.userId = this.userId);
  }
  render() {
    var r;
    const { names: t, ellipsis: e } = this.typing;
    let i;
    if (t.length === 1) {
      const n = t[0];
      i = $(vt`${n} is typing${e}`, { desc: "A is typing..." });
    } else if (t.length > 1) {
      const n = new Intl.ListFormat((r = this.weavy) == null ? void 0 : r.locale, { style: "long", type: "conjunction" }).format(
        t
      );
      i = $(vt`${n} are typing${e}`, {
        desc: "A, B and C are typing..."
      });
    }
    return i ? h`<span>${i}</span>` : h`<slot></slot>`;
  }
}, o(So, "WyTyping"), So);
Hd([
  ee({ context: le, subscribe: !0 }),
  H()
], Yo.prototype, "weavy", 2);
Hd([
  y({ attribute: !0, type: Number })
], Yo.prototype, "appId", 2);
Hd([
  y({ attribute: !0, type: Number })
], Yo.prototype, "userId", 2);
Yo = Hd([
  q("wy-typing"),
  rt()
], Yo);
const l3 = dt`.wy-conversations{position:relative}.wy-conversation{display:flex;position:relative}.wy-conversation .wy-item-title{font-weight:var(--wy-item-title-font-weight, var(--wy-font-weight, unset));font-size:var(--wy-item-title-font-size, var(--wy-font-size, 1em))}.wy-conversation.wy-unread .wy-item-title{font-weight:var(--wy-font-weight-bold, 600)}.wy-conversation.wy-unread .wy-item-text,.wy-conversation.wy-unread .wy-meta{color:var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));font-weight:var(--wy-font-weight-bold, 600)}.wy-conversation .wy-item-text .wy-typing-show{font-weight:var(--wy-font-weight, unset)}.wy-conversation .wy-item-text .wy-typing-show{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`, d3 = dt`.wy-pane{display:flex;flex-direction:column;position:relative;min-height:0;height:100%;flex:1 1 auto}.wy-pane-body{display:flex;flex-direction:column;flex:1}.wy-pane-group{padding:var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))}.wy-pane-background{--wy-component-background-color: var(--wy-background, var(--wy-neutral-99, #fcfcff));--wy-component-color: var(--wy-on-background, var(--wy-neutral-10, #1a1c1e));background-color:var(--wy-component-background-color);color:var(--wy-component-color)}.wy-pane-toolbar{display:flex;flex:1;justify-content:space-evenly;align-items:center;padding:var(--wy-padding-sm, calc(.5 * var(--wy-padding, calc(.5 * var(--wy-size, 1rem)))))}`;
var h3 = Object.defineProperty, u3 = Object.getOwnPropertyDescriptor, Tm = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError$1"), Ve = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? u3(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && h3(t, e, r), r;
}, "__decorateClass$3"), Fm = /* @__PURE__ */ o((s, t, e) => t.has(s) || Tm("Cannot " + e), "__accessCheck$1"), dw = /* @__PURE__ */ o((s, t, e) => (Fm(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet$1"), p3 = /* @__PURE__ */ o((s, t, e) => t.has(s) ? Tm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd$1"), hw = /* @__PURE__ */ o((s, t, e, i) => (Fm(s, t, "write to private field"), t.set(s, e), e), "__privateSet$1"), qr, Ao;
let we = (Ao = class extends it {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.unread = !1, this.avatarUrl = "", this.hideAvatar = !1, this.name = "", this.type = ct.PrivateChat, this.selected = !1, this.starred = !1, this.pinned = !1, this.handleMessageCreated = (t) => {
      !this.user || !this.weavy || (jt(this.weavy.queryClient, ["apps", t.message.app.id], void 0, (e) => {
        var i;
        e.last_message = t.message, e.is_unread = t.message.created_by.id !== ((i = this.user) == null ? void 0 : i.id);
      }), at(
        this.weavy.queryClient,
        { queryKey: ["apps", "list"], exact: !1 },
        t.message.app.id,
        (e) => {
          var i;
          e.last_message = t.message, e.is_unread = t.message.created_by.id !== ((i = this.user) == null ? void 0 : i.id);
        }
      ));
    }, this.handleConversationUpdated = () => {
      var t;
      (t = this.weavy) == null || t.queryClient.invalidateQueries({ queryKey: ["apps"], exact: !1 });
    }, this.handleConversationMarked = (t) => {
      var e;
      this.user && t.actor.id === this.user.id && ((e = this.weavy) == null || e.queryClient.invalidateQueries({ queryKey: ["apps"], exact: !1 }));
    }, p3(this, qr);
  }
  dispatchSelected(t) {
    if (t.preventDefault(), !this.conversationId)
      return;
    const e = new CustomEvent("selected", { detail: { id: this.conversationId } });
    return this.dispatchEvent(e);
  }
  handleStar(t, e) {
    if (!this.conversationId)
      return;
    const i = new CustomEvent("star", {
      detail: { id: this.conversationId, star: e }
    });
    return this.dispatchEvent(i);
  }
  handlePin(t, e) {
    if (!this.conversationId)
      return;
    const i = new CustomEvent("pin", {
      detail: { id: this.conversationId, pin: e }
    });
    return this.dispatchEvent(i);
  }
  dispatchMarked(t) {
    var i;
    if (!this.conversationId)
      return;
    const e = new CustomEvent("mark", {
      detail: { id: this.conversationId, messageId: t ? (i = this.lastMessage) == null ? void 0 : i.id : null }
    });
    return this.dispatchEvent(e);
  }
  handleLeaveConversation() {
    if (!this.conversationId)
      return;
    const t = new CustomEvent("leave", {
      detail: { id: this.conversationId }
    });
    return this.dispatchEvent(t);
  }
  handleRemoveConversation() {
    if (!this.conversationId)
      return;
    const t = new CustomEvent("remove", {
      detail: { id: this.conversationId }
    });
    return this.dispatchEvent(t);
  }
  handleTrashConversation() {
    if (!this.conversationId)
      return;
    const t = new CustomEvent("trash", {
      detail: { id: this.conversationId }
    });
    return this.dispatchEvent(t);
  }
  willUpdate(t) {
    var e;
    if (super.willUpdate(t), (t.has("weavy") || t.has("conversationId")) && this.weavy && this.conversationId) {
      (e = dw(this, qr)) == null || e.call(this);
      const i = `a${this.conversationId}`;
      this.weavy.subscribe(i, "app_updated", this.handleConversationUpdated), this.weavy.subscribe(i, "member_added", this.handleConversationUpdated), this.weavy.subscribe(i, "message_created", this.handleMessageCreated), this.weavy.subscribe(i, "app_marked", this.handleConversationMarked), hw(this, qr, () => {
        var r, n, a, c;
        (r = this.weavy) == null || r.unsubscribe(i, "app_updated", this.handleConversationUpdated), (n = this.weavy) == null || n.unsubscribe(i, "member_added", this.handleConversationUpdated), (a = this.weavy) == null || a.unsubscribe(i, "message_created", this.handleMessageCreated), (c = this.weavy) == null || c.unsubscribe(i, "app_marked", this.handleConversationMarked), hw(this, qr, void 0);
      });
    }
  }
  render() {
    var r, n, a, c, l, u, p, w, b, m, g, x, z, _, P, E, N;
    const t = (r = this.lastMessage) != null && r.created_at ? new Intl.DateTimeFormat((n = this.weavy) == null ? void 0 : n.locale, { dateStyle: "full", timeStyle: "short" }).format(
      new Date(this.lastMessage.created_at)
    ) : "", e = (a = this.lastMessage) != null && a.created_at ? wl((c = this.weavy) == null ? void 0 : c.locale, new Date(this.lastMessage.created_at)) : "", i = this.type === ct.PrivateChat && this.user ? ((u = (((l = this.members) == null ? void 0 : l.data) || []).filter((O) => {
      var F;
      return O.id !== ((F = this.user) == null ? void 0 : F.id);
    })) == null ? void 0 : u[0]) ?? this.user : null;
    return h`
      <div
        class=${Mt({
      "wy-item wy-list-item-lg wy-item-hover wy-conversation": !0,
      "wy-unread": this.unread,
      "wy-active": this.selected
    })}
        tabindex="0"
        @click=${(O) => this.dispatchSelected(O)}
        @keydown=${ye}
        @keyup=${Fe}
      >
        ${this.type !== ct.AgentChat ? this.avatarUrl ? h`<wy-avatar .size=${48} src=${this.avatarUrl}></wy-avatar>` : this.type == ct.ChatRoom ? h` <wy-avatar-group .members=${(p = this.members) == null ? void 0 : p.data} title=${this.name} .size=${48}></wy-avatar-group>` : h`
                <wy-avatar
                  src=${lt(i == null ? void 0 : i.avatar_url)}
                  name=${lt(i == null ? void 0 : i.name)}
                  description=${lt(i == null ? void 0 : i.comment)}
                  presence=${(i == null ? void 0 : i.presence) || "away"}
                  ?isAgent=${i == null ? void 0 : i.is_agent}
                  id=${lt(i == null ? void 0 : i.id)}
                  size=${48}
                ></wy-avatar>
              ` : C}

        <div class="wy-item-rows">
          <div class="wy-item-row">
            <div class="wy-item-title">${this.name || ((w = this.lastMessage) == null ? void 0 : w.plain) || $("Untitled conversation")}</div>
            ${this.lastMessage ? h`<time class="wy-meta" datetime=${this.lastMessage.created_at.toString()} title=${t}
                  >${e}</time
                >` : C}
          </div>
          <div class="wy-item-row">
            <div class="wy-item-text">
              ${this.user ? h`
                    <wy-typing appId=${this.conversationId} userId=${this.user.id}>
                      ${this.lastMessage ? h`
                            ${this.user.id === this.lastMessage.created_by.id ? h`${$("You")}: ` : C}
                            ${this.members.count > 2 && this.user.id !== ((b = this.lastMessage) == null ? void 0 : b.created_by.id) ? h`${(m = this.lastMessage) == null ? void 0 : m.created_by.name}: ` : C}
                          ` : C}
                      ${(g = this.lastMessage) != null && g.text ? h`<span>${this.lastMessage.plain}</span>` : C}
                      ${!((x = this.lastMessage) != null && x.text) && (((_ = (z = this.lastMessage) == null ? void 0 : z.attachments) == null ? void 0 : _.count) || 0) > 0 ? h`<wy-icon kind="text-icon" name="attachment"></wy-icon>` : C}
                      ${!((P = this.lastMessage) != null && P.text) && ((N = (E = this.lastMessage) == null ? void 0 : E.meeting) != null && N.id) ? h`<wy-icon kind="text-icon" name="video"></wy-icon>` : C}
                      ${this.lastMessage ? C : h`&nbsp;`}
                    </wy-typing>
                  ` : C}
            </div>

            <div class="wy-item-actions wy-item-actions-bottom">
              ${this.starred ? h`<wy-button
                    kind="icon"
                    @click=${(O) => {
      O.stopPropagation(), this.handleStar(O, !1);
    }}
                  >
                    <wy-icon name="star" size=${24} color="yellow"></wy-icon>
                  </wy-button>` : C}
              ${this.pinned ? h`<wy-button
                    kind="icon"
                    @click=${(O) => {
      O.stopPropagation(), this.handlePin(O, !1);
    }}
                  >
                    <wy-icon name="pin" size=${24} color=""></wy-icon>
                  </wy-button>` : C}

              <wy-dropdown directionX="left">
                <wy-dropdown-item @click=${() => this.dispatchMarked(this.unread)}>
                  <wy-icon name=${this.unread ? "read" : "unread"}></wy-icon>
                  ${this.unread ? $("Mark as read") : $("Mark as unread")}
                </wy-dropdown-item>
                <wy-dropdown-item @click=${(O) => this.handlePin(O, !this.pinned)}>
                  <wy-icon name=${this.pinned ? "unpin" : "pin"}></wy-icon>
                  ${this.pinned ? $("Unpin") : $("Pin")}
                </wy-dropdown-item>
                <wy-dropdown-item @click=${(O) => this.handleStar(O, !this.starred)}>
                  <wy-icon name=${this.starred ? "unstar" : "star"}></wy-icon>
                  ${this.starred ? $("Unstar") : $("Star")}
                </wy-dropdown-item>
                ${this.type === ct.PrivateChat ? h`<wy-dropdown-item @click=${() => this.handleRemoveConversation()}>
                      <wy-icon name="trashcan"></wy-icon>
                      ${$("Delete")}
                    </wy-dropdown-item>` : C}
                ${this.type === ct.ChatRoom ? h`<wy-dropdown-item @click=${() => this.handleLeaveConversation()}>
                      <wy-icon name="account-minus"></wy-icon>
                      ${$("Leave")}
                    </wy-dropdown-item>` : C}
                ${this.type === ct.AgentChat ? h`
                      <wy-dropdown-item @click=${() => this.handleTrashConversation()}>
                        <wy-icon name="trashcan"></wy-icon>
                        ${$("Delete")}
                      </wy-dropdown-item>
                    ` : C}
              </wy-dropdown>
            </div>
          </div>
        </div>
      </div>
    `;
  }
  connectedCallback() {
    super.connectedCallback(), this.weavy && this.requestUpdate("weavy");
  }
  disconnectedCallback() {
    var t;
    (t = dw(this, qr)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(Ao, "WyConversationListItem"), Ao);
qr = /* @__PURE__ */ new WeakMap();
we.styles = X;
Ve([
  ee({ context: le, subscribe: !0 }),
  H()
], we.prototype, "weavy", 2);
Ve([
  y({ attribute: !0, type: Number })
], we.prototype, "conversationId", 2);
Ve([
  y({ attribute: !0, type: Boolean })
], we.prototype, "unread", 2);
Ve([
  y({ attribute: !0 })
], we.prototype, "avatarUrl", 2);
Ve([
  y({ attribute: !0, type: Boolean })
], we.prototype, "hideAvatar", 2);
Ve([
  y({ attribute: !0 })
], we.prototype, "name", 2);
Ve([
  y({ attribute: !0, type: String, reflect: !0 })
], we.prototype, "type", 2);
Ve([
  y({ attribute: !0, type: Boolean, reflect: !0 })
], we.prototype, "selected", 2);
Ve([
  y({ attribute: !0, type: Boolean, reflect: !0 })
], we.prototype, "starred", 2);
Ve([
  y({ attribute: !0, type: Boolean, reflect: !0 })
], we.prototype, "pinned", 2);
Ve([
  y({ attribute: !1 })
], we.prototype, "members", 2);
Ve([
  y({ attribute: !1 })
], we.prototype, "lastMessage", 2);
Ve([
  ee({ context: vd, subscribe: !0 }),
  H()
], we.prototype, "user", 2);
we = Ve([
  q("wy-conversation-list-item"),
  rt()
], we);
var y3 = Object.defineProperty, w3 = Object.getOwnPropertyDescriptor, Vd = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? w3(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && y3(t, e, r), r;
}, "__decorateClass$2"), Eo;
let $r = (Eo = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.show = !1;
  }
  async create(t) {
    this.agent && await this.submit(), t ? await this.submit(t) : this.open();
  }
  open() {
    this.show = !0;
  }
  close() {
    this.show = !1;
  }
  async submit(t = []) {
    var n;
    const e = this.agent ? { members: [this.agent], type: oi.AgentChat } : { members: t, type: t.length === 1 ? oi.PrivateChat : oi.ChatRoom };
    this.close();
    const i = await ((n = this.addConversationMutation) == null ? void 0 : n.mutate(e)), r = new CustomEvent("selected", { detail: { id: i == null ? void 0 : i.id } });
    return this.dispatchEvent(r);
  }
  updated(t) {
    t.has("weavy") && this.weavy && (this.addConversationMutation = Tw(this.weavy));
  }
  render() {
    return h`
      ${this.slotElements.length ? C : h`
        <wy-button part="wy-conversation-new-button" kind="icon" @click=${() => this.create()}>
          <wy-icon name="plus"></wy-icon>
        </wy-button>
      `}
      <slot></slot>

      ${!this.agent && this.weavy ? h`<wy-overlay
            .show=${this.show}
            @close=${() => {
      this.show = !1;
    }}
            @release-focus=${() => this.dispatchEvent(new CustomEvent("release-focus", { bubbles: !0, composed: !0 }))}
          >
            <header class="wy-appbars">
              <nav class="wy-appbar">
                <wy-button kind="icon" @click=${() => this.close()}>
                  <wy-icon name="close"></wy-icon>
                </wy-button>
                <div class="wy-appbar-text">${$("New conversation")}</div>
              </nav>
            </header>
            ${this.show ? h` <wy-users-search @submit=${(t) => this.submit(t.detail.members.map((e) => e.id))}></wy-users-search> ` : C}
          </wy-overlay>` : C}
    `;
  }
}, o(Eo, "WyConversationNew"), Eo);
$r.styles = [X, yt];
Vd([
  y()
], $r.prototype, "agent", 2);
Vd([
  H()
], $r.prototype, "show", 2);
Vd([
  Nw({ flatten: !0 })
], $r.prototype, "slotElements", 2);
$r = Vd([
  q("wy-conversation-new"),
  rt()
], $r);
var f3 = Object.defineProperty, m3 = Object.getOwnPropertyDescriptor, Dm = /* @__PURE__ */ o((s) => {
  throw TypeError(s);
}, "__typeError"), xl = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? m3(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = (i ? a(t, e, r) : a(r)) || r);
  return i && r && f3(t, e, r), r;
}, "__decorateClass$1"), Hm = /* @__PURE__ */ o((s, t, e) => t.has(s) || Dm("Cannot " + e), "__accessCheck"), uw = /* @__PURE__ */ o((s, t, e) => (Hm(s, t, "read from private field"), e ? e.call(s) : t.get(s)), "__privateGet"), v3 = /* @__PURE__ */ o((s, t, e) => t.has(s) ? Dm("Cannot add the same private member more than once") : t instanceof WeakSet ? t.add(s) : t.set(s, e), "__privateAdd"), pw = /* @__PURE__ */ o((s, t, e, i) => (Hm(s, t, "write to private field"), t.set(s, e), e), "__privateSet"), Nr, Oo;
let Os = (Oo = class extends pt {
  constructor() {
    super(...arguments), this.exportParts = new W(this), this.conversationTypes = [ct.ChatRoom, ct.PrivateChat], this.searchText = "", this.conversationsQuery = new Wi(this), this.infiniteScroll = new Qi(this), this.pagerRef = st(), this.handleRefresh = () => {
      this.conversationsQuery.result.refetch();
    }, this.handlePresenceChange = (t) => {
      if (!this.weavy)
        return;
      Array.isArray(t) || (t = [parseInt(t)]);
      const e = /* @__PURE__ */ o((i) => {
        const r = i.members.data ?? [];
        r.forEach((n) => {
          n.presence = t.indexOf(n.id) != -1 ? "active" : "away";
        }), i.members.data = r;
      }, "updateMembersInApps");
      at(
        this.weavy.queryClient,
        { queryKey: ["apps", "list"], exact: !1 },
        void 0,
        e
      );
    }, v3(this, Nr);
  }
  dispatchSelected(t) {
    this.conversationId = t;
    const e = new CustomEvent("selected", { detail: { id: t } });
    return this.dispatchEvent(e);
  }
  async handleMark(t, e) {
    var i, r;
    await ((r = this.markConversationMutation) == null ? void 0 : r.mutate({ appId: t, messageId: e, userId: (i = this.user) == null ? void 0 : i.id }));
  }
  async handleStar(t, e) {
    var i;
    await ((i = this.starConversationMutation) == null ? void 0 : i.mutate({ appId: t, star: e }));
  }
  async handlePin(t, e) {
    var i;
    await ((i = this.pinConversationMutation) == null ? void 0 : i.mutate({ appId: t, pin: e }));
  }
  async handleLeaveConversation(t) {
    var i;
    this.conversationId === t && this.dispatchSelected(void 0);
    const e = await this.whenUser();
    await ((i = this.leaveConversationMutation) == null ? void 0 : i.mutate({ appId: t, members: [e.id] })), this.conversationsQuery.result.refetch();
  }
  async handleRemoveConversation(t) {
    var e;
    this.conversationId === t && this.dispatchSelected(void 0), await ((e = this.removeConversationMutation) == null ? void 0 : e.mutate({ appId: t })), this.conversationsQuery.result.refetch();
  }
  async handleTrashConversation(t) {
    var e;
    this.conversationId === t && this.dispatchSelected(void 0), await ((e = this.trashConversationMutation) == null ? void 0 : e.mutate({ appId: t })), this.conversationsQuery.result.refetch();
  }
  async willUpdate(t) {
    var e;
    super.willUpdate(t), (t.has("weavy") || t.has("conversationTypes")) && this.weavy && (await this.conversationsQuery.trackInfiniteQuery(
      Bv(
        this.weavy,
        {},
        this.conversationTypes,
        this.agent,
        () => this.searchText,
        "pinned_at desc,rev desc",
        !1
      )
    ), this.markConversationMutation = df(this.weavy), this.starConversationMutation = Fg(this.weavy), this.pinConversationMutation = Dg(this.weavy), this.leaveConversationMutation = hf(this.weavy), this.removeConversationMutation = Hg(this.weavy), this.trashConversationMutation = Ug(this.weavy), (e = uw(this, Nr)) == null || e.call(this), this.weavy.subscribe(null, "app_created", this.handleRefresh), this.weavy.subscribe(null, "message_created", this.handleRefresh), this.weavy.subscribe(null, "member_added", this.handleRefresh), this.weavy.subscribe(null, "online", this.handlePresenceChange), pw(this, Nr, () => {
      var i, r, n, a;
      (i = this.weavy) == null || i.unsubscribe(null, "app_created", this.handleRefresh), (r = this.weavy) == null || r.unsubscribe(null, "message_created", this.handleRefresh), (n = this.weavy) == null || n.unsubscribe(null, "member_added", this.handleRefresh), (a = this.weavy) == null || a.unsubscribe(null, "online", this.handlePresenceChange), pw(this, Nr, void 0);
    }));
  }
  update(t) {
    super.update(t), this.infiniteScroll.observe(this.conversationsQuery.result, this.pagerRef.value);
  }
  async updated(t) {
    var e, i;
    t.has("searchText") && t.get("searchText") !== void 0 && this.conversationsQuery.result && await ((i = (e = this.conversationsQuery.result).refetch) == null ? void 0 : i.call(e));
  }
  renderConversations(t, e) {
    if (e) {
      const i = ts(e);
      return Te(
        i,
        (r) => r == null ? void 0 : r.id,
        (r) => [
          h`<wy-conversation-list-item
              .conversationId=${r == null ? void 0 : r.id}
              .avatarUrl=${r == null ? void 0 : r.avatar_url}
              .hideAvatar=${!!this.agent}
              .name=${r.name}
              .lastMessage=${r.last_message}
              .members=${r.members}
              .unread=${r.is_unread}
              .starred=${r.is_starred}
              .pinned=${r.is_pinned}
              .type=${r.type}
              .selected=${this.conversationId == r.id}
              @selected=${(n) => this.dispatchSelected(n.detail.id)}
              @mark=${(n) => this.handleMark(n.detail.id, n.detail.messageId)}
              @star=${(n) => this.handleStar(n.detail.id, n.detail.star)}
              @pin=${(n) => this.handlePin(n.detail.id, n.detail.pin)}
              @leave=${(n) => this.handleLeaveConversation(n.detail.id)}
              @remove=${(n) => this.handleRemoveConversation(n.detail.id)}
              @trash=${(n) => this.handleTrashConversation(n.detail.id)}
            ></wy-conversation-list-item>`
        ]
      );
    }
    return C;
  }
  render() {
    var r;
    const { data: t, isPending: e, hasNextPage: i } = this.conversationsQuery.result ?? {};
    return h`
      ${this.user ? h`
            <wy-buttons position=${this.agent ? "floating" : "sticky"} ?reverse=${!!this.agent}>
              ${this.agent ? C : h`
                    <wy-search
                      compact
                      placeholder=${$("Search for conversations...")}
                      @search=${(n) => this.searchText = n.detail.query}
                    ></wy-search>
                  `}
              <slot name="actions"></slot>
            </wy-buttons>

            <div class="wy-conversations">
              ${!e && this.user && t ? (r = t.pages[0]) != null && r.count || this.searchText ? this.renderConversations(this.user, t) : h`
                      <div class="wy-pane-body">
                        <div class="wy-pane-group">
                          <wy-empty noNetwork>${$("Create a conversation to get started.")}</wy-empty>
                        </div>
                      </div>
                    ` : h`<wy-empty><wy-spinner padded></wy-spinner></wy-empty>`}
              ${i ? h`<div ${Q(this.pagerRef)} part="wy-pager wy-pager-bottom"></div>` : C}
            </div>
          ` : h`<wy-empty class="wy-pane"><wy-spinner overlay></wy-spinner></wy-empty>`}
    `;
  }
  disconnectedCallback() {
    var t;
    (t = uw(this, Nr)) == null || t.call(this), super.disconnectedCallback();
  }
}, o(Oo, "WeavyConversationList"), Oo);
Nr = /* @__PURE__ */ new WeakMap();
Os.styles = [
  l3,
  d3,
  Ts,
  Cr,
  Ds
];
xl([
  y({ type: Number })
], Os.prototype, "conversationId", 2);
xl([
  y({ type: Array })
], Os.prototype, "conversationTypes", 2);
xl([
  y()
], Os.prototype, "agent", 2);
xl([
  H()
], Os.prototype, "searchText", 2);
Os = xl([
  q("wy-conversation-list"),
  rt()
], Os);
var g3 = Object.getOwnPropertyDescriptor, b3 = /* @__PURE__ */ o((s, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? g3(t, e) : t, n = s.length - 1, a; n >= 0; n--)
    (a = s[n]) && (r = a(r) || r);
  return r;
}, "__decorateClass"), Ro;
let Du = (Ro = class extends Ct {
  constructor() {
    super(), this.editorType = "messages", this.editorClass = "wy-message-editor";
  }
  renderTopSlot() {
    return [
      this.renderLists()
    ];
  }
  renderMiddleSlot() {
    var t, e, i, r, n, a, c;
    return h` <div class="wy-message-editor-inputs">
      <!-- Add -->
      ${(t = this.componentFeatures) != null && t.allowsAnyFeature(
      A.Attachments,
      A.CloudFiles,
      A.Polls,
      A.Meetings,
      A.ZoomMeetings,
      A.GoogleMeet,
      A.MicrosoftTeams
    ) ? h`<wy-dropdown icon="plus" directionY="up" ?disabled=${this.disabled}>
            ${(e = this.componentFeatures) != null && e.allowsFeature(A.Attachments) ? h`
                  <wy-dropdown-item @click=${this.openFileInput} title=${$("From device")}>
                    <wy-icon name="attachment"></wy-icon>
                    <span>${$("From device")}</span>
                  </wy-dropdown-item>
                  <input
                    type="file"
                    ${Q(this.fileInputRef)}
                    @click=${(l) => l.stopPropagation()}
                    @change=${(l) => this.handleUploadFiles(
      Array.from(l.target.files || []),
      l.target
    )}
                    multiple
                    hidden
                    tabindex="-1"
                  />
                ` : C}
            ${(i = this.componentFeatures) != null && i.allowsFeature(A.CloudFiles) ? h`
                  <wy-dropdown-item @click=${this.openCloudFiles} title=${$("From cloud")}>
                    <wy-icon name="cloud"></wy-icon>
                    <span>${$("From cloud")}</span>
                  </wy-dropdown-item>
                ` : C}
            ${(r = this.componentFeatures) != null && r.allowsFeature(A.Polls) ? h`
                  <wy-dropdown-item @click=${() => this.openPolls()} title=${$("Poll")}>
                    <wy-icon name="poll"></wy-icon>
                    <span>${$("Poll")}</span>
                  </wy-dropdown-item>
                ` : C}
            ${(n = this.componentFeatures) != null && n.allowsAnyFeature(A.Meetings, A.ZoomMeetings) ? h`
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("zoom")} title=${$("Zoom meeting")}>
                    <wy-icon svg="zoom-meetings"></wy-icon>
                    <span>${$("Zoom meeting")}</span>
                  </wy-dropdown-item>
                ` : C}
            ${(a = this.componentFeatures) != null && a.allowsAnyFeature(A.Meetings, A.GoogleMeet) ? h`
                  <wy-dropdown-item @click=${() => this.handleMeetingClick("google")} title=${$("Google Meet")}>
                    <wy-icon svg="google-meet"></wy-icon>
                    <span>${$("Google Meet")}</span>
                  </wy-dropdown-item>
                ` : C}
            ${(c = this.componentFeatures) != null && c.allowsAnyFeature(A.Meetings, A.MicrosoftTeams) ? h`
                  <wy-dropdown-item
                    @click=${() => this.handleMeetingClick("microsoft")}
                    title=${$("Microsoft Teams")}
                  >
                    <wy-icon svg="microsoft-teams"></wy-icon>
                    <span>${$("Microsoft Teams")}</span>
                  </wy-dropdown-item>
                ` : C}
          </wy-dropdown>` : C}

      <!-- Input -->
      <div class="wy-message-editor-text" ${Q(this.editorRef)}> ${this.renderEditorDummy()} </div>

      <!-- Button -->
      <wy-button
        kind="icon"
        color="primary-text"
        title=${$("Send", { desc: "Button action to send" })}
        @click="${() => this.submit()}"
        ?disabled=${this.disabled}
      >
        <wy-icon name="send"></wy-icon>
      </wy-button>
    </div>`;
  }
  renderBottomSlot() {
    return C;
  }
}, o(Ro, "WyMessageEditor"), Ro);
Du = b3([
  q("wy-message-editor"),
  rt()
], Du);
const M3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  get WyAttachment() {
    return Ki;
  },
  get WyAttachmentsList() {
    return _c;
  },
  get WyAvatar() {
    return _i;
  },
  get WyAvatarGroup() {
    return hr;
  },
  get WyBlobUpload() {
    return Go;
  },
  get WyButton() {
    return Mi;
  },
  get WyButtons() {
    return ur;
  },
  get WyCloudFiles() {
    return br;
  },
  get WyComment() {
    return Ut;
  },
  get WyCommentEdit() {
    return ei;
  },
  get WyCommentEditor() {
    return Eu;
  },
  get WyCommentList() {
    return gr;
  },
  get WyCommentTrashed() {
    return Rc;
  },
  get WyCommentView() {
    return Jt;
  },
  get WyConversation() {
    return He;
  },
  get WyConversationAppbar() {
    return Ai;
  },
  get WyConversationList() {
    return Os;
  },
  get WyConversationListItem() {
    return we;
  },
  get WyConversationNew() {
    return $r;
  },
  get WyDropdown() {
    return De;
  },
  get WyDropdownDivider() {
    return nd;
  },
  get WyDropdownItem() {
    return Oc;
  },
  get WyDropdownOption() {
    return No;
  },
  get WyEditor() {
    return Ct;
  },
  get WyEmbed() {
    return Vo;
  },
  get WyEmpty() {
    return Ho;
  },
  get WyFileItem() {
    return Zi;
  },
  get WyFileMenu() {
    return Ms;
  },
  get WyFileVersions() {
    return Wo;
  },
  get WyFilesAppbar() {
    return Ps;
  },
  get WyFilesList() {
    return ui;
  },
  get WyIcon() {
    return Lt;
  },
  get WyImageGrid() {
    return Bo;
  },
  get WyMeetingCard() {
    return Sc;
  },
  get WyMessage() {
    return It;
  },
  get WyMessageEditor() {
    return Du;
  },
  get WyMessageTyping() {
    return je;
  },
  get WyMessages() {
    return ii;
  },
  get WyMessengerBadge() {
    return Ss;
  },
  get WyNotificationBadge() {
    return Tc;
  },
  get WyNotificationButtonList() {
    return ld;
  },
  get WyNotificationList() {
    return Zo;
  },
  get WyNotificationListItem() {
    return Es;
  },
  get WyOverlay() {
    return _s;
  },
  get WyPdfViewer() {
    return mr;
  },
  get WyPoll() {
    return Lc;
  },
  get WyPollOption() {
    return vr;
  },
  get WyPost() {
    return qt;
  },
  get WyPostEdit() {
    return ce;
  },
  get WyPostTrashed() {
    return Vc;
  },
  get WyPostView() {
    return Et;
  },
  get WyPresence() {
    return Do;
  },
  get WyPreview() {
    return te;
  },
  get WyPreviewEmbed() {
    return zs;
  },
  get WyPreviewIcon() {
    return wr;
  },
  get WyPreviewImage() {
    return fr;
  },
  get WyPreviewItem() {
    return jo;
  },
  get WyPreviewMedia() {
    return Gi;
  },
  get WyPreviewText() {
    return Si;
  },
  get WyProgressLinear() {
    return ti;
  },
  get WyReactionItem() {
    return Pc;
  },
  get WyReactions() {
    return Wt;
  },
  get WySheet() {
    return qo;
  },
  get WySkeleton() {
    return Ac;
  },
  get WySpinner() {
    return zi;
  },
  get WyToast() {
    return Yi;
  },
  get WyToasts() {
    return Hc;
  },
  get WyTyping() {
    return Yo;
  },
  get WyUsersSearch() {
    return pi;
  }
}, Symbol.toStringTag, { value: "Module" }));
export {
  Wl as AgentAppTypeGuids,
  k3 as AgentAppTypeStrings,
  nf as AppTypeGuids,
  J1 as AppTypeStrings,
  wy as ContextController,
  z3 as MessengerAgentTypes,
  _3 as MessengerTypes,
  b4 as WY_CHAT_TAGNAME,
  C4 as WY_COMMENTS_TAGNAME,
  og as WY_COMPONENT_TAGNAME,
  rg as WY_CONTEXT_TAGNAME,
  P4 as WY_COPILOT_TAGNAME,
  sx as WY_FILES_TAGNAME,
  bx as WY_MESSENGER_TAGNAME,
  Ex as WY_NOTIFICATIONS_TAGNAME,
  Fx as WY_NOTIFICATION_TOASTS_TAGNAME,
  a3 as WY_POSTS_TAGNAME,
  Ft as Weavy,
  Rt as WeavyClient,
  gt as WeavyComponent,
  M3 as WeavyComponents,
  le as WeavyContext,
  pt as WeavySubComponent,
  Fc as WyChat,
  Dc as WyComments,
  To as WyComponent,
  Bt as WyContext,
  Qo as WyCopilot,
  xr as WyFiles,
  As as WyMessenger,
  Xi as WyNotificationToasts,
  ud as WyNotifications,
  Bc as WyPosts,
  A1 as createWeavyContextProvider,
  Ce as globalContextProvider
};
